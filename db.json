{"meta":{"version":1,"warehouse":"1.0.2"},"models":{"Asset":[{"_id":"themes/next/source/vendors/velocity/velocity.ui.min.js","path":"vendors/velocity/velocity.ui.min.js","modified":0},{"_id":"themes/next/source/vendors/velocity/velocity.ui.js","path":"vendors/velocity/velocity.ui.js","modified":0},{"_id":"themes/next/source/vendors/velocity/velocity.min.js","path":"vendors/velocity/velocity.min.js","modified":0},{"_id":"themes/next/source/vendors/velocity/velocity.js","path":"vendors/velocity/velocity.js","modified":0},{"_id":"themes/next/source/vendors/velocity/bower.json","path":"vendors/velocity/bower.json","modified":0},{"_id":"themes/next/source/vendors/jquery/index.js","path":"vendors/jquery/index.js","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.pack.js","path":"vendors/fancybox/source/jquery.fancybox.pack.js","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.js","path":"vendors/fancybox/source/jquery.fancybox.js","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.css","path":"vendors/fancybox/source/jquery.fancybox.css","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-media.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-media.js","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/helpers/fancybox_buttons.png","path":"vendors/fancybox/source/helpers/fancybox_buttons.png","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite@2x.png","path":"vendors/fancybox/source/fancybox_sprite@2x.png","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite.png","path":"vendors/fancybox/source/fancybox_sprite.png","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_overlay.png","path":"vendors/fancybox/source/fancybox_overlay.png","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading@2x.gif","path":"vendors/fancybox/source/fancybox_loading@2x.gif","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading.gif","path":"vendors/fancybox/source/fancybox_loading.gif","modified":0},{"_id":"themes/next/source/vendors/fancybox/source/blank.gif","path":"vendors/fancybox/source/blank.gif","modified":0},{"_id":"themes/next/source/js/ua-parser.min.js","path":"js/ua-parser.min.js","modified":0},{"_id":"themes/next/source/js/search-toggle.js","path":"js/search-toggle.js","modified":0},{"_id":"themes/next/source/js/motion_global.js","path":"js/motion_global.js","modified":0},{"_id":"themes/next/source/js/motion_fallback.js","path":"js/motion_fallback.js","modified":0},{"_id":"themes/next/source/js/lazyload.js","path":"js/lazyload.js","modified":0},{"_id":"themes/next/source/js/hook-duoshuo.js","path":"js/hook-duoshuo.js","modified":0},{"_id":"themes/next/source/js/helpers.js","path":"js/helpers.js","modified":0},{"_id":"themes/next/source/js/fancy-box.js","path":"js/fancy-box.js","modified":0},{"_id":"themes/next/source/js/bootstrap.scrollspy.js","path":"js/bootstrap.scrollspy.js","modified":0},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0},{"_id":"themes/next/source/images/bkdefault_avatar.jpg","path":"images/bkdefault_avatar.jpg","modified":0},{"_id":"themes/next/source/images/avatar.jpg","path":"images/avatar.jpg","modified":0},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.woff","path":"fonts/icon-linecons/icomoon.woff","modified":0},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.ttf","path":"fonts/icon-linecons/icomoon.ttf","modified":0},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.svg","path":"fonts/icon-linecons/icomoon.svg","modified":0},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.eot","path":"fonts/icon-linecons/icomoon.eot","modified":0},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.woff","path":"fonts/icon-icomoon/icomoon.woff","modified":0},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.ttf","path":"fonts/icon-icomoon/icomoon.ttf","modified":0},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.svg","path":"fonts/icon-icomoon/icomoon.svg","modified":0},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.eot","path":"fonts/icon-icomoon/icomoon.eot","modified":0},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.woff","path":"fonts/icon-fifty-shades/icomoon.woff","modified":0},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.ttf","path":"fonts/icon-fifty-shades/icomoon.ttf","modified":0},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.svg","path":"fonts/icon-fifty-shades/icomoon.svg","modified":0},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.eot","path":"fonts/icon-fifty-shades/icomoon.eot","modified":0},{"_id":"themes/next/source/fonts/icon-feather/icomoon.woff","path":"fonts/icon-feather/icomoon.woff","modified":0},{"_id":"themes/next/source/fonts/icon-feather/icomoon.ttf","path":"fonts/icon-feather/icomoon.ttf","modified":0},{"_id":"themes/next/source/fonts/icon-feather/icomoon.svg","path":"fonts/icon-feather/icomoon.svg","modified":0},{"_id":"themes/next/source/fonts/icon-feather/icomoon.eot","path":"fonts/icon-feather/icomoon.eot","modified":0},{"_id":"themes/next/source/fonts/icon-default/icomoon.woff","path":"fonts/icon-default/icomoon.woff","modified":0},{"_id":"themes/next/source/fonts/icon-default/icomoon.ttf","path":"fonts/icon-default/icomoon.ttf","modified":0},{"_id":"themes/next/source/fonts/icon-default/icomoon.svg","path":"fonts/icon-default/icomoon.svg","modified":0},{"_id":"themes/next/source/fonts/icon-default/icomoon.eot","path":"fonts/icon-default/icomoon.eot","modified":0},{"_id":"themes/next/source/favicon.ico","path":"favicon.ico","modified":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0},{"_id":"themes/next/source/404.html","path":"404.html","modified":0},{"_id":"source/favicon.ico","path":"favicon.ico","modified":0},{"_id":"source/CNAME","path":"CNAME","modified":0}],"Cache":[{"_id":"source/AndroidProgrammer/index.md","shasum":"dac2e5cf08d6dc35f0b7e79bd217bf73df0abc9a","modified":1466669921461},{"_id":"source/CNAME","shasum":"60eae165881188b967de288d8d98b05420883e49","modified":1458175446333},{"_id":"source/_drafts/finalApk.md","shasum":"6fc53258c4b4a0077f6f87d62c0db6eea4433fb0","modified":1463967345730},{"_id":"source/_drafts/android-studio-hx.md","shasum":"40762d2776e49bfa7275965a225b4b2ed91d9439","modified":1458175446334},{"_id":"source/_posts/2015key.md","shasum":"c18c02ff2dd1df9f8ddfa34f2946178032497861","modified":1458175446334},{"_id":"source/_posts/2016key.md","shasum":"32127093fecec981554a104b21f3559dc9e9dc37","modified":1458175446334},{"_id":"source/_posts/AdFund.md","shasum":"58d9b4e5dcd3482a0bbb98e081408101627ca368","modified":1458175446335},{"_id":"source/_posts/Activity.md","shasum":"ff4a42d212ce997958993c4063da0c56470467b8","modified":1458175446335},{"_id":"source/_posts/Android-Iconics.md","shasum":"374bb15c69d992dee9cb5c8c345503619b0dba84","modified":1458175446335},{"_id":"source/_posts/Android-Studio-Genymotion.md","shasum":"a284a461874c7dfe9ef4caf82f38aabf9cb032ea","modified":1458175446336},{"_id":"source/_posts/Android-Photograph-Album2.md","shasum":"ad2d327aa4698487fa87bebf041e0a515c0037cc","modified":1464944532660},{"_id":"source/_posts/Android-Photograph_Album.md","shasum":"13b4c591b9340c7459d93b7e00a5fd03330d8070","modified":1464944532660},{"_id":"source/_drafts/toast.md","shasum":"1756fe1abe0a984d8e5fd26aa7f8df3dff74a18d","modified":1463733409334},{"_id":"source/_posts/AndroidDeveloperSurvey.md","shasum":"86fa20c3456d760c44d8a77b4690e40944bc510b","modified":1458175446336},{"_id":"source/_posts/Android-Studio-shortcut-keys-arranged-like-Eclipse.md","shasum":"bf5eb2f38d406acf8ed14cdf1d848960462243b1","modified":1458175446336},{"_id":"source/_posts/AndroidSamples.md","shasum":"f4af1cabce94938f179fc4051294132f97a395f8","modified":1458175446337},{"_id":"source/_posts/AndroidStudioError.md","shasum":"2f94622567e40e39a945a29de9c5b237411ad03b","modified":1458175446337},{"_id":"source/_posts/CanvasToPhoto.md","shasum":"e8cbe84d000a7577d205ad38b3586a9a30187b6b","modified":1458175446338},{"_id":"source/_posts/AppInfo.md","shasum":"2deaeef50a08debcd4a6244e68cc71dd33f16341","modified":1458175446338},{"_id":"source/_posts/BroadcastReceiver.md","shasum":"7a71ab209dadbd1d863d3417c0a2938515d6a27a","modified":1458175446338},{"_id":"source/_posts/CollapsingToolbarLayout.md","shasum":"c90fbc77a78911b08a3951ef8ff8cd41abdb5619","modified":1458625411753},{"_id":"source/_posts/ChangeTheme.md","shasum":"940bf51e700c5f7fee282e9ce396b13ae68c8b5e","modified":1458175446338},{"_id":"source/_posts/CoordinatorLayout.md","shasum":"3d9c9895f51aefc8dfe2673f8b0e2ea03204be7c","modified":1458627808080},{"_id":"source/_posts/Context-Activity.md","shasum":"28fcd1836c13275d1a619f18acbb4e3a7623831d","modified":1458175446339},{"_id":"source/_posts/Animator.md","shasum":"b4fef3902c3b0cf100c36325f2d1d9cbc884b69c","modified":1458624830677},{"_id":"source/_posts/CreatingCustomViews.md","shasum":"e18e077adac3bbab20cddc9afb1c8e3d037caf6e","modified":1458175446339},{"_id":"source/_posts/CustomToast.md","shasum":"bc8b087e900918c17d07b7f61fd596d7df8beb61","modified":1458175446340},{"_id":"source/_posts/Defining_Custom_Animations.md","shasum":"f4586a9ca7e3e38cd2436297fe46a4ba40d7bbd9","modified":1458175446340},{"_id":"source/_posts/DragView.md","shasum":"20219be0c7c5156aef582434691366219051e2a7","modified":1458175446341},{"_id":"source/_posts/AndroidMVPSample.md","shasum":"d9a0c7b3b07730dbb16493695630227531f92a02","modified":1458624771948},{"_id":"source/_posts/Drawable-to-Bitmap.md","shasum":"f9a786f0a3a9a3fccc8bd8b177197b82189a6040","modified":1458175446341},{"_id":"source/_posts/Export-aborted-because-fatal-lint-errors-were-found.md","shasum":"9c1abc006b7135fa3abff7039de6934b55c50c09","modified":1458175446341},{"_id":"source/_posts/DesignSupportLibrary.md","shasum":"e1cac5bc43a207b4e0e99be214b55ff93298b3cb","modified":1458625455303},{"_id":"source/_posts/CustomView.md","shasum":"f2f8db5461a156a16f5fc0430ec3cc65df40fc59","modified":1458891223889},{"_id":"source/_posts/Font-Awesome.md","shasum":"90c6ebb6ad5be92731d3ad719398e5ee7404dd83","modified":1458175446341},{"_id":"source/_posts/Intent.md","shasum":"8dfcc509bf178ce5f6f1d12ea02b7e435e3d2437","modified":1458175446342},{"_id":"source/_posts/LayoutInflater.md","shasum":"f1ed8bb6e700d43ebcc78405356df7e5eb9d6c91","modified":1458175446342},{"_id":"source/_posts/LoadMoreListView.md","shasum":"518fe93e12fb6a54097b9a4e300b749e1aa9c4b3","modified":1458175446343},{"_id":"source/_posts/LayoutParams.md","shasum":"c7773bc605912b587541644f1bfc9902a9ba0e1a","modified":1458175446342},{"_id":"source/_posts/LinearGradientTextView.md","shasum":"f825f08c1e39e1c1d4dc8e9050e9ee5608ad3deb","modified":1458175446343},{"_id":"source/_posts/GenymotionErrors.md","shasum":"5a484c47d657835790ef782fa86de49c4d710c74","modified":1458808330945},{"_id":"source/_posts/Palette.md","shasum":"1b7d5134b5b66e9661a44960accf07c5841e7349","modified":1458175446345},{"_id":"source/_posts/PhotoView.md","shasum":"2782853c1b64c2db3f6a9f3e396bc543caaed282","modified":1458175446345},{"_id":"source/_posts/PaintCanvas.md","shasum":"9f7bb90d677caee4764cee3d69ac2da5cb0bebd2","modified":1458175446344},{"_id":"source/_posts/NavigationView.md","shasum":"91d5ff9c8c306ea5a905d884b2cf0cff32acccca","modified":1458625429626},{"_id":"source/_posts/PioneeringRoad.md","shasum":"65ebc5242f8ad63e73ba413c2e70c75d7cab10d4","modified":1458175446345},{"_id":"source/_posts/Picasso.md","shasum":"5e98b080597f3bfe6dc9d4869b0afde21cf0bf64","modified":1458175446345},{"_id":"source/_posts/PreferenceUtils.md","shasum":"4317cdfdcfafc87dfa67d84bd0d5f14480b5ea0a","modified":1458175446346},{"_id":"source/_posts/RecyclerViewCardView.md","shasum":"2933c6affc914011a8d77262b10dc17472d4d3e7","modified":1458175446346},{"_id":"source/_posts/MyCodeHobby.md","shasum":"724de4ac860aae0bc2b13a9f84e2d5e8bb47c160","modified":1460686969624},{"_id":"source/_posts/PullLoadMoreRecyclerView.md","shasum":"3faad0fc74fecae228740e657acedc45307ecfbf","modified":1458175446346},{"_id":"source/_posts/ResResources.md","shasum":"ab093861ceed4c0c2899074defa3b934f05bbd76","modified":1458175446346},{"_id":"source/_posts/RuntimePermission.md","shasum":"f2f2e6ea6f79bbcfa606b6fe8ea4b556c42e22d2","modified":1458175446347},{"_id":"source/_posts/SaveImageToGallery.md","shasum":"73eaf18b317c24017da478e3ae459e0991eb9a2c","modified":1458175446347},{"_id":"source/_posts/SearchView.md","shasum":"3e54ebc3b3bbdc6015969afa9d3f20cd341d7c2d","modified":1458175446348},{"_id":"source/_posts/SavingFiles.md","shasum":"87e80088d3c847eaadf4142d2a5d42da2fce4a7a","modified":1458175446347},{"_id":"source/_posts/Split.md","shasum":"ca6f6a53569f59502292593bdbddcddec747ffb0","modified":1458175446348},{"_id":"source/_posts/MotionEvent.md","shasum":"a5bc602e495027bccead06878b7157fccc7a5aad","modified":1458891412921},{"_id":"source/_posts/SqliteSample.md","shasum":"3846ad7e129ab15d9be69796e55ed6514c1b6b21","modified":1458175446349},{"_id":"source/_posts/TabLayout.md","shasum":"8569981b54126755e89eab73101c89f432deee2e","modified":1458625475985},{"_id":"source/_posts/SharePopupWindow.md","shasum":"103b590db9a43fb056cc4e42523dccfdb79b2bd0","modified":1458175446348},{"_id":"source/_posts/TheSecondResignation.md","shasum":"295dbe10eff10ba6f78fc4135ab7eb0dd6986896","modified":1458175446349},{"_id":"source/_posts/TodayEmotion.md","shasum":"4429f748a449a0e86f93114aed38ea0bd6383c33","modified":1458175446350},{"_id":"source/_posts/TimeUtil.md","shasum":"464f9d6747969ce6e2d8e0fd9ad68fcfc406865f","modified":1458175446349},{"_id":"source/_posts/ViewDragHelper.md","shasum":"ccfa27a44cba78f1208730055e55bcdb61fed3aa","modified":1458175446350},{"_id":"source/_posts/WeWin.md","shasum":"5977454fff740962732dff3d9514d0067532d920","modified":1458175446351},{"_id":"source/_posts/Volley.md","shasum":"140f340e3ee5813e570ffac335aa1ca959f79b8e","modified":1458175446351},{"_id":"source/_posts/ViewAnimation.md","shasum":"44b2813451e858707cf6bfa93b979d6871d48e5c","modified":1458175446350},{"_id":"source/_posts/android-async-http.md","shasum":"a67d01d92128bd16577fc6b64e0352ae4a9e1502","modified":1458175446351},{"_id":"source/_posts/android-developers-should-keep-the-following-characteristics.md","shasum":"eb3d9a88e0994ee4aab729e2b237459094a98140","modified":1458175446352},{"_id":"source/_posts/android-samples-download.md","shasum":"2438d94b88a81cf90f70a45907ab1da183d37ee0","modified":1458175446352},{"_id":"source/_posts/android-studio-share-to-svn.md","shasum":"de515ba7b37c96b5099f025d8f011f451ce0f58a","modified":1458175446353},{"_id":"source/_posts/androidwords.md","shasum":"1d62ee878653f7e76a7afcf0baa869b3ad7302b7","modified":1458175446353},{"_id":"source/_posts/addHeaderView.md","shasum":"fc708af465b008764237f9cb3a07ae27be61dc0b","modified":1458175446351},{"_id":"source/_posts/build-blog.md","shasum":"4f9f475d03098c19deb48b2197bb6d17ec6ff8f4","modified":1458175446354},{"_id":"source/_posts/change-sdk-path.md","shasum":"726fade2b533a9e9e060cc004bdadaa21c974598","modified":1458175446354},{"_id":"source/_posts/android-small-knowledge-base.md","shasum":"5e05673805bd2aba6e16f42e461fe7315bcf2732","modified":1464944786309},{"_id":"source/_posts/boentang.md","shasum":"c881a95475099a08e89a567214515d235421a196","modified":1458175446353},{"_id":"source/_posts/checkPermission.md","shasum":"c03e5b71d27c5fafcf145f999366bc3428649711","modified":1458175446354},{"_id":"source/_posts/contactIndex.md","shasum":"10c46816826854a5061eb36b1233b7c97eea3356","modified":1458175446355},{"_id":"source/_posts/company.md","shasum":"1d7ad767be776cd7cb61910dca617aaa3929433f","modified":1458175446355},{"_id":"source/_posts/custom-debug-keystore.md","shasum":"7e0914c2eda8d4768eea230de86812ae17df4efa","modified":1458175446355},{"_id":"source/_posts/build-blog-by-hexo.md","shasum":"b552106ed3f1fab36d3e56939bf5f525db9544e2","modified":1459319484516},{"_id":"source/_posts/eclipse-git.md","shasum":"2ea6b96dcfb2e1044f2b48cdac90d6542077a376","modified":1458175446356},{"_id":"source/_posts/fragmentMenu.md","shasum":"bbb5c39a18affec5d80bc5013ff4cbb72161fb81","modified":1458175446356},{"_id":"source/_posts/dashishuo.md","shasum":"d355166f1b343abc473cec7bca1e3d4d7e637c6a","modified":1458175446355},{"_id":"source/_posts/emulatorError.md","shasum":"1da2aa8f809ec474c8f47a54263adf257f1b28e3","modified":1458175446356},{"_id":"source/_posts/google.md","shasum":"f2b7e7a0d936dbcbf8b0c8beaccc73085b5d16c6","modified":1458175446357},{"_id":"source/_posts/goufangche.md","shasum":"3992c0727780148330a835ee60d9772ff16402f0","modified":1458175446357},{"_id":"source/_posts/gradle.md","shasum":"ba7c7ebdc66d4c93c24c58667d9a83257dea3b81","modified":1458175446357},{"_id":"source/_posts/fragmentToolbar.md","shasum":"57dab320af832b66f80edeba68878f40fc196dae","modified":1458891242470},{"_id":"source/_posts/androidSdkStudioUpdate.md","shasum":"862d4bec5439eb7134d0951522e50604cc68181c","modified":1460431392339},{"_id":"source/_posts/hello-hexo.md","shasum":"86dd46bc17f4c9f0b7be3dc9447139b29b861dc9","modified":1458175446357},{"_id":"source/_posts/how-to-prevent-the-APK-program-by-decompile.md","shasum":"bbc6b82859ffffd74f5b75cdc6f0b7fc1c7d6cf8","modified":1458175446358},{"_id":"source/_posts/gradle4android1.md","shasum":"500a27eedd162f762271ced173a88739fdf84574","modified":1461291579994},{"_id":"source/_posts/jarsigner.md","shasum":"57786fd0f680bc14b6eaa7a058512ac151656e29","modified":1458175446358},{"_id":"source/_posts/java-lang-IllegalStateException-Fragment-not-attached-to-Activity.md","shasum":"160ebf6958f0df63077cd0ff9ff972ae40716f3d","modified":1458175446358},{"_id":"source/_posts/gradle4android2.md","shasum":"6a7123cc6eb63a62e913a3219ab39156e5c262ac","modified":1463731431085},{"_id":"source/_posts/gradle4android3.md","shasum":"10eefc3defec57b90d47c4a8499852a216dc1e9c","modified":1459473119978},{"_id":"source/_posts/listView.md","shasum":"5558db72647f78f20a3ae81c030089c5d5edd7c9","modified":1458175446359},{"_id":"source/_posts/jcenter.md","shasum":"c1e8076d646215a810e282d6d82f7c4b6a41ebb2","modified":1462505389640},{"_id":"source/_posts/methods-SQLite-were-randomly-selected-for-the-N.md","shasum":"4c89be7cc884bf85cd7ec29888f238d8dabcf9dc","modified":1458175446359},{"_id":"source/_posts/lock-screen-video.md","shasum":"a38c6fbe8194298e2d913c21491a808844451d3d","modified":1458175446359},{"_id":"source/_posts/mobile.md","shasum":"06e19e6e7d5a000857369324c886a2090e87086a","modified":1458175446360},{"_id":"source/_posts/jcenter2.md","shasum":"708ce840d643bb6d09fffc40552cb9439d5d6ded","modified":1462506647572},{"_id":"source/_posts/mobile-phone-information-acquisition.md","shasum":"9140889530acc094f629656effd98ad433aa1089","modified":1458175446360},{"_id":"source/_posts/mvpRetrofitRxjava.md","shasum":"bb972b017ed9af0fc71b4c7d28873a16b059e76c","modified":1466414273858},{"_id":"source/_posts/ninety-nine-life-sentiment.md","shasum":"1261bbe971d1990f5f462ed33382ccca164a3e51","modified":1458175446361},{"_id":"source/_posts/lambda4android.md","shasum":"0d389a269533dad60876859951b232e5a3b881cf","modified":1458704237339},{"_id":"source/_posts/phone_space.md","shasum":"2dfd4e4aa4b886b137a7152905b4094c8e5abfbd","modified":1458175446361},{"_id":"source/_posts/processes-and-threads.md","shasum":"e4f4211ebf71b2ad087746fbd0040b3d804d1ce4","modified":1458175446361},{"_id":"source/_posts/qiniu-photo-bed.md","shasum":"dfb778dc5ecaf121c11da4bb2b30fcbf47bcdc41","modified":1458175446361},{"_id":"source/_posts/qinziyouwan.md","shasum":"97504aed8f063f1165ab456059dd6fcfc5cab147","modified":1458175446362},{"_id":"source/_posts/retrofits.md","shasum":"e9cd02c0c7222508ceeed0285813709a036ad72a","modified":1465954499774},{"_id":"source/_posts/listView_item_state.md","shasum":"1f38f592d89b56c896c8d7585c374537ba4d1aeb","modified":1462505458759},{"_id":"source/_posts/screen-adaptation.md","shasum":"2131b52352d42caa4947e53e0ea7f182b587cb1c","modified":1458175446362},{"_id":"source/_posts/retrofit.md","shasum":"bde93b5c03cbf8417620afe915d970189a5f7ce2","modified":1458890510378},{"_id":"source/_posts/service.md","shasum":"3375725c78af58e4a63591c51420c9d3be2704e2","modified":1458175446363},{"_id":"source/_posts/sdk-update.md","shasum":"2450a0493492b3b5b6f9c6b35ebe2b0ccb051993","modified":1458175446363},{"_id":"source/_posts/shape.md","shasum":"e3b95cbce26b2d0b10b8d50bb377fa042f19dd1d","modified":1458175446364},{"_id":"source/_posts/shengmingzhiyuan.md","shasum":"33663afef906bcf574cd6ebd7cb01a796ef22d0c","modified":1458175446364},{"_id":"source/_posts/uCrop.md","shasum":"19342eea356311a34639f6338dfa511220977ea2","modified":1466587116920},{"_id":"source/_posts/rxjava.md","shasum":"2285e9dd29ab6389afbed950873b86164d51ce51","modified":1458703254337},{"_id":"source/_posts/weilian.md","shasum":"e2afa3d4c72afc32162b7b84d147922d1998793c","modified":1458175446364},{"_id":"source/_posts/weiyan.md","shasum":"e2ec948768b2d4e255d373a1b910b6467c26f87c","modified":1458175446365},{"_id":"source/_posts/xmpp1.md","shasum":"cb120376b118e620e03e2237953b2d2610b5c9c3","modified":1458175446365},{"_id":"source/_posts/toolbar.md","shasum":"42965fb9f23da69a501645dd0f8fdd5544e5cc40","modified":1461641441255},{"_id":"source/_posts/wochat.md","shasum":"61ba8e669677c5dceec03dfaeb673ba48ffb5d23","modified":1458175446365},{"_id":"source/_posts/xmpp3.md","shasum":"a9c137ee40c0ef704b16b6d8f1139611991c8133","modified":1458175446366},{"_id":"source/_posts/xmpp2.md","shasum":"873bbefb90c2c0c476db45394de01e4263a93344","modified":1458175446365},{"_id":"source/about/index.md","shasum":"e3389962745e15a94dcebddf11b2620b74b7cd70","modified":1461112985501},{"_id":"source/categories/index.md","shasum":"499cf30f1d2ef9de8001a8d51730215fa4e48699","modified":1458175446366},{"_id":"source/favicon.ico","shasum":"004d513dd38ee41400290acadc298e879ff45f6e","modified":1458175446367},{"_id":"source/friendslinks/index.md","shasum":"d027741ecf96b77c11ac0fbca8981c62bce2f3cb","modified":1466585534421},{"_id":"source/qq/index.md","shasum":"c877f1fc6079a3709e6fe60e13a246ad99b98c9f","modified":1458175446368},{"_id":"source/tags/index.md","shasum":"18eed98b1ab27bf0f7306bb08ecbbef2be9cbff4","modified":1458175446368},{"_id":"source/_posts/rxbus.md","shasum":"9872654cf307b62f5757f54152cf02ee1517aee8","modified":1466389363599},{"_id":"source/_posts/zxing.md","shasum":"891e300c7bc46c15584144ab98760ff7ea3f4719","modified":1461221735868},{"_id":"source/_posts/zhuangbi.md","shasum":"6ac7a87a3385f9e68d8dc3d3b79f7ece2c92860c","modified":1459903180216},{"_id":"themes/next/source/css/_common/_page/home.styl","shasum":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1458175446412},{"_id":"themes/next/source/css/_mixins/Mist.styl","shasum":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1458175446416},{"_id":"themes/next/source/css/_mixins/custom.styl","shasum":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1458175446416},{"_id":"themes/next/source/css/_mixins/default.styl","shasum":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1458175446416},{"_id":"themes/next/source/css/_variables/custom.styl","shasum":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1458175446419},{"_id":"themes/next/source/css/_variables/default.styl","shasum":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1458175446419},{"_id":"themes/next/_config.yml","shasum":"0435f15e50f7685e44632178b2ede72cc5c51d56","modified":1466669979018},{"_id":"themes/next/README.en.md","shasum":"fa31bbc6dd8778b8dee469740c92b3b5b59702af","modified":1458175446393},{"_id":"themes/next/languages/de.yml","shasum":"79e6d3c25504516db38d5f86a9dca1da8401b022","modified":1458175446394},{"_id":"themes/next/README.md","shasum":"6cfb458e3965c0e15db17662884ff1baf33be29f","modified":1458175446393},{"_id":"themes/next/bower.json","shasum":"2114bedc25b2c184410ca7f934057eb9698415a3","modified":1458175446394},{"_id":"themes/next/languages/en.yml","shasum":"f38072c98a0f6065a66bd2ce17d095a3328d6ecc","modified":1458175446394},{"_id":"themes/next/languages/fr-FR.yml","shasum":"cda5d48889345c96177d039ba96a7d989eb0ef84","modified":1458175446395},{"_id":"themes/next/languages/ru.yml","shasum":"a2a7b77990b8f7bcb57382e12f0dad59ba58fa82","modified":1458175446395},{"_id":"themes/next/languages/zh-Hans.yml","shasum":"4c5ade588c1bdf205910502d810525bc6ae0653d","modified":1458175446396},{"_id":"themes/next/languages/default.yml","shasum":"f38072c98a0f6065a66bd2ce17d095a3328d6ecc","modified":1458175446394},{"_id":"themes/next/languages/zh-tw.yml","shasum":"4648c6d9a5c9828f5485620dd888d2953a71d191","modified":1458175446396},{"_id":"themes/next/layout/_layout.swig","shasum":"b4fbb0336b5670c0effed3bad71a8125e79a101d","modified":1458175446397},{"_id":"themes/next/layout/_macro/post-collapse.swig","shasum":"69500673c892ef3645469774777741a9ec1c4a46","modified":1458175446397},{"_id":"themes/next/layout/_macro/post.swig","shasum":"cbbc86787d58db7c201d22b21c1f2eb4058ae394","modified":1458175446397},{"_id":"themes/next/layout/_macro/sidebar.swig","shasum":"30b2338d4d95c65147d46074c6863bdc24343eeb","modified":1458175446398},{"_id":"themes/next/layout/_partials/footer.swig","shasum":"2b8ce152463ee53d981a3f90903dd281326d2dbb","modified":1458175446398},{"_id":"themes/next/layout/_partials/pagination.swig","shasum":"591ed052c83d0091e299134c496818a9cdc85726","modified":1458175446399},{"_id":"themes/next/languages/zh-hk.yml","shasum":"49a9af34b42b08bedeed801c0ab48145cc9d8f30","modified":1458175446396},{"_id":"themes/next/layout/_partials/head.swig","shasum":"1af55abf5edce9dded9a3d0c4d6edb719e639e5f","modified":1458175446398},{"_id":"themes/next/layout/_partials/search/swiftype.swig","shasum":"dc4625c6b4248def38fb5ea2590761647f827dd5","modified":1458175446399},{"_id":"themes/next/layout/_partials/header.swig","shasum":"50c0079e577c289f15befbd151023f9366f5ee6a","modified":1458175446398},{"_id":"themes/next/layout/_partials/search.swig","shasum":"02187af7cb038c6b83f119366da74dd4ff3b6d7f","modified":1458175446399},{"_id":"themes/next/layout/_partials/search/tinysou.swig","shasum":"d0c2ae3caecd69150fb162f0602eac3b877fdc2f","modified":1458175446400},{"_id":"themes/next/layout/_scripts/analytics/baidu-analytics.swig","shasum":"ae5b8597603d4e42ee66ed121544e7b1c644767e","modified":1458175446401},{"_id":"themes/next/layout/_scripts/analytics/google-analytics.swig","shasum":"1b6af02fd0ba3f729675cd95429a0cea4aebf358","modified":1458175446401},{"_id":"themes/next/layout/_scripts/analytics.swig","shasum":"dfe81af3057cfe934e6f81ee386e5867853ac0aa","modified":1458175446400},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","shasum":"a61a7ce13400207a2fa62ed8ee54d8c9a760607a","modified":1458175446400},{"_id":"themes/next/layout/_scripts/baidushare.swig","shasum":"640d4dda003f54a0dffa4508fba4d91ac0dcfa6e","modified":1458175446401},{"_id":"themes/next/layout/_scripts/bootstrap.scrollspy.swig","shasum":"0aad8d447567b683108b274c841c536b2daa176d","modified":1458175446402},{"_id":"themes/next/layout/_partials/share/jiathis.swig","shasum":"12684840de632eb16e53ffa863166306a756fd4f","modified":1458175446400},{"_id":"themes/next/layout/_scripts/helpers.swig","shasum":"4d2cbfca0aaf546a2b5813288073e824c1498fdf","modified":1458175446402},{"_id":"themes/next/layout/_scripts/motion.swig","shasum":"40439a4d4c8e8c2218da84ee1e586e11db9837be","modified":1458175446403},{"_id":"themes/next/layout/_scripts/comments/duoshuo.swig","shasum":"e880dce125aba0893a56d49a4d6f923674685dd2","modified":1458175446402},{"_id":"themes/next/layout/_scripts/comments/disqus.swig","shasum":"c1186e609d4810ebfb3e675e9045b023a557d1db","modified":1458175446402},{"_id":"themes/next/layout/_scripts/mathjax.swig","shasum":"e113e497075ac8681c665a7831657901cfa4fb68","modified":1458175446403},{"_id":"themes/next/layout/_scripts/fancy-box.swig","shasum":"701dfc53d750635de2f08f08d072d6ceb83b636c","modified":1458175446402},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","shasum":"3ac70198258ab3c2bceca452864b68cc14a9debf","modified":1458175446403},{"_id":"themes/next/layout/archive.swig","shasum":"4fd1959cb47fd5506ca325ffe74247a2b8145d9d","modified":1458175446404},{"_id":"themes/next/layout/index.swig","shasum":"ce54102e8a608f63bb7a2309c0f78ad1c3f66a76","modified":1458175446404},{"_id":"themes/next/layout/category.swig","shasum":"c386f6ee1cb65bb556be8b0e3d21f40495177f1a","modified":1458175446404},{"_id":"themes/next/source/404.html","shasum":"d084c84fd9b5f0c9c677d4c26dd0bfa87643a79a","modified":1458175446405},{"_id":"themes/next/source/css/_common/_component/back-to-top.styl","shasum":"dac21141c7893ab9de697a8183d3b3f4eb7f0a5a","modified":1458175446406},{"_id":"themes/next/layout/page.swig","shasum":"e94f038a85f40b14773023a0cc3635e3fc72a47b","modified":1458175446405},{"_id":"themes/next/source/css/_common/_component/comments.styl","shasum":"646b512b3b17f346cfcf70d56b49dc466dfb3501","modified":1458175446407},{"_id":"themes/next/source/css/_common/_component/gallery.styl","shasum":"6c71d842697155e5eb1cb5da0c17da91d6b0071f","modified":1458175446407},{"_id":"themes/next/source/css/_common/_component/jiathis.styl","shasum":"15975ba7456b96916b1dbac448a1a0d2c38b8f3d","modified":1458175446407},{"_id":"themes/next/layout/post.swig","shasum":"fc7987f60d3c5c1444cd66de3c583bc919e6a0ef","modified":1458175446405},{"_id":"themes/next/layout/tag.swig","shasum":"315b364bfe86ef8497e8d7ea026b0ac978a15deb","modified":1458175446405},{"_id":"themes/next/source/css/_common/_component/duoshuo.styl","shasum":"76e8e6f5200e5e6063be6643c1cf340a51af6619","modified":1458175446407},{"_id":"themes/next/source/css/_common/_component/posts-type.styl","shasum":"f28f00b2acb0df0343e77400bcc8246b40ac046c","modified":1458175446408},{"_id":"themes/next/source/css/_common/_component/tag-cloud.styl","shasum":"6eb4bcc3056bd279d000607e8b4dad50d368ca69","modified":1458175446408},{"_id":"themes/next/source/css/_common/_component/pagination.styl","shasum":"88559b13ce94311405b170a0506ded91273beceb","modified":1458175446408},{"_id":"themes/next/source/css/_common/_component/posts-collapse.styl","shasum":"1d805b9ea9c7adc1ed3da9783d8af9b1c632134d","modified":1458175446408},{"_id":"themes/next/source/css/_common/_core/base.styl","shasum":"c575ac7f4d20e10d42cc5a106ad3fb060a5d58d4","modified":1458175446409},{"_id":"themes/next/layout/_partials/old-browsers.swig","shasum":"3c4d930d34c234725065173780a23673e1c574f5","modified":1458175446399},{"_id":"themes/next/source/css/_common/_core/tables.styl","shasum":"00bdeb03cf2c7381bbd9adbb1dd325d47ffe63db","modified":1458175446410},{"_id":"themes/next/source/css/_common/_core/helpers.styl","shasum":"05150387d08fdbd1b39be35f25afc23a72030a5a","modified":1458175446409},{"_id":"themes/next/source/css/_common/_core/scaffolding.styl","shasum":"7b2af9926abd2a6b7cf2a27c3fd976da9feb5ee1","modified":1458175446410},{"_id":"themes/next/source/css/_common/_core/normalize.styl","shasum":"3f40e8a9fe8e7bd5cfc4cf4cbbbcb9539462e973","modified":1458175446409},{"_id":"themes/next/source/css/_common/_component/buttons.styl","shasum":"0a1730773478d843e123404ab4dae24d7cb0f2b7","modified":1458175446406},{"_id":"themes/next/source/css/_common/_fonts/icon-feather.styl","shasum":"2fc51921e37f1283294123e9bf65ddeb0f102dc1","modified":1458175446410},{"_id":"themes/next/source/css/_common/_fonts/icon-fifty-shades.styl","shasum":"b6d811cae9e614ca24f6626c0a4908cab0615e41","modified":1458175446411},{"_id":"themes/next/source/css/_common/_page/categories.styl","shasum":"6c34f2cf9ad9b9b787007cfca522deeb6b1ae3b7","modified":1458175446412},{"_id":"themes/next/source/css/_common/_fonts/icon-font.styl","shasum":"a1da6ce3d1a1c751b2cc97a87fe22a8d437ba4a4","modified":1458175446411},{"_id":"themes/next/source/css/_common/_section/body.styl","shasum":"6eaa5d9cb08ecfb2d377a475e541e41fbfe4c1b6","modified":1458175446413},{"_id":"themes/next/source/css/_common/_page/post-detail.styl","shasum":"70464ceb64c4239af590f99ef319747d3d1f100b","modified":1458175446412},{"_id":"themes/next/source/css/_common/_fonts/icon-default.styl","shasum":"7251ee3fdca199d8e67a7c17c11c1e93cbfc9f6d","modified":1458175446410},{"_id":"themes/next/source/css/_common/_fonts/icon-linecons.styl","shasum":"71c999863c04864caa7f86615f769bb413f228dc","modified":1458175446411},{"_id":"themes/next/source/css/_common/_section/media.styl","shasum":"482784c04c0cd15a3f0d86444966fe306af7d13a","modified":1458175446414},{"_id":"themes/next/source/css/_common/_page/archive.styl","shasum":"df9e5a418f6e54abe69c1ab84649be46fb0c51a6","modified":1458175446412},{"_id":"themes/next/source/css/_common/_section/layout.styl","shasum":"57ed294f100d94ebc05f48145e5060a78edb405f","modified":1458175446414},{"_id":"themes/next/source/css/_common/_section/footer.styl","shasum":"4c4ef6e997d0c6e21de39c2daa0c768e12c8c6fa","modified":1458175446413},{"_id":"themes/next/source/css/_custom/custom.styl","shasum":"68b6859fb48fe8358e567fc324f218cecfc3a533","modified":1458175446416},{"_id":"themes/next/source/css/_common/_component/posts-expand.styl","shasum":"3b78be3d1b5f8198a3e4848e8624af650b64b801","modified":1458175446408},{"_id":"themes/next/source/css/_common/_vendor/highlight/highlight.styl","shasum":"42cad9d6ae956ff0d545b601916dcdee68d85ee5","modified":1458175446415},{"_id":"themes/next/source/css/_schemes/default/_menu.styl","shasum":"dd667be3f5f24cebdc15d0262c7d397f23d751c5","modified":1458175446418},{"_id":"themes/next/source/css/_common/_section/sidebar.styl","shasum":"0fba5556e46a9f85d5dc270e6b17c0669e8cbdca","modified":1458175446414},{"_id":"themes/next/source/css/_common/_vendor/highlight/theme.styl","shasum":"9f0606d4d94ffa6bd77f91628507bba19133cf36","modified":1458175446415},{"_id":"themes/next/source/css/_mixins/base.styl","shasum":"c76b9e3ff7dec124ac1370ad185dce0e75dc1e03","modified":1458175446416},{"_id":"themes/next/source/css/_variables/Mist.styl","shasum":"306149f2f2afe2a7c0277ee3f5116603c6eb8863","modified":1458175446418},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","shasum":"4a3a42602de866ee9caf53a78b0f636c3592e4ce","modified":1458175446417},{"_id":"themes/next/source/favicon.ico","shasum":"ba1c0e5a8912f8fdedd8e3709ae7cb7aa0f38572","modified":1458175446420},{"_id":"themes/next/source/css/_schemes/default/_search.styl","shasum":"f4b930ca651fdd96e8caea865b6b90dc32139f41","modified":1458175446418},{"_id":"themes/next/source/css/main.styl","shasum":"272e494e179bd02c12d777daf71a5db59681a36f","modified":1458175446419},{"_id":"themes/next/source/fonts/icon-default/icomoon.svg","shasum":"c6d998be8fc66fedb4d3c06329f457615ca47190","modified":1458175446421},{"_id":"themes/next/source/fonts/icon-default/icomoon.ttf","shasum":"e6452f07b050ee0ff265b3b99a1e7ef82eb561b2","modified":1458175446421},{"_id":"themes/next/source/css/_variables/base.styl","shasum":"8870e33146c1cc2d079024f60001d053c059d0b2","modified":1458175446419},{"_id":"themes/next/source/fonts/icon-default/icomoon.woff","shasum":"4d0adc55240f331c6de225e23afd76ea5318da9c","modified":1458175446421},{"_id":"themes/next/source/fonts/icon-default/icomoon.eot","shasum":"a58d5e893c6faefc90d5c2589cc314dff8ffca7a","modified":1458175446420},{"_id":"themes/next/source/css/_common/_section/header.styl","shasum":"3df7b27f7dab4d4c07852dfd59ed0d06b1ac845c","modified":1458175446413},{"_id":"themes/next/source/fonts/icon-feather/icomoon.svg","shasum":"7644914ce9e46e31840d30e289cd5f3d21227822","modified":1458175446422},{"_id":"themes/next/source/fonts/icon-feather/icomoon.eot","shasum":"6d0eb1a5bfef4f2bf77089bd090e88c5b2f7944d","modified":1458175446422},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.eot","shasum":"f27c3643af6ed6f3d29a0be0c8dbea9b157857db","modified":1458175446423},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.svg","shasum":"3be905b577a578b5a5d90708efb702c84acfc50c","modified":1458175446423},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.ttf","shasum":"e0b5e4a23a949bac499908bcef2fae56430e230e","modified":1458175446423},{"_id":"themes/next/source/fonts/icon-feather/icomoon.woff","shasum":"9159eea8641b840e0f7aa6e087dae414044ecdd3","modified":1458175446422},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.woff","shasum":"088a16303b0700e1c9e2c6962240b4c2f0fc3aa4","modified":1458175446424},{"_id":"themes/next/source/css/_schemes/default/index.styl","shasum":"e1dcc89ecbd93f46aacd5d0da39f74c22eb52916","modified":1458175446418},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.svg","shasum":"51ca86690d0294529bb9a736984e7fa718d15933","modified":1458175446425},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.ttf","shasum":"f399713d1c9400d4d3373e38991a7e362a754a94","modified":1458175446425},{"_id":"themes/next/source/fonts/icon-feather/icomoon.ttf","shasum":"8c865cffa3845be32406737fcc0466cf9cd965b3","modified":1458175446422},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.eot","shasum":"176695cc0dc12daba049b2bb889397a7bf2e553c","modified":1458175446426},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.ttf","shasum":"c8ec218adabc788b17f976f60dd1c5fa872d9fc4","modified":1458175446427},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.woff","shasum":"d1ed08a17670fa259df02c1d52dc9ce754343775","modified":1458175446427},{"_id":"themes/next/source/images/bkdefault_avatar.jpg","shasum":"b687bb4bfbe35a32b592c24d652ba80cfdc770fc","modified":1458175446428},{"_id":"themes/next/source/images/cc-by-nc.svg","shasum":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1458175446429},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.eot","shasum":"301fcf00c24750dddf1c529f944ca62c7f1a217d","modified":1458175446424},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","shasum":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1458175446429},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.woff","shasum":"05f1ec0bd307da5e731a86eb4961589a6042aebb","modified":1458175446425},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","shasum":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1458175446428},{"_id":"themes/next/source/images/loading.gif","shasum":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1458175446430},{"_id":"themes/next/source/images/placeholder.gif","shasum":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1458175446430},{"_id":"themes/next/source/images/cc-zero.svg","shasum":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1458175446430},{"_id":"themes/next/source/images/searchicon.png","shasum":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1458175446431},{"_id":"themes/next/source/images/avatar.jpg","shasum":"88a2c2d1b9c3d06a5e4df2b02609b53002ffd860","modified":1458175446428},{"_id":"themes/next/source/js/bootstrap.scrollspy.js","shasum":"97640be11a524b203781c1a03f623ef0b9195a02","modified":1458175446431},{"_id":"themes/next/source/js/fancy-box.js","shasum":"e978731b1d9a0ac1d9f026f97706a24fb99122f1","modified":1458175446431},{"_id":"themes/next/source/js/helpers.js","shasum":"092d54b791af7c4a11b1496294dd3259259058b6","modified":1458175446431},{"_id":"themes/next/source/images/cc-by.svg","shasum":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1458175446430},{"_id":"themes/next/source/js/lazyload.js","shasum":"dd94f7e88df11a1d760ca9994e21a58c07974fb2","modified":1458175446432},{"_id":"themes/next/source/js/motion_fallback.js","shasum":"bff3d62933345bb9bba962332b8c3d31f7b01579","modified":1458175446432},{"_id":"themes/next/source/images/cc-by-nd.svg","shasum":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1458175446429},{"_id":"themes/next/source/js/search-toggle.js","shasum":"e62bb0cff0c2e9d7c6944c4b88533b63f2259170","modified":1458175446433},{"_id":"themes/next/source/js/hook-duoshuo.js","shasum":"a7a618126d6853d52f4e32be116d3985325ad17d","modified":1458175446432},{"_id":"themes/next/source/vendors/fancybox/source/blank.gif","shasum":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1458175446434},{"_id":"themes/next/source/js/motion_global.js","shasum":"93eeeb1e9c0b42224e6ddb8ae4605c4ee0f18032","modified":1458175446433},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading.gif","shasum":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1458175446435},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_overlay.png","shasum":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1458175446435},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite.png","shasum":"17df19f97628e77be09c352bf27425faea248251","modified":1458175446435},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite@2x.png","shasum":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1458175446436},{"_id":"themes/next/source/vendors/fancybox/source/helpers/fancybox_buttons.png","shasum":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1458175446436},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","shasum":"6394c48092085788a8c0ef72670b0652006231a1","modified":1458175446436},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","shasum":"ee948b4489aedeb548a77c9e45d8c7c5732fd62d","modified":1458175446437},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-media.js","shasum":"51139a4c79573d372a347ef01a493222a1eaf10a","modified":1458175446437},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","shasum":"b88b589f5f1aa1b3d87cc7eef34c281ff749b1ae","modified":1458175446437},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","shasum":"d22b1629cb23a6181bebb70d0cf653ffe4b835c8","modified":1458175446438},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.css","shasum":"82f33ad0842aa9c154d029e0dada2497d4eb1d57","modified":1458175446438},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.js","shasum":"d71602cbca33b9ecdb7ab291b7f86a49530f3601","modified":1458175446438},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.pack.js","shasum":"ae6318aeb62ad4ce7a7e9a4cdacd93ffb004f0fb","modified":1458175446439},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading@2x.gif","shasum":"273b123496a42ba45c3416adb027cd99745058b0","modified":1458175446435},{"_id":"themes/next/source/images/cc-by-sa.svg","shasum":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1458175446430},{"_id":"themes/next/source/js/ua-parser.min.js","shasum":"acf0ee6a47ffb7231472b56e43996e3f947c258a","modified":1458175446433},{"_id":"themes/next/source/vendors/velocity/bower.json","shasum":"92d92860418c4216aa59eb4cb4a556290a7ad9c3","modified":1458175446441},{"_id":"themes/next/source/vendors/velocity/velocity.min.js","shasum":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1458175446443},{"_id":"themes/next/source/vendors/velocity/velocity.ui.js","shasum":"dbbfb50f6502f6b81dcc9fee7b31f1e812da3464","modified":1458175446443},{"_id":"themes/next/source/vendors/velocity/velocity.ui.min.js","shasum":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1458175446444},{"_id":"themes/next/tests/helpers.js","shasum":"f25e7f3265eb5a6e1ccbb5e5012fa9bebf134105","modified":1458175446444},{"_id":"themes/next/tests/intern.js","shasum":"db90b1063356727d72be0d77054fdc32fa882a66","modified":1458175446444},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.svg","shasum":"e4eadbae96a0419a269e1188d5b624710a29a65d","modified":1458175446426},{"_id":"themes/next/source/vendors/jquery/index.js","shasum":"17a740d68a1c330876c198b6a4d9319f379f3af2","modified":1458175446440},{"_id":"themes/next/source/vendors/velocity/velocity.js","shasum":"4237c6e9d59da349639de20e559e87c2c0218cfd","modified":1458175446442},{"_id":"public/vendors/velocity/velocity.ui.min.js","modified":1466670012996,"shasum":"ed5e534cd680a25d8d14429af824f38a2c7d9908"},{"_id":"public/vendors/velocity/velocity.ui.js","modified":1466670012999,"shasum":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df"},{"_id":"public/vendors/velocity/velocity.min.js","modified":1466670013001,"shasum":"2f1afadc12e4cf59ef3b405308d21baa97e739c6"},{"_id":"public/vendors/velocity/velocity.js","modified":1466670013004,"shasum":"9f08181baea0cc0e906703b7e5df9111b9ef3373"},{"_id":"public/vendors/velocity/bower.json","modified":1466670013006,"shasum":"0ef14e7ccdfba5db6eb3f8fc6aa3b47282c36409"},{"_id":"public/vendors/jquery/index.js","modified":1466670013007,"shasum":"41b4bfbaa96be6d1440db6e78004ade1c134e276"},{"_id":"public/vendors/fancybox/source/jquery.fancybox.pack.js","modified":1466670013008,"shasum":"53360764b429c212f424399384417ccc233bb3be"},{"_id":"public/vendors/fancybox/source/jquery.fancybox.js","modified":1466670013009,"shasum":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4"},{"_id":"public/vendors/fancybox/source/jquery.fancybox.css","modified":1466670013010,"shasum":"5f163444617b6cf267342f06ac166a237bb62df9"},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":1466670013011,"shasum":"53e194f4a72e649c04fb586dd57762b8c022800b"},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":1466670013012,"shasum":"4ac329c16a5277592fc12a37cca3d72ca4ec292f"},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-media.js","modified":1466670013013,"shasum":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d"},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":1466670013013,"shasum":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876"},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":1466670013014,"shasum":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8"},{"_id":"public/vendors/fancybox/source/helpers/fancybox_buttons.png","modified":1466670013017,"shasum":"e385b139516c6813dcd64b8fc431c364ceafe5f3"},{"_id":"public/vendors/fancybox/source/fancybox_sprite@2x.png","modified":1466670013019,"shasum":"30c58913f327e28f466a00f4c1ac8001b560aed8"},{"_id":"public/vendors/fancybox/source/fancybox_sprite.png","modified":1466670013020,"shasum":"17df19f97628e77be09c352bf27425faea248251"},{"_id":"public/vendors/fancybox/source/fancybox_overlay.png","modified":1466670013024,"shasum":"b3a4ee645ba494f52840ef8412015ba0f465dbe0"},{"_id":"public/vendors/fancybox/source/fancybox_loading@2x.gif","modified":1466670013025,"shasum":"273b123496a42ba45c3416adb027cd99745058b0"},{"_id":"public/vendors/fancybox/source/fancybox_loading.gif","modified":1466670013026,"shasum":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c"},{"_id":"public/vendors/fancybox/source/blank.gif","modified":1466670013028,"shasum":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a"},{"_id":"public/js/ua-parser.min.js","modified":1466670013029,"shasum":"acf0ee6a47ffb7231472b56e43996e3f947c258a"},{"_id":"public/js/search-toggle.js","modified":1466670013031,"shasum":"0bf617514cd86307f0678a226761341100dd86d4"},{"_id":"public/js/motion_global.js","modified":1466670013032,"shasum":"e6df9e7e61109667df0e22c4f7cc25c85015440b"},{"_id":"public/js/motion_fallback.js","modified":1466670013033,"shasum":"a767d522c65a8b2fbad49135c9332135c6785c3e"},{"_id":"public/js/lazyload.js","modified":1466670013034,"shasum":"b92e9acdc7afc15468314c03f4a643b0c93944cf"},{"_id":"public/js/hook-duoshuo.js","modified":1466670013035,"shasum":"e529f5d6dda3aee77fadfed879da9fe1fb570165"},{"_id":"public/js/helpers.js","modified":1466670013036,"shasum":"c2117b0ec653df4c45dd9d9575b190cbe1035335"},{"_id":"public/js/fancy-box.js","modified":1466670013037,"shasum":"116cafc741e048497287121a508d7a54c050c70c"},{"_id":"public/js/bootstrap.scrollspy.js","modified":1466670013038,"shasum":"ae7bdce88b515aade4eea8bf7407eec458bcd625"},{"_id":"public/images/searchicon.png","modified":1466670013039,"shasum":"67727a6a969be0b2659b908518fa6706eed307b8"},{"_id":"public/images/placeholder.gif","modified":1466670013040,"shasum":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b"},{"_id":"public/images/loading.gif","modified":1466670013041,"shasum":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b"},{"_id":"public/images/cc-zero.svg","modified":1466670013043,"shasum":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d"},{"_id":"public/images/cc-by.svg","modified":1466670013045,"shasum":"e92a33c32d1dac8ed94849b2b4e6456e887efe70"},{"_id":"public/images/cc-by-sa.svg","modified":1466670013047,"shasum":"70c1535f43e54e5ff35ca81419e77e4c0c301398"},{"_id":"public/images/cc-by-nd.svg","modified":1466670013052,"shasum":"42cd73da328077ccc92f859bb8f3cf621b3484f8"},{"_id":"public/images/cc-by-nc.svg","modified":1466670013053,"shasum":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab"},{"_id":"public/images/cc-by-nc-sa.svg","modified":1466670013055,"shasum":"6f55543d1fb9cbc436c101d24f802dec7b41efc3"},{"_id":"public/images/cc-by-nc-nd.svg","modified":1466670013056,"shasum":"bc3588c9b2d7c68830524783120ff6cf957cf668"},{"_id":"public/images/bkdefault_avatar.jpg","modified":1466670013057,"shasum":"b687bb4bfbe35a32b592c24d652ba80cfdc770fc"},{"_id":"public/images/avatar.jpg","modified":1466670013058,"shasum":"88a2c2d1b9c3d06a5e4df2b02609b53002ffd860"},{"_id":"public/fonts/icon-linecons/icomoon.woff","modified":1466670013061,"shasum":"d1ed08a17670fa259df02c1d52dc9ce754343775"},{"_id":"public/fonts/icon-linecons/icomoon.ttf","modified":1466670013063,"shasum":"c8ec218adabc788b17f976f60dd1c5fa872d9fc4"},{"_id":"public/fonts/icon-linecons/icomoon.svg","modified":1466670013064,"shasum":"e4eadbae96a0419a269e1188d5b624710a29a65d"},{"_id":"public/fonts/icon-linecons/icomoon.eot","modified":1466670013066,"shasum":"176695cc0dc12daba049b2bb889397a7bf2e553c"},{"_id":"public/fonts/icon-icomoon/icomoon.woff","modified":1466670013067,"shasum":"05f1ec0bd307da5e731a86eb4961589a6042aebb"},{"_id":"public/fonts/icon-icomoon/icomoon.ttf","modified":1466670013069,"shasum":"f399713d1c9400d4d3373e38991a7e362a754a94"},{"_id":"public/fonts/icon-icomoon/icomoon.svg","modified":1466670013070,"shasum":"51ca86690d0294529bb9a736984e7fa718d15933"},{"_id":"public/fonts/icon-icomoon/icomoon.eot","modified":1466670013071,"shasum":"301fcf00c24750dddf1c529f944ca62c7f1a217d"},{"_id":"public/fonts/icon-fifty-shades/icomoon.woff","modified":1466670013072,"shasum":"088a16303b0700e1c9e2c6962240b4c2f0fc3aa4"},{"_id":"public/fonts/icon-fifty-shades/icomoon.ttf","modified":1466670013073,"shasum":"e0b5e4a23a949bac499908bcef2fae56430e230e"},{"_id":"public/fonts/icon-fifty-shades/icomoon.svg","modified":1466670013074,"shasum":"3be905b577a578b5a5d90708efb702c84acfc50c"},{"_id":"public/fonts/icon-fifty-shades/icomoon.eot","modified":1466670013075,"shasum":"f27c3643af6ed6f3d29a0be0c8dbea9b157857db"},{"_id":"public/fonts/icon-feather/icomoon.woff","modified":1466670013077,"shasum":"9159eea8641b840e0f7aa6e087dae414044ecdd3"},{"_id":"public/fonts/icon-feather/icomoon.ttf","modified":1466670013078,"shasum":"8c865cffa3845be32406737fcc0466cf9cd965b3"},{"_id":"public/fonts/icon-feather/icomoon.svg","modified":1466670013079,"shasum":"7644914ce9e46e31840d30e289cd5f3d21227822"},{"_id":"public/fonts/icon-feather/icomoon.eot","modified":1466670013080,"shasum":"6d0eb1a5bfef4f2bf77089bd090e88c5b2f7944d"},{"_id":"public/fonts/icon-default/icomoon.woff","modified":1466670013081,"shasum":"4d0adc55240f331c6de225e23afd76ea5318da9c"},{"_id":"public/fonts/icon-default/icomoon.ttf","modified":1466670013082,"shasum":"e6452f07b050ee0ff265b3b99a1e7ef82eb561b2"},{"_id":"public/fonts/icon-default/icomoon.svg","modified":1466670013084,"shasum":"c6d998be8fc66fedb4d3c06329f457615ca47190"},{"_id":"public/fonts/icon-default/icomoon.eot","modified":1466670013085,"shasum":"a58d5e893c6faefc90d5c2589cc314dff8ffca7a"},{"_id":"public/favicon.ico","modified":1466670013086,"shasum":"004d513dd38ee41400290acadc298e879ff45f6e"},{"_id":"public/css/main.css","modified":1466670013393,"shasum":"00ec5d12e8c34606c7fce068bb6f957820546303"},{"_id":"public/404.html","modified":1466670013469,"shasum":"2374c420bb20338968b15f3f9bf7e72693f692ea"},{"_id":"public/CNAME","modified":1466670013470,"shasum":"60eae165881188b967de288d8d98b05420883e49"},{"_id":"public/AndroidProgrammer/index.html","modified":1466670013560,"shasum":"901cbfd4108b9f689ad5e1cf19bf9cc3d32bb90a"},{"_id":"public/tags/index.html","modified":1466670013614,"shasum":"ce06f52020580848008a46df5db18ac721d801b6"},{"_id":"public/qq/index.html","modified":1466670013641,"shasum":"c3853deff7103efb7b495a744c3ff12e8174d612"},{"_id":"public/friendslinks/index.html","modified":1466670013669,"shasum":"cda51d0b14eafec27e38861c8deae5c1fe61cc4d"},{"_id":"public/categories/index.html","modified":1466670013695,"shasum":"d73c7c40b7c0b1301875915db6fefcfbf65a46d9"},{"_id":"public/about/index.html","modified":1466670013716,"shasum":"a9494509ccf45ce76f40a835fcfefa5dce9fab11"},{"_id":"public/2016/06/20/uCrop/index.html","modified":1466670013789,"shasum":"9151f633cb2f4451d54f288b997011dc6fbc89e1"},{"_id":"public/2016/06/18/retrofits/index.html","modified":1466670013842,"shasum":"8832fdc12e30940f8d8b5507fc816af174caa8f4"},{"_id":"public/2016/06/12/mvpRetrofitRxjava/index.html","modified":1466670013883,"shasum":"88735cfe33f7586ae306e6e2828744a95cc66964"},{"_id":"public/2016/05/24/Android-Photograph-Album2/index.html","modified":1466670013933,"shasum":"59dde143cb7b05d8894eddc1d6444e6896f9198d"},{"_id":"public/2016/05/06/jcenter2/index.html","modified":1466670013971,"shasum":"943cb98b8636fd9226546e2d02efc01f4c08e5f4"},{"_id":"public/2016/04/22/zxing/index.html","modified":1466670014024,"shasum":"b2f88c70f454f17e819cea2b2228f503ce5b000d"},{"_id":"public/2016/04/08/androidSdkStudioUpdate/index.html","modified":1466670014059,"shasum":"65d93a62612cb1bcc33256a1c735dd289b44b674"},{"_id":"public/2016/04/07/rxbus/index.html","modified":1466670014108,"shasum":"8aead1004005c782954971f6d8011862f0ae3c60"},{"_id":"public/2016/04/05/zhuangbi/index.html","modified":1466670014142,"shasum":"1c979c513f9f6d5ed355e3fea0e2063395ce4b1e"},{"_id":"public/2016/04/01/gradle4android3/index.html","modified":1466670014189,"shasum":"66ee3177dbc75d8146c138f1e3426af6b1c5b86a"},{"_id":"public/2016/03/31/gradle4android2/index.html","modified":1466670014227,"shasum":"79dd3989d5a6cb5bd8f0d442fe2ea8a4f8ebfafd"},{"_id":"public/2016/03/30/gradle4android1/index.html","modified":1466670014273,"shasum":"218d098eb628b73478a63340c9f6a9d94e2c5148"},{"_id":"public/2016/03/28/lambda4android/index.html","modified":1466670014321,"shasum":"993577a0448d698d3f17bc56c28472dae40175d0"},{"_id":"public/2016/03/17/GenymotionErrors/index.html","modified":1466670014356,"shasum":"1ca88b55fded0284b32c1c258a91646f08bf0bfd"},{"_id":"public/2016/03/13/MyCodeHobby/index.html","modified":1466670014401,"shasum":"535872fa7f03363d892587a32d3a63cf575365ac"},{"_id":"public/2016/03/04/TheSecondResignation/index.html","modified":1466670014436,"shasum":"32fb87b5584df815067da52b28bc2183757507a2"},{"_id":"public/2016/03/01/xmpp3/index.html","modified":1466670014483,"shasum":"a453d26b6e96ef7ee17a300b7e55db0d3efb9099"},{"_id":"public/2016/02/25/xmpp2/index.html","modified":1466670014526,"shasum":"91ef9bfba8b563bd4fc418f0396f870be87d76b1"},{"_id":"public/2016/02/24/xmpp1/index.html","modified":1466670014567,"shasum":"95b5452d6ce53f6b4a64fba7271397b68e1f8b88"},{"_id":"public/2016/02/04/RuntimePermission/index.html","modified":1466670014609,"shasum":"3ec3d15e6b135ffeaad57a105c9293afabbc9c90"},{"_id":"public/2016/01/18/rxjava/index.html","modified":1466670014665,"shasum":"0b1f0989cc88d9c397c2d6fcdcb845d1c35834f6"},{"_id":"public/2016/01/15/retrofit/index.html","modified":1466670014710,"shasum":"ffd5b338780ba0a3fddcbac9450f1e35986d13cd"},{"_id":"public/2016/01/01/CustomView/index.html","modified":1466670014756,"shasum":"7a013ad358937ca52d1205b003940f33297e51e5"},{"_id":"public/2015/12/27/2016key/index.html","modified":1466670014791,"shasum":"8bf3529b08bd4ae6644dc2d7dbc9290efda382ed"},{"_id":"public/2015/12/21/fragmentToolbar/index.html","modified":1466670014837,"shasum":"3a0c2832f2c3ea4df986720799c2a053baf7a870"},{"_id":"public/2015/12/19/MotionEvent/index.html","modified":1466670014879,"shasum":"168b0becacbad8a93bda63eb4f67082823fbc83a"},{"_id":"public/2015/12/06/PaintCanvas/index.html","modified":1466670014930,"shasum":"1796c8ad2a36b7cbf606bcb07405729be23ed8bc"},{"_id":"public/2015/12/04/ViewDragHelper/index.html","modified":1466670014986,"shasum":"920688d0afdefca499e6355dcdc1d7b2a34962ea"},{"_id":"public/2015/12/03/emulatorError/index.html","modified":1466670015023,"shasum":"390dc283213af3603f695cb8a049372143f7589e"},{"_id":"public/2015/11/25/WeWin/index.html","modified":1466670015068,"shasum":"413cf765ffed2b0ce8a314e52ad7414b970c0348"},{"_id":"public/2015/11/23/Animator/index.html","modified":1466670015111,"shasum":"d50080c6e2df9a32ae82c131c6c976047f87327e"},{"_id":"public/2015/11/20/DragView/index.html","modified":1466670015159,"shasum":"6261a7d7412be1e17697a615065e9b3b477652fe"},{"_id":"public/2015/11/17/CollapsingToolbarLayout/index.html","modified":1466670015199,"shasum":"e55cb63d4c8c818e0777aaaee2e2aa9c7def4f8c"},{"_id":"public/2015/11/17/CoordinatorLayout/index.html","modified":1466670015242,"shasum":"e12cc59abcd00e920bb8a5ac2ffd31617809d406"},{"_id":"public/2015/11/17/NavigationView/index.html","modified":1466670015285,"shasum":"9f7f71b1f947bbee4d97b0cd364a5bf748cc5cc3"},{"_id":"public/2015/11/16/LinearGradientTextView/index.html","modified":1466670015328,"shasum":"d65d26f79eff28e97b92eac1d2f12c6438da45ad"},{"_id":"public/2015/11/12/jcenter/index.html","modified":1466670015368,"shasum":"df82865fc12839bc9da12a16b4fb6dfcdf5955e3"},{"_id":"public/2015/11/10/gradle/index.html","modified":1466670015410,"shasum":"e7248b0e110a82ed578b1ddaf0afd65932ae7de7"},{"_id":"public/2015/11/10/addHeaderView/index.html","modified":1466670015446,"shasum":"401b2dff65c8dc1e09ca52bb4683fcab9e21ca8a"},{"_id":"public/2015/11/10/toolbar/index.html","modified":1466670015494,"shasum":"da1713ef062b08c91bec2a99f833be41e9ec89a7"},{"_id":"public/2015/11/09/dashishuo/index.html","modified":1466670015530,"shasum":"cd71764684cdc1846f063fd1e19a04de5d229cdd"},{"_id":"public/2015/11/06/DesignSupportLibrary/index.html","modified":1466670015572,"shasum":"d7de8a4ba53ae26b96d676e1a6b15fd4f5bb413d"},{"_id":"public/2015/11/03/processes-and-threads/index.html","modified":1466670015612,"shasum":"92a62ac4402e120ad06151cfa06ec693d5b90f3c"},{"_id":"public/2015/11/03/Intent/index.html","modified":1466670015655,"shasum":"132916b070abbce1d1ded8a42486f4f168d158c3"},{"_id":"public/2015/11/03/BroadcastReceiver/index.html","modified":1466670015690,"shasum":"bdc75459e9543d095a06b6bba7e050cb303111fe"},{"_id":"public/2015/11/02/service/index.html","modified":1466670015736,"shasum":"f146a2d85f70c906b59376e760e47c0536db6b7a"},{"_id":"public/2015/11/01/Activity/index.html","modified":1466670015775,"shasum":"02726ae61a47334d8b4871d08f4d35edcfb98fde"},{"_id":"public/2015/10/16/Volley/index.html","modified":1466670015825,"shasum":"56e0d9895ef6c01f5e968c7cc297723b9a2f4fdc"},{"_id":"public/2015/10/08/Font-Awesome/index.html","modified":1466670015871,"shasum":"765c9fb8903aff8cad69c8fd2ea2e681528d15f4"},{"_id":"public/2015/09/23/AndroidMVPSample/index.html","modified":1466670015914,"shasum":"15c117881e88659c9c5f2f9e980919b7b8009f15"},{"_id":"public/2015/09/15/RecyclerViewCardView/index.html","modified":1466670015961,"shasum":"d508d48d2b97b6fa4bbe33f54d1948a242223632"},{"_id":"public/2015/09/14/Picasso/index.html","modified":1466670015996,"shasum":"2b0d2131fbe6be93531fb70a9c905e1e66cc5772"},{"_id":"public/2015/09/14/PhotoView/index.html","modified":1466670016044,"shasum":"dab559be2cb6638a3dd7b976b929099b31337742"},{"_id":"public/2015/09/08/ViewAnimation/index.html","modified":1466670016080,"shasum":"a7b79e550cccb95a1a6bb4dd356ac051db1dfc34"},{"_id":"public/2015/09/02/SharePopupWindow/index.html","modified":1466670016131,"shasum":"33dc6f26ae56a4191bdef923841a32c1e2417399"},{"_id":"public/2015/08/29/contactIndex/index.html","modified":1466670016190,"shasum":"a7b3353cbb32df639c445b216f06fa8af76c9d74"},{"_id":"public/2015/08/28/PioneeringRoad/index.html","modified":1466670016223,"shasum":"c5fe6b6921fc49d76d261bdf649fcda150039063"},{"_id":"public/2015/08/19/ChangeTheme/index.html","modified":1466670016281,"shasum":"e920b19390a111e32fb2d27188a8a1c0f83b4c88"},{"_id":"public/2015/08/19/PreferenceUtils/index.html","modified":1466670016321,"shasum":"e7d070e3b4d380e41cd0b4481913c26a82dfb593"},{"_id":"public/2015/08/10/Drawable-to-Bitmap/index.html","modified":1466670016368,"shasum":"3237059685cbc4923ea3621eac36a89e1fc82c2c"},{"_id":"public/2015/08/10/android-small-knowledge-base/index.html","modified":1466670016473,"shasum":"aea660f731e23b145453bcbf877ee755a729a4e2"},{"_id":"public/2015/08/04/TodayEmotion/index.html","modified":1466670016521,"shasum":"d4c6de8def3029b07ec92edce77a296880099bdd"},{"_id":"public/2015/08/03/Palette/index.html","modified":1466670016574,"shasum":"2b34d53b158e8cdeb1890a9c483b82951f95f0ef"},{"_id":"public/2015/08/03/TabLayout/index.html","modified":1466670016629,"shasum":"b132dc7cfcf0743694bfef66a271137d300b909c"},{"_id":"public/2015/07/31/build-blog-by-hexo/index.html","modified":1466670016679,"shasum":"8f8a991cc984b6593d4b14df2c936903cf383006"},{"_id":"public/2015/07/30/hello-hexo/index.html","modified":1466670016731,"shasum":"fd58aa67d4656da515777676d89a9535785287d7"},{"_id":"public/2015/07/29/Android-Iconics/index.html","modified":1466670016777,"shasum":"7c02bd530df93c5ca740f86a1c7e6e20bfa8179e"},{"_id":"public/2015/07/29/AppInfo/index.html","modified":1466670016833,"shasum":"416ebabdb331aec681fd7fa0297feef48417956f"},{"_id":"public/2015/07/27/SaveImageToGallery/index.html","modified":1466670016878,"shasum":"c2c7b40fa55adc5d427690898629bb3cbef41799"},{"_id":"public/2015/07/24/PullLoadMoreRecyclerView/index.html","modified":1466670016954,"shasum":"fab1f08e1fd50b2b299b8a2edcd582531aa106f7"},{"_id":"public/2015/07/24/AndroidDeveloperSurvey/index.html","modified":1466670016993,"shasum":"4f6aa596629df7052def89e4d4de35c4f4b45126"},{"_id":"public/2015/07/21/AndroidStudioError/index.html","modified":1466670017029,"shasum":"2368002544523ae58859217e1f2eaad10a72d489"},{"_id":"public/2015/07/13/SavingFiles/index.html","modified":1466670017072,"shasum":"03eb5270831d45151d53f50056d348e28c56793b"},{"_id":"public/2015/07/09/phone_space/index.html","modified":1466670017111,"shasum":"98b6abcb73f44b3e89307d725be5ce13aeb6581e"},{"_id":"public/2015/07/08/TimeUtil/index.html","modified":1466670017154,"shasum":"1fde561b838a7551a2deeb72d3222e2538866b5e"},{"_id":"public/2015/07/08/listView_item_state/index.html","modified":1466670017194,"shasum":"592eb38131dbc94c08193a595619b868ec4c619c"},{"_id":"public/2015/06/10/fragmentMenu/index.html","modified":1466670017233,"shasum":"85cd12250433bc2cbc5f31232a5777de5c8ce2d0"},{"_id":"public/2015/06/10/checkPermission/index.html","modified":1466670017267,"shasum":"3b1acc21561e9b58dbd0dec397d7e44ae396c938"},{"_id":"public/2015/05/28/LayoutParams/index.html","modified":1466670017308,"shasum":"2b1528b4573ede6b54ade8bc131ae0ebf1593deb"},{"_id":"public/2015/05/25/android-studio-share-to-svn/index.html","modified":1466670017343,"shasum":"a204bda76513c812fb2dd32377d2a5963a01097f"},{"_id":"public/2015/05/12/AdFund/index.html","modified":1466670017381,"shasum":"2d3b29906c739f9907d030b1c7d1175cae561c05"},{"_id":"public/2015/05/06/Defining_Custom_Animations/index.html","modified":1466670017415,"shasum":"70b2332da51154b36a1d92ca0acdff72ad8d4321"},{"_id":"public/2015/04/30/ResResources/index.html","modified":1466670017454,"shasum":"9c57ffdf3aaddcf6c6bd805d44959feca195ddf8"},{"_id":"public/2015/04/28/CreatingCustomViews/index.html","modified":1466670017487,"shasum":"ade53d84963f22de953646d728fcdb64974404aa"},{"_id":"public/2015/04/28/LoadMoreListView/index.html","modified":1466670017533,"shasum":"11d2a8fcac40c781c303ccb6a492840bb16447ff"},{"_id":"public/2015/04/27/Split/index.html","modified":1466670017568,"shasum":"9a9aa241a0e458a1077462fbb593b16c5f6c100e"},{"_id":"public/2015/04/23/CanvasToPhoto/index.html","modified":1466670017604,"shasum":"4ba6b0fda86cea1d4707ac7f0cead796fa0f99f0"},{"_id":"public/2015/04/23/weiyan/index.html","modified":1466670017644,"shasum":"df044d29900d034e407ddaac7fd34a4ca4330be1"},{"_id":"public/2015/04/23/LayoutInflater/index.html","modified":1466670017680,"shasum":"bdf6b3681fff0c6d716d167e0f7c9e61c8343531"},{"_id":"public/2015/04/21/SqliteSample/index.html","modified":1466670017732,"shasum":"3de116b6b3c5d61a6ae9e387ae6b3aba234b07c9"},{"_id":"public/2015/04/17/CustomToast/index.html","modified":1466670017778,"shasum":"27459e311c53796edbd0f9519b839cf7dd829c53"},{"_id":"public/2015/03/27/2015key/index.html","modified":1466670017813,"shasum":"73bf9a07a0b0d32ff6ca4a3083e1d9aefde2bbea"},{"_id":"public/2015/01/21/sdk-update/index.html","modified":1466670017852,"shasum":"28336057ee3dad169e5d26f212de462bd8aa1604"},{"_id":"public/2015/01/21/android-samples-download/index.html","modified":1466670017887,"shasum":"fada001c7c7bae57303426d5d7aafd71c8873d4f"},{"_id":"public/2015/01/14/wochat/index.html","modified":1466670017922,"shasum":"37ef3d1f50b7ea19c82bf4e1973a17838980af43"},{"_id":"public/2015/01/13/Context-Activity/index.html","modified":1466670017962,"shasum":"2285e94b24b3e1319e9ceb2a661e8c9823d98fe9"},{"_id":"public/2015/01/12/google/index.html","modified":1466670017997,"shasum":"9c908cb7f872a6273f0cc0a959678b3f93cdaf7f"},{"_id":"public/2014/12/30/company/index.html","modified":1466670018039,"shasum":"382ed22de0bdda220143144aac43aa0288f033f5"},{"_id":"public/2014/12/25/mobile/index.html","modified":1466670018074,"shasum":"8a2f095031bd497173103d6f881466823c60cb08"},{"_id":"public/2014/12/11/SearchView/index.html","modified":1466670018117,"shasum":"b75229ab3ed88fe48881b2040e9ceb56d402b6b8"},{"_id":"public/2014/12/05/jarsigner/index.html","modified":1466670018152,"shasum":"dd3781544c3b58bf330de632676f39d16d125286"},{"_id":"public/2014/11/24/lock-screen-video/index.html","modified":1466670018194,"shasum":"f5db07e607385b9710123df788906aca52d1abdb"},{"_id":"public/2014/11/22/change-sdk-path/index.html","modified":1466670018229,"shasum":"d30660aaf249ac41320106cfd3691c5e2ad42066"},{"_id":"public/2014/11/10/Android-Photograph_Album/index.html","modified":1466670018273,"shasum":"7728713cd8275379b64861d1810839757e419755"},{"_id":"public/2014/11/09/AndroidSamples/index.html","modified":1466670018308,"shasum":"8545d5003675b46cd76e215e0856e3800420e96f"},{"_id":"public/2014/10/30/qiniu-photo-bed/index.html","modified":1466670018348,"shasum":"e5a9e2339c433effb12d69dc829c03c5ce92c8d6"},{"_id":"public/2014/10/29/androidwords/index.html","modified":1466670018384,"shasum":"8c78fc17e571640c6eecf4638aeb67c8ff45796a"},{"_id":"public/2014/10/27/android-async-http/index.html","modified":1466670018419,"shasum":"a0573b9fe48c146b301278afd0d3db3ed45307aa"},{"_id":"public/2014/10/26/build-blog/index.html","modified":1466670018463,"shasum":"1dc1dff31a505c3fbf4246ecbca8b95bfb0f1472"},{"_id":"public/2014/10/21/Android-Studio-Genymotion/index.html","modified":1466670018497,"shasum":"42039c1f12c7e496f9e07aa46cee62ca5856ce12"},{"_id":"public/2014/10/21/Android-Studio-shortcut-keys-arranged-like-Eclipse/index.html","modified":1466670018537,"shasum":"ceca0f70c3357e9c9029a0e8472773a958fa87b9"},{"_id":"public/2014/10/13/ninety-nine-life-sentiment/index.html","modified":1466670018581,"shasum":"bcfe27c6da0b8e34c2066e3b1ac87ccba0674700"},{"_id":"public/2014/09/15/qinziyouwan/index.html","modified":1466670018621,"shasum":"7c4683334f3daa9f463ded6c63d9adec21c94803"},{"_id":"public/2014/08/26/eclipse-git/index.html","modified":1466670018654,"shasum":"b5198b342c785c4902d557f13a044ef6b9b8cffb"},{"_id":"public/2014/06/30/custom-debug-keystore/index.html","modified":1466670018695,"shasum":"8dddce9cd78a53b3742014baeb82c9d0f717b03c"},{"_id":"public/2014/06/24/java-lang-IllegalStateException-Fragment-not-attached-to-Activity/index.html","modified":1466670018730,"shasum":"8e2e14fea7e43d6dfc170da93bb68633d0c53ad1"},{"_id":"public/2014/04/15/shengmingzhiyuan/index.html","modified":1466670018769,"shasum":"19fc6806149e01be5be59b2730b8a864300d95eb"},{"_id":"public/2013/12/15/weilian/index.html","modified":1466670018803,"shasum":"dfca80b2488ebc6d782694e3b7296bb751aff7e3"},{"_id":"public/2013/11/22/Export-aborted-because-fatal-lint-errors-were-found/index.html","modified":1466670018843,"shasum":"6439c4a62ac5c25d5f693f3da52832137e7d34f3"},{"_id":"public/2013/10/15/boentang/index.html","modified":1466670018876,"shasum":"5b235b04f273fe87e6ca235e6b2a04ad5ac393fb"},{"_id":"public/2013/07/23/how-to-prevent-the-APK-program-by-decompile/index.html","modified":1466670018916,"shasum":"1f9939892346f18d6916b0e348afe964d590d88a"},{"_id":"public/2013/07/23/screen-adaptation/index.html","modified":1466670018950,"shasum":"f58206f51fd4ad46cf217b125bc8e25d514be222"},{"_id":"public/2013/07/19/listView/index.html","modified":1466670018984,"shasum":"162cfcd7cfab792109a5b8978041085c44b7be3e"},{"_id":"public/2013/07/18/mobile-phone-information-acquisition/index.html","modified":1466670019050,"shasum":"e6e9559c38a21fdee3defd25ddbf056947395536"},{"_id":"public/2013/07/09/shape/index.html","modified":1466670019092,"shasum":"49c5e138c63791b6105002371cbcc620486ce0b2"},{"_id":"public/2013/06/15/goufangche/index.html","modified":1466670019128,"shasum":"2ced8ac17c88250c77059750425b7f6456fa4298"},{"_id":"public/2013/06/14/android-developers-should-keep-the-following-characteristics/index.html","modified":1466670019169,"shasum":"71cd45d8b640c4736c06396f07fd393382f91d4c"},{"_id":"public/2013/03/02/methods-SQLite-were-randomly-selected-for-the-N/index.html","modified":1466670019205,"shasum":"efba2772f67f7b3ea1b052036228cb4f9fd7a71e"},{"_id":"public/archives/index.html","modified":1466670019255,"shasum":"64f8269fe9cdddfffd6adeabef4e17c6f771642a"},{"_id":"public/archives/page/2/index.html","modified":1466670019299,"shasum":"dd3354f4f3230918056bc8f823df8a05aca75678"},{"_id":"public/archives/page/3/index.html","modified":1466670019348,"shasum":"54d0f41b72bc06fc02d79cdb32c283fb8bc2c9c0"},{"_id":"public/archives/page/4/index.html","modified":1466670019392,"shasum":"289c07f19c5c67c65079da2129cb7cbe844c1bf0"},{"_id":"public/archives/page/5/index.html","modified":1466670019441,"shasum":"2337bfa126b0ce2b1a94218300fa9514fea5797c"},{"_id":"public/archives/page/6/index.html","modified":1466670019484,"shasum":"96e04b8ee9a8176a1b9bed07392e259de9d30478"},{"_id":"public/archives/page/7/index.html","modified":1466670019534,"shasum":"a8de0c796fb66710ad58fbbae0ea209f48075dbc"},{"_id":"public/archives/page/8/index.html","modified":1466670019577,"shasum":"faabfc50f8f1ab53d2d933501efa597bd34d6579"},{"_id":"public/archives/page/9/index.html","modified":1466670019626,"shasum":"2f66896085b921a6a73b2d2af953299e83a85067"},{"_id":"public/archives/page/10/index.html","modified":1466670019669,"shasum":"2a55e2035f77928a6af9aabf3fff6773a88862b7"},{"_id":"public/archives/page/11/index.html","modified":1466670019717,"shasum":"6bba7caa296cc6058deb4fe6f0ed9004c69fd3ab"},{"_id":"public/archives/page/12/index.html","modified":1466670019762,"shasum":"72b8e47978900c328af370203509020d5e83c490"},{"_id":"public/archives/page/13/index.html","modified":1466670019806,"shasum":"3032f35166462a52ea1a19bdd7f599490b33b48c"},{"_id":"public/archives/2013/index.html","modified":1466670019849,"shasum":"2ceef222c891ec0e537dee5e883c7568517a50a9"},{"_id":"public/archives/2013/page/2/index.html","modified":1466670019878,"shasum":"cb67278c5269b2cfd8a18345d0dbf7346d71037c"},{"_id":"public/archives/2013/03/index.html","modified":1466670019904,"shasum":"3a7a0890c375b21d8ac8950e322e810f99280ff1"},{"_id":"public/archives/2013/06/index.html","modified":1466670019932,"shasum":"b75dae47a4b59f42a844b1005379b4f63fa687b6"},{"_id":"public/archives/2013/07/index.html","modified":1466670019972,"shasum":"91f53072590b6db4297341cd3f10320236e755a7"},{"_id":"public/archives/2013/10/index.html","modified":1466670019998,"shasum":"b4679ea4d4c3d2bd20555161a1034a7f60ba515b"},{"_id":"public/archives/2013/11/index.html","modified":1466670020029,"shasum":"5342065de23683fc8849141c4af58257dd354eb2"},{"_id":"public/archives/2013/12/index.html","modified":1466670020057,"shasum":"b07b8f135218caca26f016b5db6ca7078f491adb"},{"_id":"public/archives/2014/index.html","modified":1466670020100,"shasum":"2e989eff800bc4d8741f543d275ffea9413a1da0"},{"_id":"public/archives/2014/page/2/index.html","modified":1466670020148,"shasum":"34356a5f268a023d1d5dde057a85bea0c248e34a"},{"_id":"public/archives/2014/04/index.html","modified":1466670020175,"shasum":"837268e7a496177e957b9a5aa3a372838feb32e6"},{"_id":"public/archives/2014/06/index.html","modified":1466670020210,"shasum":"04e998e92b2cafd0fe0299619b515570ac47460b"},{"_id":"public/archives/2014/08/index.html","modified":1466670020237,"shasum":"5411ccb5018a9bfeefcd6faad5f72d1bff65895f"},{"_id":"public/archives/2014/09/index.html","modified":1466670020263,"shasum":"a10d8e79c71fd8ff54b132ff8ac94ebaad63bef3"},{"_id":"public/archives/2014/10/index.html","modified":1466670020307,"shasum":"d74654ce56adb811ba4eddceadc45e97c8b04ff4"},{"_id":"public/archives/2014/11/index.html","modified":1466670020340,"shasum":"6f4c8dd231f7ff743144108fe1f2c499639341c1"},{"_id":"public/archives/2014/12/index.html","modified":1466670020378,"shasum":"c3dc78e2153b0923121c248b7bf1a126e3aba2fe"},{"_id":"public/archives/2015/index.html","modified":1466670020424,"shasum":"43a17bceb5322797251b35f1e7be9113cc567970"},{"_id":"public/archives/2015/page/2/index.html","modified":1466670020475,"shasum":"19dd0e25d8d591e43fdf62543e3043394e2412e5"},{"_id":"public/archives/2015/page/3/index.html","modified":1466670020518,"shasum":"29ae927ec8d5a797c0bf1f86fd972d7c82cc99ff"},{"_id":"public/archives/2015/page/4/index.html","modified":1466670020567,"shasum":"54f01077c66b21dc2ee6c20ae6da89810453ebc1"},{"_id":"public/archives/2015/page/5/index.html","modified":1466670020612,"shasum":"12a4c3139b3ab7e73ea05bbc153c5fcc9c6f1fdc"},{"_id":"public/archives/2015/page/6/index.html","modified":1466670020661,"shasum":"0e301a99a4e1ca6af470eebc40abad1af0476f21"},{"_id":"public/archives/2015/page/7/index.html","modified":1466670020705,"shasum":"10b43b56617ee4a2c9ada50a8c10917551aedb2d"},{"_id":"public/archives/2015/page/8/index.html","modified":1466670020744,"shasum":"c194071a9aac317783e797b46dfd5085c37f6ddf"},{"_id":"public/archives/2015/01/index.html","modified":1466670020778,"shasum":"b7f1bf3521516437d8b6cfb421cb67098fbe4835"},{"_id":"public/archives/2015/03/index.html","modified":1466670020806,"shasum":"5196d7156445cf2e449307ad1d0feac0e2888630"},{"_id":"public/archives/2015/04/index.html","modified":1466670020854,"shasum":"028833cba762f9575addce7b4f2d3b76697fd085"},{"_id":"public/archives/2015/05/index.html","modified":1466670020887,"shasum":"d851946b90bf8d4436e5812a3f95bed5fb4b3026"},{"_id":"public/archives/2015/06/index.html","modified":1466670020921,"shasum":"9c1e9b8c3c30c7bc319e2cbcf67b978bb1f39c51"},{"_id":"public/archives/2015/07/index.html","modified":1466670020964,"shasum":"d5d26cb097e6f01571c35d6787ec4c06cf4a1464"},{"_id":"public/archives/2015/07/page/2/index.html","modified":1466670020998,"shasum":"500c1c8e9ec06205435161870a27ae0fa0bb6c58"},{"_id":"public/archives/2015/08/index.html","modified":1466670021042,"shasum":"d7e10c248cfe63a8b99999c2118665036d8a99be"},{"_id":"public/archives/2015/09/index.html","modified":1466670021079,"shasum":"ae237ea06505a3e806894eaae752ed3f18bfee9b"},{"_id":"public/archives/2015/10/index.html","modified":1466670021113,"shasum":"4a6831f683f7ac41d707742f14d847a2968cc081"},{"_id":"public/archives/2015/11/index.html","modified":1466670021159,"shasum":"03aff42ef7e2b3eac6b1d71db321207f04fa192a"},{"_id":"public/archives/2015/11/page/2/index.html","modified":1466670021207,"shasum":"67f09cd2b38f54cbbc82d18ab32a66120cd4b5bf"},{"_id":"public/archives/2015/12/index.html","modified":1466670021246,"shasum":"00d69c71c939c8f6a425ad82f0fc50dcf1878d8c"},{"_id":"public/archives/2016/index.html","modified":1466670021297,"shasum":"a5a15470a97319d81ef9ed0700eeafa878d1d32b"},{"_id":"public/archives/2016/page/2/index.html","modified":1466670021341,"shasum":"fad55a92025cb46be277f2cbe3dacc3f466212f9"},{"_id":"public/archives/2016/page/3/index.html","modified":1466670021378,"shasum":"d1bde829503a9ab4952ae151a08a21c643b8a7cb"},{"_id":"public/archives/2016/01/index.html","modified":1466670021409,"shasum":"7fcdfefa5668779b4833d5d41b7ad9f28cfa467a"},{"_id":"public/archives/2016/02/index.html","modified":1466670021438,"shasum":"ef53cfc664c472ff9785c834c5e30f6bec45820a"},{"_id":"public/archives/2016/03/index.html","modified":1466670021484,"shasum":"bc2a7d0eab309589f933b33b66f654960b869aff"},{"_id":"public/archives/2016/04/index.html","modified":1466670021520,"shasum":"b474a09a0ade44fee7cb381eb0ffcf99eb53f9fe"},{"_id":"public/archives/2016/05/index.html","modified":1466670021554,"shasum":"c42415c41ffac5d3e95ea6387b13a43755565120"},{"_id":"public/archives/2016/06/index.html","modified":1466670021584,"shasum":"76a3c37979efb9996f539a754e85c170a6b12ff2"},{"_id":"public/index.html","modified":1466670021645,"shasum":"0f452dcfe30e1ab0638596b4e38663de4b03fee6"},{"_id":"public/page/2/index.html","modified":1466670021691,"shasum":"f7d4b68c4de4cef2c707c3674b219c2874b34fdc"},{"_id":"public/page/3/index.html","modified":1466670021754,"shasum":"37da48d2d699ac32494d50f633ea2815c7c549c8"},{"_id":"public/page/4/index.html","modified":1466670021812,"shasum":"08e237bead571961a1764b42a6d1e85a562d0c60"},{"_id":"public/page/5/index.html","modified":1466670021865,"shasum":"cb3d0eb8ff130b4c6cc61ef75a317b5f64bcd4bd"},{"_id":"public/page/6/index.html","modified":1466670021923,"shasum":"7ff219b2c18af6aa02bbb20fc409fb7d83ca16b2"},{"_id":"public/page/7/index.html","modified":1466670021981,"shasum":"3a6c8f1cf504062a7af0539777f4a50c7dc4f476"},{"_id":"public/page/8/index.html","modified":1466670022035,"shasum":"f127cf83dadeeb0c9fbae679152f223c13b68d5e"},{"_id":"public/page/9/index.html","modified":1466670022093,"shasum":"5d8bb7a9dfc96169fe71193f84c0d8acea45a25d"},{"_id":"public/page/10/index.html","modified":1466670022144,"shasum":"55934b304e5607c1b27ea45d7ce77c89cb03d971"},{"_id":"public/page/11/index.html","modified":1466670022200,"shasum":"ecbc0741a05fd4ca3e67eb107207a6bbc5bcaca1"},{"_id":"public/page/12/index.html","modified":1466670022256,"shasum":"449e473009a36dd50bddd7c0434f20a09658b67c"},{"_id":"public/page/13/index.html","modified":1466670022304,"shasum":"166058da79954dc644fb853ef2e6df34904665a7"},{"_id":"public/categories/zxing/index.html","modified":1466670022333,"shasum":"e52a04a7fa02b849f04ec19b0b9d7adf90139cd7"},{"_id":"public/categories/Life/index.html","modified":1466670022369,"shasum":"6e4b0d6bd30593b15e73f9dbb92625644d582057"},{"_id":"public/categories/Life/page/2/index.html","modified":1466670022397,"shasum":"7be8685c41644fced800c2e13eb304cf37711dfa"},{"_id":"public/categories/XMPP/index.html","modified":1466670022427,"shasum":"3aed3e8bb4864353dfca2dd19ee955472872c21c"},{"_id":"public/categories/Android/index.html","modified":1466670022460,"shasum":"295cf0844a08ff6cdf749aeff91e2bfe8a4a25e7"},{"_id":"public/categories/Android/page/2/index.html","modified":1466670022493,"shasum":"73f8c20ca72948373aaa1a000f270b192d6c4a95"},{"_id":"public/categories/Android/page/3/index.html","modified":1466670022533,"shasum":"c5e2da28bcef398d417ce70b5c8b62eaf9377b06"},{"_id":"public/categories/Android/page/4/index.html","modified":1466670022569,"shasum":"e7c6e4f1aae2b4a9e5d750b2a948b3685949aa69"},{"_id":"public/categories/Android/page/5/index.html","modified":1466670022608,"shasum":"20673eb359b827181fa9d67727328aad31c0c815"},{"_id":"public/categories/Android/page/6/index.html","modified":1466670022643,"shasum":"a7ad973ee4d175c94c7d80b0642a59fa28d225ec"},{"_id":"public/categories/Android/page/7/index.html","modified":1466670022678,"shasum":"d8f89c3324e8ff289dcb44c1b07793316febc4c9"},{"_id":"public/categories/Android/page/8/index.html","modified":1466670022711,"shasum":"50e1a85e81e9914530d2a9b37f80c6000a702786"},{"_id":"public/categories/App/index.html","modified":1466670022744,"shasum":"ab3d6b1ca566aad3fa39b9efa096d091a96b3a4f"},{"_id":"public/categories/SourceAnalysis/index.html","modified":1466670022769,"shasum":"d1b59811f9b656a699b3b5cfa79734453b4852e3"},{"_id":"public/categories/RxJava/index.html","modified":1466670022801,"shasum":"af73775f277dba7fc08ce5c8d663cd9214f12d87"},{"_id":"public/categories/Retrofit/index.html","modified":1466670022826,"shasum":"402aa1edc184ff2dab4edcbf2edc0c6242f21e65"},{"_id":"public/categories/github/index.html","modified":1466670022855,"shasum":"78909e4e7a3d04c8c4de212d56ef069a218ee5ff"},{"_id":"public/categories/jcenter/index.html","modified":1466670022888,"shasum":"c49c55bf73d189c0e3a14c497e12837e6c19299b"},{"_id":"public/categories/hexo/index.html","modified":1466670022915,"shasum":"e0179ea252340d0cc7f85ff9e4e7f79d1ae3f038"},{"_id":"public/categories/Gradle/index.html","modified":1466670022942,"shasum":"96e91cc4940b08ab23cc80839e48535a329fca7a"},{"_id":"public/categories/Android-Studio/index.html","modified":1466670022977,"shasum":"09bd603a7d17541656465ff4d3ef622d03dc3e26"},{"_id":"public/categories/jekyll/index.html","modified":1466670023001,"shasum":"db8fb259a9c8db2a7ce6cb61020bcf1e698e0811"},{"_id":"public/categories/DesignSupportLibrary/index.html","modified":1466670023031,"shasum":"1dc4bb2e5e334649275762bed65fb1f0e5f11b58"},{"_id":"public/tags/zxing/index.html","modified":1466670023062,"shasum":"d05d9229e45ebe8612c5dc8d144bdca01a4ab070"},{"_id":"public/tags/Life/index.html","modified":1466670023097,"shasum":"8287311c3d87b61cf5da90fd5a345cdf56e8620c"},{"_id":"public/tags/Life/page/2/index.html","modified":1466670023128,"shasum":"96e536ea16414f5cd5b482c3c99a3c5e632f2f9f"},{"_id":"public/tags/XMPP/index.html","modified":1466670023157,"shasum":"97372abb7d3ace1bc4d0e6bfe3df80343e791b19"},{"_id":"public/tags/Smack/index.html","modified":1466670023185,"shasum":"e87eb9fd2ba1cb8b48366ee95d86ec070db6e68a"},{"_id":"public/tags/openfire/index.html","modified":1466670023223,"shasum":"8d5c97258faa4d3fdcc386bfe804ab3fcc7da96b"},{"_id":"public/tags/Android/index.html","modified":1466670023259,"shasum":"7776bee7c7cfb055cf6412c7edb6f2a0d5cf1824"},{"_id":"public/tags/Android/page/2/index.html","modified":1466670023292,"shasum":"8cfbfca9a122e215b9f14c094a71408ef0dd5c9c"},{"_id":"public/tags/Android/page/3/index.html","modified":1466670023332,"shasum":"92ee6029e08599ceff17e10dc525f1f6f4c49cec"},{"_id":"public/tags/Android/page/4/index.html","modified":1466670023367,"shasum":"08bc94b7df22c344fe41041d63015ceda9651d41"},{"_id":"public/tags/Android/page/5/index.html","modified":1466670023409,"shasum":"c6460fa02d56b48529a4815d02755d465a75aaa5"},{"_id":"public/tags/Android/page/6/index.html","modified":1466670023433,"shasum":"eb94b384f12b4b7778a3d69b332c03ba30afca24"},{"_id":"public/tags/WeiYan/index.html","modified":1466670023462,"shasum":"5c44d99424e885fe2c553b09cdcbec8e431c7e24"},{"_id":"public/tags/weilian/index.html","modified":1466670023485,"shasum":"18050cb13c1e487ed1910adf3183c6d656ed67b9"},{"_id":"public/tags/uCrop/index.html","modified":1466670023517,"shasum":"2af5596263605df4f045da36b220d55d7595b6c8"},{"_id":"public/tags/Toolbar/index.html","modified":1466670023542,"shasum":"d8f438657cc9cb29a13392f183bee1c0f775cd65"},{"_id":"public/tags/shengmingzhiyuan/index.html","modified":1466670023569,"shasum":"bb0cab32af47c217ac2b3f1a0757ec9fc32168d0"},{"_id":"public/tags/Shape/index.html","modified":1466670023602,"shasum":"c5ed57c3000574342aac3e81779b8a51c5923d32"},{"_id":"public/tags/Service/index.html","modified":1466670023627,"shasum":"0e7ae67aaeff1860f59974974e7e34cc9da0884a"},{"_id":"public/tags/Android-Studio/index.html","modified":1466670023657,"shasum":"62c61c6a94fa53b4c4c61f974df27a7a69ef80dc"},{"_id":"public/tags/RxJava/index.html","modified":1466670023692,"shasum":"58a3dd4a07ba9a7415adeda52ca947ab5749ddb8"},{"_id":"public/tags/RxBus/index.html","modified":1466670023717,"shasum":"be990312bceeeec60d8be710350da2b85c552901"},{"_id":"public/tags/Retrofit/index.html","modified":1466670023743,"shasum":"6f0a0a7abd24bd0fd031afa118efe04461dd7a19"},{"_id":"public/tags/qinziyouwan/index.html","modified":1466670023773,"shasum":"65bc82fe259d856d9bd9132a5f623809bf74ee09"},{"_id":"public/tags/github/index.html","modified":1466670023803,"shasum":"4ff0e74e5c847a50794d0dfc31c1f2007eddd1d5"},{"_id":"public/tags/Processes/index.html","modified":1466670023830,"shasum":"048275a1ad3390bd2f1a0bc6567f8ab248ded24c"},{"_id":"public/tags/Threads/index.html","modified":1466670023862,"shasum":"d556545effa50dc98848b151394580846b9f0944"},{"_id":"public/tags/SQLite/index.html","modified":1466670023890,"shasum":"46eefea3a0a075f4563ca0f0f574dc83ad619b8f"},{"_id":"public/tags/MVP/index.html","modified":1466670023916,"shasum":"c61cb73208e921742602805a6f82eb811cf8119f"},{"_id":"public/tags/Video/index.html","modified":1466670023947,"shasum":"6e8764ffce8ee7307c41ae0a3a53cfe41463cc25"},{"_id":"public/tags/RecyclerView/index.html","modified":1466670023975,"shasum":"4405822eaebea4e001b6ec4800c5170ebe1e1d12"},{"_id":"public/tags/ListView/index.html","modified":1466670024002,"shasum":"3951bd06e1aa553cc14e35ca0b1484acc4a7ac2c"},{"_id":"public/tags/lambda/index.html","modified":1466670024034,"shasum":"f4aba195cb8996a9a8f86487d014fa094d9053eb"},{"_id":"public/tags/retrolambda/index.html","modified":1466670024059,"shasum":"d32bcb603f3ddec9f76ac6750e9d15dcdf7b1536"},{"_id":"public/tags/jcenter/index.html","modified":1466670024087,"shasum":"da170123db67d24cbd3dce76e726ce5661e03b66"},{"_id":"public/tags/Fragment/index.html","modified":1466670024119,"shasum":"9c414107239178f52bcd17a21d4a8d741e8cea80"},{"_id":"public/tags/jarsigner/index.html","modified":1466670024143,"shasum":"ba3e5a4ca7356f282a14dad88e5f728ddf3cbc14"},{"_id":"public/tags/hexo/index.html","modified":1466670024166,"shasum":"be2cc2d621371b146b35fd1c78bd70f4f60d665f"},{"_id":"public/tags/Gradle/index.html","modified":1466670024200,"shasum":"8453496e0b0de41640b29b5e16dfa912a7616d36"},{"_id":"public/tags/gradle/index.html","modified":1466670024225,"shasum":"41d0a22166695853bdb3fc2182568426450384e2"},{"_id":"public/tags/goufangche/index.html","modified":1466670024250,"shasum":"8244463120038e4efc17a34a6a6009314387864b"},{"_id":"public/tags/emulator/index.html","modified":1466670024283,"shasum":"e37021268c81bf212d97ca05e504a420ac93016d"},{"_id":"public/tags/git/index.html","modified":1466670024310,"shasum":"9e92a120965ff0751a46b00c346eff6b69109d02"},{"_id":"public/tags/App/index.html","modified":1466670024338,"shasum":"b81f7cd0244db59b5e647708a3080ef4c6933658"},{"_id":"public/tags/contact/index.html","modified":1466670024370,"shasum":"d3817cdbed58ed155bfa2d004ecd4bdb8a473d51"},{"_id":"public/tags/Permission/index.html","modified":1466670024397,"shasum":"60d3efaba4fcddf15b55e7e3b0a96df8f86144b1"},{"_id":"public/tags/jekyll/index.html","modified":1466670024423,"shasum":"ad0c90d2e370551156bcec09ba316d3fdcb811f8"},{"_id":"public/tags/boentang/index.html","modified":1466670024455,"shasum":"dc57d422368bfbc58fed5e4a0ee2406ca8fc3e6e"},{"_id":"public/tags/SDK/index.html","modified":1466670024482,"shasum":"e57543c1a68f5234d85f256616c8f0119485521e"},{"_id":"public/tags/async-http/index.html","modified":1466670024508,"shasum":"8c700c8493cb877d4221219ccbd7ff27c93474a5"},{"_id":"public/tags/addHeaderView/index.html","modified":1466670024531,"shasum":"16737178d683c557a93fb08983b643b1274f449b"},{"_id":"public/tags/WeWin/index.html","modified":1466670024562,"shasum":"0f26f693a0ca031a0a3606ec0b14846fd126dd55"},{"_id":"public/tags/Volley/index.html","modified":1466670024589,"shasum":"64f326414376e5a11bb8b6ef8a33ce0b1aa18368"},{"_id":"public/tags/ViewDragHelper/index.html","modified":1466670024615,"shasum":"b96f884b2155bd07d7d1604fea6a91df00b1656e"},{"_id":"public/tags/Animation/index.html","modified":1466670024647,"shasum":"b10ee591df274917e8ebc44703ad69d57db52067"},{"_id":"public/tags/DesignSupportLibrary/index.html","modified":1466670024678,"shasum":"255da7db3635447364026a3ec64b4d33a33bc770"},{"_id":"public/tags/TabLayout/index.html","modified":1466670024704,"shasum":"6dd36b9f56d8b9cee06131d1e543ee90e31b6884"},{"_id":"public/tags/Sqlite/index.html","modified":1466670024737,"shasum":"bb50378369d0280b8a0d71459717bbb3ad62be96"},{"_id":"public/tags/Canvas/index.html","modified":1466670024766,"shasum":"b974e83d52d0019398f805bb8975ca9c411ab4bc"},{"_id":"public/tags/PopupWindow/index.html","modified":1466670024792,"shasum":"18c35c26dc1ffd63dd78cc27ef17d6771d030772"},{"_id":"public/tags/Actionbar/index.html","modified":1466670024825,"shasum":"6fdde233c9ba48d7749690b03a90199db21e73e3"},{"_id":"public/tags/SearchView/index.html","modified":1466670024851,"shasum":"a2abfb4d9b1e19aa422c193a35ae71ecc4e98dde"},{"_id":"public/tags/RuntimePermission/index.html","modified":1466670024878,"shasum":"74f5a37e18c6de2e101db0423b0ca65b84bac61f"},{"_id":"public/tags/CardView/index.html","modified":1466670024902,"shasum":"fa6aa99c55d46582804cfe2968bb6b349284744d"},{"_id":"public/tags/SharedPreferences/index.html","modified":1466670024918,"shasum":"95cbc551ae173d46dea0c3727def0c15dd3ae718"},{"_id":"public/tags/PioneeringRoad/index.html","modified":1466670024957,"shasum":"bc7a8143cd67325d0b70e569ab5ba0b74430de6a"},{"_id":"public/tags/Picasso/index.html","modified":1466670024989,"shasum":"23bd75c0eca924a389055b98a9a832ce00ae896a"},{"_id":"public/tags/PhotoView/index.html","modified":1466670025014,"shasum":"c3e1cfee0ff6abd091fd402912867c5f52218200"},{"_id":"public/tags/Palette/index.html","modified":1466670025037,"shasum":"3e7ccb4f298fffb3511fca090c750087628cd904"},{"_id":"public/tags/Paint/index.html","modified":1466670025067,"shasum":"22bd7b3dacb93894860b4fee17a897bca9086f12"},{"_id":"public/tags/PorterDuffXfermode/index.html","modified":1466670025092,"shasum":"1ab327949537a4d9e33e0ac2db54c0a5f40b2bcb"},{"_id":"public/tags/Shader/index.html","modified":1466670025116,"shasum":"4c159e5ce41373cbcd76c7115db3979a1f39d3a0"},{"_id":"public/tags/NavigationView/index.html","modified":1466670025143,"shasum":"8ec357872b539acef49c191ac7513361517a0be2"},{"_id":"public/tags/code/index.html","modified":1466670025174,"shasum":"b4790f1296e6394b0b4ae92fffc77116318bc9d2"},{"_id":"public/tags/MotionEvent/index.html","modified":1466670025200,"shasum":"32deea4486ad117eeaa5efc057b759c7d0edffea"},{"_id":"public/tags/LinearGradient/index.html","modified":1466670025226,"shasum":"518a658674eeaccab942235732a6d945ae0d7309"},{"_id":"public/tags/TextView/index.html","modified":1466670025256,"shasum":"918f773805f8140a0128f037dbb4f31760a4b06c"},{"_id":"public/tags/LayoutParams/index.html","modified":1466670025282,"shasum":"6aa7ed7759cb6f93a18e507b7696e48bf5ffe52c"},{"_id":"public/tags/LayoutInflate/index.html","modified":1466670025308,"shasum":"992a15472a1e6989951889994496d54b8d34c285"},{"_id":"public/tags/Intent/index.html","modified":1466670025340,"shasum":"c5dc5c43ad602ae9b99c7953623733c3ac91ece0"},{"_id":"public/tags/Genymotion/index.html","modified":1466670025367,"shasum":"a1a9ff0aec2236033d63812e83be157d84d2a95e"},{"_id":"public/tags/Font-Awesome/index.html","modified":1466670025394,"shasum":"f675d9b7e2e8c7e23ab3988d5b6944f6c925c011"},{"_id":"public/tags/Drawable/index.html","modified":1466670025428,"shasum":"1b66a41bc93180af4910f604a3482be1ed4775f7"},{"_id":"public/tags/Bitmap/index.html","modified":1466670025454,"shasum":"d2b925ed4939805ccb80554dddb93081b0268252"},{"_id":"public/tags/String/index.html","modified":1466670025479,"shasum":"951525f7d59b9780427168acdf55227477ee1638"},{"_id":"public/tags/InputStream/index.html","modified":1466670025510,"shasum":"95770172fee55f49c5967f76c28cf3f5c3cfd77d"},{"_id":"public/tags/byte/index.html","modified":1466670025534,"shasum":"2822ce26e258ecdf10fd2b9fe393fce670f05b47"},{"_id":"public/tags/DragView/index.html","modified":1466670025560,"shasum":"698c400a24fbb1ddb12338abb40d2b16781d82d2"},{"_id":"public/tags/CustomView/index.html","modified":1466670025593,"shasum":"c1095d37a1fddf4f82e2fbc808ec4c1c578575de"},{"_id":"public/tags/CoordinatorLayout/index.html","modified":1466670025618,"shasum":"1d1647c5f1c68f287a5e79b4546fc976c3319c2b"},{"_id":"public/tags/CollapsingToolbarLayout/index.html","modified":1466670025646,"shasum":"a5909e7cb02b35be0c076c769d03c81a9676e5fe"},{"_id":"public/tags/Theme/index.html","modified":1466670025672,"shasum":"01941416f2765c214f9563aecd0e933b1f64265f"},{"_id":"public/tags/BroadcastReceiver/index.html","modified":1466670025706,"shasum":"a9fb631c5e06dcf5950dcf3aba86e436294d1a6d"},{"_id":"public/tags/Animator/index.html","modified":1466670025729,"shasum":"4d9a678fc80a0a5d411120ae10fec7d0f168e637"},{"_id":"public/tags/Camera，Album/index.html","modified":1466670025758,"shasum":"a50dc55ecb04bfc01cf6f2f115ed76d78bc0a6fe"},{"_id":"public/tags/Iconics/index.html","modified":1466670025789,"shasum":"708174c863736f1736129695ad15a61f6affe9e4"},{"_id":"public/tags/AD/index.html","modified":1466670025805,"shasum":"68a6cc260d7d2ebe6990fe11d89a4ca3ff695336"},{"_id":"public/tags/Activity/index.html","modified":1466670025842,"shasum":"6f6b02201ce0b447653091a1080d223b46e81598"},{"_id":"public/tags/key-word/index.html","modified":1466670025877,"shasum":"e128bff5d8b13fe14503ee0b956d5807e9fd2d92"}],"Category":[{"name":"zxing","_id":"cips1gdxs0007o4pk66lhvsr4"},{"name":"Life","_id":"cips1gdxw000co4pkmtewivih"},{"name":"XMPP","_id":"cips1gdxy000ho4pkeg63jvxo"},{"name":"Android","_id":"cips1gdy70010o4pk082wgqt4"},{"name":"App","_id":"cips1gdya0017o4pked4nc2tb"},{"name":"SourceAnalysis","_id":"cips1gdyf001ho4pkhofwab4z"},{"name":"RxJava","_id":"cips1gdyw002ao4pk5bs2zo0c"},{"name":"Retrofit","_id":"cips1gdz2002lo4pkxn4206a8"},{"name":"github","_id":"cips1gdza002xo4pkycrdxovd"},{"name":"jcenter","_id":"cips1ge0c004io4pkv46o6lwf"},{"name":"hexo","_id":"cips1ge0p0053o4pkm2svcnpu"},{"name":"Gradle","_id":"cips1ge0r0058o4pkjuypkgdo"},{"name":"Android Studio","_id":"cips1ge1t006wo4pk75yfq5p3"},{"name":"jekyll","_id":"cips1ge1v0070o4pkk6xl3typ"},{"name":"DesignSupportLibrary","_id":"cips1ge320090o4pkw0yt7vki"},{"name":"AndroidSource","_id":"cips1ge6x00g4o4pk2keieijw"}],"Data":[],"Page":[{"title":"AndroidProgrammer","date":"2015-07-31T01:31:26.000Z","_content":"# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。公众号和博客将同步更新，欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)","source":"AndroidProgrammer/index.md","raw":"title: AndroidProgrammer\ndate: 2015-07-31 09:31:26\n---\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。公众号和博客将同步更新，欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)","updated":"2016-06-23T08:18:41.461Z","path":"AndroidProgrammer/index.html","comments":1,"layout":"page","_id":"cips1gdvc0000o4pkvmwkpkbi"},{"title":"All tags","date":"2015-07-30T09:24:44.000Z","type":"tags","comments":1,"_content":"","source":"tags/index.md","raw":"title: All tags\ndate: 2015-07-30 17:24:44\ntype: \"tags\"\ncomments: true #如果有启用多说 或者 Disqus 评论，默认页面也会带有评论。需要关闭的话，请添加字段 comments 并将值设置为 false\n---\n","updated":"2016-03-17T00:44:06.368Z","path":"tags/index.html","layout":"page","_id":"cips1gdx50001o4pkl6ux2hav"},{"title":"qq","date":"2015-07-31T01:31:26.000Z","_content":"<h1> 剩者为王</h1>\n\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。<br>\n\n③群：370527306<a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n \n \n②群：376526418<a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=832e7ce9d313be07ed4e3cadb61752bd384b11c63f41728317cfd887f23d09aa\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王②群\" title=\"剩者为王②群\"></a>\n\n①群：314447894<a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=373a238a1c20659543ce4a66b59bd1f7fa03cecf65af7f979b5fa58e9a643ae9\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王①群\" title=\"剩者为王①群\"></a>\n\n**请勿重复加群，谢谢。**","source":"qq/index.md","raw":"title: qq\ndate: 2015-07-31 09:31:26\n---\n<h1> 剩者为王</h1>\n\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。<br>\n\n③群：370527306<a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n \n \n②群：376526418<a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=832e7ce9d313be07ed4e3cadb61752bd384b11c63f41728317cfd887f23d09aa\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王②群\" title=\"剩者为王②群\"></a>\n\n①群：314447894<a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=373a238a1c20659543ce4a66b59bd1f7fa03cecf65af7f979b5fa58e9a643ae9\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王①群\" title=\"剩者为王①群\"></a>\n\n**请勿重复加群，谢谢。**","updated":"2016-03-17T00:44:06.368Z","path":"qq/index.html","comments":1,"layout":"page","_id":"cips1gdxh0002o4pkb6gjwjl3"},{"title":"friendslinks","date":"2015-11-27T01:28:39.000Z","_content":"小伙伴们\n* [冯建](http://jayfeng.com/)\n* [咕咚](http://gudong.name/)\n* [Ailurus](http://www.easydone.cn/)\n* [汤奇](http://itangqi.me/)\n* [程序亦非猿](http://yifeiyuan.me/)\n* [Tikitoo](http://tikitoo.me/)\n* [kaedea](http://kaedea.com/)\n* [Coding and Living](http://www.woaitqs.cc/)\n\n`互换友链，可以联系我（QQ1413129987）`\n\n\n\n","source":"friendslinks/index.md","raw":"title: friendslinks\ndate: 2015-11-27 09:28:39\n---\n小伙伴们\n* [冯建](http://jayfeng.com/)\n* [咕咚](http://gudong.name/)\n* [Ailurus](http://www.easydone.cn/)\n* [汤奇](http://itangqi.me/)\n* [程序亦非猿](http://yifeiyuan.me/)\n* [Tikitoo](http://tikitoo.me/)\n* [kaedea](http://kaedea.com/)\n* [Coding and Living](http://www.woaitqs.cc/)\n\n`互换友链，可以联系我（QQ1413129987）`\n\n\n\n","updated":"2016-06-22T08:52:14.421Z","path":"friendslinks/index.html","comments":1,"layout":"page","_id":"cips1gdxj0003o4pk209jit3j"},{"title":"categories","date":"2015-07-30T09:29:17.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"title: categories\ndate: 2015-07-30 17:29:17\ntype: \"categories\"\n---\n","updated":"2016-03-17T00:44:06.366Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cips1gdxl0004o4pkplct2kyq"},{"title":"about","date":"2015-07-31T01:28:39.000Z","_content":"![](http://7q5c2h.com1.z0.glb.clouddn.com/me.JPG)\n你必须足够的努力，才能看起来毫不费力！专注！精致！\n\n# 关于自己\n姓名吴小龙，性别男，爱好女，性情中人，但有点小闷骚。\nAndroid应用攻城狮，后知后觉，工作之前，还不知何为程序猿。\n2012年2月1日开始实习，还在努力摆脱菜鸟行列。\n\n# 作品展示\n[http://wuxiaolong.me/categories/App/](http://wuxiaolong.me/categories/App/)\n\n# github\n[https://github.com/WuXiaolong](https://github.com/WuXiaolong)\n\n# 微博\n[吴小龙同學](http://weibo.com/u/2175011601)\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。公众号和博客将同步更新，欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n[点击查看QQ群](http://wuxiaolong.me/qq/)\n\n# 小额赞助\n如果您喜欢此博客，读后受益匪浅，不妨支付宝扫描以下二维码，小额赞助一下。\n<img src=\"http://7q5c2h.com1.z0.glb.clouddn.com/taobao_qrcode.jpg\" /> \n","source":"about/index.md","raw":"title: about\ndate: 2015-07-31 09:28:39\n---\n![](http://7q5c2h.com1.z0.glb.clouddn.com/me.JPG)\n你必须足够的努力，才能看起来毫不费力！专注！精致！\n\n# 关于自己\n姓名吴小龙，性别男，爱好女，性情中人，但有点小闷骚。\nAndroid应用攻城狮，后知后觉，工作之前，还不知何为程序猿。\n2012年2月1日开始实习，还在努力摆脱菜鸟行列。\n\n# 作品展示\n[http://wuxiaolong.me/categories/App/](http://wuxiaolong.me/categories/App/)\n\n# github\n[https://github.com/WuXiaolong](https://github.com/WuXiaolong)\n\n# 微博\n[吴小龙同學](http://weibo.com/u/2175011601)\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。公众号和博客将同步更新，欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n[点击查看QQ群](http://wuxiaolong.me/qq/)\n\n# 小额赞助\n如果您喜欢此博客，读后受益匪浅，不妨支付宝扫描以下二维码，小额赞助一下。\n<img src=\"http://7q5c2h.com1.z0.glb.clouddn.com/taobao_qrcode.jpg\" /> \n","updated":"2016-04-20T00:43:05.501Z","path":"about/index.html","comments":1,"layout":"page","_id":"cips1gdxl0005o4pkikf7xth5"}],"Post":[{"title":"Android zxing","date":"2016-04-22T02:22:51.000Z","_content":"> 二维码一般在项目都会用到，今天分享下我开发二维码的一些心得。\n\n# zxing介绍\ngithub地址：[https://github.com/zxing/zxing](https://github.com/zxing/zxing)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/zxing1.png)\n<!--more-->\n代码很多，官方演示的例子在文件android，一个较为完整的app，导入Android studio，发现少了CameraConfigurationUtils，这个类在文件android-core下。官方效果图：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/zxing2.png)\n但是实际开发只需要扫码和生成二维码两个功能就夠了，因此我做了抽离删减，最终我的效果图：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/zxing3.png)\n\n# zxing使用\n## 添加依赖\n```\ncompile 'com.google.zxing:core:3.2.1'\n```\n## 扫描二维码\n```\n case R.id.qrcode_dencode: //扫描\n intent = new Intent(MainActivity.this, CaptureActivity.class);\n startActivityForResult(intent, REQUEST_CODE);\n break;\n```\n```\n @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        if (resultCode == RESULT_OK) { //RESULT_OK = -1\n            Bundle bundle = data.getExtras();\n            String scanResult = bundle.getString(\"result\");\n            Toast.makeText(MainActivity.this, scanResult, Toast.LENGTH_LONG).show();\n        }\n    }\n\n```\n## 生成二维码\n```\n case R.id.qrcode_encode: //生成\n try {\n        Bitmap mBitmap = QRCodeEncoder.encodeAsBitmap(\"http://wuxiaolong.me/\", 300);\n        qrcodeImg.setImageBitmap(mBitmap);\n\n      } catch (Exception e) {\n        e.printStackTrace();\n      }\n     break;\n```\n\n## 识别二维码\n```\n //长按图片识别二维码\n        qrcodeImg.setOnLongClickListener(new View.OnLongClickListener() {\n            @Override\n            public boolean onLongClick(View v) {\n                qrcodeImg.setDrawingCacheEnabled(true);\n                Bitmap bitmap = Bitmap.createBitmap(qrcodeImg.getDrawingCache());\n                qrcodeImg.setDrawingCacheEnabled(false);\n                decodeQRCode(bitmap);\n                return true;\n            }\n        });\n```\n```\n  /**\n     * 解析二维码图片\n     *\n     * @param bitmap   要解析的二维码图片\n     */\n    public final Map<DecodeHintType, Object> HINTS = new EnumMap<>(DecodeHintType.class);\n\n    public void decodeQRCode(final Bitmap bitmap) {\n        new AsyncTask<Void, Void, String>() {\n            @Override\n            protected String doInBackground(Void... params) {\n                try {\n                    int width = bitmap.getWidth();\n                    int height = bitmap.getHeight();\n                    int[] pixels = new int[width * height];\n                    bitmap.getPixels(pixels, 0, width, 0, 0, width, height);\n                    RGBLuminanceSource source = new RGBLuminanceSource(width, height, pixels);\n                    Result result = new MultiFormatReader().decode(new BinaryBitmap(new HybridBinarizer(source)), HINTS);\n                    return result.getText();\n                } catch (Exception e) {\n                    return null;\n                }\n            }\n\n            @Override\n            protected void onPostExecute(String result) {\n                Log.d(\"wxl\", \"result=\" + result);\n                Toast.makeText(MainActivity.this, result, Toast.LENGTH_LONG).show();\n            }\n        }.execute();\n\n    }\n\n```\n由于时间仓促，抽离的代码可能或多或少有些问题，细节待优化。\n另外，ViewfinderView自定义属性参考了[http://my.oschina.net/smuswc/blog/609413?fromerr=RgSd7WKf](http://my.oschina.net/smuswc/blog/609413?fromerr=RgSd7WKf)\n\n# 官方zxing例子学习\n> 如果代码涉及core-3.2.1，就不在研究，有兴趣可自行深入去学习。\n\n## 扫描二维码\n\n代码调用顺序CaptureActivity -----> CaptureActivityHandler -----> CameraManager -----> PreviewCallback -----> DecodeHandler -----> CaptureActivityHandler  -----> CaptureActivity。下面一一分析。\n\n### CaptureActivity\nCaptureActivity入口类，主要做了Camera，Beep，AmbientLight等初始化。CaptureActivityHandler初始化是在initCamera方法里：\n```\n private void initCamera(SurfaceHolder surfaceHolder) {\n        ……\n            // Creating the handler starts the preview, which can also throw a RuntimeException.\n            if (handler == null) {\n                handler = new CaptureActivityHandler(this, decodeFormats, decodeHints, characterSet, cameraManager);\n       ……\n    }\n\n```\n### CaptureActivityHandler\nCaptureActivityHandler构造方法做了DecodeThread初始化，DecodeThread run方法做了DecodeHandler初始化，然后Camera开始扫码工作。\n```\n  public CaptureActivityHandler(CaptureActivity activity,\n                                  Collection<BarcodeFormat> decodeFormats,\n                                  Map<DecodeHintType, ?> baseHints,\n                                  String characterSet,\n                                  CameraManager cameraManager) {\n        this.activity = activity;\n        decodeThread = new DecodeThread(activity, decodeFormats, baseHints, characterSet,\n                new ViewfinderResultPointCallback(activity.getViewfinderView()));\n        decodeThread.start();\n        state = State.SUCCESS;\n\n        // Start ourselves capturing previews and decoding.\n        this.cameraManager = cameraManager;\n        cameraManager.startPreview();\n        restartPreviewAndDecode();\n    }\n private void restartPreviewAndDecode() {\n        if (state == State.SUCCESS) {\n            state = State.PREVIEW;\n            //decodeThread.getHandler()拿到DecodeHandler\n            cameraManager.requestPreviewFrame(decodeThread.getHandler(), R.id.decode);\n            activity.drawViewfinder();\n        }\n    }\n```\n### CameraManager\n```\npublic synchronized void requestPreviewFrame(Handler handler, int message) {\n        OpenCamera theCamera = camera;\n        if (theCamera != null && previewing) {\n            previewCallback.setHandler(handler, message);\n            theCamera.getCamera().setOneShotPreviewCallback(previewCallback);\n        }\n    }\n```\n### PreviewCallback\n```\n void setHandler(Handler previewHandler, int previewMessage) {\n    this.previewHandler = previewHandler;\n    this.previewMessage = previewMessage;\n  }\n\n  @Override\n  public void onPreviewFrame(byte[] data, Camera camera) {\n    Point cameraResolution = configManager.getCameraResolution();\n    Handler thePreviewHandler = previewHandler;\n    if (cameraResolution != null && thePreviewHandler != null) {\n      //给DecodeHandler发消息\n      Message message = thePreviewHandler.obtainMessage(previewMessage, cameraResolution.x,\n          cameraResolution.y, data);\n      message.sendToTarget();\n      previewHandler = null;\n    } else {\n      Log.d(TAG, \"Got preview callback, but no handler or resolution available\");\n    }\n  }\n```\n### DecodeHandler\n扫码结果，反馈给CaptureActivityHandler\n```\n@Override\n    public void handleMessage(Message message) {\n        if (!running) {\n            return;\n        }\n        int what = message.what;\n        if (what == R.id.decode) {\n            decode((byte[]) message.obj, message.arg1, message.arg2);\n        } else if (what == R.id.quit) {\n            running = false;\n            Looper.myLooper().quit();\n        }\n}\n private void decode(byte[] data, int width, int height) {\n        long start = System.currentTimeMillis();\n        Result rawResult = null;\n        PlanarYUVLuminanceSource source = activity.getCameraManager().buildLuminanceSource(data, width, height);\n        if (source != null) {\n            BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));\n            try {\n                rawResult = multiFormatReader.decodeWithState(bitmap);\n            } catch (ReaderException re) {\n                // continue\n            } finally {\n                multiFormatReader.reset();\n            }\n        }\n\n        Handler handler = activity.getHandler();//拿到CaptureActivityHandler\n        if (rawResult != null) {\n            // Don't log the barcode contents for security.\n            long end = System.currentTimeMillis();\n            Log.d(TAG, \"Found barcode in \" + (end - start) + \" ms\");\n            if (handler != null) {\n                //给CaptureActivityHandler发消息\n                Message message = Message.obtain(handler, R.id.decode_succeeded, rawResult);\n                Bundle bundle = new Bundle();\n                bundleThumbnail(source, bundle);\n                message.setData(bundle);\n                message.sendToTarget();\n            }\n        } else {\n            if (handler != null) {\n                Message message = Message.obtain(handler, R.id.decode_failed);\n                message.sendToTarget();\n            }\n        }\n    }\n\n```\n### CaptureActivityHandler\n扫码结果，再反馈给CaptureActivity，这样就走完了扫码过程。\n```\n @Override\n    public void handleMessage(Message message) {\n        int what = message.what;\n        if (what == R.id.restart_preview) {\n            restartPreviewAndDecode();\n        } else if (what == R.id.decode_succeeded) {\n            state = State.SUCCESS;\n            Bundle bundle = message.getData();\n            Bitmap barcode = null;\n            float scaleFactor = 1.0f;\n            if (bundle != null) {\n                byte[] compressedBitmap = bundle.getByteArray(DecodeThread.BARCODE_BITMAP);\n                if (compressedBitmap != null) {\n                    barcode = BitmapFactory.decodeByteArray(compressedBitmap, 0, compressedBitmap.length, null);\n                    // Mutable copy:\n                    barcode = barcode.copy(Bitmap.Config.ARGB_8888, true);\n                }\n                scaleFactor = bundle.getFloat(DecodeThread.BARCODE_SCALED_FACTOR);\n            }\n            activity.handleDecode((Result) message.obj, barcode, scaleFactor);\n        }\n }\n```\n\n## 生成二维码\n只需要以下核心代码：\n```\npublic static Bitmap encodeAsBitmap(String contents, int dimension) throws WriterException {\n\n        String contentsToEncode = contents;\n        if (contentsToEncode == null) {\n            return null;\n        }\n        Map<EncodeHintType, Object> hints = null;\n        String encoding = guessAppropriateEncoding(contentsToEncode);\n        if (encoding != null) {\n            hints = new EnumMap<>(EncodeHintType.class);\n            hints.put(EncodeHintType.CHARACTER_SET, encoding);\n        }\n        BitMatrix result;\n        try {\n            result = new MultiFormatWriter().encode(contentsToEncode, BarcodeFormat.QR_CODE, dimension, dimension, hints);\n        } catch (IllegalArgumentException iae) {\n            // Unsupported format\n            return null;\n        }\n        int width = result.getWidth();\n        int height = result.getHeight();\n        int[] pixels = new int[width * height];\n        for (int y = 0; y < height; y++) {\n            int offset = y * width;\n            for (int x = 0; x < width; x++) {\n                pixels[offset + x] = result.get(x, y) ? BLACK : WHITE;\n            }\n        }\n\n        Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);\n        bitmap.setPixels(pixels, 0, width, 0, 0, width, height);\n        return bitmap;\n    }\n\n    private static String guessAppropriateEncoding(CharSequence contents) {\n        // Very crude at the moment\n        for (int i = 0; i < contents.length(); i++) {\n            if (contents.charAt(i) > 0xFF) {\n                return \"UTF-8\";\n            }\n        }\n        return null;\n    }\n```\n# 源码\n官方的例子和我自己的抽离出的代码都上传github了，地址：https://github.com/WuXiaolong/zxingSample\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","source":"_posts/zxing.md","raw":"title: Android zxing\ndate: 2016-04-22 10:22:51\ntags: zxing\ncategory: zxing\n---\n> 二维码一般在项目都会用到，今天分享下我开发二维码的一些心得。\n\n# zxing介绍\ngithub地址：[https://github.com/zxing/zxing](https://github.com/zxing/zxing)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/zxing1.png)\n<!--more-->\n代码很多，官方演示的例子在文件android，一个较为完整的app，导入Android studio，发现少了CameraConfigurationUtils，这个类在文件android-core下。官方效果图：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/zxing2.png)\n但是实际开发只需要扫码和生成二维码两个功能就夠了，因此我做了抽离删减，最终我的效果图：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/zxing3.png)\n\n# zxing使用\n## 添加依赖\n```\ncompile 'com.google.zxing:core:3.2.1'\n```\n## 扫描二维码\n```\n case R.id.qrcode_dencode: //扫描\n intent = new Intent(MainActivity.this, CaptureActivity.class);\n startActivityForResult(intent, REQUEST_CODE);\n break;\n```\n```\n @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        if (resultCode == RESULT_OK) { //RESULT_OK = -1\n            Bundle bundle = data.getExtras();\n            String scanResult = bundle.getString(\"result\");\n            Toast.makeText(MainActivity.this, scanResult, Toast.LENGTH_LONG).show();\n        }\n    }\n\n```\n## 生成二维码\n```\n case R.id.qrcode_encode: //生成\n try {\n        Bitmap mBitmap = QRCodeEncoder.encodeAsBitmap(\"http://wuxiaolong.me/\", 300);\n        qrcodeImg.setImageBitmap(mBitmap);\n\n      } catch (Exception e) {\n        e.printStackTrace();\n      }\n     break;\n```\n\n## 识别二维码\n```\n //长按图片识别二维码\n        qrcodeImg.setOnLongClickListener(new View.OnLongClickListener() {\n            @Override\n            public boolean onLongClick(View v) {\n                qrcodeImg.setDrawingCacheEnabled(true);\n                Bitmap bitmap = Bitmap.createBitmap(qrcodeImg.getDrawingCache());\n                qrcodeImg.setDrawingCacheEnabled(false);\n                decodeQRCode(bitmap);\n                return true;\n            }\n        });\n```\n```\n  /**\n     * 解析二维码图片\n     *\n     * @param bitmap   要解析的二维码图片\n     */\n    public final Map<DecodeHintType, Object> HINTS = new EnumMap<>(DecodeHintType.class);\n\n    public void decodeQRCode(final Bitmap bitmap) {\n        new AsyncTask<Void, Void, String>() {\n            @Override\n            protected String doInBackground(Void... params) {\n                try {\n                    int width = bitmap.getWidth();\n                    int height = bitmap.getHeight();\n                    int[] pixels = new int[width * height];\n                    bitmap.getPixels(pixels, 0, width, 0, 0, width, height);\n                    RGBLuminanceSource source = new RGBLuminanceSource(width, height, pixels);\n                    Result result = new MultiFormatReader().decode(new BinaryBitmap(new HybridBinarizer(source)), HINTS);\n                    return result.getText();\n                } catch (Exception e) {\n                    return null;\n                }\n            }\n\n            @Override\n            protected void onPostExecute(String result) {\n                Log.d(\"wxl\", \"result=\" + result);\n                Toast.makeText(MainActivity.this, result, Toast.LENGTH_LONG).show();\n            }\n        }.execute();\n\n    }\n\n```\n由于时间仓促，抽离的代码可能或多或少有些问题，细节待优化。\n另外，ViewfinderView自定义属性参考了[http://my.oschina.net/smuswc/blog/609413?fromerr=RgSd7WKf](http://my.oschina.net/smuswc/blog/609413?fromerr=RgSd7WKf)\n\n# 官方zxing例子学习\n> 如果代码涉及core-3.2.1，就不在研究，有兴趣可自行深入去学习。\n\n## 扫描二维码\n\n代码调用顺序CaptureActivity -----> CaptureActivityHandler -----> CameraManager -----> PreviewCallback -----> DecodeHandler -----> CaptureActivityHandler  -----> CaptureActivity。下面一一分析。\n\n### CaptureActivity\nCaptureActivity入口类，主要做了Camera，Beep，AmbientLight等初始化。CaptureActivityHandler初始化是在initCamera方法里：\n```\n private void initCamera(SurfaceHolder surfaceHolder) {\n        ……\n            // Creating the handler starts the preview, which can also throw a RuntimeException.\n            if (handler == null) {\n                handler = new CaptureActivityHandler(this, decodeFormats, decodeHints, characterSet, cameraManager);\n       ……\n    }\n\n```\n### CaptureActivityHandler\nCaptureActivityHandler构造方法做了DecodeThread初始化，DecodeThread run方法做了DecodeHandler初始化，然后Camera开始扫码工作。\n```\n  public CaptureActivityHandler(CaptureActivity activity,\n                                  Collection<BarcodeFormat> decodeFormats,\n                                  Map<DecodeHintType, ?> baseHints,\n                                  String characterSet,\n                                  CameraManager cameraManager) {\n        this.activity = activity;\n        decodeThread = new DecodeThread(activity, decodeFormats, baseHints, characterSet,\n                new ViewfinderResultPointCallback(activity.getViewfinderView()));\n        decodeThread.start();\n        state = State.SUCCESS;\n\n        // Start ourselves capturing previews and decoding.\n        this.cameraManager = cameraManager;\n        cameraManager.startPreview();\n        restartPreviewAndDecode();\n    }\n private void restartPreviewAndDecode() {\n        if (state == State.SUCCESS) {\n            state = State.PREVIEW;\n            //decodeThread.getHandler()拿到DecodeHandler\n            cameraManager.requestPreviewFrame(decodeThread.getHandler(), R.id.decode);\n            activity.drawViewfinder();\n        }\n    }\n```\n### CameraManager\n```\npublic synchronized void requestPreviewFrame(Handler handler, int message) {\n        OpenCamera theCamera = camera;\n        if (theCamera != null && previewing) {\n            previewCallback.setHandler(handler, message);\n            theCamera.getCamera().setOneShotPreviewCallback(previewCallback);\n        }\n    }\n```\n### PreviewCallback\n```\n void setHandler(Handler previewHandler, int previewMessage) {\n    this.previewHandler = previewHandler;\n    this.previewMessage = previewMessage;\n  }\n\n  @Override\n  public void onPreviewFrame(byte[] data, Camera camera) {\n    Point cameraResolution = configManager.getCameraResolution();\n    Handler thePreviewHandler = previewHandler;\n    if (cameraResolution != null && thePreviewHandler != null) {\n      //给DecodeHandler发消息\n      Message message = thePreviewHandler.obtainMessage(previewMessage, cameraResolution.x,\n          cameraResolution.y, data);\n      message.sendToTarget();\n      previewHandler = null;\n    } else {\n      Log.d(TAG, \"Got preview callback, but no handler or resolution available\");\n    }\n  }\n```\n### DecodeHandler\n扫码结果，反馈给CaptureActivityHandler\n```\n@Override\n    public void handleMessage(Message message) {\n        if (!running) {\n            return;\n        }\n        int what = message.what;\n        if (what == R.id.decode) {\n            decode((byte[]) message.obj, message.arg1, message.arg2);\n        } else if (what == R.id.quit) {\n            running = false;\n            Looper.myLooper().quit();\n        }\n}\n private void decode(byte[] data, int width, int height) {\n        long start = System.currentTimeMillis();\n        Result rawResult = null;\n        PlanarYUVLuminanceSource source = activity.getCameraManager().buildLuminanceSource(data, width, height);\n        if (source != null) {\n            BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));\n            try {\n                rawResult = multiFormatReader.decodeWithState(bitmap);\n            } catch (ReaderException re) {\n                // continue\n            } finally {\n                multiFormatReader.reset();\n            }\n        }\n\n        Handler handler = activity.getHandler();//拿到CaptureActivityHandler\n        if (rawResult != null) {\n            // Don't log the barcode contents for security.\n            long end = System.currentTimeMillis();\n            Log.d(TAG, \"Found barcode in \" + (end - start) + \" ms\");\n            if (handler != null) {\n                //给CaptureActivityHandler发消息\n                Message message = Message.obtain(handler, R.id.decode_succeeded, rawResult);\n                Bundle bundle = new Bundle();\n                bundleThumbnail(source, bundle);\n                message.setData(bundle);\n                message.sendToTarget();\n            }\n        } else {\n            if (handler != null) {\n                Message message = Message.obtain(handler, R.id.decode_failed);\n                message.sendToTarget();\n            }\n        }\n    }\n\n```\n### CaptureActivityHandler\n扫码结果，再反馈给CaptureActivity，这样就走完了扫码过程。\n```\n @Override\n    public void handleMessage(Message message) {\n        int what = message.what;\n        if (what == R.id.restart_preview) {\n            restartPreviewAndDecode();\n        } else if (what == R.id.decode_succeeded) {\n            state = State.SUCCESS;\n            Bundle bundle = message.getData();\n            Bitmap barcode = null;\n            float scaleFactor = 1.0f;\n            if (bundle != null) {\n                byte[] compressedBitmap = bundle.getByteArray(DecodeThread.BARCODE_BITMAP);\n                if (compressedBitmap != null) {\n                    barcode = BitmapFactory.decodeByteArray(compressedBitmap, 0, compressedBitmap.length, null);\n                    // Mutable copy:\n                    barcode = barcode.copy(Bitmap.Config.ARGB_8888, true);\n                }\n                scaleFactor = bundle.getFloat(DecodeThread.BARCODE_SCALED_FACTOR);\n            }\n            activity.handleDecode((Result) message.obj, barcode, scaleFactor);\n        }\n }\n```\n\n## 生成二维码\n只需要以下核心代码：\n```\npublic static Bitmap encodeAsBitmap(String contents, int dimension) throws WriterException {\n\n        String contentsToEncode = contents;\n        if (contentsToEncode == null) {\n            return null;\n        }\n        Map<EncodeHintType, Object> hints = null;\n        String encoding = guessAppropriateEncoding(contentsToEncode);\n        if (encoding != null) {\n            hints = new EnumMap<>(EncodeHintType.class);\n            hints.put(EncodeHintType.CHARACTER_SET, encoding);\n        }\n        BitMatrix result;\n        try {\n            result = new MultiFormatWriter().encode(contentsToEncode, BarcodeFormat.QR_CODE, dimension, dimension, hints);\n        } catch (IllegalArgumentException iae) {\n            // Unsupported format\n            return null;\n        }\n        int width = result.getWidth();\n        int height = result.getHeight();\n        int[] pixels = new int[width * height];\n        for (int y = 0; y < height; y++) {\n            int offset = y * width;\n            for (int x = 0; x < width; x++) {\n                pixels[offset + x] = result.get(x, y) ? BLACK : WHITE;\n            }\n        }\n\n        Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);\n        bitmap.setPixels(pixels, 0, width, 0, 0, width, height);\n        return bitmap;\n    }\n\n    private static String guessAppropriateEncoding(CharSequence contents) {\n        // Very crude at the moment\n        for (int i = 0; i < contents.length(); i++) {\n            if (contents.charAt(i) > 0xFF) {\n                return \"UTF-8\";\n            }\n        }\n        return null;\n    }\n```\n# 源码\n官方的例子和我自己的抽离出的代码都上传github了，地址：https://github.com/WuXiaolong/zxingSample\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","slug":"zxing","published":1,"updated":"2016-04-21T06:55:35.868Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdxo0006o4pknmo2nace"},{"title":"不忘初心，方得始终","date":"2016-04-05T10:58:32.000Z","_content":"> 多年后，我竟成了自己曾经讨厌的那种人。\n\n我最讨厌虚伪和装逼的人，近来，流行“这个逼给满分”，于是有了以下一个装逼行为。\n<!--more-->\n![](http://7q5c2h.com1.z0.glb.clouddn.com/zhuangbi.png)\n\n逼点：1、能谷歌哦；2、搜出都是自己的内容。\n\n我有时候装逼是为了娱乐，是一种`自嘲`。\n\n之前就在思考一个问题：博客该分享什么？到了目前这个阶段，我都不好意思分享一些入门的知识（又在装），是不是分享一些库的使用显得太low，非要一直分享什么什么源码剖析才显得高大上？因而来维持自己“大神”的形象，我又何时那么在乎别人对我的看法？\n\n这些想法其实很搞笑，不要忘记我当初为什么要写东西：俗话说，好记忆不如烂笔头，我不是个聪明的人，但我是个勤奋的人，把工作的经验记录下来，是为了下次再遇到同样的问题，不至于再去谷歌。这就是我初衷，也不要说，写博客为了造福大家，不该装的逼还是少装，当然如果大家从我的博客收益，那最好不过。\n\n另外，千万别把自己当一回事，因为我什么都不是。\n\n时刻提醒自己：`不忘初心，方得始终。 不用太在乎别人的看法，因为过得好不好，自己最清楚。`\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n","source":"_posts/zhuangbi.md","raw":"title: 不忘初心，方得始终\ndate: 2016-04-05 18:58:32\ntags: Life\ncategory: Life\n---\n> 多年后，我竟成了自己曾经讨厌的那种人。\n\n我最讨厌虚伪和装逼的人，近来，流行“这个逼给满分”，于是有了以下一个装逼行为。\n<!--more-->\n![](http://7q5c2h.com1.z0.glb.clouddn.com/zhuangbi.png)\n\n逼点：1、能谷歌哦；2、搜出都是自己的内容。\n\n我有时候装逼是为了娱乐，是一种`自嘲`。\n\n之前就在思考一个问题：博客该分享什么？到了目前这个阶段，我都不好意思分享一些入门的知识（又在装），是不是分享一些库的使用显得太low，非要一直分享什么什么源码剖析才显得高大上？因而来维持自己“大神”的形象，我又何时那么在乎别人对我的看法？\n\n这些想法其实很搞笑，不要忘记我当初为什么要写东西：俗话说，好记忆不如烂笔头，我不是个聪明的人，但我是个勤奋的人，把工作的经验记录下来，是为了下次再遇到同样的问题，不至于再去谷歌。这就是我初衷，也不要说，写博客为了造福大家，不该装的逼还是少装，当然如果大家从我的博客收益，那最好不过。\n\n另外，千万别把自己当一回事，因为我什么都不是。\n\n时刻提醒自己：`不忘初心，方得始终。 不用太在乎别人的看法，因为过得好不好，自己最清楚。`\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n","slug":"zhuangbi","published":1,"updated":"2016-04-06T00:39:40.216Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdxv000bo4pk1scg48nc"},{"title":"Android基于XMPP开发（三）【注册、登录、修改密码、修改头像】","date":"2016-03-01T11:46:13.000Z","_content":"> [Android基于XMPP开发（一）【openfire服务器配置】](http://wuxiaolong.me/2016/02/24/xmpp1/)\n> [Android基于XMPP开发（二）【连接服务器】](http://wuxiaolong.me/2016/02/25/xmpp2/)\n\n本篇将涉及常用的账号管理，包括：注册、登录、修改密码、修改头像。\n<!-- more -->\n# 注册\n```\n public void register(final String userName, final String password) {\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n\n                String registerMsg;\n                try {\n                    if (!mXMPPTCPConnection.isConnected())\n                        mXMPPTCPConnection.connect();\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    mXMPPTCPConnection.disconnect();\n                }\n                \n                Log.i(\"wxl\", \"XMPPService connected=\" + mXMPPTCPConnection.isConnected());\n                if (mXMPPTCPConnection.isConnected()) {\n                    String serviceName = mXMPPTCPConnection.getServiceName();\n                    try {\n                        AccountManager accountManager = AccountManager.getInstance(mXMPPTCPConnection);\n                        Log.i(\"wxl\", \"Register supportsAccountCreation=\" + accountManager.supportsAccountCreation());\n                        if (accountManager.supportsAccountCreation()) {\n                            accountManager.createAccount(userName + \"@\" + serviceName, password);\n                            Log.i(TAG, \"注册成功\");\n                            registerMsg = \"注册成功\";\n                        } else {\n                            Log.i(TAG, \"服务端不能注册\");\n                            registerMsg = \"服务端不能注册\";\n                        }\n\n                    } catch (Exception e) {\n                        e.printStackTrace();//\n                        Log.i(TAG, \"注册异常=\" + e.getMessage());\n                        registerMsg = \"注册异常=\" + e.getMessage();\n                    }\n                } else {\n                    Log.i(TAG, \"connect failed\");\n                    registerMsg = \"connect failed\";\n                }\n                mXMPPClickListener.register(registerMsg);\n            }\n        }).start();\n    }\n```\n\n\n# 登录\n```\n public void login(final String userName, final String password) {\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                String loginMsg;\n                try {\n                    if (!mXMPPTCPConnection.isConnected())\n                        mXMPPTCPConnection.connect();\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    mXMPPTCPConnection.disconnect();\n                }\n               \n                Log.i(\"wxl\", \"XMPPService login connected=\" + mXMPPTCPConnection.isConnected());\n                if (mXMPPTCPConnection.isConnected()) {\n                    try {\n                        mXMPPTCPConnection.login(userName, password);\n\n                        if (mXMPPTCPConnection.isAuthenticated()) {\n                            Log.i(TAG, \"登录成功\");\n                            loginMsg = \"登录成功\";\n                        } else {\n                            Log.i(TAG, \"登录失败\");\n                            loginMsg = \"登录失败\";\n                        }\n\n                    } catch (Exception e) {\n                        e.printStackTrace();//\n                        Log.i(TAG, \"登录异常=\" + e.getMessage());\n                        loginMsg = \"登录异常=\" + e.getMessage();\n                    }\n                } else {\n                    Log.i(TAG, \"connect failed\");\n                    loginMsg = \"connect failed\";\n                }\n\n                mXMPPClickListener.login(loginMsg);\n            }\n        }).start();\n    }\n```\n\n# 修改密码\n修改密码必须在登录状态下\n```\n  public void changePassword(final String newPassword) {\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                String changePasswordMsg;\n\n                try {\n                    if (!mXMPPTCPConnection.isConnected())\n                        mXMPPTCPConnection.connect();\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    mXMPPTCPConnection.disconnect();\n                }\n                Log.i(\"wxl\", \"XMPPService connected=\" + mXMPPTCPConnection.isConnected());\n                if (mXMPPTCPConnection.isConnected()) {\n                    try {\n\n                        if (mXMPPTCPConnection.isAuthenticated()) {\n                            AccountManager accountManager = AccountManager.getInstance(mXMPPTCPConnection);\n                            accountManager.changePassword(newPassword);\n                            Log.i(TAG, \"修改密码成功\");\n                            changePasswordMsg = \"修改密码成功\";\n                        } else {\n                            Log.i(TAG, \"请先登录\");\n                            changePasswordMsg = \"请先登录\";\n                        }\n\n                    } catch (Exception e) {\n                        e.printStackTrace();//\n                        Log.i(TAG, \"修改密码异常=\" + e.getMessage());\n                        changePasswordMsg = \"修改密码异常=\" + e.getMessage();\n                    }\n                } else {\n                    Log.i(TAG, \"connect failed\");\n                    changePasswordMsg = \"connect failed\";\n                }\n                mXMPPClickListener.register(changePasswordMsg);\n            }\n        }).start();\n    }\n\n```\n# 修改头像\n```\n  public void setAvatar(final Bitmap bitmap) {\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n\n\n                try {\n                    if (!mXMPPTCPConnection.isConnected())\n                        mXMPPTCPConnection.connect();\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    mXMPPTCPConnection.disconnect();\n                }\n                Log.i(\"wxl\", \"XMPPService connected=\" + mXMPPTCPConnection.isConnected());\n                if (mXMPPTCPConnection.isConnected()) {\n                    try {\n                        if (mXMPPTCPConnection.isAuthenticated()) {\n                            VCardManager vCardManager = VCardManager.getInstanceFor(mXMPPTCPConnection);\n                            VCard vCard = vCardManager.loadVCard();\n                            byte[] bytes = bitmapToByte(bitmap);\n                            String encodedImage = Base64.encodeToString(bytes, Base64.DEFAULT);\n                            vCard.setAvatar(bytes);\n                            vCardManager.saveVCard(vCard);\n                            mXMPPClickListener.setAvatar(\"修改头像成功\");\n                        } else {\n                            mXMPPClickListener.setAvatar(\"请先登录\");\n                        }\n\n                    } catch (Exception e) {\n                        e.printStackTrace();//\n                        mXMPPClickListener.setAvatar(\"修改头像异常=\" + e.getMessage());\n                    }\n                } else {\n                    mXMPPClickListener.setAvatar(\"connect failed\");\n                }\n            }\n        }).start();\n    }\n\n```\nbitmapToByte\n```\n    private byte[] bitmapToByte(Bitmap bitmap) {\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);\n        return baos.toByteArray();\n    }\n```\n\n# 源码地址\n[https://github.com/WuXiaolong/WoChat](https://github.com/WuXiaolong/WoChat)\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammr.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","source":"_posts/xmpp3.md","raw":"title: Android基于XMPP开发（三）【注册、登录、修改密码、修改头像】\ndate: 2016-03-01 19:46:13\ntags: [XMPP,Smack,openfire]\ncategory: XMPP\n---\n> [Android基于XMPP开发（一）【openfire服务器配置】](http://wuxiaolong.me/2016/02/24/xmpp1/)\n> [Android基于XMPP开发（二）【连接服务器】](http://wuxiaolong.me/2016/02/25/xmpp2/)\n\n本篇将涉及常用的账号管理，包括：注册、登录、修改密码、修改头像。\n<!-- more -->\n# 注册\n```\n public void register(final String userName, final String password) {\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n\n                String registerMsg;\n                try {\n                    if (!mXMPPTCPConnection.isConnected())\n                        mXMPPTCPConnection.connect();\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    mXMPPTCPConnection.disconnect();\n                }\n                \n                Log.i(\"wxl\", \"XMPPService connected=\" + mXMPPTCPConnection.isConnected());\n                if (mXMPPTCPConnection.isConnected()) {\n                    String serviceName = mXMPPTCPConnection.getServiceName();\n                    try {\n                        AccountManager accountManager = AccountManager.getInstance(mXMPPTCPConnection);\n                        Log.i(\"wxl\", \"Register supportsAccountCreation=\" + accountManager.supportsAccountCreation());\n                        if (accountManager.supportsAccountCreation()) {\n                            accountManager.createAccount(userName + \"@\" + serviceName, password);\n                            Log.i(TAG, \"注册成功\");\n                            registerMsg = \"注册成功\";\n                        } else {\n                            Log.i(TAG, \"服务端不能注册\");\n                            registerMsg = \"服务端不能注册\";\n                        }\n\n                    } catch (Exception e) {\n                        e.printStackTrace();//\n                        Log.i(TAG, \"注册异常=\" + e.getMessage());\n                        registerMsg = \"注册异常=\" + e.getMessage();\n                    }\n                } else {\n                    Log.i(TAG, \"connect failed\");\n                    registerMsg = \"connect failed\";\n                }\n                mXMPPClickListener.register(registerMsg);\n            }\n        }).start();\n    }\n```\n\n\n# 登录\n```\n public void login(final String userName, final String password) {\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                String loginMsg;\n                try {\n                    if (!mXMPPTCPConnection.isConnected())\n                        mXMPPTCPConnection.connect();\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    mXMPPTCPConnection.disconnect();\n                }\n               \n                Log.i(\"wxl\", \"XMPPService login connected=\" + mXMPPTCPConnection.isConnected());\n                if (mXMPPTCPConnection.isConnected()) {\n                    try {\n                        mXMPPTCPConnection.login(userName, password);\n\n                        if (mXMPPTCPConnection.isAuthenticated()) {\n                            Log.i(TAG, \"登录成功\");\n                            loginMsg = \"登录成功\";\n                        } else {\n                            Log.i(TAG, \"登录失败\");\n                            loginMsg = \"登录失败\";\n                        }\n\n                    } catch (Exception e) {\n                        e.printStackTrace();//\n                        Log.i(TAG, \"登录异常=\" + e.getMessage());\n                        loginMsg = \"登录异常=\" + e.getMessage();\n                    }\n                } else {\n                    Log.i(TAG, \"connect failed\");\n                    loginMsg = \"connect failed\";\n                }\n\n                mXMPPClickListener.login(loginMsg);\n            }\n        }).start();\n    }\n```\n\n# 修改密码\n修改密码必须在登录状态下\n```\n  public void changePassword(final String newPassword) {\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                String changePasswordMsg;\n\n                try {\n                    if (!mXMPPTCPConnection.isConnected())\n                        mXMPPTCPConnection.connect();\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    mXMPPTCPConnection.disconnect();\n                }\n                Log.i(\"wxl\", \"XMPPService connected=\" + mXMPPTCPConnection.isConnected());\n                if (mXMPPTCPConnection.isConnected()) {\n                    try {\n\n                        if (mXMPPTCPConnection.isAuthenticated()) {\n                            AccountManager accountManager = AccountManager.getInstance(mXMPPTCPConnection);\n                            accountManager.changePassword(newPassword);\n                            Log.i(TAG, \"修改密码成功\");\n                            changePasswordMsg = \"修改密码成功\";\n                        } else {\n                            Log.i(TAG, \"请先登录\");\n                            changePasswordMsg = \"请先登录\";\n                        }\n\n                    } catch (Exception e) {\n                        e.printStackTrace();//\n                        Log.i(TAG, \"修改密码异常=\" + e.getMessage());\n                        changePasswordMsg = \"修改密码异常=\" + e.getMessage();\n                    }\n                } else {\n                    Log.i(TAG, \"connect failed\");\n                    changePasswordMsg = \"connect failed\";\n                }\n                mXMPPClickListener.register(changePasswordMsg);\n            }\n        }).start();\n    }\n\n```\n# 修改头像\n```\n  public void setAvatar(final Bitmap bitmap) {\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n\n\n                try {\n                    if (!mXMPPTCPConnection.isConnected())\n                        mXMPPTCPConnection.connect();\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    mXMPPTCPConnection.disconnect();\n                }\n                Log.i(\"wxl\", \"XMPPService connected=\" + mXMPPTCPConnection.isConnected());\n                if (mXMPPTCPConnection.isConnected()) {\n                    try {\n                        if (mXMPPTCPConnection.isAuthenticated()) {\n                            VCardManager vCardManager = VCardManager.getInstanceFor(mXMPPTCPConnection);\n                            VCard vCard = vCardManager.loadVCard();\n                            byte[] bytes = bitmapToByte(bitmap);\n                            String encodedImage = Base64.encodeToString(bytes, Base64.DEFAULT);\n                            vCard.setAvatar(bytes);\n                            vCardManager.saveVCard(vCard);\n                            mXMPPClickListener.setAvatar(\"修改头像成功\");\n                        } else {\n                            mXMPPClickListener.setAvatar(\"请先登录\");\n                        }\n\n                    } catch (Exception e) {\n                        e.printStackTrace();//\n                        mXMPPClickListener.setAvatar(\"修改头像异常=\" + e.getMessage());\n                    }\n                } else {\n                    mXMPPClickListener.setAvatar(\"connect failed\");\n                }\n            }\n        }).start();\n    }\n\n```\nbitmapToByte\n```\n    private byte[] bitmapToByte(Bitmap bitmap) {\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);\n        return baos.toByteArray();\n    }\n```\n\n# 源码地址\n[https://github.com/WuXiaolong/WoChat](https://github.com/WuXiaolong/WoChat)\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammr.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","slug":"xmpp3","published":1,"updated":"2016-03-17T00:44:06.366Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdxy000go4pk7k9ln6hi"},{"title":"Android基于XMPP开发（二）【连接服务器】","date":"2016-02-25T11:34:53.000Z","_content":"> [Android基于XMPP开发（一）【openfire服务器配置】](http://wuxiaolong.me/2016/02/24/xmpp1/)\n\n# 准备阶段\n砍柴不误磨刀工，欲XMPP开发，先引入Smack，具体见[https://github.com/igniterealtime/Smack](https://github.com/igniterealtime/Smack)，引入方式如下：\napp/build.gradle\n```\nrepositories {\n    maven {\n        url 'https://oss.sonatype.org/content/repositories/snapshots'\n    }\n    mavenCentral()\n}\ndependencies {\ncompile \"org.igniterealtime.smack:smack-android-extensions:4.1.6\"\ncompile 'org.igniterealtime.smack:smack-tcp:4.1.6'\ncompile 'org.igniterealtime.smack:smack-experimental:4.1.6'\n}\n```\n<!-- more -->\n\n# 初始化连接\n这里为了更好的演示，我选择是XMPP公共服务器：yax.im\n```\n  private static final String TAG = \"wxl\";\n  public final static String HOST = \"yax.im\";\n  private static final String SERVICE_NAME = \"yax.im\"; //sunchunlei.local labsun.com\n  public final static int PORT = 5222;\n  public static AbstractXMPPConnection mXMPPTCPConnection;\n  private static SSLContext mSSLContext;\n  public AbstractXMPPConnection initXMPPTCPConnection() {\n        SmackConfiguration.DEBUG = true;\n        try {\n            mSSLContext = SSLContext.getInstance(\"TLS\");\n            mSSLContext.init(null, new TrustManager[]{new MyTrustManager()}, null);\n        } catch (Exception e) {\n            e.printStackTrace();\n            throw new RuntimeException(\"connecting failed\", e);\n        }\n\n        XMPPTCPConnectionConfiguration.Builder builder = XMPPTCPConnectionConfiguration.builder();\n//        builder.setUsernameAndPassword(USER_NAME, PASSWORD);\n        builder.setHost(HOST);\n        builder.setServiceName(SERVICE_NAME);//此处只能使用域名或PC机器名称\n        builder.setPort(PORT);\n        builder.setCompressionEnabled(false);//连接套将使用流压缩。\n//        builder.setConnectTimeout(5000);\n//        builder.setDebuggerEnabled(true);\n//        builder.setSendPresence(true);//上线通知系统\n        builder.setSecurityMode(ConnectionConfiguration.SecurityMode.required);//安全模式\n        builder.setCustomSSLContext(mSSLContext);////https不验证证书方式（信任所有证书）\n        SASLAuthentication.unBlacklistSASLMechanism(\"PLAIN\");\n        SASLAuthentication.unBlacklistSASLMechanism(\"DIGEST-MD5\");\n        mXMPPTCPConnection = new XMPPTCPConnection(builder.build());\n        return mXMPPTCPConnection;\n    }\n```\nMyTrustManager \n```\n private class MyTrustManager implements X509TrustManager {\n        @Override\n        public void checkClientTrusted(X509Certificate[] x509Certificates, String s)\n                throws CertificateException {\n            Log.i(TAG, \"checkClientTrusted:\" + s);\n        }\n\n        @Override\n        public void checkServerTrusted(X509Certificate[] x509Certificates, String s)\n                throws CertificateException {\n            Log.i(TAG, \"checkServerTrusted:\" + s);\n        }\n\n        @Override\n        public X509Certificate[] getAcceptedIssuers() {\n            Log.i(TAG, \"getAcceptedIssuers\");\n            return new X509Certificate[0];\n        }\n\n    }\n```\n# Connect to the server\n异步处理，不然会android.os.NetworkOnMainThreadException\n\n```\npublic void connect() {\n        Thread thread = new Thread(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    Message message = new Message();\n                    message.what = AppConstants.CONNECT;\n                    Log.i(TAG, \"connect front\");\n                    if (mXMPPTCPConnection.isConnected()) {\n                        Log.i(TAG, \"connect successfull\");\n                        message.obj = \"connect successfull\";\n                    } else {\n                        mXMPPTCPConnection.connect();\n                        if (mXMPPTCPConnection.isConnected()) {\n                            message.obj = \"connect successfull\";\n                        } else {\n                            message.obj = \"connect failed\";\n                        }\n\n                    }\n\n                    Log.i(TAG, \"connect end=\" + mXMPPTCPConnection.isConnected());\n                    mXMPPHandler.sendMessage(message);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    Log.i(TAG, \"connect e=\" + e.getMessage());\n                }\n            }\n        }\n\n        );\n        thread.start();\n    }\n```\nXMPPHandler\n```\npublic class XMPPHandler extends Handler {\n    public XMPPClickListener mXMPPClickListener;\n    private static final String TAG = \"wxl\";\n\n    @Override\n    public void handleMessage(Message msg) {\n        super.handleMessage(msg);\n        String text = (String) msg.obj;\n        switch (msg.what) {\n            case AppConstants.CONNECT:\n                mXMPPClickListener.connect(text);\n                break;\n            case AppConstants.LOGIN:\n\n                break;\n            case AppConstants.REGISTER:\n\n                break;\n        }\n    }\n\n\n    public void setXMPPClickListener(XMPPClickListener xmppClickListener) {\n        Log.i(TAG, \"setXMPPClickListener=\" + xmppClickListener);\n        this.mXMPPClickListener = xmppClickListener;\n    }\n}\n```\nXMPPClickListener \n```\npublic interface XMPPClickListener {\n    void connect(String msg);\n}\n\n```\nMainActivity\n```\npublic class MainActivity extends AppCompatActivity implements View.OnClickListener, XMPPClickListener {\n    private XMPPService mXMPPService;\n    private XMPPHandler mXMPPHandler = new XMPPHandler();\n    private ProgressDialog mProgressDialog;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        mXMPPService = new XMPPService(mXMPPHandler);\n        mXMPPHandler.setXMPPClickListener(this);\n        mXMPPService.initXMPPTCPConnection();\n        mProgressDialog = new ProgressDialog(MainActivity.this);\n        mProgressDialog.setMessage(\"加载中\");\n        findViewById(R.id.connect).setOnClickListener(this);\n    }\n    @Override\n    public void onClick(View v) {\n        progressDialogShow();\n        switch (v.getId()) {\n            case R.id.connect:\n                mXMPPService.connect();\n                break;\n        }\n    }\n\n    @Override\n    public void connect(String msg) {\n        toastShow(msg);\n    }\n\n    private void toastShow(CharSequence text) {\n        progressDialogDismiss();\n        Toast.makeText(MainActivity.this, text, Toast.LENGTH_LONG).show();\n\n    }\n\n\n    private void progressDialogShow() {\n\n        mProgressDialog.show();\n\n    }\n\n    private void progressDialogDismiss() {\n        if (mProgressDialog.isShowing()) mProgressDialog.dismiss();\n\n    }\n}\n```\n# 源码地址\n[https://github.com/WuXiaolong/WoChat](https://github.com/WuXiaolong/WoChat)\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammr.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","source":"_posts/xmpp2.md","raw":"title: Android基于XMPP开发（二）【连接服务器】\ndate: 2016-02-25 19:34:53\ntags: [XMPP,Smack,openfire]\ncategory: XMPP\n---\n> [Android基于XMPP开发（一）【openfire服务器配置】](http://wuxiaolong.me/2016/02/24/xmpp1/)\n\n# 准备阶段\n砍柴不误磨刀工，欲XMPP开发，先引入Smack，具体见[https://github.com/igniterealtime/Smack](https://github.com/igniterealtime/Smack)，引入方式如下：\napp/build.gradle\n```\nrepositories {\n    maven {\n        url 'https://oss.sonatype.org/content/repositories/snapshots'\n    }\n    mavenCentral()\n}\ndependencies {\ncompile \"org.igniterealtime.smack:smack-android-extensions:4.1.6\"\ncompile 'org.igniterealtime.smack:smack-tcp:4.1.6'\ncompile 'org.igniterealtime.smack:smack-experimental:4.1.6'\n}\n```\n<!-- more -->\n\n# 初始化连接\n这里为了更好的演示，我选择是XMPP公共服务器：yax.im\n```\n  private static final String TAG = \"wxl\";\n  public final static String HOST = \"yax.im\";\n  private static final String SERVICE_NAME = \"yax.im\"; //sunchunlei.local labsun.com\n  public final static int PORT = 5222;\n  public static AbstractXMPPConnection mXMPPTCPConnection;\n  private static SSLContext mSSLContext;\n  public AbstractXMPPConnection initXMPPTCPConnection() {\n        SmackConfiguration.DEBUG = true;\n        try {\n            mSSLContext = SSLContext.getInstance(\"TLS\");\n            mSSLContext.init(null, new TrustManager[]{new MyTrustManager()}, null);\n        } catch (Exception e) {\n            e.printStackTrace();\n            throw new RuntimeException(\"connecting failed\", e);\n        }\n\n        XMPPTCPConnectionConfiguration.Builder builder = XMPPTCPConnectionConfiguration.builder();\n//        builder.setUsernameAndPassword(USER_NAME, PASSWORD);\n        builder.setHost(HOST);\n        builder.setServiceName(SERVICE_NAME);//此处只能使用域名或PC机器名称\n        builder.setPort(PORT);\n        builder.setCompressionEnabled(false);//连接套将使用流压缩。\n//        builder.setConnectTimeout(5000);\n//        builder.setDebuggerEnabled(true);\n//        builder.setSendPresence(true);//上线通知系统\n        builder.setSecurityMode(ConnectionConfiguration.SecurityMode.required);//安全模式\n        builder.setCustomSSLContext(mSSLContext);////https不验证证书方式（信任所有证书）\n        SASLAuthentication.unBlacklistSASLMechanism(\"PLAIN\");\n        SASLAuthentication.unBlacklistSASLMechanism(\"DIGEST-MD5\");\n        mXMPPTCPConnection = new XMPPTCPConnection(builder.build());\n        return mXMPPTCPConnection;\n    }\n```\nMyTrustManager \n```\n private class MyTrustManager implements X509TrustManager {\n        @Override\n        public void checkClientTrusted(X509Certificate[] x509Certificates, String s)\n                throws CertificateException {\n            Log.i(TAG, \"checkClientTrusted:\" + s);\n        }\n\n        @Override\n        public void checkServerTrusted(X509Certificate[] x509Certificates, String s)\n                throws CertificateException {\n            Log.i(TAG, \"checkServerTrusted:\" + s);\n        }\n\n        @Override\n        public X509Certificate[] getAcceptedIssuers() {\n            Log.i(TAG, \"getAcceptedIssuers\");\n            return new X509Certificate[0];\n        }\n\n    }\n```\n# Connect to the server\n异步处理，不然会android.os.NetworkOnMainThreadException\n\n```\npublic void connect() {\n        Thread thread = new Thread(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    Message message = new Message();\n                    message.what = AppConstants.CONNECT;\n                    Log.i(TAG, \"connect front\");\n                    if (mXMPPTCPConnection.isConnected()) {\n                        Log.i(TAG, \"connect successfull\");\n                        message.obj = \"connect successfull\";\n                    } else {\n                        mXMPPTCPConnection.connect();\n                        if (mXMPPTCPConnection.isConnected()) {\n                            message.obj = \"connect successfull\";\n                        } else {\n                            message.obj = \"connect failed\";\n                        }\n\n                    }\n\n                    Log.i(TAG, \"connect end=\" + mXMPPTCPConnection.isConnected());\n                    mXMPPHandler.sendMessage(message);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    Log.i(TAG, \"connect e=\" + e.getMessage());\n                }\n            }\n        }\n\n        );\n        thread.start();\n    }\n```\nXMPPHandler\n```\npublic class XMPPHandler extends Handler {\n    public XMPPClickListener mXMPPClickListener;\n    private static final String TAG = \"wxl\";\n\n    @Override\n    public void handleMessage(Message msg) {\n        super.handleMessage(msg);\n        String text = (String) msg.obj;\n        switch (msg.what) {\n            case AppConstants.CONNECT:\n                mXMPPClickListener.connect(text);\n                break;\n            case AppConstants.LOGIN:\n\n                break;\n            case AppConstants.REGISTER:\n\n                break;\n        }\n    }\n\n\n    public void setXMPPClickListener(XMPPClickListener xmppClickListener) {\n        Log.i(TAG, \"setXMPPClickListener=\" + xmppClickListener);\n        this.mXMPPClickListener = xmppClickListener;\n    }\n}\n```\nXMPPClickListener \n```\npublic interface XMPPClickListener {\n    void connect(String msg);\n}\n\n```\nMainActivity\n```\npublic class MainActivity extends AppCompatActivity implements View.OnClickListener, XMPPClickListener {\n    private XMPPService mXMPPService;\n    private XMPPHandler mXMPPHandler = new XMPPHandler();\n    private ProgressDialog mProgressDialog;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        mXMPPService = new XMPPService(mXMPPHandler);\n        mXMPPHandler.setXMPPClickListener(this);\n        mXMPPService.initXMPPTCPConnection();\n        mProgressDialog = new ProgressDialog(MainActivity.this);\n        mProgressDialog.setMessage(\"加载中\");\n        findViewById(R.id.connect).setOnClickListener(this);\n    }\n    @Override\n    public void onClick(View v) {\n        progressDialogShow();\n        switch (v.getId()) {\n            case R.id.connect:\n                mXMPPService.connect();\n                break;\n        }\n    }\n\n    @Override\n    public void connect(String msg) {\n        toastShow(msg);\n    }\n\n    private void toastShow(CharSequence text) {\n        progressDialogDismiss();\n        Toast.makeText(MainActivity.this, text, Toast.LENGTH_LONG).show();\n\n    }\n\n\n    private void progressDialogShow() {\n\n        mProgressDialog.show();\n\n    }\n\n    private void progressDialogDismiss() {\n        if (mProgressDialog.isShowing()) mProgressDialog.dismiss();\n\n    }\n}\n```\n# 源码地址\n[https://github.com/WuXiaolong/WoChat](https://github.com/WuXiaolong/WoChat)\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammr.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","slug":"xmpp2","published":1,"updated":"2016-03-17T00:44:06.365Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdy1000po4pkg6hus7bs"},{"title":"Android基于XMPP开发（一）【openfire服务器配置】","date":"2016-02-24T10:58:28.000Z","_content":"# OpenFire \nOpenFire 是采用Java开发的基于XMPP（Jabber）协议，开源实时协作（RTC）服务器。\nSmack 是用 Java编 写的XMPP客户端代码库，是 spark 的核心\n开源界总是有许多有趣的东东，这三个合起来就是一个完整的XMPP IM 实现。\nOpenFire ——服务器端\nSpark——客户端\nSmack——XMPP 传输协议的实现\n<!-- more -->\n三者都是基于Java 语言的实现，其中XMPP是一个协议，协议是需要实现的，Smack起到的就是这样的一个作用。\nOpenFire 是基于XMPP 协议的IM 的服务器端的实现，虽然当两个用户连接后，可以通过点对点的方式来发送消息，但是用户还是需要连接到服务器来获取一些连接信息和通信信息的，所以服务器端是必须要实现的。\nSpark 提供了客户端一个基本的实现，并提出了一个很好的插件架构，这对于开发者来说不能不说是一个福音。我强烈建议基于插件方式来实现你新增加的功能，而不是去改它的源代码，这样有利于你项目架构，把原始项目的影响降到最低。\nSmack 是一个XMPP 协议的Java 实现，提供一套可扩展的API，不过有些时候，你还是不得不使用自己定制发送的XML 文件内容的方式来实现自己的功能。\n\n 三者之间的关系：\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-0.png)\n从上图可知，Client 端和Server端都可以通过插件的方式来进行扩展，Smack是二者传递数据的媒介。\n以上介绍来源网络。\n\n# 配置本地服务器\n## openfire下载\n[点击下载](http://www.igniterealtime.org/downloads/index.jsp)\n\n## 配置\n\n* 1、选择中文，continue\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-1.png)\n\n* 2、默认继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-2.png)\n\n* 3、默认继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-3.png)\n\n* 4、本教程数据库MySQL，此步之前先建数据库名为openfire，数据库驱动选项选择MySQL，OK。这里数据库URL替换如图所示，继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-4.png)\n\n* 5、默认继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-5.png)\n\n* 6、填写密码，用户名admin，不然密码默认admin\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-6.png)\n\n* 7、登录后台即可\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-7.png)\n\n这样openfire配置到此完成。\n\n# XMPP公共服务器\n这是公共XMPP服务器列表，免费供大家使用。\n[Public XMPP servers](https://list.jabber.at/)\n[Jabber.org](http://www.jabber.org/)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 附录\n[Openfire与XMPP协议](http://www.cnblogs.com/hoojo/archive/2012/06/18/2553975.html)\n[XMPP-RFC3920中文](http://wenku.baidu.com/link?url=OSVHeZETSwiNRJArOxcgU4Ek1MGCu83TPh5aArKtDiIUz6sisSOtpNn4sI9RYTywGkhgJX3pkGpqeJQmeLMf_YdPX3K2VegoxDk0sHwxmCy)","source":"_posts/xmpp1.md","raw":"title: Android基于XMPP开发（一）【openfire服务器配置】\ndate: 2016-02-24 18:58:28\ntags: [XMPP,Smack,openfire]\ncategory: XMPP\n---\n# OpenFire \nOpenFire 是采用Java开发的基于XMPP（Jabber）协议，开源实时协作（RTC）服务器。\nSmack 是用 Java编 写的XMPP客户端代码库，是 spark 的核心\n开源界总是有许多有趣的东东，这三个合起来就是一个完整的XMPP IM 实现。\nOpenFire ——服务器端\nSpark——客户端\nSmack——XMPP 传输协议的实现\n<!-- more -->\n三者都是基于Java 语言的实现，其中XMPP是一个协议，协议是需要实现的，Smack起到的就是这样的一个作用。\nOpenFire 是基于XMPP 协议的IM 的服务器端的实现，虽然当两个用户连接后，可以通过点对点的方式来发送消息，但是用户还是需要连接到服务器来获取一些连接信息和通信信息的，所以服务器端是必须要实现的。\nSpark 提供了客户端一个基本的实现，并提出了一个很好的插件架构，这对于开发者来说不能不说是一个福音。我强烈建议基于插件方式来实现你新增加的功能，而不是去改它的源代码，这样有利于你项目架构，把原始项目的影响降到最低。\nSmack 是一个XMPP 协议的Java 实现，提供一套可扩展的API，不过有些时候，你还是不得不使用自己定制发送的XML 文件内容的方式来实现自己的功能。\n\n 三者之间的关系：\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-0.png)\n从上图可知，Client 端和Server端都可以通过插件的方式来进行扩展，Smack是二者传递数据的媒介。\n以上介绍来源网络。\n\n# 配置本地服务器\n## openfire下载\n[点击下载](http://www.igniterealtime.org/downloads/index.jsp)\n\n## 配置\n\n* 1、选择中文，continue\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-1.png)\n\n* 2、默认继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-2.png)\n\n* 3、默认继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-3.png)\n\n* 4、本教程数据库MySQL，此步之前先建数据库名为openfire，数据库驱动选项选择MySQL，OK。这里数据库URL替换如图所示，继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-4.png)\n\n* 5、默认继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-5.png)\n\n* 6、填写密码，用户名admin，不然密码默认admin\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-6.png)\n\n* 7、登录后台即可\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-7.png)\n\n这样openfire配置到此完成。\n\n# XMPP公共服务器\n这是公共XMPP服务器列表，免费供大家使用。\n[Public XMPP servers](https://list.jabber.at/)\n[Jabber.org](http://www.jabber.org/)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 附录\n[Openfire与XMPP协议](http://www.cnblogs.com/hoojo/archive/2012/06/18/2553975.html)\n[XMPP-RFC3920中文](http://wenku.baidu.com/link?url=OSVHeZETSwiNRJArOxcgU4Ek1MGCu83TPh5aArKtDiIUz6sisSOtpNn4sI9RYTywGkhgJX3pkGpqeJQmeLMf_YdPX3K2VegoxDk0sHwxmCy)","slug":"xmpp1","published":1,"updated":"2016-03-17T00:44:06.365Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdy4000uo4pkc9yvkie2"},{"title":"Android基于XMPP即时通讯应用（一）【openfire服务器配置】","date":"2015-01-13T16:00:00.000Z","_content":"\nOpenFire 是采用Java开发的基于XMPP（Jabber）协议，开源实时协作（RTC）服务器。\n\nSmack 是用 Java编 写的XMPP客户端代码库，是 spark 的核心\n\n开源界总是有许多有趣的东东，这三个合起来就是一个完整的XMPP IM 实现。\n\nOpenFire ——服务器端\nSpark——客户端\n\nSmack——XMPP 传输协议的实现\n\n<!-- more -->\n\n三者都是基于Java 语言的实现，其中XMPP是一个协议，协议是需要实现的，Smack起到的就是这样的一个作用。\n\nOpenFire 是基于XMPP 协议的IM 的服务器端的实现，虽然当两个用户连接后，可以通过点对点的方式来发送消息，但是用户还是需要连接到服务器来获取一些连接信息和通信信息的，所以服务器端是必须要实现的。\n\nSpark 提供了客户端一个基本的实现，并提出了一个很好的插件架构，这对于开发者来说不能不说是一个福音。我强烈建议基于插件方式来实现你新增加的功能，而不是去改它的源代码，这样有利于你项目架构，把原始项目的影响降到最低。\n\nSmack 是一个XMPP 协议的Java 实现，提供一套可扩展的API，不过有些时候，你还是不得不使用自己定制发送的XML 文件内容的方式来实现自己的功能\n \n三者之间的关系：\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-0.png)\n从上图可知，Client 端和Server端都可以通过插件的方式来进行扩展，Smack是二者传递数据的媒介。\n\n\n## 准备\nopenfire下载：[http://www.igniterealtime.org/downloads/download-landing.jsp?file=openfire/openfire_3_9_3.exe](http://www.igniterealtime.org/downloads/download-landing.jsp?file=openfire/openfire_3_9_3.exe)\n\n## 配置\n\n* 1、选择中文，continue\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-1.png)\n\n* 2、默认继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-2.png)\n\n* 3、默认继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-3.png)\n\n* 4、本教程数据库MySQL，此步之前先建数据库名为openfire，数据库驱动选项选择MySQL，OK。这里数据库URL替换如图所示，继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-4.png)\n\n* 5、默认继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-5.png)\n\n* 6、填写密码，用户名admin，不然密码默认admin\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-6.png)\n\n* 7、登录后台即可\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-7.png)\n\n这样openfire配置到此完成。\n\n\n\n","source":"_posts/wochat.md","raw":"title: Android基于XMPP即时通讯应用（一）【openfire服务器配置】\ndate: 2015-01-14 \ncategories: [Android]\ntags: [Android,XMPP,openfire]\n---\n\nOpenFire 是采用Java开发的基于XMPP（Jabber）协议，开源实时协作（RTC）服务器。\n\nSmack 是用 Java编 写的XMPP客户端代码库，是 spark 的核心\n\n开源界总是有许多有趣的东东，这三个合起来就是一个完整的XMPP IM 实现。\n\nOpenFire ——服务器端\nSpark——客户端\n\nSmack——XMPP 传输协议的实现\n\n<!-- more -->\n\n三者都是基于Java 语言的实现，其中XMPP是一个协议，协议是需要实现的，Smack起到的就是这样的一个作用。\n\nOpenFire 是基于XMPP 协议的IM 的服务器端的实现，虽然当两个用户连接后，可以通过点对点的方式来发送消息，但是用户还是需要连接到服务器来获取一些连接信息和通信信息的，所以服务器端是必须要实现的。\n\nSpark 提供了客户端一个基本的实现，并提出了一个很好的插件架构，这对于开发者来说不能不说是一个福音。我强烈建议基于插件方式来实现你新增加的功能，而不是去改它的源代码，这样有利于你项目架构，把原始项目的影响降到最低。\n\nSmack 是一个XMPP 协议的Java 实现，提供一套可扩展的API，不过有些时候，你还是不得不使用自己定制发送的XML 文件内容的方式来实现自己的功能\n \n三者之间的关系：\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-0.png)\n从上图可知，Client 端和Server端都可以通过插件的方式来进行扩展，Smack是二者传递数据的媒介。\n\n\n## 准备\nopenfire下载：[http://www.igniterealtime.org/downloads/download-landing.jsp?file=openfire/openfire_3_9_3.exe](http://www.igniterealtime.org/downloads/download-landing.jsp?file=openfire/openfire_3_9_3.exe)\n\n## 配置\n\n* 1、选择中文，continue\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-1.png)\n\n* 2、默认继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-2.png)\n\n* 3、默认继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-3.png)\n\n* 4、本教程数据库MySQL，此步之前先建数据库名为openfire，数据库驱动选项选择MySQL，OK。这里数据库URL替换如图所示，继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-4.png)\n\n* 5、默认继续\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-5.png)\n\n* 6、填写密码，用户名admin，不然密码默认admin\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-6.png)\n\n* 7、登录后台即可\n![](http://wuxiaolong.qiniudn.com/2015-01-14-xchat-7.png)\n\n这样openfire配置到此完成。\n\n\n\n","slug":"wochat","published":1,"updated":"2016-03-17T00:44:06.365Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdy6000zo4pklj2isi0b"},{"title":"微言","date":"2015-04-22T16:00:00.000Z","_content":">微言算我第一个个人App，当初的初衷，想通过这个App达到练手，并熟悉Android项目的创建到发布上线的整个流程。\n>现在我想达到了预期甚至超过了，至今我还在维护这个项目。\n>至于做成什么样子的应用，一开始根本不知道，更不知道“产品”，主观意识做一款励志的，\n>后来认知到产品概念，想把微言做的更好，而不是纯粹地练手，于是形成了现在这个样子的APP([效果预览](http://app.mi.com/detail/25323))。\n>其实其中好多功能不是我凭空想出来的，是用户反馈的。\n>PS:万事开头难，没有行动之前，什么都觉得难！其实没想象的那么难，选准方向，勇往直前吧。\n\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanScreenshots.gif)\n\n<!--more-->\n\n## 应用介绍\n微言,一款让你每天都有所心得的精微语言应用。\n\n每天花10分钟阅读一篇文章，一个月可以有大约50000字的阅读量，一年有近60万字的阅读量，专注、执着，每天阅读。\n\n微言囊括每日一文、经典语录、人生感悟，为人处世、职场励志、成功励志等等栏目，汇集各类高人经典心得和言论总结，给你无比深刻的智慧启发和人生启迪。\n\n精短良言，微言大义，陶冶情操，励志你我。\n\n## 二维码下载\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanAppDownload.png)\n\n## 应用市场\n[小米应用市场](http://app.mi.com/detail/25323)\n[魅族应用市场](http://app.meizu.com/apps/public/detail?package_name=com.android.xiaomolongstudio.weiyan)\n\n## 更新日志\nv3.5\n1、全新Material Design风格,全新体验\n2、新增多彩主题，夜间模式等任您选择\n3、新增每日推荐模块，随机精选优秀文章\n4、新增阅读量，坚持每天阅读\n5、下拉刷新等优化\n\nv3.4\n1、文章评论，分享阅读心得\n2、设置-用户登录\n3、分享、加载等优化\n\nv3.3\n1、新增每日一文模块，每天精选一篇文章\n\n\nv3.2\n1、文章列表排序优化\n2、欢迎页除掉广告\n\nv3.1\n1、文章列表排序修改（最新）\n2、文章详情除掉广告\n\nv3.0\n1、框架重构。\n2、下拉刷新优化。\n3、文章列表新增滑动动画效果。\n\n……","source":"_posts/weiyan.md","raw":"title: 微言\ndate: 2015-04-23\ncategories: App\ntags: [Life,WeiYan]\n---\n>微言算我第一个个人App，当初的初衷，想通过这个App达到练手，并熟悉Android项目的创建到发布上线的整个流程。\n>现在我想达到了预期甚至超过了，至今我还在维护这个项目。\n>至于做成什么样子的应用，一开始根本不知道，更不知道“产品”，主观意识做一款励志的，\n>后来认知到产品概念，想把微言做的更好，而不是纯粹地练手，于是形成了现在这个样子的APP([效果预览](http://app.mi.com/detail/25323))。\n>其实其中好多功能不是我凭空想出来的，是用户反馈的。\n>PS:万事开头难，没有行动之前，什么都觉得难！其实没想象的那么难，选准方向，勇往直前吧。\n\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanScreenshots.gif)\n\n<!--more-->\n\n## 应用介绍\n微言,一款让你每天都有所心得的精微语言应用。\n\n每天花10分钟阅读一篇文章，一个月可以有大约50000字的阅读量，一年有近60万字的阅读量，专注、执着，每天阅读。\n\n微言囊括每日一文、经典语录、人生感悟，为人处世、职场励志、成功励志等等栏目，汇集各类高人经典心得和言论总结，给你无比深刻的智慧启发和人生启迪。\n\n精短良言，微言大义，陶冶情操，励志你我。\n\n## 二维码下载\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanAppDownload.png)\n\n## 应用市场\n[小米应用市场](http://app.mi.com/detail/25323)\n[魅族应用市场](http://app.meizu.com/apps/public/detail?package_name=com.android.xiaomolongstudio.weiyan)\n\n## 更新日志\nv3.5\n1、全新Material Design风格,全新体验\n2、新增多彩主题，夜间模式等任您选择\n3、新增每日推荐模块，随机精选优秀文章\n4、新增阅读量，坚持每天阅读\n5、下拉刷新等优化\n\nv3.4\n1、文章评论，分享阅读心得\n2、设置-用户登录\n3、分享、加载等优化\n\nv3.3\n1、新增每日一文模块，每天精选一篇文章\n\n\nv3.2\n1、文章列表排序优化\n2、欢迎页除掉广告\n\nv3.1\n1、文章列表排序修改（最新）\n2、文章详情除掉广告\n\nv3.0\n1、框架重构。\n2、下拉刷新优化。\n3、文章列表新增滑动动画效果。\n\n……","slug":"weiyan","published":1,"updated":"2016-03-17T00:44:06.365Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdya0016o4pky4v96xio"},{"title":"微联","date":"2013-12-15T14:30:50.000Z","_content":"\n# 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weilian1.jpg)\n<!--more-->\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weilian2.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weilian3.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weilian4.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weilian5.jpg)\n\n# 应用介绍 \n台州冰蛙信息科技有限公司2013年与温岭微联文化传播有限公司联合推出“微联”移动商旅专用手机APP，集中了台州地区各个领域内不同企业和商家的供应信息、需求信息、联系方式，每天在线及时更新发布企业和商家信息，方便用户浏览、查询以及招商引资。并且在原有功能基础上，针对台州及各地商旅人士推出酒店优惠折扣预订功能。\n\n# 下载地址\n[安智市场](http://www.anzhi.com/soft_1581560.html)\n\n`温馨提示：`由于时间过久，某些机型未适配，或某些手机已经打不开此APP啦。","source":"_posts/weilian.md","raw":"title: 微联\ndate: 2013-12-15 22:30:50\ntags: weilian\ncategory: App\n---\n\n# 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weilian1.jpg)\n<!--more-->\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weilian2.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weilian3.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weilian4.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weilian5.jpg)\n\n# 应用介绍 \n台州冰蛙信息科技有限公司2013年与温岭微联文化传播有限公司联合推出“微联”移动商旅专用手机APP，集中了台州地区各个领域内不同企业和商家的供应信息、需求信息、联系方式，每天在线及时更新发布企业和商家信息，方便用户浏览、查询以及招商引资。并且在原有功能基础上，针对台州及各地商旅人士推出酒店优惠折扣预订功能。\n\n# 下载地址\n[安智市场](http://www.anzhi.com/soft_1581560.html)\n\n`温馨提示：`由于时间过久，某些机型未适配，或某些手机已经打不开此APP啦。","slug":"weilian","published":1,"updated":"2016-03-17T00:44:06.364Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdyc001co4pknhqr2ogn"},{"title":"uCrop使用及源码浅析","date":"2016-06-20T00:52:32.000Z","_content":"# uCrop使用\n\n## github地址\n[https://github.com/Yalantis/uCrop](https://github.com/Yalantis/uCrop)\n然后clone或下载到本地，运行之。\n\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/ucrop0.gif?watermark/2/text/5ZC05bCP6b6Z5ZCM5a24/font/5qW35L2T/fontsize/500/fill/I0VGRUZFRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10)\n\n<!--more-->\n\n## app/build.gradle\n```java\ncompile 'com.yalantis:ucrop:1.5.0'\n```\n\n## AndroidManifest.xml\n```java\n<activity\n    android:name=\"com.yalantis.ucrop.UCropActivity\"\n    android:screenOrientation=\"portrait\"\n    android:theme=\"@style/Theme.AppCompat.Light.NoActionBar\" />\n```\n这里theme可以改成自己的\n\n## 配置uCrop \n```java\n /**\n  * 启动裁剪\n  * @param activity 上下文\n  * @param sourceFilePath 需要裁剪图片的绝对路径\n  * @param requestCode 比如：UCrop.REQUEST_CROP\n  * @param aspectRatioX 裁剪图片宽高比\n  * @param aspectRatioY 裁剪图片宽高比\n  * @return\n  */\npublic static String startUCrop(Activity activity, String sourceFilePath, \n\tint requestCode, float aspectRatioX, float aspectRatioY) {\n    Uri sourceUri = Uri.fromFile(new File(sourceFilePath));\n    File outDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n    if (!outDir.exists()) {\n        outDir.mkdirs();\n    }\n    File outFile = new File(outDir, System.currentTimeMillis() + \".jpg\");\n    //裁剪后图片的绝对路径\n    String cameraScalePath = outFile.getAbsolutePath();\n    Uri destinationUri = Uri.fromFile(outFile);\n    //初始化，第一个参数：需要裁剪的图片；第二个参数：裁剪后图片\n    UCrop uCrop = UCrop.of(sourceUri, destinationUri);\n    //初始化UCrop配置\n    UCrop.Options options = new UCrop.Options();\n    //设置裁剪图片可操作的手势\n    options.setAllowedGestures(UCropActivity.SCALE, UCropActivity.ROTATE, UCropActivity.ALL);\n    //是否隐藏底部容器，默认显示\n    options.setHideBottomControls(true);\n    //设置toolbar颜色\n    options.setToolbarColor(ActivityCompat.getColor(activity, R.color.colorPrimary));\n    //设置状态栏颜色\n    options.setStatusBarColor(ActivityCompat.getColor(activity, R.color.colorPrimary));\n    //是否能调整裁剪框\n    options.setFreeStyleCropEnabled(true);\n    //UCrop配置\n    uCrop.withOptions(options);\n    //设置裁剪图片的宽高比，比如16：9\n    uCrop.withAspectRatio(aspectRatioX, aspectRatioY);\n    //uCrop.useSourceImageAspectRatio();\n    //跳转裁剪页面\n    uCrop.start(activity, requestCode);\n    return cameraScalePath;\n}\n```\n\n## 其他配置\n```java\n//设置Toolbar标题\nvoid setToolbarTitle(@Nullable String text)\n//设置裁剪的图片格式\nvoid setCompressionFormat(@NonNull Bitmap.CompressFormat format)\n//设置裁剪的图片质量，取值0-100\nvoid setCompressionQuality(@IntRange(from = 0) int compressQuality)\n//设置最多缩放的比例尺\nvoid setMaxScaleMultiplier(@FloatRange(from = 1.0, fromInclusive = false) float maxScaleMultiplier)\n//动画时间\nvoid setImageToCropBoundsAnimDuration(@IntRange(from = 100) int durationMillis)\n//设置图片压缩最大值\nvoid setMaxBitmapSize(@IntRange(from = 100) int maxBitmapSize)\n//是否显示椭圆裁剪框阴影\nvoid setOvalDimmedLayer(boolean isOval) \n//设置椭圆裁剪框阴影颜色\nvoid setDimmedLayerColor(@ColorInt int color)\n//是否显示裁剪框\nvoid setShowCropFrame(boolean show)\n//设置裁剪框边的宽度\nvoid setCropFrameStrokeWidth(@IntRange(from = 0) int width)\n//是否显示裁剪框网格\nvoid setShowCropGrid(boolean show) \n//设置裁剪框网格颜色\nvoid setCropGridColor(@ColorInt int color)\n//设置裁剪框网格宽\nvoid setCropGridStrokeWidth(@IntRange(from = 0) int width)\n```\n\n## onActivityResult \n经过裁剪，返回结果，这里我一般只需要裁剪后的图片绝对路径（调用上面startUCrop，即返回图片路径），然后调接口上传服务器。\n```java\n@Override\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\n    if (resultCode == RESULT_OK && requestCode == UCrop.REQUEST_CROP) {\n        final Uri resultUri = UCrop.getOutput(data);\n    } else if (resultCode == UCrop.RESULT_ERROR) {\n        final Throwable cropError = UCrop.getError(data);\n    }\n}\n```\n\n# uCrop源码浅析\nuCrop源码能学习的东西有很多，比如左右滑的标尺，不过我们这里源码浅析只关注裁剪部分。\n\n## 类关系\n首先有个大概了解：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/ucrop1.jpg?watermark/2/text/5ZC05bCP6b6Z5ZCM5a24/font/5qW35L2T/fontsize/500/fill/I0VGRUZFRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10)\n\t\nGestureCropImageView：负责监听各种手势\nCropImageView：主要完成图片裁剪工作，和判断裁剪图片是否充满裁剪框\nTransformImageView：负责图片旋转、缩放、位移操作\n\n## 入口\n由上面的效果图可知，点击右上角，调用裁剪操作，代码如下：\n```java\n@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    if (item.getItemId() == R.id.menu_crop) {\n        cropAndSaveImage();\n    }\n    return super.onOptionsItemSelected(item);\n}\n//裁剪和保存图片\nprotected void cropAndSaveImage() {\n\t……\n    mGestureCropImageView.cropAndSaveImage(mCompressFormat, mCompressQuality, new BitmapCropCallback() {\n        @Override\n        public void onBitmapCropped(@NonNull Uri resultUri) {\n            setResultUri(resultUri, mGestureCropImageView.getTargetAspectRatio());\n            finish();\n        }\n        @Override\n        public void onCropFailure(@NonNull Throwable t) {\n            setResultError(t);\n            finish();\n        }\n    });\n}\n```\n这里调用了GestureCropImageView&cropAndSaveImage方法，如下：\n```java\n/**\n * @param compressFormat  图片压缩格式\n * @param compressQuality 图片压缩质量\n * @param cropCallback    图片压缩回调\n */\npublic void cropAndSaveImage(@NonNull Bitmap.CompressFormat compressFormat, int \t\t\t\t\t\t\t\t\t\t\tcompressQuality,@Nullable BitmapCropCallback cropCallback) {\n    //取消所有动画\n    cancelAllAnimations();\n    //判断裁剪图片是否充满裁剪框\n    setImageToWrapCropBounds(false);\n    //进行裁剪\n    new BitmapCropTask(getViewBitmap(), mCropRect, RectUtils.trapToRect(mCurrentImageCorners),\n            getCurrentScale(), getCurrentAngle(),\n            mMaxResultImageSizeX, mMaxResultImageSizeY,\n            compressFormat, compressQuality,\n            getImageInputPath(), getImageOutputPath(),\n            cropCallback).execute();\n}\n```\n\n## 裁剪之前\n\n### setImageToWrapCropBounds\n裁剪之前，先判断裁剪图片是否充满裁剪框，如果没有，进行移动和缩放让其充满。\n```java\n public void setImageToWrapCropBounds(boolean animate) {\n     //mBitmapLaidOut图片加载OK，isImageWrapCropBounds()检查图片是否充满裁剪框\n     if (mBitmapLaidOut && !isImageWrapCropBounds()) {\n         //当前图片中心X点\n         float currentX = mCurrentImageCenter[0];\n         //当前图片中心Y点\n         float currentY = mCurrentImageCenter[1];\n         //当前图片缩放值\n         float currentScale = getCurrentScale();\n         //差量\n         float deltaX = mCropRect.centerX() - currentX;\n         float deltaY = mCropRect.centerY() - currentY;\n         float deltaScale = 0;\n         //临时矩阵重置\n         mTempMatrix.reset();\n         //临时矩阵移动\n         mTempMatrix.setTranslate(deltaX, deltaY);\n         //复制到新的数组\n         final float[] tempCurrentImageCorners = Arrays.copyOf(mCurrentImageCorners, mCurrentImageCorners.length);\n         //将此矩阵应用于二维点的数组，并编写转换后的指向数组的点\n         mTempMatrix.mapPoints(tempCurrentImageCorners);\n         //再检查图片是否充满裁剪框\n         boolean willImageWrapCropBoundsAfterTranslate = isImageWrapCropBounds(tempCurrentImageCorners);\n         if (willImageWrapCropBoundsAfterTranslate) {\n             //图片缩进的数组\n             final float[] imageIndents = calculateImageIndents();\n             deltaX = -(imageIndents[0] + imageIndents[2]);\n             deltaY = -(imageIndents[1] + imageIndents[3]);\n         } else {\n             RectF tempCropRect = new RectF(mCropRect);\n             mTempMatrix.reset();\n             mTempMatrix.setRotate(getCurrentAngle());\n             mTempMatrix.mapRect(tempCropRect);\n             //获取裁剪图片的边\n             final float[] currentImageSides = RectUtils.getRectSidesFromCorners(mCurrentImageCorners);\n             deltaScale = Math.max(tempCropRect.width() / currentImageSides[0],\n                     tempCropRect.height() / currentImageSides[1]);\n             deltaScale = deltaScale * currentScale - currentScale;\n         }\n         if (animate) {\n             //移动或缩放图片（有动画效果）\n             post(mWrapCropBoundsRunnable = new WrapCropBoundsRunnable(\n                     CropImageView.this, mImageToWrapCropBoundsAnimDuration, currentX, currentY, deltaX, deltaY,\n                     currentScale, deltaScale, willImageWrapCropBoundsAfterTranslate));\n         } else {\n             //移动图片\n             postTranslate(deltaX, deltaY);\n             if (!willImageWrapCropBoundsAfterTranslate) {\n                 //缩放图片\n                 zoomInImage(currentScale + deltaScale, mCropRect.centerX(), mCropRect.centerY());\n             }\n         }\n     }\n }\n```\n\n## 进行裁剪\n裁剪放到了异步，即BitmapCropTask继承AsyncTask，先设置原始图片resizeScale值，然后通过ExifInterface保存新的图片，即裁剪后的图片。\n```java\npublic class BitmapCropTask extends AsyncTask<Void, Void, Throwable> {\n\t\n\t……\n\n    /**\n     * @param viewBitmap          裁剪图片bitmap\n     * @param cropRect            裁剪矩形\n     * @param currentImageRect    当前图片矩形\n     * @param currentScale        当前图片缩放值\n     * @param currentAngle        当前图片角度\n     * @param maxResultImageSizeX 图片裁剪后最大宽值\n     * @param maxResultImageSizeY 图片裁剪后最大高值\n     * @param compressFormat      图片裁剪的格式\n     * @param compressQuality     图片裁剪的质量\n     * @param imageInputPath      裁剪图片路径\n     * @param imageOutputPath     图片裁剪后路径\n     * @param cropCallback        裁剪回调\n     */\n    public BitmapCropTask(@Nullable Bitmap viewBitmap,\n                          @NonNull RectF cropRect, @NonNull RectF currentImageRect,\n                          float currentScale, float currentAngle,\n                          int maxResultImageSizeX, int maxResultImageSizeY,\n                          @NonNull Bitmap.CompressFormat compressFormat, int compressQuality,\n                          @NonNull String imageInputPath, @NonNull String imageOutputPath,\n                          @Nullable BitmapCropCallback cropCallback) {\n\n      ……\n    }\n\n    @Override\n    @Nullable\n    protected Throwable doInBackground(Void... params) {\n        if (mViewBitmap == null || mViewBitmap.isRecycled()) {\n            return new NullPointerException(\"ViewBitmap is null or already recycled\");\n        }\n        if (mCurrentImageRect.isEmpty()) {\n            return new NullPointerException(\"CurrentImageRect is empty\");\n        }\n\t\t//设置resizeScale值\n        float resizeScale = resize();\n\n        try {\n\t        //裁剪\n            crop(resizeScale);\n            //回收\n            mViewBitmap.recycle();\n            mViewBitmap = null;\n        } catch (Throwable throwable) {\n            return throwable;\n        }\n\n        return null;\n    }\n\n    private float resize() {\n        //初始Options\n        final BitmapFactory.Options options = new BitmapFactory.Options();\n        //查询该位图，而无需分配存储器，可获取outHeight(图片原始高度)和 outWidth(图片的原始宽度)\n        options.inJustDecodeBounds = true;\n        //裁剪图片解码\n        BitmapFactory.decodeFile(mImageInputPath, options);\n        //原始图片和裁剪后图片比值\n        float scaleX = options.outWidth / mViewBitmap.getWidth();\n        float scaleY = options.outHeight / mViewBitmap.getHeight();\n\n        float resizeScale = Math.min(scaleX, scaleY);\n\n        mCurrentScale /= resizeScale;\n        //初始化值为1\n        resizeScale = 1;\n        if (mMaxResultImageSizeX > 0 && mMaxResultImageSizeY > 0) {\n            float cropWidth = mCropRect.width() / mCurrentScale;\n            float cropHeight = mCropRect.height() / mCurrentScale;\n\n            if (cropWidth > mMaxResultImageSizeX || cropHeight > mMaxResultImageSizeY) {\n\n                scaleX = mMaxResultImageSizeX / cropWidth;\n                scaleY = mMaxResultImageSizeY / cropHeight;\n                //设置resizeScale，如果是2就是高度和宽度都是原始的一半\n                resizeScale = Math.min(scaleX, scaleY);\n\n                mCurrentScale /= resizeScale;\n            }\n        }\n        return resizeScale;\n    }\n\n    private boolean crop(float resizeScale) throws IOException {\n        //ExifInterface这个接口提供了图片文件的旋转，gps，时间等信息，从原始图片读出Exif标签\n        ExifInterface originalExif = new ExifInterface(mImageInputPath);\n\n        int top = Math.round((mCropRect.top - mCurrentImageRect.top) / mCurrentScale);\n        int left = Math.round((mCropRect.left - mCurrentImageRect.left) / mCurrentScale);\n        int width = Math.round(mCropRect.width() / mCurrentScale);\n        int height = Math.round(mCropRect.height() / mCurrentScale);\n\t\t//复制图片\n        boolean cropped = cropCImg(mImageInputPath, mImageOutputPath,\n                left, top, width, height, mCurrentAngle, resizeScale,\n                mCompressFormat.ordinal(), mCompressQuality);\n        if (cropped) {\n\t        //拿到裁剪后图片\n            copyExif(originalExif, width, height);\n        }\n\n        return cropped;\n    }\n\n    @SuppressWarnings(\"JniMissingFunction\")\n    native public boolean cropCImg(String inputPath, String outputPath,\n                                   int left, int top, int width, int height, float angle, float resizeScale,\n                                   int format, int quality) throws IOException, OutOfMemoryError;\n\t/**\n\t * @param originalExif 原始图片Exif\n\t * @param width        裁剪后图片宽\n\t * @param height       裁剪后图片高\n\t * @throws IOException 是否异常\n\t */\n    public void copyExif(ExifInterface originalExif, int width, int height) throws IOException {\n        //Exif标签数组\n        String[] attributes = new String[]{\n                ExifInterface.TAG_APERTURE,\n                ……\n        };\n        //指定裁剪后图片路径，初始化新的ExifInterface\n        ExifInterface newExif = new ExifInterface(mImageOutputPath);\n        String value;\n        for (String attribute : attributes) {\n            value = originalExif.getAttribute(attribute);\n            if (!TextUtils.isEmpty(value)) {\n                //设置Exif标签\n                newExif.setAttribute(attribute, value);\n            }\n        }\n        newExif.setAttribute(ExifInterface.TAG_IMAGE_WIDTH, String.valueOf(width));\n        newExif.setAttribute(ExifInterface.TAG_IMAGE_LENGTH, String.valueOf(height));\n        newExif.setAttribute(ExifInterface.TAG_ORIENTATION, \"0\");\n        //保存\n        newExif.saveAttributes();\n    }\n\n    @Override\n    protected void onPostExecute(@Nullable Throwable t) {\n        if (mCropCallback != null) {\n            if (t == null) {\n                //接口回调，over\n                mCropCallback.onBitmapCropped(Uri.fromFile(new File(mImageOutputPath)));\n            } else {\n                mCropCallback.onCropFailure(t);\n            }\n        }\n    }\n\n}\n```\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidProgrammerLogo.jpg)\n\n# 总结\nuCrop功能强大，对于我来说，有很多东西值得学习，难点如Rect包含问题（其实这块还不是很理解），新知识如ExifInterface操作图片，BitmapFactory显示图片的知识点温故等，还有自定义左右滑的标尺，都是不错的学习源码。抛砖引玉至此，over。","source":"_posts/uCrop.md","raw":"title: uCrop使用及源码浅析\ndate: 2016-06-20 08:52:32\ntags: uCrop\ncategory: SourceAnalysis\n---\n# uCrop使用\n\n## github地址\n[https://github.com/Yalantis/uCrop](https://github.com/Yalantis/uCrop)\n然后clone或下载到本地，运行之。\n\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/ucrop0.gif?watermark/2/text/5ZC05bCP6b6Z5ZCM5a24/font/5qW35L2T/fontsize/500/fill/I0VGRUZFRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10)\n\n<!--more-->\n\n## app/build.gradle\n```java\ncompile 'com.yalantis:ucrop:1.5.0'\n```\n\n## AndroidManifest.xml\n```java\n<activity\n    android:name=\"com.yalantis.ucrop.UCropActivity\"\n    android:screenOrientation=\"portrait\"\n    android:theme=\"@style/Theme.AppCompat.Light.NoActionBar\" />\n```\n这里theme可以改成自己的\n\n## 配置uCrop \n```java\n /**\n  * 启动裁剪\n  * @param activity 上下文\n  * @param sourceFilePath 需要裁剪图片的绝对路径\n  * @param requestCode 比如：UCrop.REQUEST_CROP\n  * @param aspectRatioX 裁剪图片宽高比\n  * @param aspectRatioY 裁剪图片宽高比\n  * @return\n  */\npublic static String startUCrop(Activity activity, String sourceFilePath, \n\tint requestCode, float aspectRatioX, float aspectRatioY) {\n    Uri sourceUri = Uri.fromFile(new File(sourceFilePath));\n    File outDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n    if (!outDir.exists()) {\n        outDir.mkdirs();\n    }\n    File outFile = new File(outDir, System.currentTimeMillis() + \".jpg\");\n    //裁剪后图片的绝对路径\n    String cameraScalePath = outFile.getAbsolutePath();\n    Uri destinationUri = Uri.fromFile(outFile);\n    //初始化，第一个参数：需要裁剪的图片；第二个参数：裁剪后图片\n    UCrop uCrop = UCrop.of(sourceUri, destinationUri);\n    //初始化UCrop配置\n    UCrop.Options options = new UCrop.Options();\n    //设置裁剪图片可操作的手势\n    options.setAllowedGestures(UCropActivity.SCALE, UCropActivity.ROTATE, UCropActivity.ALL);\n    //是否隐藏底部容器，默认显示\n    options.setHideBottomControls(true);\n    //设置toolbar颜色\n    options.setToolbarColor(ActivityCompat.getColor(activity, R.color.colorPrimary));\n    //设置状态栏颜色\n    options.setStatusBarColor(ActivityCompat.getColor(activity, R.color.colorPrimary));\n    //是否能调整裁剪框\n    options.setFreeStyleCropEnabled(true);\n    //UCrop配置\n    uCrop.withOptions(options);\n    //设置裁剪图片的宽高比，比如16：9\n    uCrop.withAspectRatio(aspectRatioX, aspectRatioY);\n    //uCrop.useSourceImageAspectRatio();\n    //跳转裁剪页面\n    uCrop.start(activity, requestCode);\n    return cameraScalePath;\n}\n```\n\n## 其他配置\n```java\n//设置Toolbar标题\nvoid setToolbarTitle(@Nullable String text)\n//设置裁剪的图片格式\nvoid setCompressionFormat(@NonNull Bitmap.CompressFormat format)\n//设置裁剪的图片质量，取值0-100\nvoid setCompressionQuality(@IntRange(from = 0) int compressQuality)\n//设置最多缩放的比例尺\nvoid setMaxScaleMultiplier(@FloatRange(from = 1.0, fromInclusive = false) float maxScaleMultiplier)\n//动画时间\nvoid setImageToCropBoundsAnimDuration(@IntRange(from = 100) int durationMillis)\n//设置图片压缩最大值\nvoid setMaxBitmapSize(@IntRange(from = 100) int maxBitmapSize)\n//是否显示椭圆裁剪框阴影\nvoid setOvalDimmedLayer(boolean isOval) \n//设置椭圆裁剪框阴影颜色\nvoid setDimmedLayerColor(@ColorInt int color)\n//是否显示裁剪框\nvoid setShowCropFrame(boolean show)\n//设置裁剪框边的宽度\nvoid setCropFrameStrokeWidth(@IntRange(from = 0) int width)\n//是否显示裁剪框网格\nvoid setShowCropGrid(boolean show) \n//设置裁剪框网格颜色\nvoid setCropGridColor(@ColorInt int color)\n//设置裁剪框网格宽\nvoid setCropGridStrokeWidth(@IntRange(from = 0) int width)\n```\n\n## onActivityResult \n经过裁剪，返回结果，这里我一般只需要裁剪后的图片绝对路径（调用上面startUCrop，即返回图片路径），然后调接口上传服务器。\n```java\n@Override\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\n    if (resultCode == RESULT_OK && requestCode == UCrop.REQUEST_CROP) {\n        final Uri resultUri = UCrop.getOutput(data);\n    } else if (resultCode == UCrop.RESULT_ERROR) {\n        final Throwable cropError = UCrop.getError(data);\n    }\n}\n```\n\n# uCrop源码浅析\nuCrop源码能学习的东西有很多，比如左右滑的标尺，不过我们这里源码浅析只关注裁剪部分。\n\n## 类关系\n首先有个大概了解：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/ucrop1.jpg?watermark/2/text/5ZC05bCP6b6Z5ZCM5a24/font/5qW35L2T/fontsize/500/fill/I0VGRUZFRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10)\n\t\nGestureCropImageView：负责监听各种手势\nCropImageView：主要完成图片裁剪工作，和判断裁剪图片是否充满裁剪框\nTransformImageView：负责图片旋转、缩放、位移操作\n\n## 入口\n由上面的效果图可知，点击右上角，调用裁剪操作，代码如下：\n```java\n@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    if (item.getItemId() == R.id.menu_crop) {\n        cropAndSaveImage();\n    }\n    return super.onOptionsItemSelected(item);\n}\n//裁剪和保存图片\nprotected void cropAndSaveImage() {\n\t……\n    mGestureCropImageView.cropAndSaveImage(mCompressFormat, mCompressQuality, new BitmapCropCallback() {\n        @Override\n        public void onBitmapCropped(@NonNull Uri resultUri) {\n            setResultUri(resultUri, mGestureCropImageView.getTargetAspectRatio());\n            finish();\n        }\n        @Override\n        public void onCropFailure(@NonNull Throwable t) {\n            setResultError(t);\n            finish();\n        }\n    });\n}\n```\n这里调用了GestureCropImageView&cropAndSaveImage方法，如下：\n```java\n/**\n * @param compressFormat  图片压缩格式\n * @param compressQuality 图片压缩质量\n * @param cropCallback    图片压缩回调\n */\npublic void cropAndSaveImage(@NonNull Bitmap.CompressFormat compressFormat, int \t\t\t\t\t\t\t\t\t\t\tcompressQuality,@Nullable BitmapCropCallback cropCallback) {\n    //取消所有动画\n    cancelAllAnimations();\n    //判断裁剪图片是否充满裁剪框\n    setImageToWrapCropBounds(false);\n    //进行裁剪\n    new BitmapCropTask(getViewBitmap(), mCropRect, RectUtils.trapToRect(mCurrentImageCorners),\n            getCurrentScale(), getCurrentAngle(),\n            mMaxResultImageSizeX, mMaxResultImageSizeY,\n            compressFormat, compressQuality,\n            getImageInputPath(), getImageOutputPath(),\n            cropCallback).execute();\n}\n```\n\n## 裁剪之前\n\n### setImageToWrapCropBounds\n裁剪之前，先判断裁剪图片是否充满裁剪框，如果没有，进行移动和缩放让其充满。\n```java\n public void setImageToWrapCropBounds(boolean animate) {\n     //mBitmapLaidOut图片加载OK，isImageWrapCropBounds()检查图片是否充满裁剪框\n     if (mBitmapLaidOut && !isImageWrapCropBounds()) {\n         //当前图片中心X点\n         float currentX = mCurrentImageCenter[0];\n         //当前图片中心Y点\n         float currentY = mCurrentImageCenter[1];\n         //当前图片缩放值\n         float currentScale = getCurrentScale();\n         //差量\n         float deltaX = mCropRect.centerX() - currentX;\n         float deltaY = mCropRect.centerY() - currentY;\n         float deltaScale = 0;\n         //临时矩阵重置\n         mTempMatrix.reset();\n         //临时矩阵移动\n         mTempMatrix.setTranslate(deltaX, deltaY);\n         //复制到新的数组\n         final float[] tempCurrentImageCorners = Arrays.copyOf(mCurrentImageCorners, mCurrentImageCorners.length);\n         //将此矩阵应用于二维点的数组，并编写转换后的指向数组的点\n         mTempMatrix.mapPoints(tempCurrentImageCorners);\n         //再检查图片是否充满裁剪框\n         boolean willImageWrapCropBoundsAfterTranslate = isImageWrapCropBounds(tempCurrentImageCorners);\n         if (willImageWrapCropBoundsAfterTranslate) {\n             //图片缩进的数组\n             final float[] imageIndents = calculateImageIndents();\n             deltaX = -(imageIndents[0] + imageIndents[2]);\n             deltaY = -(imageIndents[1] + imageIndents[3]);\n         } else {\n             RectF tempCropRect = new RectF(mCropRect);\n             mTempMatrix.reset();\n             mTempMatrix.setRotate(getCurrentAngle());\n             mTempMatrix.mapRect(tempCropRect);\n             //获取裁剪图片的边\n             final float[] currentImageSides = RectUtils.getRectSidesFromCorners(mCurrentImageCorners);\n             deltaScale = Math.max(tempCropRect.width() / currentImageSides[0],\n                     tempCropRect.height() / currentImageSides[1]);\n             deltaScale = deltaScale * currentScale - currentScale;\n         }\n         if (animate) {\n             //移动或缩放图片（有动画效果）\n             post(mWrapCropBoundsRunnable = new WrapCropBoundsRunnable(\n                     CropImageView.this, mImageToWrapCropBoundsAnimDuration, currentX, currentY, deltaX, deltaY,\n                     currentScale, deltaScale, willImageWrapCropBoundsAfterTranslate));\n         } else {\n             //移动图片\n             postTranslate(deltaX, deltaY);\n             if (!willImageWrapCropBoundsAfterTranslate) {\n                 //缩放图片\n                 zoomInImage(currentScale + deltaScale, mCropRect.centerX(), mCropRect.centerY());\n             }\n         }\n     }\n }\n```\n\n## 进行裁剪\n裁剪放到了异步，即BitmapCropTask继承AsyncTask，先设置原始图片resizeScale值，然后通过ExifInterface保存新的图片，即裁剪后的图片。\n```java\npublic class BitmapCropTask extends AsyncTask<Void, Void, Throwable> {\n\t\n\t……\n\n    /**\n     * @param viewBitmap          裁剪图片bitmap\n     * @param cropRect            裁剪矩形\n     * @param currentImageRect    当前图片矩形\n     * @param currentScale        当前图片缩放值\n     * @param currentAngle        当前图片角度\n     * @param maxResultImageSizeX 图片裁剪后最大宽值\n     * @param maxResultImageSizeY 图片裁剪后最大高值\n     * @param compressFormat      图片裁剪的格式\n     * @param compressQuality     图片裁剪的质量\n     * @param imageInputPath      裁剪图片路径\n     * @param imageOutputPath     图片裁剪后路径\n     * @param cropCallback        裁剪回调\n     */\n    public BitmapCropTask(@Nullable Bitmap viewBitmap,\n                          @NonNull RectF cropRect, @NonNull RectF currentImageRect,\n                          float currentScale, float currentAngle,\n                          int maxResultImageSizeX, int maxResultImageSizeY,\n                          @NonNull Bitmap.CompressFormat compressFormat, int compressQuality,\n                          @NonNull String imageInputPath, @NonNull String imageOutputPath,\n                          @Nullable BitmapCropCallback cropCallback) {\n\n      ……\n    }\n\n    @Override\n    @Nullable\n    protected Throwable doInBackground(Void... params) {\n        if (mViewBitmap == null || mViewBitmap.isRecycled()) {\n            return new NullPointerException(\"ViewBitmap is null or already recycled\");\n        }\n        if (mCurrentImageRect.isEmpty()) {\n            return new NullPointerException(\"CurrentImageRect is empty\");\n        }\n\t\t//设置resizeScale值\n        float resizeScale = resize();\n\n        try {\n\t        //裁剪\n            crop(resizeScale);\n            //回收\n            mViewBitmap.recycle();\n            mViewBitmap = null;\n        } catch (Throwable throwable) {\n            return throwable;\n        }\n\n        return null;\n    }\n\n    private float resize() {\n        //初始Options\n        final BitmapFactory.Options options = new BitmapFactory.Options();\n        //查询该位图，而无需分配存储器，可获取outHeight(图片原始高度)和 outWidth(图片的原始宽度)\n        options.inJustDecodeBounds = true;\n        //裁剪图片解码\n        BitmapFactory.decodeFile(mImageInputPath, options);\n        //原始图片和裁剪后图片比值\n        float scaleX = options.outWidth / mViewBitmap.getWidth();\n        float scaleY = options.outHeight / mViewBitmap.getHeight();\n\n        float resizeScale = Math.min(scaleX, scaleY);\n\n        mCurrentScale /= resizeScale;\n        //初始化值为1\n        resizeScale = 1;\n        if (mMaxResultImageSizeX > 0 && mMaxResultImageSizeY > 0) {\n            float cropWidth = mCropRect.width() / mCurrentScale;\n            float cropHeight = mCropRect.height() / mCurrentScale;\n\n            if (cropWidth > mMaxResultImageSizeX || cropHeight > mMaxResultImageSizeY) {\n\n                scaleX = mMaxResultImageSizeX / cropWidth;\n                scaleY = mMaxResultImageSizeY / cropHeight;\n                //设置resizeScale，如果是2就是高度和宽度都是原始的一半\n                resizeScale = Math.min(scaleX, scaleY);\n\n                mCurrentScale /= resizeScale;\n            }\n        }\n        return resizeScale;\n    }\n\n    private boolean crop(float resizeScale) throws IOException {\n        //ExifInterface这个接口提供了图片文件的旋转，gps，时间等信息，从原始图片读出Exif标签\n        ExifInterface originalExif = new ExifInterface(mImageInputPath);\n\n        int top = Math.round((mCropRect.top - mCurrentImageRect.top) / mCurrentScale);\n        int left = Math.round((mCropRect.left - mCurrentImageRect.left) / mCurrentScale);\n        int width = Math.round(mCropRect.width() / mCurrentScale);\n        int height = Math.round(mCropRect.height() / mCurrentScale);\n\t\t//复制图片\n        boolean cropped = cropCImg(mImageInputPath, mImageOutputPath,\n                left, top, width, height, mCurrentAngle, resizeScale,\n                mCompressFormat.ordinal(), mCompressQuality);\n        if (cropped) {\n\t        //拿到裁剪后图片\n            copyExif(originalExif, width, height);\n        }\n\n        return cropped;\n    }\n\n    @SuppressWarnings(\"JniMissingFunction\")\n    native public boolean cropCImg(String inputPath, String outputPath,\n                                   int left, int top, int width, int height, float angle, float resizeScale,\n                                   int format, int quality) throws IOException, OutOfMemoryError;\n\t/**\n\t * @param originalExif 原始图片Exif\n\t * @param width        裁剪后图片宽\n\t * @param height       裁剪后图片高\n\t * @throws IOException 是否异常\n\t */\n    public void copyExif(ExifInterface originalExif, int width, int height) throws IOException {\n        //Exif标签数组\n        String[] attributes = new String[]{\n                ExifInterface.TAG_APERTURE,\n                ……\n        };\n        //指定裁剪后图片路径，初始化新的ExifInterface\n        ExifInterface newExif = new ExifInterface(mImageOutputPath);\n        String value;\n        for (String attribute : attributes) {\n            value = originalExif.getAttribute(attribute);\n            if (!TextUtils.isEmpty(value)) {\n                //设置Exif标签\n                newExif.setAttribute(attribute, value);\n            }\n        }\n        newExif.setAttribute(ExifInterface.TAG_IMAGE_WIDTH, String.valueOf(width));\n        newExif.setAttribute(ExifInterface.TAG_IMAGE_LENGTH, String.valueOf(height));\n        newExif.setAttribute(ExifInterface.TAG_ORIENTATION, \"0\");\n        //保存\n        newExif.saveAttributes();\n    }\n\n    @Override\n    protected void onPostExecute(@Nullable Throwable t) {\n        if (mCropCallback != null) {\n            if (t == null) {\n                //接口回调，over\n                mCropCallback.onBitmapCropped(Uri.fromFile(new File(mImageOutputPath)));\n            } else {\n                mCropCallback.onCropFailure(t);\n            }\n        }\n    }\n\n}\n```\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidProgrammerLogo.jpg)\n\n# 总结\nuCrop功能强大，对于我来说，有很多东西值得学习，难点如Rect包含问题（其实这块还不是很理解），新知识如ExifInterface操作图片，BitmapFactory显示图片的知识点温故等，还有自定义左右滑的标尺，都是不错的学习源码。抛砖引玉至此，over。","slug":"uCrop","published":1,"updated":"2016-06-22T09:18:36.920Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdye001go4pkkufktzqx"},{"title":"Android Toolbar","date":"2015-11-10T02:18:18.000Z","_content":"在Material Design之中有一个名称为Toolbar，用来取代过去的ActionBar控件。\n# 基本用法\n可分为三步：\n## 新增ToolBar样式\nvalue/styles.xml：\n```js\n <style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\">\n  <item name=\"colorPrimary\">@color/colorPrimary</item>\n  <item name=\"colorPrimaryDark\">@color/colorPrimaryDark</item>\n  <item name=\"colorAccent\">@color/colorAccent</item>\n  <item name=\"android:textColorPrimary\">@android:color/white</item>\n  <!--返回或更多(app:showAsAction=\"never\")的按钮颜色-->\n  <item name=\"colorControlNormal\">@android:color/white</item>\n  <!--菜单字体颜色-->\n  <item name=\"actionMenuTextColor\">@android:color/white</item>\n </style>\n```\n看看 parent=\"Theme.AppCompat.Light.NoActionBar\"\n```js\n <style name=\"Theme.AppCompat.Light.NoActionBar\">\n        <item name=\"windowActionBar\">false</item>\n        <item name=\"windowNoTitle\">true</item>\n </style>\n```\n<!--more-->\n## XML布局中新增ToolBar\n```js\n<android.support.v7.widget.Toolbar \n    android:id=\"@+id/toolbar\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:minHeight=\"?actionBarSize\"\n    android:background=\"?attr/colorPrimary\"\n    app:popupTheme=\"@style/ThemeOverlay.AppCompat.Light\">\n </android.support.v7.widget.Toolbar>\n```\n## 在程序中替代ActionBar\n```java\n Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n        android.support.v7.app.ActionBar actionBar = getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(true);\n             \n        }\n```\nres/menu/activity_main.xml\n```js\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n      xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n      xmlns:tools=\"http://schemas.android.com/tools\"\n      tools:context=\".MainActivity\">\n \n  <item android:id=\"@+id/action_edit\"\n        android:title=\"@string/action_edit\"\n        android:orderInCategory=\"80\"\n        android:icon=\"@drawable/ab_edit\"\n        app:showAsAction=\"ifRoom\" />\n</menu>\n```\n\n```java\n @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n\n        // Inflate the menu; this adds items to the action bar if it is present.\n        getMenuInflater().inflate(R.menu.activity_main, menu);\n        return true;\n    }\n @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        switch (item.getItemId()) {\n\n            case R.id.action_edit:\n              return true;\n            case android.R.id.home:\n              super.onBackPressed();//返回\n              return true;\n            default:\n                return super.onOptionsItemSelected(item);\n        }\n\n    }\n```\n## 单独使用而不与ActionBar进行关联\n在前一节中设置与ActionBar进行关联，如果不进行关联也是可以使用。即执行方法：setSupportActionBar，那么Menu的操作也不用在onCreateOptionsMenu方法，直接使用ToolBar的inflateMenu方法，Menu的事件也是独立的，需要通过设置ToolBar的setOnMenuItemClickListener来实现。\n```java\nToolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n \n// App Logo\ntoolbar.setLogo(R.drawable.ic_launcher);\n// Title\ntoolbar.setTitle(\"My Title\");\n// Sub Title\ntoolbar.setSubtitle(\"Sub title\");\n \n//setSupportActionBar(toolbar);\n toolbar.inflateMenu(R.menu.activity_main);\n// Navigation Icon 要設定在 setSupoortActionBar后 才有作用\n// 否則會出現 back button \ntoolbar.setNavigationIcon(R.drawable.ab_android);\ntoolbar.setNavigationOnClickListener(new View.OnClickListener() {\n\n            @Override\n            public void onClick(View v) {\n                \n            }\n        });\n// Menu item click 设定在 setSupportActionBar 之后才有作用\ntoolbar.setOnMenuItemClickListener(onMenuItemClick);\n```\nonMenuItemClick\n```java\nprivate Toolbar.OnMenuItemClickListener onMenuItemClick = new Toolbar.OnMenuItemClickListener() {\n  @Override\n  public boolean onMenuItemClick(MenuItem menuItem) {\n    String msg = \"\";\n    switch (menuItem.getItemId()) {\n      case R.id.action_edit:  \n        break;\n    }\n    return true;\n  }\n};\n```\n# 自定义布局\n title修改为居中\n```js\n<android.support.v7.widget.Toolbar\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:id=\"@+id/toolbar\"\n    android:layout_width=\"match_parent\"\n\tandroid:layout_height=\"wrap_content\"\n    android:background=\"@mipmap/bg_title\"\n    android:minHeight=\"?actionBarSize\">\n\n    <TextView\n        android:id=\"@+id/toolbar_title\"\n        style=\"@style/TextAppearance.AppCompat.Widget.ActionBar.Title\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\" />\n</android.support.v7.widget.Toolbar>\n```\n\n禁用系统的title显示，即setDisplayShowTitleEnabled方法\n```java\n Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n  if (toolbar != null) {\n            TextView toolbaTitle = (TextView) toolbar.findViewById(R.id.toolbar_title);\n            toolbaTitle.setText(\"\");\n        }\n        android.support.v7.app.ActionBar actionBar = getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(true);\n             actionBar.setDisplayShowTitleEnabled(false);\n        }\n\n```\n# 实现将布局的内容延伸到状态栏\nstyle\n```js \n <item name=\"android:windowTranslucentStatus\" tools:targetApi=\"19\">true</item>\n```\nToolbar增加一个paddingTop:\n```js\n<android.support.v7.widget.Toolbar \n    android:id=\"@+id/toolbar\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"@mipmap/bg_title\"\n    android:minHeight=\"?actionBarSize\"\n    android:paddingTop=\"@dimen/status_bar_height\"/>\n```\nvalues/dimens.xml\n```js\n<dimen name=\"status_bar_height\">0dp</dimen>\n```\nvalues-v19/dimens.xml\n```js\n<dimen name=\"status_bar_height\">25dp</dimen>\n```\nvalues-v23/dimens.xml\n```js\n<dimen name=\"status_bar_height\">24dp</dimen>\n```\n可以通过以下方法取得StatusBarHeight：\n```java\npublic int getStatusBarHeight() {\n        int result = 0;\n        int resourceId = getResources().getIdentifier(\"status_bar_height\", \"dimen\", \"android\");\n        if (resourceId > 0) {\n            result = getResources().getDimensionPixelSize(resourceId);\n        }\n        return result;\n    }\n```\n`另外注意：`toolbar所在的父布局不能同时设置fitsSystemWindow=\"true\"，它会使得屏幕上的可布局空间位于状态栏下方与导航栏上方。\n\n因为这个带来了键盘挡住EditText的问题，解决方案：\n在EditText所在的父布局设置fitsSystemWindow=\"true\"即可。\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 附录\n[Android ToolBar Widget Usage](http://blog.hwangjr.com/2015/07/10/Android-ToolBar-Widget-Usage/)\n[ANDROID – TOOLBAR STEP BY STEP](http://blog.mosil.biz/2014/10/android-toolbar/)\n\n","source":"_posts/toolbar.md","raw":"title: Android Toolbar\ndate: 2015-11-10 10:18:18\ntags: Toolbar\ncategory: Android\n---\n在Material Design之中有一个名称为Toolbar，用来取代过去的ActionBar控件。\n# 基本用法\n可分为三步：\n## 新增ToolBar样式\nvalue/styles.xml：\n```js\n <style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\">\n  <item name=\"colorPrimary\">@color/colorPrimary</item>\n  <item name=\"colorPrimaryDark\">@color/colorPrimaryDark</item>\n  <item name=\"colorAccent\">@color/colorAccent</item>\n  <item name=\"android:textColorPrimary\">@android:color/white</item>\n  <!--返回或更多(app:showAsAction=\"never\")的按钮颜色-->\n  <item name=\"colorControlNormal\">@android:color/white</item>\n  <!--菜单字体颜色-->\n  <item name=\"actionMenuTextColor\">@android:color/white</item>\n </style>\n```\n看看 parent=\"Theme.AppCompat.Light.NoActionBar\"\n```js\n <style name=\"Theme.AppCompat.Light.NoActionBar\">\n        <item name=\"windowActionBar\">false</item>\n        <item name=\"windowNoTitle\">true</item>\n </style>\n```\n<!--more-->\n## XML布局中新增ToolBar\n```js\n<android.support.v7.widget.Toolbar \n    android:id=\"@+id/toolbar\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:minHeight=\"?actionBarSize\"\n    android:background=\"?attr/colorPrimary\"\n    app:popupTheme=\"@style/ThemeOverlay.AppCompat.Light\">\n </android.support.v7.widget.Toolbar>\n```\n## 在程序中替代ActionBar\n```java\n Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n        android.support.v7.app.ActionBar actionBar = getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(true);\n             \n        }\n```\nres/menu/activity_main.xml\n```js\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n      xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n      xmlns:tools=\"http://schemas.android.com/tools\"\n      tools:context=\".MainActivity\">\n \n  <item android:id=\"@+id/action_edit\"\n        android:title=\"@string/action_edit\"\n        android:orderInCategory=\"80\"\n        android:icon=\"@drawable/ab_edit\"\n        app:showAsAction=\"ifRoom\" />\n</menu>\n```\n\n```java\n @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n\n        // Inflate the menu; this adds items to the action bar if it is present.\n        getMenuInflater().inflate(R.menu.activity_main, menu);\n        return true;\n    }\n @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        switch (item.getItemId()) {\n\n            case R.id.action_edit:\n              return true;\n            case android.R.id.home:\n              super.onBackPressed();//返回\n              return true;\n            default:\n                return super.onOptionsItemSelected(item);\n        }\n\n    }\n```\n## 单独使用而不与ActionBar进行关联\n在前一节中设置与ActionBar进行关联，如果不进行关联也是可以使用。即执行方法：setSupportActionBar，那么Menu的操作也不用在onCreateOptionsMenu方法，直接使用ToolBar的inflateMenu方法，Menu的事件也是独立的，需要通过设置ToolBar的setOnMenuItemClickListener来实现。\n```java\nToolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n \n// App Logo\ntoolbar.setLogo(R.drawable.ic_launcher);\n// Title\ntoolbar.setTitle(\"My Title\");\n// Sub Title\ntoolbar.setSubtitle(\"Sub title\");\n \n//setSupportActionBar(toolbar);\n toolbar.inflateMenu(R.menu.activity_main);\n// Navigation Icon 要設定在 setSupoortActionBar后 才有作用\n// 否則會出現 back button \ntoolbar.setNavigationIcon(R.drawable.ab_android);\ntoolbar.setNavigationOnClickListener(new View.OnClickListener() {\n\n            @Override\n            public void onClick(View v) {\n                \n            }\n        });\n// Menu item click 设定在 setSupportActionBar 之后才有作用\ntoolbar.setOnMenuItemClickListener(onMenuItemClick);\n```\nonMenuItemClick\n```java\nprivate Toolbar.OnMenuItemClickListener onMenuItemClick = new Toolbar.OnMenuItemClickListener() {\n  @Override\n  public boolean onMenuItemClick(MenuItem menuItem) {\n    String msg = \"\";\n    switch (menuItem.getItemId()) {\n      case R.id.action_edit:  \n        break;\n    }\n    return true;\n  }\n};\n```\n# 自定义布局\n title修改为居中\n```js\n<android.support.v7.widget.Toolbar\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:id=\"@+id/toolbar\"\n    android:layout_width=\"match_parent\"\n\tandroid:layout_height=\"wrap_content\"\n    android:background=\"@mipmap/bg_title\"\n    android:minHeight=\"?actionBarSize\">\n\n    <TextView\n        android:id=\"@+id/toolbar_title\"\n        style=\"@style/TextAppearance.AppCompat.Widget.ActionBar.Title\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\" />\n</android.support.v7.widget.Toolbar>\n```\n\n禁用系统的title显示，即setDisplayShowTitleEnabled方法\n```java\n Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n  if (toolbar != null) {\n            TextView toolbaTitle = (TextView) toolbar.findViewById(R.id.toolbar_title);\n            toolbaTitle.setText(\"\");\n        }\n        android.support.v7.app.ActionBar actionBar = getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(true);\n             actionBar.setDisplayShowTitleEnabled(false);\n        }\n\n```\n# 实现将布局的内容延伸到状态栏\nstyle\n```js \n <item name=\"android:windowTranslucentStatus\" tools:targetApi=\"19\">true</item>\n```\nToolbar增加一个paddingTop:\n```js\n<android.support.v7.widget.Toolbar \n    android:id=\"@+id/toolbar\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"@mipmap/bg_title\"\n    android:minHeight=\"?actionBarSize\"\n    android:paddingTop=\"@dimen/status_bar_height\"/>\n```\nvalues/dimens.xml\n```js\n<dimen name=\"status_bar_height\">0dp</dimen>\n```\nvalues-v19/dimens.xml\n```js\n<dimen name=\"status_bar_height\">25dp</dimen>\n```\nvalues-v23/dimens.xml\n```js\n<dimen name=\"status_bar_height\">24dp</dimen>\n```\n可以通过以下方法取得StatusBarHeight：\n```java\npublic int getStatusBarHeight() {\n        int result = 0;\n        int resourceId = getResources().getIdentifier(\"status_bar_height\", \"dimen\", \"android\");\n        if (resourceId > 0) {\n            result = getResources().getDimensionPixelSize(resourceId);\n        }\n        return result;\n    }\n```\n`另外注意：`toolbar所在的父布局不能同时设置fitsSystemWindow=\"true\"，它会使得屏幕上的可布局空间位于状态栏下方与导航栏上方。\n\n因为这个带来了键盘挡住EditText的问题，解决方案：\n在EditText所在的父布局设置fitsSystemWindow=\"true\"即可。\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 附录\n[Android ToolBar Widget Usage](http://blog.hwangjr.com/2015/07/10/Android-ToolBar-Widget-Usage/)\n[ANDROID – TOOLBAR STEP BY STEP](http://blog.mosil.biz/2014/10/android-toolbar/)\n\n","slug":"toolbar","published":1,"updated":"2016-04-26T03:30:41.255Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdyh001lo4pk2tio9702"},{"title":"生命之源-医生版","date":"2014-04-15T14:39:50.000Z","_content":"# 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/shengmingzhiyuan1.jpg)\n<!--more-->\n![](http://7q5c2h.com1.z0.glb.clouddn.com/shengmingzhiyuan2.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/shengmingzhiyuan3.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/shengmingzhiyuan4.jpg)\n\n# 应用介绍 \n“生命之源”依托生命全息医学理念为您提供私人定制的全息健养咨询，根据对您身心状况的全息评估，提供包含“饮食－行为－心理”的综合指导，及御正调理的“全息健养”服务，守护您的身心健康，为您的生命保驾护航。 \n生命之源APP将为您带来一对一健养咨询服务，以及会员的医师专业答复。同时您将通过讲堂的文章和电台，更深刻的了解全息医学理念和健养案例，加入生命之源的线下沙龙活动，获得您身心健康的康复。生命之源——您身心健康的守护神！\n\n# 下载地址\n[小米应用商店](http://app.mi.com/detail/57071)\n\n`温馨提示：`由于公司倒闭，此APP已废。","source":"_posts/shengmingzhiyuan.md","raw":"title: 生命之源-医生版\ndate: 2014-04-15 22:39:50\ntags: shengmingzhiyuan\ncategory: App\n---\n# 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/shengmingzhiyuan1.jpg)\n<!--more-->\n![](http://7q5c2h.com1.z0.glb.clouddn.com/shengmingzhiyuan2.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/shengmingzhiyuan3.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/shengmingzhiyuan4.jpg)\n\n# 应用介绍 \n“生命之源”依托生命全息医学理念为您提供私人定制的全息健养咨询，根据对您身心状况的全息评估，提供包含“饮食－行为－心理”的综合指导，及御正调理的“全息健养”服务，守护您的身心健康，为您的生命保驾护航。 \n生命之源APP将为您带来一对一健养咨询服务，以及会员的医师专业答复。同时您将通过讲堂的文章和电台，更深刻的了解全息医学理念和健养案例，加入生命之源的线下沙龙活动，获得您身心健康的康复。生命之源——您身心健康的守护神！\n\n# 下载地址\n[小米应用商店](http://app.mi.com/detail/57071)\n\n`温馨提示：`由于公司倒闭，此APP已废。","slug":"shengmingzhiyuan","published":1,"updated":"2016-03-17T00:44:06.364Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdyj001po4pkdij5k936"},{"title":"Android之美化控件Shape","date":"2013-07-08T16:00:00.000Z","_content":"\n除了使用drawable这样的图片外，随着图片资源增多，程序也越来越大，今天我们自定义图形shape的方法。\n\n```java\n\t<shape>\n            <!-- 实心 -->\n            <solid android:color=\"#ff9d77\"/>\n            <!-- 渐变 -->\n            <gradient\n                android:startColor=\"#ff8c00\"\n                android:endColor=\"#FFFFFF\"\n                android:angle=\"270\" />\n            <!-- 描边 -->\n            <stroke\n                android:width=\"2dp\"\n                android:color=\"#dcdcdc\" />\n            <!-- 圆角 -->\n            <corners\n                android:radius=\"2dp\" />\n            <padding\n                android:left=\"10dp\"\n                android:top=\"10dp\"\n                android:right=\"10dp\"\n                android:bottom=\"10dp\" />\n        </shape>\n```\n<!--more-->\n对于上面， shape的定义\n* shape类型\nandroid:shape=[\"rectangle\" | \"oval\" | \"line\" | \"ring\"]  \nshape的形状，默认为矩形，可以设置为矩形（rectangle）、椭圆形(oval)、线性形状(line)、环形(ring)  \n下面的属性只有在android:shape=\"ring时可用：  \nandroid:innerRadius  尺寸，内环的半径。  \nandroid:innerRadiusRatio 浮点型，以环的宽度比率来表示内环的半径，  \n\n* solid\n实心，填充的意思\nandroid:color指定填充的颜色\n\n* gradient\n渐变\nandroid:startColor 开始的颜色\nandroid:endColor 渐变结束的颜色\nandroid:angle 渐变角度，必须为45的整数倍，当angle=0时，渐变色是从左向右。 然后逆时针方向转，当angle=90时为从下往上\nandroid:type=\"linear\"，即线性渐变，可以指定渐变为径向渐变，android:type=\"radial\"，径向渐变需要指定半径android:gradientRadius=\"50\"\n\n* stroke\n描边缘\nandroid:width=\"2dp\" 描边的宽度\nandroid:color 描边的颜色\n我们还可以把描边弄成虚线的形式，设置方式为：android:dashWidth=\"5dp\" android:dashGap=\"3dp\"\n其中android:dashWidth表示'-'这样一个横线的宽度，android:dashGap表示之间隔开的距离。\n\n* corners\n拐角，radius属性为半径，android:radius为角的弧度，值越大角越圆。\n\n* padding：间隔\n这个就不用多说了，XML布局文件中经常用到。\n\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<selector\n    xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <item android:state_pressed=\"true\" >\n        <shape>\n            <gradient\n                android:startColor=\"#ff8c00\"\n                android:endColor=\"#FFFFFF\"\n                android:angle=\"270\" />\n            <stroke\n                android:width=\"2dp\"\n                android:color=\"#dcdcdc\" />\n            <corners\n                android:radius=\"10dp\" />\n            <padding\n                android:left=\"10dp\"\n                android:top=\"10dp\"\n                android:right=\"10dp\"\n                android:bottom=\"10dp\" />\n        </shape>\n    </item>\n\n    <item android:state_focused=\"true\" >\n        <shape>\n            <gradient\n                android:startColor=\"#ffc2b7\"\n                android:endColor=\"#ffc2b7\"\n                android:angle=\"270\" />\n            <stroke\n                android:width=\"2dp\"\n                android:color=\"#dcdcdc\" />\n            <corners\n                android:radius=\"10dp\" />\n            <padding\n                android:left=\"10dp\"\n                android:top=\"10dp\"\n                android:right=\"10dp\"\n                android:bottom=\"10dp\" />\n        </shape>\n    </item>\n\n    <item>       \n        <shape>\n            <gradient\n                android:startColor=\"#ff9d77\"\n                android:endColor=\"#ff9d77\"\n                android:angle=\"270\" />\n            <stroke\n                android:width=\"2dp\"\n                android:color=\"#fad3cf\" />\n            <corners\n                android:radius=\"10dp\" />\n            <padding\n                android:left=\"10dp\"\n                android:top=\"10dp\"\n                android:right=\"10dp\"\n                android:bottom=\"10dp\" />\n        </shape>\n    </item>\n</selector>\n```\n以上几个item的区别主要是体现在state_pressed按下或state_focused获得焦点时，当当来判断显示什么类型，而没有state_xxx属性的item可以看作是常规状态下。\n\n常规状态效果图：\n![常规状态效果图](http://wuxiaolong.qiniudn.com/2013-07-09-shape-1.png)\nstate_pressed按下或state_focused获得焦点：\n![常规状态效果图](http://wuxiaolong.qiniudn.com/2013-07-09-shape-2.png)\n","source":"_posts/shape.md","raw":"title: Android之美化控件Shape\ncategories: [Android]\ntags: Shape\ndate: 2013-07-09\n---\n\n除了使用drawable这样的图片外，随着图片资源增多，程序也越来越大，今天我们自定义图形shape的方法。\n\n```java\n\t<shape>\n            <!-- 实心 -->\n            <solid android:color=\"#ff9d77\"/>\n            <!-- 渐变 -->\n            <gradient\n                android:startColor=\"#ff8c00\"\n                android:endColor=\"#FFFFFF\"\n                android:angle=\"270\" />\n            <!-- 描边 -->\n            <stroke\n                android:width=\"2dp\"\n                android:color=\"#dcdcdc\" />\n            <!-- 圆角 -->\n            <corners\n                android:radius=\"2dp\" />\n            <padding\n                android:left=\"10dp\"\n                android:top=\"10dp\"\n                android:right=\"10dp\"\n                android:bottom=\"10dp\" />\n        </shape>\n```\n<!--more-->\n对于上面， shape的定义\n* shape类型\nandroid:shape=[\"rectangle\" | \"oval\" | \"line\" | \"ring\"]  \nshape的形状，默认为矩形，可以设置为矩形（rectangle）、椭圆形(oval)、线性形状(line)、环形(ring)  \n下面的属性只有在android:shape=\"ring时可用：  \nandroid:innerRadius  尺寸，内环的半径。  \nandroid:innerRadiusRatio 浮点型，以环的宽度比率来表示内环的半径，  \n\n* solid\n实心，填充的意思\nandroid:color指定填充的颜色\n\n* gradient\n渐变\nandroid:startColor 开始的颜色\nandroid:endColor 渐变结束的颜色\nandroid:angle 渐变角度，必须为45的整数倍，当angle=0时，渐变色是从左向右。 然后逆时针方向转，当angle=90时为从下往上\nandroid:type=\"linear\"，即线性渐变，可以指定渐变为径向渐变，android:type=\"radial\"，径向渐变需要指定半径android:gradientRadius=\"50\"\n\n* stroke\n描边缘\nandroid:width=\"2dp\" 描边的宽度\nandroid:color 描边的颜色\n我们还可以把描边弄成虚线的形式，设置方式为：android:dashWidth=\"5dp\" android:dashGap=\"3dp\"\n其中android:dashWidth表示'-'这样一个横线的宽度，android:dashGap表示之间隔开的距离。\n\n* corners\n拐角，radius属性为半径，android:radius为角的弧度，值越大角越圆。\n\n* padding：间隔\n这个就不用多说了，XML布局文件中经常用到。\n\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<selector\n    xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <item android:state_pressed=\"true\" >\n        <shape>\n            <gradient\n                android:startColor=\"#ff8c00\"\n                android:endColor=\"#FFFFFF\"\n                android:angle=\"270\" />\n            <stroke\n                android:width=\"2dp\"\n                android:color=\"#dcdcdc\" />\n            <corners\n                android:radius=\"10dp\" />\n            <padding\n                android:left=\"10dp\"\n                android:top=\"10dp\"\n                android:right=\"10dp\"\n                android:bottom=\"10dp\" />\n        </shape>\n    </item>\n\n    <item android:state_focused=\"true\" >\n        <shape>\n            <gradient\n                android:startColor=\"#ffc2b7\"\n                android:endColor=\"#ffc2b7\"\n                android:angle=\"270\" />\n            <stroke\n                android:width=\"2dp\"\n                android:color=\"#dcdcdc\" />\n            <corners\n                android:radius=\"10dp\" />\n            <padding\n                android:left=\"10dp\"\n                android:top=\"10dp\"\n                android:right=\"10dp\"\n                android:bottom=\"10dp\" />\n        </shape>\n    </item>\n\n    <item>       \n        <shape>\n            <gradient\n                android:startColor=\"#ff9d77\"\n                android:endColor=\"#ff9d77\"\n                android:angle=\"270\" />\n            <stroke\n                android:width=\"2dp\"\n                android:color=\"#fad3cf\" />\n            <corners\n                android:radius=\"10dp\" />\n            <padding\n                android:left=\"10dp\"\n                android:top=\"10dp\"\n                android:right=\"10dp\"\n                android:bottom=\"10dp\" />\n        </shape>\n    </item>\n</selector>\n```\n以上几个item的区别主要是体现在state_pressed按下或state_focused获得焦点时，当当来判断显示什么类型，而没有state_xxx属性的item可以看作是常规状态下。\n\n常规状态效果图：\n![常规状态效果图](http://wuxiaolong.qiniudn.com/2013-07-09-shape-1.png)\nstate_pressed按下或state_focused获得焦点：\n![常规状态效果图](http://wuxiaolong.qiniudn.com/2013-07-09-shape-2.png)\n","slug":"shape","published":1,"updated":"2016-03-17T00:44:06.364Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdym001to4pko58oqxaa"},{"title":"Android之Service","date":"2015-11-02T07:23:04.000Z","_content":"## 使用清单文件声明服务\n```js\n<manifest ... >\n  ...\n  <application ... >\n        <service android:name=\".HelloService\" />\n      ...\n  </application>\n</manifest>\n```\n<!--more-->\n## 管理服务生命周期\n![](http://7q5c2h.com1.z0.glb.clouddn.com/service_lifecycle.png)\n* 启动的服务\nstartService()->onCreate()->onStartCommand()->running->stopService()/stopSelf()->onDestroy()->stopped 其中，服务未运行时会调用一次onCreate()，运行时不调用。\n* 绑定的服务\nbindService()->onCreate()->onBind()->running->onUnbind()->onDestroy()->stopped\n\n## 代码示例\nxml\n```js\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n\n    <Button\n        android:id=\"@+id/start_service\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Start Service\" />\n\n    <Button\n        android:id=\"@+id/stop_service\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"10dp\"\n        android:text=\"Stop Service\" />\n    <Button\n        android:id=\"@+id/bind_service\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"10dp\"\n        android:text=\"Stop Service\" />\n    <Button\n        android:id=\"@+id/unbind_service\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"10dp\"\n        android:text=\"Stop Service\" />\n\n</LinearLayout>  \n```\njava\n```java\npublic class HelloServiceActivity extends AppCompatActivity {\n    HelloService.HelloBinder mBinder;\n    //Service和Activity通信\n    private ServiceConnection serviceConnection = new ServiceConnection() {\n\n        @Override\n        public void onServiceDisconnected(ComponentName name) {\n        }\n\n        @Override\n        public void onServiceConnected(ComponentName name, IBinder service) {\n            mBinder = (HelloService.HelloBinder) service;\n            mBinder.startDownload();\n        }\n    };\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_hello_service);\n        findViewById(R.id.start_service).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(getApplicationContext(), HelloService.class);\n                startService(intent);\n            }\n        });\n        findViewById(R.id.stop_service).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(getApplicationContext(), HelloService.class);\n                stopService(intent);\n            }\n        });\n        findViewById(R.id.bind_service).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                //调用者与服务绑定在了一起，调用者一旦退出，服务也就终止\n                Intent intent = new Intent(getApplicationContext(), HelloService.class);\n                bindService(intent, serviceConnection, BIND_AUTO_CREATE);\n            }\n        });\n        findViewById(R.id.unbind_service).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                //让Service和Activity解除关联\n                unbindService(serviceConnection);\n            }\n        });\n\n    }\n\n}\n```\nHelloService\n```java\npublic class HelloService extends Service {\n    int mStartMode;       // indicates how to behave if the service is killed\n    //    IBinder mBinder;      // interface for clients that bind\n    boolean mAllowRebind; // indicates whether onRebind should be used\n    private HelloBinder mBinder = new HelloBinder();\n\n    @Override\n    public void onCreate() {\n        // The service is being created\n        Log.d(\"wxl\", \"HelloService onCreate\");\n    }\n\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n        // The service is starting, due to a call to startService()\n        Log.d(\"wxl\", \"HelloService onStartCommand\");\n        flags = START_STICKY;\n        return super.onStartCommand(intent, flags, startId);\n    }\n\n    @Override\n    public IBinder onBind(Intent intent) {\n        // A client is binding to the service with bindService()\n        Log.d(\"wxl\", \"HelloService onBind\");\n        return mBinder;\n    }\n\n    @Override\n    public boolean onUnbind(Intent intent) {\n        // All clients have unbound with unbindService()\n        Log.d(\"wxl\", \"HelloService onUnbind\");\n        return mAllowRebind;\n    }\n\n    @Override\n    public void onRebind(Intent intent) {\n        // A client is binding to the service with bindService(),\n        // after onUnbind() has already been called\n        Log.d(\"wxl\", \"HelloService onRebind\");\n    }\n\n    public class HelloBinder extends Binder {\n\n        public void startDownload() {\n            Log.d(\"wxl\", \"HelloService startDownload() executed\");\n            // 执行具体的下载任务\n        }\n\n    }\n\n    @Override\n    public void onDestroy() {\n        // The service is no longer used and is being destroyed\n        Log.d(\"wxl\", \"HelloService onDestroy\");\n        Intent intent = new Intent(this, HelloService.class);\n        startService(intent);\n    }\n}\n```\n## Service KILL问题\n* settings 中stop service\nonDestroy方法中，调用startService进行Service的重启。\n* settings中force stop 应用\n未解决\n* 借助第三方应用kill掉running task\n未解决\n\n## 附录\n[官方Service API指南](http://developer.android.com/intl/zh-cn/guide/components/services.html)\n[Android Service完全解析，关于服务你所需知道的一切(上)](http://blog.csdn.net/guolin_blog/article/details/11952435)\n[Service服务详解以及如何使service服务不被杀死](http://www.cnblogs.com/rossoneri/p/4530216.html)","source":"_posts/service.md","raw":"title: Android之Service\ndate: 2015-11-02 15:23:04\ntags: Service\ncategory: Android\n---\n## 使用清单文件声明服务\n```js\n<manifest ... >\n  ...\n  <application ... >\n        <service android:name=\".HelloService\" />\n      ...\n  </application>\n</manifest>\n```\n<!--more-->\n## 管理服务生命周期\n![](http://7q5c2h.com1.z0.glb.clouddn.com/service_lifecycle.png)\n* 启动的服务\nstartService()->onCreate()->onStartCommand()->running->stopService()/stopSelf()->onDestroy()->stopped 其中，服务未运行时会调用一次onCreate()，运行时不调用。\n* 绑定的服务\nbindService()->onCreate()->onBind()->running->onUnbind()->onDestroy()->stopped\n\n## 代码示例\nxml\n```js\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n\n    <Button\n        android:id=\"@+id/start_service\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Start Service\" />\n\n    <Button\n        android:id=\"@+id/stop_service\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"10dp\"\n        android:text=\"Stop Service\" />\n    <Button\n        android:id=\"@+id/bind_service\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"10dp\"\n        android:text=\"Stop Service\" />\n    <Button\n        android:id=\"@+id/unbind_service\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"10dp\"\n        android:text=\"Stop Service\" />\n\n</LinearLayout>  \n```\njava\n```java\npublic class HelloServiceActivity extends AppCompatActivity {\n    HelloService.HelloBinder mBinder;\n    //Service和Activity通信\n    private ServiceConnection serviceConnection = new ServiceConnection() {\n\n        @Override\n        public void onServiceDisconnected(ComponentName name) {\n        }\n\n        @Override\n        public void onServiceConnected(ComponentName name, IBinder service) {\n            mBinder = (HelloService.HelloBinder) service;\n            mBinder.startDownload();\n        }\n    };\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_hello_service);\n        findViewById(R.id.start_service).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(getApplicationContext(), HelloService.class);\n                startService(intent);\n            }\n        });\n        findViewById(R.id.stop_service).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(getApplicationContext(), HelloService.class);\n                stopService(intent);\n            }\n        });\n        findViewById(R.id.bind_service).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                //调用者与服务绑定在了一起，调用者一旦退出，服务也就终止\n                Intent intent = new Intent(getApplicationContext(), HelloService.class);\n                bindService(intent, serviceConnection, BIND_AUTO_CREATE);\n            }\n        });\n        findViewById(R.id.unbind_service).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                //让Service和Activity解除关联\n                unbindService(serviceConnection);\n            }\n        });\n\n    }\n\n}\n```\nHelloService\n```java\npublic class HelloService extends Service {\n    int mStartMode;       // indicates how to behave if the service is killed\n    //    IBinder mBinder;      // interface for clients that bind\n    boolean mAllowRebind; // indicates whether onRebind should be used\n    private HelloBinder mBinder = new HelloBinder();\n\n    @Override\n    public void onCreate() {\n        // The service is being created\n        Log.d(\"wxl\", \"HelloService onCreate\");\n    }\n\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n        // The service is starting, due to a call to startService()\n        Log.d(\"wxl\", \"HelloService onStartCommand\");\n        flags = START_STICKY;\n        return super.onStartCommand(intent, flags, startId);\n    }\n\n    @Override\n    public IBinder onBind(Intent intent) {\n        // A client is binding to the service with bindService()\n        Log.d(\"wxl\", \"HelloService onBind\");\n        return mBinder;\n    }\n\n    @Override\n    public boolean onUnbind(Intent intent) {\n        // All clients have unbound with unbindService()\n        Log.d(\"wxl\", \"HelloService onUnbind\");\n        return mAllowRebind;\n    }\n\n    @Override\n    public void onRebind(Intent intent) {\n        // A client is binding to the service with bindService(),\n        // after onUnbind() has already been called\n        Log.d(\"wxl\", \"HelloService onRebind\");\n    }\n\n    public class HelloBinder extends Binder {\n\n        public void startDownload() {\n            Log.d(\"wxl\", \"HelloService startDownload() executed\");\n            // 执行具体的下载任务\n        }\n\n    }\n\n    @Override\n    public void onDestroy() {\n        // The service is no longer used and is being destroyed\n        Log.d(\"wxl\", \"HelloService onDestroy\");\n        Intent intent = new Intent(this, HelloService.class);\n        startService(intent);\n    }\n}\n```\n## Service KILL问题\n* settings 中stop service\nonDestroy方法中，调用startService进行Service的重启。\n* settings中force stop 应用\n未解决\n* 借助第三方应用kill掉running task\n未解决\n\n## 附录\n[官方Service API指南](http://developer.android.com/intl/zh-cn/guide/components/services.html)\n[Android Service完全解析，关于服务你所需知道的一切(上)](http://blog.csdn.net/guolin_blog/article/details/11952435)\n[Service服务详解以及如何使service服务不被杀死](http://www.cnblogs.com/rossoneri/p/4530216.html)","slug":"service","published":1,"updated":"2016-03-17T00:44:06.363Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdyo001xo4pkhkgrz8w4"},{"title":"解决Android Studio和Android SDK Manager无法在线更新","date":"2015-01-20T16:00:00.000Z","_content":"##Android Studio\n\n升级时提示 Connection failed. Please check your network connection and try again\n\n修改安装目录下bin\\studio.exe.vmoptions文件,如E:\\Android\\android-studio\\bin\\studio.exe.vmoptions\n\n<!-- more -->\n\n添加内容:\n\n```js\n-Djava.net.preferIPv4Stack=true\n-Didea.updates.url=http://dl.google.com/android/studio/patches/updates.xml\n-Didea.patches.url=http://dl.google.com/android/studio/patches/\n```\n\n重新启动..就可以在线更新了.\n\n备注：如果是64位系统,那就应该修改bin\\studio64.exe.vmoptions文件,大家别改错了,不然没用!\n\n##Android SDK Manager\n\n解决Android SDK Manager列表错误,或者无法更新下载的问题:\n\nhosts文件添加内容:\n\nC:\\Windows\\System32\\drivers\\etc\n\nhosts文件windows系统目录中的\\system32\\drivers\\etc下面，win98在windows系统目录中下面。\n\n```js\n203.208.46.146  www.google.com\n74.125.113.121  developer.android.com\n203.208.46.146 \tdl.google.com\n203.208.46.146 \tdl-ssl.google.com\n\n或者以下\n\n#更新的内容从以下地址下载\n74.125.113.121  developer.android.com\n203.208.46.200 dl.google.com\n203.208.46.200 dl-ssl.google.com\n```\n","source":"_posts/sdk-update.md","raw":"title: 解决Android Studio和Android SDK Manager无法在线更新\ndate: 2015-01-21\ncategories: [Android]\ntags: [Android,Android Studio]\n---\n##Android Studio\n\n升级时提示 Connection failed. Please check your network connection and try again\n\n修改安装目录下bin\\studio.exe.vmoptions文件,如E:\\Android\\android-studio\\bin\\studio.exe.vmoptions\n\n<!-- more -->\n\n添加内容:\n\n```js\n-Djava.net.preferIPv4Stack=true\n-Didea.updates.url=http://dl.google.com/android/studio/patches/updates.xml\n-Didea.patches.url=http://dl.google.com/android/studio/patches/\n```\n\n重新启动..就可以在线更新了.\n\n备注：如果是64位系统,那就应该修改bin\\studio64.exe.vmoptions文件,大家别改错了,不然没用!\n\n##Android SDK Manager\n\n解决Android SDK Manager列表错误,或者无法更新下载的问题:\n\nhosts文件添加内容:\n\nC:\\Windows\\System32\\drivers\\etc\n\nhosts文件windows系统目录中的\\system32\\drivers\\etc下面，win98在windows系统目录中下面。\n\n```js\n203.208.46.146  www.google.com\n74.125.113.121  developer.android.com\n203.208.46.146 \tdl.google.com\n203.208.46.146 \tdl-ssl.google.com\n\n或者以下\n\n#更新的内容从以下地址下载\n74.125.113.121  developer.android.com\n203.208.46.200 dl.google.com\n203.208.46.200 dl-ssl.google.com\n```\n","slug":"sdk-update","published":1,"updated":"2016-03-17T00:44:06.363Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdyr0021o4pk995jvc1v"},{"title":"Android屏幕适配不同的资源图片、布局","date":"2013-07-22T16:00:00.000Z","_content":"在Android 2.1版本之前，存放资源图片的文件夹名称为drawable，应用程序用到的所有的资源图片都放在其中，所以很难解决不同屏幕大小的图片适配问题。\n\n1、资源图片\n\n自android 2.1版本开始，存放资源图片的文件夹由原来的一个drawable文件夹变成了drawable-hdpi、drawable-mdpi和drawable-ldpi，这是为了支持不同终端设备的不同分辨率。\n\ndrawable-hdpi、drawable-mdpi、drawable-ldpi的区别：\n\n（1）drawable-hdpi里面存放高分辨率的图片，如WVGA(480x800)，FWVGA(480x854)\n\n（2）drawable-mdpi里面存放中等分辨率的图片，如(320x480)\n\n（3）drawable-ldpi里面存放低分辨率的图片，如QVGA(240x320)\n\n<!-- more -->\n\n系统会根据机器的分辨率来分别到这几个文件夹里面去找对应的图片，同一资源的不同分辨率的图片应该命以相同的名称存放在不同的资源图片文件夹中。\n\n2、布局的适配：\n\n在第1点中我们已经解决了资源图片的适配问题，但是图片的大小不同势必会造成布局的差异，如果使用一个统一的布局文件，\n可能会造成资源图片无法完整显示在屏幕内，所以对于这种问题，解决方法是建立不同的layout文件夹，对于不同屏幕的分辨率，书写其专用的.xml文件。\n\n多个layout文件夹在命名上有相应规则，以分辨率480x854为例，需要建立480x854像素的layout文件夹，命名：layout-854x480，\n\n有两点需要`注意`：①大数（854）必须在前，否则会报错；②两个数字之间的符号是小写英文字母“x”，不是乘号。系统会根据机器的分辨率来分别到这几个文件夹里面去找对应的布局文件。如下：\n![布局文件](http://wuxiaolong.qiniudn.com/2013-07-23-screen-adaptation-1.jpg)\n\n如果你建立的layout文件夹的分辨率是你的eclipse加载的android工具所支持的分辨率，那么在可视化的布局界面中会自动给出屏幕分辨率、屏幕尺寸（红色箭头处）等参数，值得注意的是，如果红色箭头处是“Custom…”，那么你就要人为对其进行修改，选择合适的屏幕尺寸。\n![选择合适的屏幕尺寸](http://wuxiaolong.qiniudn.com/2013-07-23-screen-adaptation-2.jpg)\n\n3、设置屏幕的横竖屏显示：\n如果不做特殊说明，开发的应用是横竖屏重力敏感的，如果禁止横竖屏切换，需要在AndroidManifest.xml文件中做相应的修改：\n\n```java\n\t<activity android:name=\".MenuView\"\n\tandroid:label=\"@string/app_name\"\n\tandroid:screenOrientation=\"portrait\">\n```\n在activity的属性中添“android:screenOrientation=\"portrait\"”，portrait表示竖屏，横屏则用landscape表示。\n\n4、dip和px的问题：\n\n在网上找了好多关于“dip和px的区别”的资料，但是解释的都不是很清楚。\n我很肤浅的理解：dip是相对的，px是绝对的，所以dip能够有效解决不同型号手机不同分辨率的布局适配问题。\n\n但是由于在第2点中已经用不同layout文件夹解决了布局适配的问题，所以在其中使用dip就是没有意义的，甚至更加麻烦。\n既然已经分了不同的布局文件，所以在各个布局文件中直接使用px单位就可以了。\n","source":"_posts/screen-adaptation.md","raw":"title: Android屏幕适配不同的资源图片、布局\ndate: 2013-07-23 \ncategories: [Android]\ntags: [Android]\n---\n在Android 2.1版本之前，存放资源图片的文件夹名称为drawable，应用程序用到的所有的资源图片都放在其中，所以很难解决不同屏幕大小的图片适配问题。\n\n1、资源图片\n\n自android 2.1版本开始，存放资源图片的文件夹由原来的一个drawable文件夹变成了drawable-hdpi、drawable-mdpi和drawable-ldpi，这是为了支持不同终端设备的不同分辨率。\n\ndrawable-hdpi、drawable-mdpi、drawable-ldpi的区别：\n\n（1）drawable-hdpi里面存放高分辨率的图片，如WVGA(480x800)，FWVGA(480x854)\n\n（2）drawable-mdpi里面存放中等分辨率的图片，如(320x480)\n\n（3）drawable-ldpi里面存放低分辨率的图片，如QVGA(240x320)\n\n<!-- more -->\n\n系统会根据机器的分辨率来分别到这几个文件夹里面去找对应的图片，同一资源的不同分辨率的图片应该命以相同的名称存放在不同的资源图片文件夹中。\n\n2、布局的适配：\n\n在第1点中我们已经解决了资源图片的适配问题，但是图片的大小不同势必会造成布局的差异，如果使用一个统一的布局文件，\n可能会造成资源图片无法完整显示在屏幕内，所以对于这种问题，解决方法是建立不同的layout文件夹，对于不同屏幕的分辨率，书写其专用的.xml文件。\n\n多个layout文件夹在命名上有相应规则，以分辨率480x854为例，需要建立480x854像素的layout文件夹，命名：layout-854x480，\n\n有两点需要`注意`：①大数（854）必须在前，否则会报错；②两个数字之间的符号是小写英文字母“x”，不是乘号。系统会根据机器的分辨率来分别到这几个文件夹里面去找对应的布局文件。如下：\n![布局文件](http://wuxiaolong.qiniudn.com/2013-07-23-screen-adaptation-1.jpg)\n\n如果你建立的layout文件夹的分辨率是你的eclipse加载的android工具所支持的分辨率，那么在可视化的布局界面中会自动给出屏幕分辨率、屏幕尺寸（红色箭头处）等参数，值得注意的是，如果红色箭头处是“Custom…”，那么你就要人为对其进行修改，选择合适的屏幕尺寸。\n![选择合适的屏幕尺寸](http://wuxiaolong.qiniudn.com/2013-07-23-screen-adaptation-2.jpg)\n\n3、设置屏幕的横竖屏显示：\n如果不做特殊说明，开发的应用是横竖屏重力敏感的，如果禁止横竖屏切换，需要在AndroidManifest.xml文件中做相应的修改：\n\n```java\n\t<activity android:name=\".MenuView\"\n\tandroid:label=\"@string/app_name\"\n\tandroid:screenOrientation=\"portrait\">\n```\n在activity的属性中添“android:screenOrientation=\"portrait\"”，portrait表示竖屏，横屏则用landscape表示。\n\n4、dip和px的问题：\n\n在网上找了好多关于“dip和px的区别”的资料，但是解释的都不是很清楚。\n我很肤浅的理解：dip是相对的，px是绝对的，所以dip能够有效解决不同型号手机不同分辨率的布局适配问题。\n\n但是由于在第2点中已经用不同layout文件夹解决了布局适配的问题，所以在其中使用dip就是没有意义的，甚至更加麻烦。\n既然已经分了不同的布局文件，所以在各个布局文件中直接使用px单位就可以了。\n","slug":"screen-adaptation","published":1,"updated":"2016-03-17T00:44:06.362Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdyt0026o4pkhcy4b77u"},{"title":"RxJava","date":"2016-01-18T07:50:14.000Z","_content":"# RxJava是什么\na library for composing asynchronous and event-based programs using observable sequences for the Java VM（一个对于构成使用的Java虚拟机观察序列异步和基于事件的程序库）。\ngithub：[https://github.com/ReactiveX/RxJava](https://github.com/ReactiveX/RxJava)\n<!--more-->\n\n## 观察者模式\nRxJava的世界里，我们有四种角色：\nObservable(被观察者)、Observer(观察者)\nSubscriber(订阅者)、Subject\nObservable和Subject是两个“生产”实体，Observer和Subscriber是两个“消费”实体。Observable 和 Observer 通过 subscribe() 方法实现订阅关系，从而 Observable 可以在需要的时候发出事件来通知 Observer。\n\n## 回调方法\n\nSubscribe方法用于将观察者连接到Observable，你的观察者需要实现以下方法：\n* onNext(T item)\nObservable调用这个方法发射数据，方法的参数就是Observable发射的数据，这个方法可能会被调用多次，取决于你的实现。\n\n* onError(Exception ex)\n当Observable遇到错误或者无法返回期望的数据时会调用这个方法，这个调用会终止Observable，后续不会再调用onNext和onCompleted，onError方法的参数是抛出的异常。\n\n* onComplete\n正常终止，如果没有遇到错误，Observable在最后一次调用onNext之后调用此方法。\n\n# 添加依赖\n```\ncompile 'io.reactivex:rxandroid:1.1.0'\ncompile 'io.reactivex:rxjava:1.1.0'\n```\n\n# 创建操作\n## create\n```java\n Observable.create(new Observable.OnSubscribe<String>() {\n            @Override\n            public void call(Subscriber<? super String> subscriber) {\n                subscriber.onNext(\"Hello\");\n                subscriber.onNext(\"RxJava\");\n                subscriber.onCompleted();\n            }\n        })\n        .subscribe(new Observer<String>() {\n            @Override\n            public void onCompleted() {\n                Log.i(\"wxl\", \"onCompleted\");\n            }\n\n            @Override\n            public void onError(Throwable e) {\n\n            }\n\n            @Override\n            public void onNext(String s) {\n                Log.i(\"wxl\", \"onNext=\" + s);\n            }\n        });\n```\n\n除了 Observer 接口之外，RxJava 还内置了一个实现了 Observer 的抽象类：Subscriber。 Subscriber 对 Observer 接口进行了一些扩展，但他们的基本使用方式是完全一样的：\n```java\n .subscribe(new Subscriber() {\n            @Override\n            public void onCompleted() {\n                Log.i(\"wxl\", \"onCompleted\");\n            }\n\n            @Override\n            public void onError(Throwable e) {\n\n            }\n\n            @Override\n            public void onNext(Object o) {\n                Log.i(\"wxl\", \"onNext=\" + o);\n            }\n        });\n```\n## from\n接受数组，返回一个按参数列表顺序发射这些数据的Observable。\n```java\n        String[] froms={\"Hello\",\"RxJava\"};\n        Observable.from(froms)\n        .subscribe(new Observer<String>() {\n            @Override\n            public void onCompleted() {\n                Log.i(\"wxl\", \"onCompleted\");\n            }\n\n            @Override\n            public void onError(Throwable e) {\n\n            }\n\n            @Override\n            public void onNext(String s) {\n                Log.i(\"wxl\", \"onNext=\" + s);\n            }\n        });\n```\n\n## just\njust函数，它接受一至九个参数，返回一个按参数列表顺序发射这些数据的Observable。\n```java\nObservable.just(\"Hello\",\"RxJava\")\n          .subscribe(new Observer<String>() {\n            @Override\n            public void onCompleted() {\n                Log.i(\"wxl\", \"onCompleted\");\n            }\n\n            @Override\n            public void onError(Throwable e) {\n\n            }\n\n            @Override\n            public void onNext(String s) {\n                Log.i(\"wxl\", \"onNext=\" + s);\n            }\n        });\n```\n以上打印结果都是：\n```\ncom.wuxiaolong.apksample I/wxl: onNext=Hello\ncom.wuxiaolong.apksample I/wxl: onNext=RxJava\ncom.wuxiaolong.apksample I/wxl: onCompleted\n```\n\n# 变换操作\n## Map\n操作符对原始Observable发射的每一项数据应用一个你选择的函数，然后返回一个发射这些结果。\n如下，将原始Observable数据转化成大写，再发射：\n```java\n Observable.just(\"Hello\", \"RxJava\")\n                .map(new Func1<String, String>() {\n                    @Override\n                    public String call(String s) {\n                        return s.toUpperCase();\n                    }\n                })\n                .subscribe(new Observer<String>() {\n                    @Override\n                    public void onCompleted() {\n                        Log.i(\"wxl\", \"onCompleted\");\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n\n                    }\n\n                    @Override\n                    public void onNext(String s) {\n                        Log.i(\"wxl\", \"onNext=\" + s);\n                    }\n                });\n```\n打印结果：\n```\ncom.wuxiaolong.apksample I/wxl: onNext=HELLO\ncom.wuxiaolong.apksample I/wxl: onNext=RXJAVA\ncom.wuxiaolong.apksample I/wxl: onCompleted\n```\n\n## flatMap\nflatMap()接收一个Observable的输出作为输入，然后作为一个新的Observable再发射。理解flatMap的关键点在于，flatMap输出的新的Observable正是我们在Subscriber想要接收的，比如这里输出单个的字符串。\n```java\nList<String> list = new ArrayList<>();\n        list.add(\"Hello\");\n        list.add(\"RxJava\");\nObservable.from(list)\n                .flatMap(new Func1<String, Observable<String>>() {\n                    @Override\n                    public Observable<String> call(String s) {\n                        return Observable.just(s.toUpperCase());\n                    }\n                })\n                .subscribe(new Observer<String>() {\n                    @Override\n                    public void onCompleted() {\n                        Log.i(\"wxl\", \"onCompleted\");\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n\n                    }\n\n                    @Override\n                    public void onNext(String s) {\n                        Log.i(\"wxl\", \"onNext=\" + s);\n                    }\n                });\n```\n打印结果：\n```\ncom.wuxiaolong.apksample I/wxl: onNext=HELLO\ncom.wuxiaolong.apksample I/wxl: onNext=RXJAVA\ncom.wuxiaolong.apksample I/wxl: onCompleted\n```\n# Scan\n一个累加器函数，操作符对原始Observable发射的第一项数据应用一个函数，然后将那个函数的结果作为自己的第一项数据发射。\n```java\n Observable.just(1, 2, 3, 4, 5)\n         .scan(new Func2<Integer, Integer, Integer>() {\n             @Override\n             public Integer call(Integer integer, Integer integer2) {\n                 return integer + integer2;\n             }\n         })\n         .subscribe(new Observer<Integer>() {\n             @Override\n             public void onCompleted() {\n                 Log.i(\"wxl\", \"onCompleted\");\n             }\n             @Override\n             public void onError(Throwable e) {\n             }\n             @Override\n             public void onNext(Integer integer) {\n                 Log.i(\"wxl\", \"onNext=\" + integer);\n             }\n         });\n```\n第一次发射得到1，作为结果与2相加；发射得到3，作为结果与3相加，以此类推，打印结果：\n```\n I/wxl: onNext=1\n I/wxl: onNext=3\n I/wxl: onNext=6\n I/wxl: onNext=10\n I/wxl: onNext=15\n I/wxl: onCompleted\n```\n\n## GroupBy\n按照指定的规则来分组元素。\n\n# 过滤操作\n## Filter\n观测序列中只有通过的数据才会被发射。\n```java\nObservable.just(4, 2, 1, 7, 5)\n        .filter(new Func1<Integer, Boolean>() {\n            @Override\n            public Boolean call(Integer integer) {\n                return integer > 3;\n            }\n        })\n        .subscribe(new Observer<Integer>() {\n            @Override\n            public void onCompleted() {\n                Log.i(\"wxl\", \"onCompleted\");\n            }\n            @Override\n            public void onError(Throwable e) {\n            }\n            @Override\n            public void onNext(Integer integer) {\n                Log.i(\"wxl\", \"onNext=\" + integer);\n            }\n        });\n```\n过滤小于3的，打印结果：\n```\nI/wxl: onNext=4\nI/wxl: onNext=7\nI/wxl: onNext=5\nI/wxl: onCompleted\n```\n## take()、takeLast()\n```java\n .take(3)\n```\n只发射前N个元素\n```java\n .takeLast(3)\n```\n只发射最后N个元素\n\n## First、last\n只发射第一个元素或者最后一个元素\n\n## Skip、SkipLast\n```java \n.skip(2)\n```\n来创建一个不发射前两个元素而是发射它后面的那些数据的序列\n\n## distinct\n仅处理一次，可以处理去除重复的数据\n\n## ElementAt\n仅从一个序列中发射第n个元素然后就完成了，这里是从0开始计的。\n```java \nObservable.just(1, 2, 3, 4, 5, 6)\n                .elementAt(3)\n                .subscribe(……);\n```\n打印结果：4\n## Sample \n定期发射Observable最近发射的数据项\n```java\n .sample(1000, TimeUnit.MILLISECONDS)\n```\n# 合并操作\n## Merge\n合并多个Observables的发射物，多输入，单输出\n```java\nObservable<Integer> observable1 = Observable.just(1, 3, 5);\nObservable<Integer> observable2 = Observable.just(2, 4, 6);\nObservable.merge(observable1,observable2)\n        .subscribe(new Observer<Integer>() {\n            @Override\n            public void onCompleted() {\n                Log.i(\"wxl\", \"onCompleted\");\n            }\n            @Override\n            public void onError(Throwable e) {\n            }\n            @Override\n            public void onNext(Integer integer) {\n                Log.i(\"wxl\", \"onNext=\" + integer);\n            }\n        });\n```\n打印结果：\n```\n I/wxl: onNext=1\n I/wxl: onNext=3\n I/wxl: onNext=5\n I/wxl: onNext=2\n I/wxl: onNext=4\n I/wxl: onNext=6\n I/wxl: onCompleted\n```\n## zip\n合并两个或者多个Observables发射出的数据项，根据指定的函数Func2变换它们，并发射一个新值。\n```java\nObservable<Integer> observable1 = Observable.just(1, 3, 5);\nObservable<Integer> observable2 = Observable.just(2, 4, 6, 9);\nObservable.zip(observable1, observable2, new Func2<Integer, Integer, Integer>\n    @Override\n    public Integer call(Integer integer, Integer integer2) {\n        return integer + integer2;\n    }\n})\n        .subscribe(new Observer<Integer>() {\n            @Override\n            public void onCompleted() {\n                Log.i(\"wxl\", \"onCompleted\");\n            }\n            @Override\n            public void onError(Throwable e) {\n            }\n            @Override\n            public void onNext(Integer integer) {\n                Log.i(\"wxl\", \"onNext=\" + integer);\n            }\n        });\n```\n打印结果：\n```\nI/wxl: onNext=3\nI/wxl: onNext=7\nI/wxl: onNext=11\nI/wxl: onCompleted\n```\n## join\n\n## startWith\n```java\n .startWith(1)\n```\n在数据序列的开头插入一条指定的项1\n# Schedulers\n调度器，解决Android主线程问题，有5种：\n* Schedulers.io()\n这个调度器时用于I/O操作（读写文件、读写数据库、网络信息交互等）\n\n* Schedulers.computation()\n这个是计算工作默认的调度器，它与I/O操作无关。它也是许多RxJava方法的默认调度器：buffer()，debounce()，delay()，interval()，sample()，skip()\n\n* Schedulers.immediate()\n这个调度器允许你立即在当前线程执行你指定的工作。它是timeout()，timeInterval()，以及timestamp()方法默认的调度器。\n\n* Schedulers.newThread()\n它为指定任务启动一个新的线程。\n\n* Schedulers.trampoline()\n当我们想在当前线程执行一个任务时，并不是立即，我们可以用.trampoline()将它入队。这个调度器将会处理它的队列并且按序运行队列中每一个任务。它是repeat()和retry()方法默认的调度器。\n## SubscribeOn、ObserveOn\nsubscribeOn()：事件产生的线程\nobserveOn()：事件消费的线程，AndroidSchedulers.mainThread()，它指定的操作将在 Android 主线程运行。\n```java\n.subscribeOn(Schedulers.io()) // 指定 subscribe() 发生在 IO 线程\n.observeOn(AndroidSchedulers.mainThread()) // 指定 Subscriber 的回调发生在主线程\n```\n\n# 完整示例\n```\n Subscription subscription = Observable.just(\"Hello\", \"RxJava\", \"WuXiaolong\")\n                .subscribe(new Observer<String>() {\n                    @Override\n                    public void onCompleted() {\n                        Log.i(\"wxl\", \"onCompleted\");\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n\n                    }\n\n                    @Override\n                    public void onNext(String s) {\n                        Log.i(\"wxl\", \"onNext=\" + s);\n                    }\n                });\naddSubscription(subscription);\n```\naddSubscription方法可以放到父类：\n```\n private CompositeSubscription mCompositeSubscription;\n\n    public void addSubscription(Subscription subscription) {\n        if (this.mCompositeSubscription == null) {\n            this.mCompositeSubscription = new CompositeSubscription();\n        }\n\n        this.mCompositeSubscription.add(subscription);\n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        if (this.mCompositeSubscription != null) {\n            this.mCompositeSubscription.unsubscribe();\n        }\n    }\n```\n\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 附录\n[RxJava Essentials CN](http://rxjava.yuxingxin.com/)\n[ReactiveX文档中文翻译](https://mcxiaoke.gitbooks.io/rxdocs/content/)\n[给 Android 开发者的 RxJava 详解](http://gank.io/post/560e15be2dca930e00da1083)\n\n","source":"_posts/rxjava.md","raw":"title: RxJava\ndate: 2016-01-18 15:50:14\ntags: RxJava\ncategory: RxJava\n---\n# RxJava是什么\na library for composing asynchronous and event-based programs using observable sequences for the Java VM（一个对于构成使用的Java虚拟机观察序列异步和基于事件的程序库）。\ngithub：[https://github.com/ReactiveX/RxJava](https://github.com/ReactiveX/RxJava)\n<!--more-->\n\n## 观察者模式\nRxJava的世界里，我们有四种角色：\nObservable(被观察者)、Observer(观察者)\nSubscriber(订阅者)、Subject\nObservable和Subject是两个“生产”实体，Observer和Subscriber是两个“消费”实体。Observable 和 Observer 通过 subscribe() 方法实现订阅关系，从而 Observable 可以在需要的时候发出事件来通知 Observer。\n\n## 回调方法\n\nSubscribe方法用于将观察者连接到Observable，你的观察者需要实现以下方法：\n* onNext(T item)\nObservable调用这个方法发射数据，方法的参数就是Observable发射的数据，这个方法可能会被调用多次，取决于你的实现。\n\n* onError(Exception ex)\n当Observable遇到错误或者无法返回期望的数据时会调用这个方法，这个调用会终止Observable，后续不会再调用onNext和onCompleted，onError方法的参数是抛出的异常。\n\n* onComplete\n正常终止，如果没有遇到错误，Observable在最后一次调用onNext之后调用此方法。\n\n# 添加依赖\n```\ncompile 'io.reactivex:rxandroid:1.1.0'\ncompile 'io.reactivex:rxjava:1.1.0'\n```\n\n# 创建操作\n## create\n```java\n Observable.create(new Observable.OnSubscribe<String>() {\n            @Override\n            public void call(Subscriber<? super String> subscriber) {\n                subscriber.onNext(\"Hello\");\n                subscriber.onNext(\"RxJava\");\n                subscriber.onCompleted();\n            }\n        })\n        .subscribe(new Observer<String>() {\n            @Override\n            public void onCompleted() {\n                Log.i(\"wxl\", \"onCompleted\");\n            }\n\n            @Override\n            public void onError(Throwable e) {\n\n            }\n\n            @Override\n            public void onNext(String s) {\n                Log.i(\"wxl\", \"onNext=\" + s);\n            }\n        });\n```\n\n除了 Observer 接口之外，RxJava 还内置了一个实现了 Observer 的抽象类：Subscriber。 Subscriber 对 Observer 接口进行了一些扩展，但他们的基本使用方式是完全一样的：\n```java\n .subscribe(new Subscriber() {\n            @Override\n            public void onCompleted() {\n                Log.i(\"wxl\", \"onCompleted\");\n            }\n\n            @Override\n            public void onError(Throwable e) {\n\n            }\n\n            @Override\n            public void onNext(Object o) {\n                Log.i(\"wxl\", \"onNext=\" + o);\n            }\n        });\n```\n## from\n接受数组，返回一个按参数列表顺序发射这些数据的Observable。\n```java\n        String[] froms={\"Hello\",\"RxJava\"};\n        Observable.from(froms)\n        .subscribe(new Observer<String>() {\n            @Override\n            public void onCompleted() {\n                Log.i(\"wxl\", \"onCompleted\");\n            }\n\n            @Override\n            public void onError(Throwable e) {\n\n            }\n\n            @Override\n            public void onNext(String s) {\n                Log.i(\"wxl\", \"onNext=\" + s);\n            }\n        });\n```\n\n## just\njust函数，它接受一至九个参数，返回一个按参数列表顺序发射这些数据的Observable。\n```java\nObservable.just(\"Hello\",\"RxJava\")\n          .subscribe(new Observer<String>() {\n            @Override\n            public void onCompleted() {\n                Log.i(\"wxl\", \"onCompleted\");\n            }\n\n            @Override\n            public void onError(Throwable e) {\n\n            }\n\n            @Override\n            public void onNext(String s) {\n                Log.i(\"wxl\", \"onNext=\" + s);\n            }\n        });\n```\n以上打印结果都是：\n```\ncom.wuxiaolong.apksample I/wxl: onNext=Hello\ncom.wuxiaolong.apksample I/wxl: onNext=RxJava\ncom.wuxiaolong.apksample I/wxl: onCompleted\n```\n\n# 变换操作\n## Map\n操作符对原始Observable发射的每一项数据应用一个你选择的函数，然后返回一个发射这些结果。\n如下，将原始Observable数据转化成大写，再发射：\n```java\n Observable.just(\"Hello\", \"RxJava\")\n                .map(new Func1<String, String>() {\n                    @Override\n                    public String call(String s) {\n                        return s.toUpperCase();\n                    }\n                })\n                .subscribe(new Observer<String>() {\n                    @Override\n                    public void onCompleted() {\n                        Log.i(\"wxl\", \"onCompleted\");\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n\n                    }\n\n                    @Override\n                    public void onNext(String s) {\n                        Log.i(\"wxl\", \"onNext=\" + s);\n                    }\n                });\n```\n打印结果：\n```\ncom.wuxiaolong.apksample I/wxl: onNext=HELLO\ncom.wuxiaolong.apksample I/wxl: onNext=RXJAVA\ncom.wuxiaolong.apksample I/wxl: onCompleted\n```\n\n## flatMap\nflatMap()接收一个Observable的输出作为输入，然后作为一个新的Observable再发射。理解flatMap的关键点在于，flatMap输出的新的Observable正是我们在Subscriber想要接收的，比如这里输出单个的字符串。\n```java\nList<String> list = new ArrayList<>();\n        list.add(\"Hello\");\n        list.add(\"RxJava\");\nObservable.from(list)\n                .flatMap(new Func1<String, Observable<String>>() {\n                    @Override\n                    public Observable<String> call(String s) {\n                        return Observable.just(s.toUpperCase());\n                    }\n                })\n                .subscribe(new Observer<String>() {\n                    @Override\n                    public void onCompleted() {\n                        Log.i(\"wxl\", \"onCompleted\");\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n\n                    }\n\n                    @Override\n                    public void onNext(String s) {\n                        Log.i(\"wxl\", \"onNext=\" + s);\n                    }\n                });\n```\n打印结果：\n```\ncom.wuxiaolong.apksample I/wxl: onNext=HELLO\ncom.wuxiaolong.apksample I/wxl: onNext=RXJAVA\ncom.wuxiaolong.apksample I/wxl: onCompleted\n```\n# Scan\n一个累加器函数，操作符对原始Observable发射的第一项数据应用一个函数，然后将那个函数的结果作为自己的第一项数据发射。\n```java\n Observable.just(1, 2, 3, 4, 5)\n         .scan(new Func2<Integer, Integer, Integer>() {\n             @Override\n             public Integer call(Integer integer, Integer integer2) {\n                 return integer + integer2;\n             }\n         })\n         .subscribe(new Observer<Integer>() {\n             @Override\n             public void onCompleted() {\n                 Log.i(\"wxl\", \"onCompleted\");\n             }\n             @Override\n             public void onError(Throwable e) {\n             }\n             @Override\n             public void onNext(Integer integer) {\n                 Log.i(\"wxl\", \"onNext=\" + integer);\n             }\n         });\n```\n第一次发射得到1，作为结果与2相加；发射得到3，作为结果与3相加，以此类推，打印结果：\n```\n I/wxl: onNext=1\n I/wxl: onNext=3\n I/wxl: onNext=6\n I/wxl: onNext=10\n I/wxl: onNext=15\n I/wxl: onCompleted\n```\n\n## GroupBy\n按照指定的规则来分组元素。\n\n# 过滤操作\n## Filter\n观测序列中只有通过的数据才会被发射。\n```java\nObservable.just(4, 2, 1, 7, 5)\n        .filter(new Func1<Integer, Boolean>() {\n            @Override\n            public Boolean call(Integer integer) {\n                return integer > 3;\n            }\n        })\n        .subscribe(new Observer<Integer>() {\n            @Override\n            public void onCompleted() {\n                Log.i(\"wxl\", \"onCompleted\");\n            }\n            @Override\n            public void onError(Throwable e) {\n            }\n            @Override\n            public void onNext(Integer integer) {\n                Log.i(\"wxl\", \"onNext=\" + integer);\n            }\n        });\n```\n过滤小于3的，打印结果：\n```\nI/wxl: onNext=4\nI/wxl: onNext=7\nI/wxl: onNext=5\nI/wxl: onCompleted\n```\n## take()、takeLast()\n```java\n .take(3)\n```\n只发射前N个元素\n```java\n .takeLast(3)\n```\n只发射最后N个元素\n\n## First、last\n只发射第一个元素或者最后一个元素\n\n## Skip、SkipLast\n```java \n.skip(2)\n```\n来创建一个不发射前两个元素而是发射它后面的那些数据的序列\n\n## distinct\n仅处理一次，可以处理去除重复的数据\n\n## ElementAt\n仅从一个序列中发射第n个元素然后就完成了，这里是从0开始计的。\n```java \nObservable.just(1, 2, 3, 4, 5, 6)\n                .elementAt(3)\n                .subscribe(……);\n```\n打印结果：4\n## Sample \n定期发射Observable最近发射的数据项\n```java\n .sample(1000, TimeUnit.MILLISECONDS)\n```\n# 合并操作\n## Merge\n合并多个Observables的发射物，多输入，单输出\n```java\nObservable<Integer> observable1 = Observable.just(1, 3, 5);\nObservable<Integer> observable2 = Observable.just(2, 4, 6);\nObservable.merge(observable1,observable2)\n        .subscribe(new Observer<Integer>() {\n            @Override\n            public void onCompleted() {\n                Log.i(\"wxl\", \"onCompleted\");\n            }\n            @Override\n            public void onError(Throwable e) {\n            }\n            @Override\n            public void onNext(Integer integer) {\n                Log.i(\"wxl\", \"onNext=\" + integer);\n            }\n        });\n```\n打印结果：\n```\n I/wxl: onNext=1\n I/wxl: onNext=3\n I/wxl: onNext=5\n I/wxl: onNext=2\n I/wxl: onNext=4\n I/wxl: onNext=6\n I/wxl: onCompleted\n```\n## zip\n合并两个或者多个Observables发射出的数据项，根据指定的函数Func2变换它们，并发射一个新值。\n```java\nObservable<Integer> observable1 = Observable.just(1, 3, 5);\nObservable<Integer> observable2 = Observable.just(2, 4, 6, 9);\nObservable.zip(observable1, observable2, new Func2<Integer, Integer, Integer>\n    @Override\n    public Integer call(Integer integer, Integer integer2) {\n        return integer + integer2;\n    }\n})\n        .subscribe(new Observer<Integer>() {\n            @Override\n            public void onCompleted() {\n                Log.i(\"wxl\", \"onCompleted\");\n            }\n            @Override\n            public void onError(Throwable e) {\n            }\n            @Override\n            public void onNext(Integer integer) {\n                Log.i(\"wxl\", \"onNext=\" + integer);\n            }\n        });\n```\n打印结果：\n```\nI/wxl: onNext=3\nI/wxl: onNext=7\nI/wxl: onNext=11\nI/wxl: onCompleted\n```\n## join\n\n## startWith\n```java\n .startWith(1)\n```\n在数据序列的开头插入一条指定的项1\n# Schedulers\n调度器，解决Android主线程问题，有5种：\n* Schedulers.io()\n这个调度器时用于I/O操作（读写文件、读写数据库、网络信息交互等）\n\n* Schedulers.computation()\n这个是计算工作默认的调度器，它与I/O操作无关。它也是许多RxJava方法的默认调度器：buffer()，debounce()，delay()，interval()，sample()，skip()\n\n* Schedulers.immediate()\n这个调度器允许你立即在当前线程执行你指定的工作。它是timeout()，timeInterval()，以及timestamp()方法默认的调度器。\n\n* Schedulers.newThread()\n它为指定任务启动一个新的线程。\n\n* Schedulers.trampoline()\n当我们想在当前线程执行一个任务时，并不是立即，我们可以用.trampoline()将它入队。这个调度器将会处理它的队列并且按序运行队列中每一个任务。它是repeat()和retry()方法默认的调度器。\n## SubscribeOn、ObserveOn\nsubscribeOn()：事件产生的线程\nobserveOn()：事件消费的线程，AndroidSchedulers.mainThread()，它指定的操作将在 Android 主线程运行。\n```java\n.subscribeOn(Schedulers.io()) // 指定 subscribe() 发生在 IO 线程\n.observeOn(AndroidSchedulers.mainThread()) // 指定 Subscriber 的回调发生在主线程\n```\n\n# 完整示例\n```\n Subscription subscription = Observable.just(\"Hello\", \"RxJava\", \"WuXiaolong\")\n                .subscribe(new Observer<String>() {\n                    @Override\n                    public void onCompleted() {\n                        Log.i(\"wxl\", \"onCompleted\");\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n\n                    }\n\n                    @Override\n                    public void onNext(String s) {\n                        Log.i(\"wxl\", \"onNext=\" + s);\n                    }\n                });\naddSubscription(subscription);\n```\naddSubscription方法可以放到父类：\n```\n private CompositeSubscription mCompositeSubscription;\n\n    public void addSubscription(Subscription subscription) {\n        if (this.mCompositeSubscription == null) {\n            this.mCompositeSubscription = new CompositeSubscription();\n        }\n\n        this.mCompositeSubscription.add(subscription);\n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        if (this.mCompositeSubscription != null) {\n            this.mCompositeSubscription.unsubscribe();\n        }\n    }\n```\n\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 附录\n[RxJava Essentials CN](http://rxjava.yuxingxin.com/)\n[ReactiveX文档中文翻译](https://mcxiaoke.gitbooks.io/rxdocs/content/)\n[给 Android 开发者的 RxJava 详解](http://gank.io/post/560e15be2dca930e00da1083)\n\n","slug":"rxjava","published":1,"updated":"2016-03-23T03:20:54.337Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdyv0029o4pklplwp0qe"},{"title":"RxBus","date":"2016-04-07T01:10:20.000Z","_content":"\n> 相信大多数开发者都使用过EventBus或者Otto(我还未实践过)，作为事件总线通信库，如果你的项目已经加入RxJava和EventBus(或Otto)，那不妨用RxBus代替EventBus或者Otto，省去更多库的依赖。\n\n# RxJava\n之前已经分享过[RxJava](http://wuxiaolong.me/2016/01/18/rxjava/)知识，可以点击[RxJava](http://wuxiaolong.me/2016/01/18/rxjava/)，这里不再细说。\n\n# RxBus \n假设你已经对[RxJava](http://wuxiaolong.me/2016/01/18/rxjava/)有所了解，再继续往下看。\n<!--more-->\n```\npublic class RxBus {\n    private static RxBus mRxBus = null;\n    /**\n     * PublishSubject只会把在订阅发生的时间点之后来自原始Observable的数据发射给观察者\n     */\n\n    private Subject<Object, Object> mRxBusObserverable = new SerializedSubject<>(PublishSubject.create());\n\n    public static synchronized RxBus getInstance() {\n        if (mRxBus == null) {\n            mRxBus = new RxBus();\n        }\n        return mRxBus;\n    }\n\n    public void post(Object o) {\n    if (hasObservers()) {\n        mRxBusObserverable.onNext(o);\n\t\t}\n    }\n\n    public Observable<Object> toObserverable() {\n        return mRxBusObserverable;\n    }\n\n    /**\n     * 判断是否有订阅者\n     */\n    public boolean hasObservers() {\n        return mRxBusObserverable.hasObservers();\n    }\n}\n```\n# 代码调用\n先模拟一个订阅者，用hasObservers判断是否有订阅者，然后再发送。\n```\npublic class RxBusActivity extends AppCompatActivity {\n    private CompositeSubscription mCompositeSubscription;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_rx_bus);\n        rxBusObservers();\n        rxBusPost();\n    }\n\n    private void rxBusPost() {\n        findViewById(R.id.button).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                RxBus.getInstance().post(HandleEvent.getInstance());\n            }\n        });\n\n    }\n\n    public void addSubscription(Subscription subscription) {\n        if (this.mCompositeSubscription == null) {\n            this.mCompositeSubscription = new CompositeSubscription();\n        }\n        this.mCompositeSubscription.add(subscription);\n    }\n\n\n    private void rxBusObservers() {\n        Subscription subscription = RxBus.getInstance()\n                .toObserverable()\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(new Subscriber<Object>() {\n                    @Override\n                    public void onCompleted() {\n\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n\n                    }\n\n                    @Override\n                    public void onNext(Object event) {\n                        if (event instanceof HandleEvent) {\n                            //do something\n                            Log.d(\"wxl\", \"rxBusHandle\");\n                        }\n                    }\n                });\n        addSubscription(subscription);\n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        Log.d(\"wxl\", \"onDestroy\");\n        if (this.mCompositeSubscription != null) {\n\t\t    //取消注册，以避免内存泄露\n            this.mCompositeSubscription.unsubscribe();\n        }\n    }\n\n}\n```\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 完整代码\n[https://github.com/WuXiaolong/AndroidSamples](https://github.com/WuXiaolong/AndroidSamples)\n\n# EventBus源码解析\n附上大牛们分析的EventBus源码，有兴趣可以看看\n[EventBus源码研读](http://kymjs.com/code/2015/12/12/01/) by kymjs张涛\n[EventBus 源码解析](http://a.codekk.com/detail/Android/Trinea/EventBus%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90) by Trinea\n\n\n# 附录\n[RxJava-Android-Samples](https://github.com/kaushikgopal/RxJava-Android-Samples/blob/master/app/src/main/java/com/morihacky/android/rxjava/rxbus/RxBus.java)\n\n\n\n\n","source":"_posts/rxbus.md","raw":"title: RxBus\ndate: 2016-04-07 09:10:20\ntags: [RxJava,Android,RxBus]\ncategory: RxJava\n---\n\n> 相信大多数开发者都使用过EventBus或者Otto(我还未实践过)，作为事件总线通信库，如果你的项目已经加入RxJava和EventBus(或Otto)，那不妨用RxBus代替EventBus或者Otto，省去更多库的依赖。\n\n# RxJava\n之前已经分享过[RxJava](http://wuxiaolong.me/2016/01/18/rxjava/)知识，可以点击[RxJava](http://wuxiaolong.me/2016/01/18/rxjava/)，这里不再细说。\n\n# RxBus \n假设你已经对[RxJava](http://wuxiaolong.me/2016/01/18/rxjava/)有所了解，再继续往下看。\n<!--more-->\n```\npublic class RxBus {\n    private static RxBus mRxBus = null;\n    /**\n     * PublishSubject只会把在订阅发生的时间点之后来自原始Observable的数据发射给观察者\n     */\n\n    private Subject<Object, Object> mRxBusObserverable = new SerializedSubject<>(PublishSubject.create());\n\n    public static synchronized RxBus getInstance() {\n        if (mRxBus == null) {\n            mRxBus = new RxBus();\n        }\n        return mRxBus;\n    }\n\n    public void post(Object o) {\n    if (hasObservers()) {\n        mRxBusObserverable.onNext(o);\n\t\t}\n    }\n\n    public Observable<Object> toObserverable() {\n        return mRxBusObserverable;\n    }\n\n    /**\n     * 判断是否有订阅者\n     */\n    public boolean hasObservers() {\n        return mRxBusObserverable.hasObservers();\n    }\n}\n```\n# 代码调用\n先模拟一个订阅者，用hasObservers判断是否有订阅者，然后再发送。\n```\npublic class RxBusActivity extends AppCompatActivity {\n    private CompositeSubscription mCompositeSubscription;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_rx_bus);\n        rxBusObservers();\n        rxBusPost();\n    }\n\n    private void rxBusPost() {\n        findViewById(R.id.button).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                RxBus.getInstance().post(HandleEvent.getInstance());\n            }\n        });\n\n    }\n\n    public void addSubscription(Subscription subscription) {\n        if (this.mCompositeSubscription == null) {\n            this.mCompositeSubscription = new CompositeSubscription();\n        }\n        this.mCompositeSubscription.add(subscription);\n    }\n\n\n    private void rxBusObservers() {\n        Subscription subscription = RxBus.getInstance()\n                .toObserverable()\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(new Subscriber<Object>() {\n                    @Override\n                    public void onCompleted() {\n\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n\n                    }\n\n                    @Override\n                    public void onNext(Object event) {\n                        if (event instanceof HandleEvent) {\n                            //do something\n                            Log.d(\"wxl\", \"rxBusHandle\");\n                        }\n                    }\n                });\n        addSubscription(subscription);\n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        Log.d(\"wxl\", \"onDestroy\");\n        if (this.mCompositeSubscription != null) {\n\t\t    //取消注册，以避免内存泄露\n            this.mCompositeSubscription.unsubscribe();\n        }\n    }\n\n}\n```\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 完整代码\n[https://github.com/WuXiaolong/AndroidSamples](https://github.com/WuXiaolong/AndroidSamples)\n\n# EventBus源码解析\n附上大牛们分析的EventBus源码，有兴趣可以看看\n[EventBus源码研读](http://kymjs.com/code/2015/12/12/01/) by kymjs张涛\n[EventBus 源码解析](http://a.codekk.com/detail/Android/Trinea/EventBus%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90) by Trinea\n\n\n# 附录\n[RxJava-Android-Samples](https://github.com/kaushikgopal/RxJava-Android-Samples/blob/master/app/src/main/java/com/morihacky/android/rxjava/rxbus/RxBus.java)\n\n\n\n\n","slug":"rxbus","published":1,"updated":"2016-06-20T02:22:43.599Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdyy002eo4pkpgd4jata"},{"title":"Android Retrofit 2.0 使用-补充篇","date":"2016-06-18T00:48:53.000Z","_content":"推荐阅读，猛戳：\n1、[Android MVP 实例](http://wuxiaolong.me/2015/09/23/AndroidMVPSample/)\n2、[Android Retrofit 2.0使用](http://wuxiaolong.me/2016/01/15/retrofit/)\n3、[RxJava](http://wuxiaolong.me/2016/01/18/rxjava/)\n4、[RxBus](http://wuxiaolong.me/2016/04/07/rxbus/)\n5、[Android MVP+Retrofit+RxJava实践小结](http://wuxiaolong.me/2016/06/12/mvpRetrofitRxjava/)\n\n> 之前分享的[Android Retrofit 2.0 使用](http://wuxiaolong.me/2016/01/15/retrofit/)，属于基本的使用，实际开发还远远不够，因此对其补充，主要在Retrofit配置和接口参数。\n\n<!--more-->\n# Retrofit配置\n\n\n## 添加依赖\napp/build.gradle\n```java\n compile 'com.squareup.retrofit2:retrofit:2.0.2'\n```\n\n首先Builder()，得到OkHttpClient.Builder对象builder \n```java\n OkHttpClient.Builder builder = new OkHttpClient.Builder();\n```\n## Log信息拦截器\nDebug可以看到，网络请求，打印Log信息，发布的时候就不需要这些log\n1、添加依赖\napp/build.gradle\n```java\n compile 'com.squareup.okhttp3:logging-interceptor:3.1.2'\n```\n\n2、Log信息拦截器\n```java\nif (BuildConfig.DEBUG) {\n    // Log信息拦截器\n    HttpLoggingInterceptor loggingInterceptor = new HttpLoggingInterceptor();\n    loggingInterceptor.setLevel(HttpLoggingInterceptor.Level.BODY);\n    //设置 Debug Log 模式\n    builder.addInterceptor(loggingInterceptor);\n}\n```\n## 缓存机制\n无网络时，也能显示数据\n```java\nFile cacheFile = new File(DemoApplication.getContext().getExternalCacheDir(), \"WuXiaolongCache\");\nCache cache = new Cache(cacheFile, 1024 * 1024 * 50);\nInterceptor cacheInterceptor = new Interceptor() {\n    @Override\n    public Response intercept(Chain chain) throws IOException {\n        Request request = chain.request();\n        if (!AppUtils.networkIsAvailable(DemoApplication.getContext())) {\n            request = request.newBuilder()\n                    .cacheControl(CacheControl.FORCE_CACHE)\n                    .build();\n        }\n        Response response = chain.proceed(request);\n        if (AppUtils.networkIsAvailable(DemoApplication.getContext())) {\n            int maxAge = 0;\n            // 有网络时 设置缓存超时时间0个小时\n            response.newBuilder()\n                    .header(\"Cache-Control\", \"public, max-age=\" + maxAge)\n                    .removeHeader(\"WuXiaolong\")// 清除头信息，因为服务器如果不支持，会返回一些干扰信息，不清除下面无法生效\n                    .build();\n        } else {\n            // 无网络时，设置超时为4周\n            int maxStale = 60 * 60 * 24 * 28;\n            response.newBuilder()\n                    .header(\"Cache-Control\", \"public, only-if-cached, max-stale=\" + maxStale)\n                    .removeHeader(\"nyn\")\n                    .build();\n        }\n        return response;\n    }\n};\nbuilder.cache(cache).addInterceptor(cacheInterceptor);\n```\n\n## 公共参数\n可能接口有某些参数是公共的，不可能一个个接口都去加吧\n```java\n//公共参数\nInterceptor addQueryParameterInterceptor = new Interceptor() {\n    @Override\n    public Response intercept(Chain chain) throws IOException {\n        Request originalRequest = chain.request();\n        Request request;\n        String method = originalRequest.method();\n        Headers headers = originalRequest.headers();\n        HttpUrl modifiedUrl = originalRequest.url().newBuilder()\n                // Provide your custom parameter here\n                .addQueryParameter(\"platform\", \"android\")\n                .addQueryParameter(\"version\", \"1.0.0\")              \n                .build();\n        request = originalRequest.newBuilder().url(modifiedUrl).build();\n        return chain.proceed(request);\n    }\n};\n//公共参数\nbuilder.addInterceptor(addQueryParameterInterceptor);\n```\n\n## 设置头\n有的接口可能对请求头要设置\n```java\nInterceptor headerInterceptor = new Interceptor() {\n    @Override\n    public Response intercept(Chain chain) throws IOException {\n        Request originalRequest = chain.request();\n        Request.Builder requestBuilder = originalRequest.newBuilder()\n                .header(\"AppType\", \"TPOS\")\n                .header(\"Content-Type\", \"application/json\")\n                .header(\"Accept\", \"application/json\")\n                .method(originalRequest.method(), originalRequest.body());\n        Request request = requestBuilder.build();\n        return chain.proceed(request);\n    }\n};\n//设置头\nbuilder.addInterceptor(headerInterceptor );\n```\n\n## 设置cookie\n服务端可能需要保持请求是同一个cookie，主要看各自需求\n1、app/build.gradle\n```java\n compile 'com.squareup.okhttp3:okhttp-urlconnection:3.2.0'\n```\n2、设置cookie\n```java\nCookieManager cookieManager = new CookieManager();\ncookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);\nbuilder.cookieJar(new JavaNetCookieJar(cookieManager));\n```\n## 设置超时和重连\n希望超时时能重连\n```java\n //设置超时\n builder.connectTimeout(15, TimeUnit.SECONDS);\n builder.readTimeout(20, TimeUnit.SECONDS);\n builder.writeTimeout(20, TimeUnit.SECONDS);\n //错误重连\n builder.retryOnConnectionFailure(true);\n```\n\n最后将这些配置设置给retrofit：\n```java\nOkHttpClient okHttpClient = builder.build();\nRetrofit retrofit = new Retrofit.Builder()\n        .baseUrl(ApiStores.API_SERVER_URL)\n        //设置 Json 转换器\n        .addConverterFactory(GsonConverterFactory.create())\n        //RxJava 适配器\n        .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n        .client(okHttpClient)\n        .build();\n```\n## 完整配置\n```java\npublic class AppClient {\n    public static Retrofit retrofit = null;\n\n    public static Retrofit retrofit() {\n        if (retrofit == null) {\n\t         OkHttpClient.Builder builder = new OkHttpClient.Builder();\n            /**\n             *设置缓存，代码略\n             */\n                      \n            /**\n             *  公共参数，代码略\n             */\n           \n            /**\n             * 设置头，代码略\n             */           \n           \n\t\t\t /**\n             * Log信息拦截器，代码略\n             */\n            \n\t\t\t /**\n             * 设置cookie，代码略\n             */\n            \n             /**\n             * 设置超时和重连，代码略\n             */\n\n            //以上设置结束，才能build(),不然设置白搭\n            OkHttpClient okHttpClient = builder.build();\n\n            retrofit = new Retrofit.Builder()\n                    .baseUrl(ApiStores.API_SERVER_URL)                  \n                    .client(okHttpClient)\n                    .build();\n        }\n        return retrofit;\n\n    }\n}\n```\n\n# 接口参数\n\n## Path\n类似这样链接：http://wuxiaolong.me/2016/01/15/retrofit/\n```java\n @GET(\"2016/01/15/{retrofit}\")\n Call<ResponseBody> getData(@Path(\"retrofit\") String retrofit);\n```\n即您传的参数retrofit内容会替换大括号里的内容。\n\n## Query\n类似这样链接：http://wuxiaolong.me/v1?ip=202.202.33.33&name=WuXiaolong\n```java\n@GET(\"v1\")\nCall<ResponseBody> getData(@Query(\"ip\") String ip,@Query(\"name\") String name);\n```\n\n## Field\n表单提交，如登录\n```java\n @FormUrlEncoded\n @POST(\"v1/login\")\n Call<ResponseBody> userLogin(@Field(\"phone\") String phone, @Field(\"password\") String password);\n```\n\n## 传json格式\n如果参数是json格式，如：\n```java\n{\t\t\n    \"apiInfo\": {\t\t\n        \"apiName\": \"WuXiaolong\",\t\t\n        \"apiKey\": \"666\"\t\t\n    }\t\t\n}\t\t\n\n```\n\n建立Bean\n```java\n public class ApiInfo {\n        private ApiInfoBean apiInfo;\n\n        public ApiInfoBean getApiInfo() {\n            return apiInfo;\n        }\n\n        public void setApiInfo(ApiInfoBean apiInfo) {\n            this.apiInfo = apiInfo;\n        }\n\n        public class ApiInfoBean {\n            private String apiName;\n            private String apiKey;\n            //省略get和set方法\n        }\n    }\n```\n \n \nApiStores\n```java\n@POST(\"client/shipper/getCarType\")\nCall<ResponseBody> getData(@Body ApiInfo apiInfo);\n```       \n\n代码调用\n```java\nApiInfo apiInfo = new ApiInfo();\nApiInfo.ApiInfoBean apiInfoBean = apiInfo.new ApiInfoBean();\napiInfoBean.setApiKey(\"666\");\napiInfoBean.setApiName(\"WuXiaolong\");\napiInfo.setApiInfo(apiInfoBean);\n//调接口\ngetData(apiInfo);\n```\n\n## 传数组\n```java\n@GET(\"v1/enterprise/find\")\nCall<ResponseBody> getData(@Query(\"id\") String id, @Query(\"linked[]\") String... linked);\n```\n\n代码调用\n```java\nString id=\"WuXiaolong\"；\nString[] s = new String[]{\"WuXiaolong\"};\n//调接口\ngetData(id, s);\n```\n\n## 传文件-单个\n```java\n@Multipart\n@POST(\"v1/create\")\nCall<ResponseBody> create(@Part(\"pictureName\") RequestBody pictureName,  @Part MultipartBody.Part picture);\n```\n\n代码调用\n```java\nRequestBody pictureNameBody = RequestBody.create(MediaType.parse(AppConstants.CONTENT_TYPE_FILE), \"pictureName\");\nFile picture= new File(path);\nRequestBody requestFile = RequestBody.create(MediaType.parse(AppConstants.CONTENT_TYPE_FILE), picture);\n// MultipartBody.Part is used to send also the actual file name\nMultipartBody.Part picturePart = MultipartBody.Part.createFormData(\"picture\", picture.getName(), requestFile);\n//调接口\ncreate(pictureNameBody, picturePart);\n```\n\n## 传文件-多个\n```java\n@Multipart\n@POST(\"v1/create\")\nCall<ResponseBody> create(@Part(\"pictureName\") RequestBody pictureName,   @PartMap Map<String, RequestBody> params);\n```\n\n代码调用\n```java\nRequestBody pictureNameBody = RequestBody.create(MediaType.parse(AppConstants.CONTENT_TYPE_FILE), \"pictureName\");\nFile picture= new File(path);\nRequestBody requestFile = RequestBody.create(MediaType.parse(AppConstants.CONTENT_TYPE_FILE), picture);\nMap<String, RequestBody> params = new HashMap<>();\nparams.put(\"picture\\\"; filename=\\\"\" + picture.getName() + \"\", requestFile);\n//调接口\ncreate(pictureNameBody, params);\n```\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidProgrammerLogo.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","source":"_posts/retrofits.md","raw":"title: Android Retrofit 2.0 使用-补充篇\ndate: 2016-06-18 08:48:53\ntags: Retrofit \ncategory: Retrofit \n---\n推荐阅读，猛戳：\n1、[Android MVP 实例](http://wuxiaolong.me/2015/09/23/AndroidMVPSample/)\n2、[Android Retrofit 2.0使用](http://wuxiaolong.me/2016/01/15/retrofit/)\n3、[RxJava](http://wuxiaolong.me/2016/01/18/rxjava/)\n4、[RxBus](http://wuxiaolong.me/2016/04/07/rxbus/)\n5、[Android MVP+Retrofit+RxJava实践小结](http://wuxiaolong.me/2016/06/12/mvpRetrofitRxjava/)\n\n> 之前分享的[Android Retrofit 2.0 使用](http://wuxiaolong.me/2016/01/15/retrofit/)，属于基本的使用，实际开发还远远不够，因此对其补充，主要在Retrofit配置和接口参数。\n\n<!--more-->\n# Retrofit配置\n\n\n## 添加依赖\napp/build.gradle\n```java\n compile 'com.squareup.retrofit2:retrofit:2.0.2'\n```\n\n首先Builder()，得到OkHttpClient.Builder对象builder \n```java\n OkHttpClient.Builder builder = new OkHttpClient.Builder();\n```\n## Log信息拦截器\nDebug可以看到，网络请求，打印Log信息，发布的时候就不需要这些log\n1、添加依赖\napp/build.gradle\n```java\n compile 'com.squareup.okhttp3:logging-interceptor:3.1.2'\n```\n\n2、Log信息拦截器\n```java\nif (BuildConfig.DEBUG) {\n    // Log信息拦截器\n    HttpLoggingInterceptor loggingInterceptor = new HttpLoggingInterceptor();\n    loggingInterceptor.setLevel(HttpLoggingInterceptor.Level.BODY);\n    //设置 Debug Log 模式\n    builder.addInterceptor(loggingInterceptor);\n}\n```\n## 缓存机制\n无网络时，也能显示数据\n```java\nFile cacheFile = new File(DemoApplication.getContext().getExternalCacheDir(), \"WuXiaolongCache\");\nCache cache = new Cache(cacheFile, 1024 * 1024 * 50);\nInterceptor cacheInterceptor = new Interceptor() {\n    @Override\n    public Response intercept(Chain chain) throws IOException {\n        Request request = chain.request();\n        if (!AppUtils.networkIsAvailable(DemoApplication.getContext())) {\n            request = request.newBuilder()\n                    .cacheControl(CacheControl.FORCE_CACHE)\n                    .build();\n        }\n        Response response = chain.proceed(request);\n        if (AppUtils.networkIsAvailable(DemoApplication.getContext())) {\n            int maxAge = 0;\n            // 有网络时 设置缓存超时时间0个小时\n            response.newBuilder()\n                    .header(\"Cache-Control\", \"public, max-age=\" + maxAge)\n                    .removeHeader(\"WuXiaolong\")// 清除头信息，因为服务器如果不支持，会返回一些干扰信息，不清除下面无法生效\n                    .build();\n        } else {\n            // 无网络时，设置超时为4周\n            int maxStale = 60 * 60 * 24 * 28;\n            response.newBuilder()\n                    .header(\"Cache-Control\", \"public, only-if-cached, max-stale=\" + maxStale)\n                    .removeHeader(\"nyn\")\n                    .build();\n        }\n        return response;\n    }\n};\nbuilder.cache(cache).addInterceptor(cacheInterceptor);\n```\n\n## 公共参数\n可能接口有某些参数是公共的，不可能一个个接口都去加吧\n```java\n//公共参数\nInterceptor addQueryParameterInterceptor = new Interceptor() {\n    @Override\n    public Response intercept(Chain chain) throws IOException {\n        Request originalRequest = chain.request();\n        Request request;\n        String method = originalRequest.method();\n        Headers headers = originalRequest.headers();\n        HttpUrl modifiedUrl = originalRequest.url().newBuilder()\n                // Provide your custom parameter here\n                .addQueryParameter(\"platform\", \"android\")\n                .addQueryParameter(\"version\", \"1.0.0\")              \n                .build();\n        request = originalRequest.newBuilder().url(modifiedUrl).build();\n        return chain.proceed(request);\n    }\n};\n//公共参数\nbuilder.addInterceptor(addQueryParameterInterceptor);\n```\n\n## 设置头\n有的接口可能对请求头要设置\n```java\nInterceptor headerInterceptor = new Interceptor() {\n    @Override\n    public Response intercept(Chain chain) throws IOException {\n        Request originalRequest = chain.request();\n        Request.Builder requestBuilder = originalRequest.newBuilder()\n                .header(\"AppType\", \"TPOS\")\n                .header(\"Content-Type\", \"application/json\")\n                .header(\"Accept\", \"application/json\")\n                .method(originalRequest.method(), originalRequest.body());\n        Request request = requestBuilder.build();\n        return chain.proceed(request);\n    }\n};\n//设置头\nbuilder.addInterceptor(headerInterceptor );\n```\n\n## 设置cookie\n服务端可能需要保持请求是同一个cookie，主要看各自需求\n1、app/build.gradle\n```java\n compile 'com.squareup.okhttp3:okhttp-urlconnection:3.2.0'\n```\n2、设置cookie\n```java\nCookieManager cookieManager = new CookieManager();\ncookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);\nbuilder.cookieJar(new JavaNetCookieJar(cookieManager));\n```\n## 设置超时和重连\n希望超时时能重连\n```java\n //设置超时\n builder.connectTimeout(15, TimeUnit.SECONDS);\n builder.readTimeout(20, TimeUnit.SECONDS);\n builder.writeTimeout(20, TimeUnit.SECONDS);\n //错误重连\n builder.retryOnConnectionFailure(true);\n```\n\n最后将这些配置设置给retrofit：\n```java\nOkHttpClient okHttpClient = builder.build();\nRetrofit retrofit = new Retrofit.Builder()\n        .baseUrl(ApiStores.API_SERVER_URL)\n        //设置 Json 转换器\n        .addConverterFactory(GsonConverterFactory.create())\n        //RxJava 适配器\n        .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n        .client(okHttpClient)\n        .build();\n```\n## 完整配置\n```java\npublic class AppClient {\n    public static Retrofit retrofit = null;\n\n    public static Retrofit retrofit() {\n        if (retrofit == null) {\n\t         OkHttpClient.Builder builder = new OkHttpClient.Builder();\n            /**\n             *设置缓存，代码略\n             */\n                      \n            /**\n             *  公共参数，代码略\n             */\n           \n            /**\n             * 设置头，代码略\n             */           \n           \n\t\t\t /**\n             * Log信息拦截器，代码略\n             */\n            \n\t\t\t /**\n             * 设置cookie，代码略\n             */\n            \n             /**\n             * 设置超时和重连，代码略\n             */\n\n            //以上设置结束，才能build(),不然设置白搭\n            OkHttpClient okHttpClient = builder.build();\n\n            retrofit = new Retrofit.Builder()\n                    .baseUrl(ApiStores.API_SERVER_URL)                  \n                    .client(okHttpClient)\n                    .build();\n        }\n        return retrofit;\n\n    }\n}\n```\n\n# 接口参数\n\n## Path\n类似这样链接：http://wuxiaolong.me/2016/01/15/retrofit/\n```java\n @GET(\"2016/01/15/{retrofit}\")\n Call<ResponseBody> getData(@Path(\"retrofit\") String retrofit);\n```\n即您传的参数retrofit内容会替换大括号里的内容。\n\n## Query\n类似这样链接：http://wuxiaolong.me/v1?ip=202.202.33.33&name=WuXiaolong\n```java\n@GET(\"v1\")\nCall<ResponseBody> getData(@Query(\"ip\") String ip,@Query(\"name\") String name);\n```\n\n## Field\n表单提交，如登录\n```java\n @FormUrlEncoded\n @POST(\"v1/login\")\n Call<ResponseBody> userLogin(@Field(\"phone\") String phone, @Field(\"password\") String password);\n```\n\n## 传json格式\n如果参数是json格式，如：\n```java\n{\t\t\n    \"apiInfo\": {\t\t\n        \"apiName\": \"WuXiaolong\",\t\t\n        \"apiKey\": \"666\"\t\t\n    }\t\t\n}\t\t\n\n```\n\n建立Bean\n```java\n public class ApiInfo {\n        private ApiInfoBean apiInfo;\n\n        public ApiInfoBean getApiInfo() {\n            return apiInfo;\n        }\n\n        public void setApiInfo(ApiInfoBean apiInfo) {\n            this.apiInfo = apiInfo;\n        }\n\n        public class ApiInfoBean {\n            private String apiName;\n            private String apiKey;\n            //省略get和set方法\n        }\n    }\n```\n \n \nApiStores\n```java\n@POST(\"client/shipper/getCarType\")\nCall<ResponseBody> getData(@Body ApiInfo apiInfo);\n```       \n\n代码调用\n```java\nApiInfo apiInfo = new ApiInfo();\nApiInfo.ApiInfoBean apiInfoBean = apiInfo.new ApiInfoBean();\napiInfoBean.setApiKey(\"666\");\napiInfoBean.setApiName(\"WuXiaolong\");\napiInfo.setApiInfo(apiInfoBean);\n//调接口\ngetData(apiInfo);\n```\n\n## 传数组\n```java\n@GET(\"v1/enterprise/find\")\nCall<ResponseBody> getData(@Query(\"id\") String id, @Query(\"linked[]\") String... linked);\n```\n\n代码调用\n```java\nString id=\"WuXiaolong\"；\nString[] s = new String[]{\"WuXiaolong\"};\n//调接口\ngetData(id, s);\n```\n\n## 传文件-单个\n```java\n@Multipart\n@POST(\"v1/create\")\nCall<ResponseBody> create(@Part(\"pictureName\") RequestBody pictureName,  @Part MultipartBody.Part picture);\n```\n\n代码调用\n```java\nRequestBody pictureNameBody = RequestBody.create(MediaType.parse(AppConstants.CONTENT_TYPE_FILE), \"pictureName\");\nFile picture= new File(path);\nRequestBody requestFile = RequestBody.create(MediaType.parse(AppConstants.CONTENT_TYPE_FILE), picture);\n// MultipartBody.Part is used to send also the actual file name\nMultipartBody.Part picturePart = MultipartBody.Part.createFormData(\"picture\", picture.getName(), requestFile);\n//调接口\ncreate(pictureNameBody, picturePart);\n```\n\n## 传文件-多个\n```java\n@Multipart\n@POST(\"v1/create\")\nCall<ResponseBody> create(@Part(\"pictureName\") RequestBody pictureName,   @PartMap Map<String, RequestBody> params);\n```\n\n代码调用\n```java\nRequestBody pictureNameBody = RequestBody.create(MediaType.parse(AppConstants.CONTENT_TYPE_FILE), \"pictureName\");\nFile picture= new File(path);\nRequestBody requestFile = RequestBody.create(MediaType.parse(AppConstants.CONTENT_TYPE_FILE), picture);\nMap<String, RequestBody> params = new HashMap<>();\nparams.put(\"picture\\\"; filename=\\\"\" + picture.getName() + \"\", requestFile);\n//调接口\ncreate(pictureNameBody, params);\n```\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidProgrammerLogo.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","slug":"retrofits","published":1,"updated":"2016-06-15T01:34:59.774Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdz0002ko4pkbjf3a606"},{"title":"Android Retrofit 2.0使用","date":"2016-01-15T03:23:25.000Z","_content":"> 实例带你了解Retrofit 2.0的使用，分享目前开发Retrofit遇到的坑和心得。\n\n# 添加依赖\napp/build.gradle\n```java\ncompile 'com.squareup.retrofit2:retrofit:2.0.0-beta3'\n```\n# 接口调用\n```java\n Retrofit retrofit = new Retrofit.Builder()\n                 //这里建议：- Base URL: 总是以/结尾；- @Url: 不要以/开头\n                .baseUrl(\"http://www.weather.com.cn/\")\n                .build();\n        ApiStores apiStores = retrofit.create(ApiStores.class);\n        Call<ResponseBody> call = apiStores.getWeather(\"101010100\");\n```\n如果@GET(\"http://ip.taobao.com/service/getIpInfo.php\")，则baseUrl无效。\n注意这个任务是网络任务，不要忘记给程序加入网络权限\n```xml\n<uses-permission android:name=\"android.permission.INTERNET\" />\n```\n\n## 同步调用\n```java\n  try {\n            Response<ResponseBody> bodyResponse = call.execute();\n            String body = bodyResponse.body().string();//获取返回体的字符串\n            Log.i(\"wxl\", \"body=\" + body);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n```\n同步需要处理android.os.NetworkOnMainThreadException\n## 异步调用\n```java\ncall.enqueue(new Callback<ResponseBody>() {\n            @Override\n            public void onResponse(Response<ResponseBody> response) {\n                try {\n                    Log.i(\"wxl\", \"response=\" + response.body().string());\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n\n            @Override\n            public void onFailure(Throwable t) {\n                Log.i(\"wxl\", \"onFailure=\" + t.getMessage());\n            }\n        });\n```\n## 移除请求\n```java\ncall.cancel();\n```\n# 接口参数\n## Path\n```java\n /**\n * Call<T> get();必须是这种形式,这是2.0之后的新形式\n * 如果不需要转换成Json数据,可以用了ResponseBody;\n * 你也可以使用Call<GsonBean> get();这样的话,需要添加Gson转换器\n */\npublic interface ApiStores {\n    @GET(\"adat/sk/{cityId}.html\")\n    Call<ResponseBody> getWeather(@Path(\"cityId\") String cityId);\n}\n```\n<!--more-->\n## Query\n如果链接是http://ip.taobao.com/service/getIpInfo.php?ip=202.202.33.33\n```java\n @GET(\"http://ip.taobao.com/service/getIpInfo.php\")\n    Call<ResponseBody> getWeather(@Query(\"ip\") String ip);\n```\n## Body\n这是针对POST方式，如果参数是json格式，如：\n```\n{\t\t\n    \"apiInfo\": {\t\t\n        \"apiName\": \"WuXiaolong\",\t\t\n        \"apiKey\": \"666\"\t\t\n    }\t\t\n}\t\t\n\n```\n建立Bean\n```\n public class ApiInfo {\n        private ApiInfoBean apiInfo;\n\n        public ApiInfoBean getApiInfo() {\n            return apiInfo;\n        }\n\n        public void setApiInfo(ApiInfoBean apiInfo) {\n            this.apiInfo = apiInfo;\n        }\n\n        public class ApiInfoBean {\n            private String apiName;\n            private String apiKey;\n            //省略get和set方法\n        }\n    }\n```\n代码调用\n```\n private void getCarType() {\n        mRetrofit = new Retrofit.Builder()\n                .baseUrl(\"http://WuXiaolong.me/\")\n                .addConverterFactory(GsonConverterFactory.create())\n                .build();\n        ApiStores apiStores = mRetrofit.create(ApiStores.class);\n        ApiInfo apiInfo = new ApiInfo();\n        ApiInfo.ApiInfoBean apiInfoBean = apiInfo.new ApiInfoBean();\n        apiInfoBean.setApiKey(\"666\");\n        apiInfoBean.setApiName(\"WuXiaolong\");\n        apiInfo.setApiInfo(apiInfoBean);\n        Call<ResponseBody> call = apiStores.getCarType(apiInfo);\n        call.enqueue(new Callback<ResponseBody>() {\n            @Override\n            public void onResponse(Response<ResponseBody> response) {\n                String body = null;//获取返回体的字符串\n                try {\n                    body = response.body().string();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                Log.i(\"wxl\", \"get=\" + body);\n            }\n\n            @Override\n            public void onFailure( Throwable t) {\n\n            }\n\n        });\n    }\n```\nApiStores \n```\npublic interface ApiStores {\n        @POST(\"client/shipper/getCarType\")\n        Call<ResponseBody> getCarType(@Body ApiInfo apiInfo);\n    }\n```\n\n# JSON解析库\nRetrofit 2现在支持许多种解析方式来解析响应数据，包括Moshi，一个由Square创建的高效JSON解析库。\n## 添加gson依赖\napp/build.gradle\n```java\ncompile 'com.squareup.retrofit2:converter-gson:2.0.0-beta3'\n```\n\n## jsonschema2pojo\n访问[jsonschema2pojo](http://www.jsonschema2pojo.org/)，自动生成Java对象，如果你对gson还不熟悉，笔者建议你手动生成Java对象，感受下。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/retrofit1.png)\n这里如果选择Gson，生成的代码中存在@Generated注解，Android默认并没有javax.annotation library。如果你希望保留@Generated注解，需要添加如下的依赖。\n```java\ncompile 'org.glassfish:javax.annotation:10.0-b28'\n```\n或者，你可以直接删除这个注解，完全没有问题。笔者当然不会加这个依赖啦。\n\n## Gsonformat\n作用：Android studio插件，一般接口返回数据后要建立自己的bean，Gsonformat帮助你快速生成，不用一条一条去写。比jsonschema2pojo更加简单。\n安装步骤：Android studio-Settings-Plugins-搜Gsonformat-Install Plugin\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby6.gif)\n\n## 实例代码\n依旧演示上面的天气：http://www.weather.com.cn/adat/sk/101010100.html\n```java\npublic class WeatherJson {\n    //weatherinfo需要对应json数据的名称，我之前随便写了个，被坑很久\n    private Weatherinfo weatherinfo;\n\n    public Weatherinfo getWeatherinfo() {\n        return weatherinfo;\n    }\n\n    public void setWeatherinfo(Weatherinfo weatherinfo) {\n        this.weatherinfo = weatherinfo;\n    }\n    //city、cityid必须对应json数据的名称，不然解析不了\n    public class Weatherinfo {\n        private String city;\n        private String cityid;\n        private String temp;\n        private String WD;\n        private String WS;\n        private String SD;\n        private String WSE;\n        private String time;\n        private String isRadar;\n        private String Radar;\n        private String njd;\n        private String qy;\n        //这里省略get和set方法\n    }\n}\n```\nApiStores：\n```java\npublic class AppClient {\n    static Retrofit mRetrofit;\n\n    public static Retrofit retrofit() {\n        if (mRetrofit == null) {\n            mRetrofit = new Retrofit.Builder()\n                    .baseUrl(\"http://www.weather.com.cn/\")\n                    .addConverterFactory(GsonConverterFactory.create())\n                    .build();\n        }\n        return mRetrofit;\n    }\n\n    public interface ApiStores {\n        @GET(\"adat/sk/{cityId}.html\")\n        Call<WeatherJson> getWeather(@Path(\"cityId\") String cityId);\n    }\n}\n```\n调用：\n```\n private void getWeather() {\n        AppClient.ApiStores apiStores = AppClient.retrofit().create(AppClient.ApiStores.class);\n        Call<WeatherJson> call = apiStores.getWeather(\"101010100\");\n        call.enqueue(new Callback<WeatherJson>() {\n            @Override\n            public void onResponse(Response<WeatherJson> response) {\n                Log.i(\"wxl\", \"getWeatherinfo=\" + response.body().getWeatherinfo().getCity());\n            }\n\n            @Override\n            public void onFailure(Throwable t) {\n\n            }\n        });\n    }\n```\n经Gson转换器，`Call<ResponseBody>`换成自己要写的`Call<WeatherJson>`\n \n# RxJava\n依赖以下：\n```xml\ncompile 'com.squareup.retrofit:adapter-rxjava:2.0.0-beta3'\ncompile 'io.reactivex:rxandroid:1.0.1'\n```\n增加addCallAdapterFactory\n```java\nRetrofit retrofit = new Retrofit.Builder()\n        .baseUrl(\"http://api.nuuneoi.com/base/\")\n        .addConverterFactory(GsonConverterFactory.create())\n        .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n        .build();\n```\nApiStores\n```java\n @GET(\"adat/sk/{cityId}.html\")\n Observable<WeatherJson> getWeatherRxjava(@Path(\"cityId\") String cityId);\n```\nsubscribe部分的代码在Schedulers.io被调用，需要把observeOn(AndroidSchedulers.mainThread())添加到链表中。\n```java\n private void getWeatherRxjava() {\n        AppClient.ApiStores apiStores = AppClient.retrofit().create(AppClient.ApiStores.class);\n        Observable<WeatherJson> observable = apiStores.getWeatherRxjava(\"101010100\");\n        observable.subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(new Observer<WeatherJson>() {\n                    @Override\n                    public void onCompleted() {\n                        Log.i(\"wxl\", \"onCompleted\");\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n                        Log.i(\"wxl\", \"e=\" + e.getMessage());\n                    }\n\n                    @Override\n                    public void onNext(WeatherJson weatherJson) {\n                        Log.i(\"wxl\", \"getWeatherinfo=\" + weatherJson.getWeatherinfo().getCity());\n                    }\n                });\n\n    }\n```\n\n# Retrofit源码解析\n另见白瓦力的博客，分析的很到位，解释了0、Retrofit 是什么，1、Retrofit 怎么用，2、Retrofit的原理是什么，3、一些总结。\n博客地址：[http://bxbxbai.github.io/2015/12/13/retrofit2/](http://bxbxbai.github.io/2015/12/13/retrofit2/)\nPS：十分感谢白瓦力，他教会我们如何去查看源码的一种有效方法，debug一步步去跟源码。\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 附录\n[retrofit官方文档](http://square.github.io/retrofit/)\n[用 Retrofit 2 简化 HTTP 请求](https://realm.io/cn/news/droidcon-jake-wharton-simple-http-retrofit-2/)\n[使用Retrofit请求API数据](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/1016/3588.html)\n[Retrofit2 更新指南](http://zhaoshanshan.me/2015/10/12/Retrofit2-%E6%9B%B4%E6%96%B0%E6%8C%87%E5%8D%97/)\n[RESTful API 设计指南](http://www.ruanyifeng.com/blog/2014/05/restful_api.html)\n\n","source":"_posts/retrofit.md","raw":"title: Android Retrofit 2.0使用\ndate: 2016-01-15 11:23:25\ntags: Retrofit \ncategory: Android\n---\n> 实例带你了解Retrofit 2.0的使用，分享目前开发Retrofit遇到的坑和心得。\n\n# 添加依赖\napp/build.gradle\n```java\ncompile 'com.squareup.retrofit2:retrofit:2.0.0-beta3'\n```\n# 接口调用\n```java\n Retrofit retrofit = new Retrofit.Builder()\n                 //这里建议：- Base URL: 总是以/结尾；- @Url: 不要以/开头\n                .baseUrl(\"http://www.weather.com.cn/\")\n                .build();\n        ApiStores apiStores = retrofit.create(ApiStores.class);\n        Call<ResponseBody> call = apiStores.getWeather(\"101010100\");\n```\n如果@GET(\"http://ip.taobao.com/service/getIpInfo.php\")，则baseUrl无效。\n注意这个任务是网络任务，不要忘记给程序加入网络权限\n```xml\n<uses-permission android:name=\"android.permission.INTERNET\" />\n```\n\n## 同步调用\n```java\n  try {\n            Response<ResponseBody> bodyResponse = call.execute();\n            String body = bodyResponse.body().string();//获取返回体的字符串\n            Log.i(\"wxl\", \"body=\" + body);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n```\n同步需要处理android.os.NetworkOnMainThreadException\n## 异步调用\n```java\ncall.enqueue(new Callback<ResponseBody>() {\n            @Override\n            public void onResponse(Response<ResponseBody> response) {\n                try {\n                    Log.i(\"wxl\", \"response=\" + response.body().string());\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n\n            @Override\n            public void onFailure(Throwable t) {\n                Log.i(\"wxl\", \"onFailure=\" + t.getMessage());\n            }\n        });\n```\n## 移除请求\n```java\ncall.cancel();\n```\n# 接口参数\n## Path\n```java\n /**\n * Call<T> get();必须是这种形式,这是2.0之后的新形式\n * 如果不需要转换成Json数据,可以用了ResponseBody;\n * 你也可以使用Call<GsonBean> get();这样的话,需要添加Gson转换器\n */\npublic interface ApiStores {\n    @GET(\"adat/sk/{cityId}.html\")\n    Call<ResponseBody> getWeather(@Path(\"cityId\") String cityId);\n}\n```\n<!--more-->\n## Query\n如果链接是http://ip.taobao.com/service/getIpInfo.php?ip=202.202.33.33\n```java\n @GET(\"http://ip.taobao.com/service/getIpInfo.php\")\n    Call<ResponseBody> getWeather(@Query(\"ip\") String ip);\n```\n## Body\n这是针对POST方式，如果参数是json格式，如：\n```\n{\t\t\n    \"apiInfo\": {\t\t\n        \"apiName\": \"WuXiaolong\",\t\t\n        \"apiKey\": \"666\"\t\t\n    }\t\t\n}\t\t\n\n```\n建立Bean\n```\n public class ApiInfo {\n        private ApiInfoBean apiInfo;\n\n        public ApiInfoBean getApiInfo() {\n            return apiInfo;\n        }\n\n        public void setApiInfo(ApiInfoBean apiInfo) {\n            this.apiInfo = apiInfo;\n        }\n\n        public class ApiInfoBean {\n            private String apiName;\n            private String apiKey;\n            //省略get和set方法\n        }\n    }\n```\n代码调用\n```\n private void getCarType() {\n        mRetrofit = new Retrofit.Builder()\n                .baseUrl(\"http://WuXiaolong.me/\")\n                .addConverterFactory(GsonConverterFactory.create())\n                .build();\n        ApiStores apiStores = mRetrofit.create(ApiStores.class);\n        ApiInfo apiInfo = new ApiInfo();\n        ApiInfo.ApiInfoBean apiInfoBean = apiInfo.new ApiInfoBean();\n        apiInfoBean.setApiKey(\"666\");\n        apiInfoBean.setApiName(\"WuXiaolong\");\n        apiInfo.setApiInfo(apiInfoBean);\n        Call<ResponseBody> call = apiStores.getCarType(apiInfo);\n        call.enqueue(new Callback<ResponseBody>() {\n            @Override\n            public void onResponse(Response<ResponseBody> response) {\n                String body = null;//获取返回体的字符串\n                try {\n                    body = response.body().string();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                Log.i(\"wxl\", \"get=\" + body);\n            }\n\n            @Override\n            public void onFailure( Throwable t) {\n\n            }\n\n        });\n    }\n```\nApiStores \n```\npublic interface ApiStores {\n        @POST(\"client/shipper/getCarType\")\n        Call<ResponseBody> getCarType(@Body ApiInfo apiInfo);\n    }\n```\n\n# JSON解析库\nRetrofit 2现在支持许多种解析方式来解析响应数据，包括Moshi，一个由Square创建的高效JSON解析库。\n## 添加gson依赖\napp/build.gradle\n```java\ncompile 'com.squareup.retrofit2:converter-gson:2.0.0-beta3'\n```\n\n## jsonschema2pojo\n访问[jsonschema2pojo](http://www.jsonschema2pojo.org/)，自动生成Java对象，如果你对gson还不熟悉，笔者建议你手动生成Java对象，感受下。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/retrofit1.png)\n这里如果选择Gson，生成的代码中存在@Generated注解，Android默认并没有javax.annotation library。如果你希望保留@Generated注解，需要添加如下的依赖。\n```java\ncompile 'org.glassfish:javax.annotation:10.0-b28'\n```\n或者，你可以直接删除这个注解，完全没有问题。笔者当然不会加这个依赖啦。\n\n## Gsonformat\n作用：Android studio插件，一般接口返回数据后要建立自己的bean，Gsonformat帮助你快速生成，不用一条一条去写。比jsonschema2pojo更加简单。\n安装步骤：Android studio-Settings-Plugins-搜Gsonformat-Install Plugin\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby6.gif)\n\n## 实例代码\n依旧演示上面的天气：http://www.weather.com.cn/adat/sk/101010100.html\n```java\npublic class WeatherJson {\n    //weatherinfo需要对应json数据的名称，我之前随便写了个，被坑很久\n    private Weatherinfo weatherinfo;\n\n    public Weatherinfo getWeatherinfo() {\n        return weatherinfo;\n    }\n\n    public void setWeatherinfo(Weatherinfo weatherinfo) {\n        this.weatherinfo = weatherinfo;\n    }\n    //city、cityid必须对应json数据的名称，不然解析不了\n    public class Weatherinfo {\n        private String city;\n        private String cityid;\n        private String temp;\n        private String WD;\n        private String WS;\n        private String SD;\n        private String WSE;\n        private String time;\n        private String isRadar;\n        private String Radar;\n        private String njd;\n        private String qy;\n        //这里省略get和set方法\n    }\n}\n```\nApiStores：\n```java\npublic class AppClient {\n    static Retrofit mRetrofit;\n\n    public static Retrofit retrofit() {\n        if (mRetrofit == null) {\n            mRetrofit = new Retrofit.Builder()\n                    .baseUrl(\"http://www.weather.com.cn/\")\n                    .addConverterFactory(GsonConverterFactory.create())\n                    .build();\n        }\n        return mRetrofit;\n    }\n\n    public interface ApiStores {\n        @GET(\"adat/sk/{cityId}.html\")\n        Call<WeatherJson> getWeather(@Path(\"cityId\") String cityId);\n    }\n}\n```\n调用：\n```\n private void getWeather() {\n        AppClient.ApiStores apiStores = AppClient.retrofit().create(AppClient.ApiStores.class);\n        Call<WeatherJson> call = apiStores.getWeather(\"101010100\");\n        call.enqueue(new Callback<WeatherJson>() {\n            @Override\n            public void onResponse(Response<WeatherJson> response) {\n                Log.i(\"wxl\", \"getWeatherinfo=\" + response.body().getWeatherinfo().getCity());\n            }\n\n            @Override\n            public void onFailure(Throwable t) {\n\n            }\n        });\n    }\n```\n经Gson转换器，`Call<ResponseBody>`换成自己要写的`Call<WeatherJson>`\n \n# RxJava\n依赖以下：\n```xml\ncompile 'com.squareup.retrofit:adapter-rxjava:2.0.0-beta3'\ncompile 'io.reactivex:rxandroid:1.0.1'\n```\n增加addCallAdapterFactory\n```java\nRetrofit retrofit = new Retrofit.Builder()\n        .baseUrl(\"http://api.nuuneoi.com/base/\")\n        .addConverterFactory(GsonConverterFactory.create())\n        .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n        .build();\n```\nApiStores\n```java\n @GET(\"adat/sk/{cityId}.html\")\n Observable<WeatherJson> getWeatherRxjava(@Path(\"cityId\") String cityId);\n```\nsubscribe部分的代码在Schedulers.io被调用，需要把observeOn(AndroidSchedulers.mainThread())添加到链表中。\n```java\n private void getWeatherRxjava() {\n        AppClient.ApiStores apiStores = AppClient.retrofit().create(AppClient.ApiStores.class);\n        Observable<WeatherJson> observable = apiStores.getWeatherRxjava(\"101010100\");\n        observable.subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(new Observer<WeatherJson>() {\n                    @Override\n                    public void onCompleted() {\n                        Log.i(\"wxl\", \"onCompleted\");\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n                        Log.i(\"wxl\", \"e=\" + e.getMessage());\n                    }\n\n                    @Override\n                    public void onNext(WeatherJson weatherJson) {\n                        Log.i(\"wxl\", \"getWeatherinfo=\" + weatherJson.getWeatherinfo().getCity());\n                    }\n                });\n\n    }\n```\n\n# Retrofit源码解析\n另见白瓦力的博客，分析的很到位，解释了0、Retrofit 是什么，1、Retrofit 怎么用，2、Retrofit的原理是什么，3、一些总结。\n博客地址：[http://bxbxbai.github.io/2015/12/13/retrofit2/](http://bxbxbai.github.io/2015/12/13/retrofit2/)\nPS：十分感谢白瓦力，他教会我们如何去查看源码的一种有效方法，debug一步步去跟源码。\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 附录\n[retrofit官方文档](http://square.github.io/retrofit/)\n[用 Retrofit 2 简化 HTTP 请求](https://realm.io/cn/news/droidcon-jake-wharton-simple-http-retrofit-2/)\n[使用Retrofit请求API数据](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/1016/3588.html)\n[Retrofit2 更新指南](http://zhaoshanshan.me/2015/10/12/Retrofit2-%E6%9B%B4%E6%96%B0%E6%8C%87%E5%8D%97/)\n[RESTful API 设计指南](http://www.ruanyifeng.com/blog/2014/05/restful_api.html)\n\n","slug":"retrofit","published":1,"updated":"2016-03-25T07:21:50.378Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdz4002po4pkpjtnpkkq"},{"title":"亲子游玩","date":"2014-09-15T14:58:57.000Z","_content":"# 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qinziyouwan1.jpg)\n<!--more-->\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qinziyouwan2.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qinziyouwan3.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qinziyouwan4.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qinziyouwan5.jpg)\n\n# 应用介绍 \n亲子游玩app来了，家长和孩子们有福啦！可以快速找到周边喜欢的亲子场所，发现好玩的、有趣的乐园和景点。哇，还可以看到本市有哪些亲子演出，有我喜欢的木偶戏，赞一个！喜欢去科技馆、博物馆？没问题，求知探索的场馆一网打尽！ \n周边没有喜欢的？修改地标，去郊区玩玩吧。还可以定位到其他城市，让我们一家三口来个周末亲子游吧。 \n加微信公众号“亲子游玩”，还可以订阅到每天的亲子资讯哦，微信互动还有神秘礼物。\n\n# 下载地址\n[小米应用商店](http://app.mi.com/detail/70315)\n\n`温馨提示：`由于公司倒闭，此APP已废。","source":"_posts/qinziyouwan.md","raw":"title: 亲子游玩\ndate: 2014-09-15 22:58:57\ntags: qinziyouwan\ncategory: App\n---\n# 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qinziyouwan1.jpg)\n<!--more-->\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qinziyouwan2.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qinziyouwan3.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qinziyouwan4.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qinziyouwan5.jpg)\n\n# 应用介绍 \n亲子游玩app来了，家长和孩子们有福啦！可以快速找到周边喜欢的亲子场所，发现好玩的、有趣的乐园和景点。哇，还可以看到本市有哪些亲子演出，有我喜欢的木偶戏，赞一个！喜欢去科技馆、博物馆？没问题，求知探索的场馆一网打尽！ \n周边没有喜欢的？修改地标，去郊区玩玩吧。还可以定位到其他城市，让我们一家三口来个周末亲子游吧。 \n加微信公众号“亲子游玩”，还可以订阅到每天的亲子资讯哦，微信互动还有神秘礼物。\n\n# 下载地址\n[小米应用商店](http://app.mi.com/detail/70315)\n\n`温馨提示：`由于公司倒闭，此APP已废。","slug":"qinziyouwan","published":1,"updated":"2016-03-17T00:44:06.362Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdz8002so4pkmjvyy0l7"},{"title":"使用七牛作为github博客的图床","date":"2014-10-29T16:00:00.000Z","_content":"\n文章的图片存放:\n\n1.墙裂推荐七牛云储存,[注册地址](https://portal.qiniu.com/signup?code=3lk4saqepkdhu)。\n\n2.七牛云储存提供10G的免费空间,以及每月10G的流量.存放个人博客图片最好不过了\n\n3.七牛云储存还有各种图形处理功能、缩略图、视频存放速度也给力（非打广告）。\n\n<!-- more -->\n\n首先要有个七牛账号，然后建立一个空间，我这里随便起名为WuXiaolong。空间建立好以后，进入空间设置界面：\n![1](http://wuxiaolong.qiniudn.com/2014-10-30-qiniu-photo-bed-1.png)\n进入`基本设置`->`镜像存储`，写上你要镜像加速的域名，这里是我的github路径：\n![2](http://wuxiaolong.qiniudn.com/2014-10-30-qiniu-photo-bed-2.png)\n点击确定就ok了。\n\n然后在写博客的时候，注意图片的域名不要写相对路径了，要写类似于\n![3](http://wuxiaolong.qiniudn.com/2014-10-30-qiniu-photo-bed-3.png)\n这样的指向七牛镜像服务的url，其中/images开始的url和之前使用的相对路径一致。\n\n七牛镜像加速基本原理是当有指向七牛的图片请求时，七牛会先看自己的空间下是否有该图片，如果不存在，则去上面设置的原始地址去取，同时在七牛下面保留一份，后续再有同样的请求时则直接由七牛返数据。\n\n\n\n\n\n\n\n\n","source":"_posts/qiniu-photo-bed.md","raw":"title: 使用七牛作为github博客的图床\ndate: 2014-10-30 \ncategories: [github]\ntags: [github]\n---\n\n文章的图片存放:\n\n1.墙裂推荐七牛云储存,[注册地址](https://portal.qiniu.com/signup?code=3lk4saqepkdhu)。\n\n2.七牛云储存提供10G的免费空间,以及每月10G的流量.存放个人博客图片最好不过了\n\n3.七牛云储存还有各种图形处理功能、缩略图、视频存放速度也给力（非打广告）。\n\n<!-- more -->\n\n首先要有个七牛账号，然后建立一个空间，我这里随便起名为WuXiaolong。空间建立好以后，进入空间设置界面：\n![1](http://wuxiaolong.qiniudn.com/2014-10-30-qiniu-photo-bed-1.png)\n进入`基本设置`->`镜像存储`，写上你要镜像加速的域名，这里是我的github路径：\n![2](http://wuxiaolong.qiniudn.com/2014-10-30-qiniu-photo-bed-2.png)\n点击确定就ok了。\n\n然后在写博客的时候，注意图片的域名不要写相对路径了，要写类似于\n![3](http://wuxiaolong.qiniudn.com/2014-10-30-qiniu-photo-bed-3.png)\n这样的指向七牛镜像服务的url，其中/images开始的url和之前使用的相对路径一致。\n\n七牛镜像加速基本原理是当有指向七牛的图片请求时，七牛会先看自己的空间下是否有该图片，如果不存在，则去上面设置的原始地址去取，同时在七牛下面保留一份，后续再有同样的请求时则直接由七牛返数据。\n\n\n\n\n\n\n\n\n","slug":"qiniu-photo-bed","published":1,"updated":"2016-03-17T00:44:06.361Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdz9002wo4pk21ifnzhx"},{"title":"Android之进程和线程","date":"2015-11-03T06:10:23.000Z","_content":"## 进程\n## 线程\n应用启动时，系统会为应用创建一个名为“主线程”的执行线程。 此线程非常重要，因为它负责将事件分派给相应的用户界面小工具，其中包括绘图事件。 此外，它也是应用与 Android UI 工具包组件（来自 android.widget 和 android.view 软件包的组件）进行交互的线程。因此，主线程有时也称为 UI 线程。\n\n系统绝对不会为每个组件实例创建单独的线程。运行于同一进程的所有组件均在 UI 线程中实例化，并且对每个组件的系统调用均由该线程进行分派。因此，响应系统回调的方法（例如，报告用户操作的 onKeyDown() 或生命周期回调方法）始终在进程的 UI 线程中运行。\n<!--more-->\n例如，当用户触摸屏幕上的按钮时，应用的 UI 线程会将触摸事件分派给小工具，而小工具反过来又设置其按下状态，并将无效请求发布到事件队列中。UI 线程从队列中取消该请求并通知小工具应该重绘自身。\n\n在应用执行繁重的任务以响应用户交互时，除非正确实施应用，否则这种单线程模式可能会导致性能低下。 特别地，如果 UI 线程需要处理所有任务，则执行耗时很长的操作（例如，网络访问或数据库查询）将会阻塞整个 UI。一旦线程被阻塞，将无法分派任何事件，包括绘图事件。从用户的角度来看，应用显示为挂起。 更糟糕的是，如果 UI 线程被阻塞超过几秒钟时间（目前大约是 5 秒钟），用户就会看到一个让人厌烦的“应用无响应”(ANR) 对话框。如果引起用户不满，他们可能就会决定退出并卸载此应用。\n\n此外，Android UI 工具包并非线程安全工具包。因此，您不得通过工作线程操纵 UI，而只能通过 UI 线程操纵用户界面。因此，Android 的`单线程模式`必须遵守两条规则：\n\n* 不要阻塞 UI 线程\n* 不要在 UI 线程之外访问 Android UI 工具包\n\n### 工作线程\n\n根据上述单线程模式，要保证应用 UI 的响应能力，关键是不能阻塞 UI 线程。如果执行的操作不能很快完成，则应确保它们在单独的线程（“后台”或“工作”线程）中运行。\n\n例如，以下代码演示了一个点击侦听器从单独的线程下载图像并将其显示在 ImageView 中：\n```java\npublic void onClick(View v) {\n    new Thread(new Runnable() {\n        public void run() {\n            Bitmap b = loadImageFromNetwork(\"http://example.com/image.png\");\n            mImageView.setImageBitmap(b);\n        }\n    }).start();\n}\n```\n乍看起来，这段代码似乎运行良好，因为它创建了一个新线程来处理网络操作。 但是，它违反了单线程模式的第二条规则：不要在 UI 线程之外访问 Android UI 工具包—此示例从工作线程（而不是 UI 线程）修改了 ImageView。这可能导致出现不明确、不可预见的行为，但要跟踪此行为困难而又费时。\n\n为解决此问题，Android 提供了几种途径来从其他线程访问 UI 线程。以下列出了几种有用的方法：\n```java\nActivity.runOnUiThread(Runnable)\n```\n```java\nView.post(Runnable)\n```\n```java\nView.postDelayed(Runnable, long)\n```\n例如，您可以通过使用 View.post(Runnable) 方法修复上述代码：\n```java\npublic void onClick(View v) {\n    new Thread(new Runnable() {\n        public void run() {\n            final Bitmap bitmap = loadImageFromNetwork(\"http://example.com/image.png\");\n            mImageView.post(new Runnable() {\n                public void run() {\n                    mImageView.setImageBitmap(bitmap);\n                }\n            });\n        }\n    }).start();\n}\n```\n现在，上述实现属于线程安全型：在单独的线程中完成网络操作，而在 UI 线程中操纵 ImageView。\n\n但是，随着操作日趋复杂，这类代码也会变得复杂且难以维护。 要通过工作线程处理更复杂的交互，可以考虑在工作线程中使用 Handler 处理来自 UI 线程的消息。当然，最好的解决方案或许是扩展 AsyncTask 类，此类简化了与 UI 进行交互所需执行的工作线程任务。\n\n使用 AsyncTask\n\nAsyncTask 允许对用户界面执行异步操作。它会先阻塞工作线程中的操作，然后在 UI 线程中发布结果，而无需您亲自处理线程和/或处理程序。\n\n要使用它，必须创建 AsyncTask 子类并实现 doInBackground() 回调方法，该方法将在后台线程池中运行。要更新 UI，必须实现 onPostExecute() 以传递 doInBackground() 返回的结果并在 UI 线程中运行，这样，您即可安全更新 UI。稍后，您可以通过从 UI 线程调用 execute() 来运行任务。\n\n例如，您可以通过以下方式使用 AsyncTask 来实现上述示例：\n```java\npublic void onClick(View v) {\n    new DownloadImageTask().execute(\"http://example.com/image.png\");\n}\n\nprivate class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {\n    /** The system calls this to perform work in a worker thread and\n      * delivers it the parameters given to AsyncTask.execute() */\n    protected Bitmap doInBackground(String... urls) {\n        return loadImageFromNetwork(urls[0]);\n    }\n    \n    /** The system calls this to perform work in the UI thread and delivers\n      * the result from doInBackground() */\n    protected void onPostExecute(Bitmap result) {\n        mImageView.setImageBitmap(result);\n    }\n}\n```\n现在 UI 是安全的，代码也得到简化，因为任务分解成了两部分：一部分应在工作线程内完成，另一部分应在 UI 线程内完成。\n\n下面简要概述了 AsyncTask 的工作方法，但要全面了解如何使用此类，您应阅读 AsyncTask 参考文档：\n\n可以使用泛型指定参数类型、进度值和任务最终值\n方法 doInBackground() 会在工作线程上自动执行\nonPreExecute()、onPostExecute() 和 onProgressUpdate() 均在 UI 线程中调用\ndoInBackground() 返回的值将发送到 onPostExecute()\n您可以随时在 doInBackground() 中调用publishProgress()，以在 UI 线程中执行 onProgressUpdate()\n您可以随时取消任何线程中的任务\n\n## 附录\n[Processes And Threads](https://developer.android.com/intl/zh-cn/guide/components/processes-and-threads.html)\n[Android--多线程之进程与线程](http://www.cnblogs.com/plokmju/p/android_ProcessOrThread.html)","source":"_posts/processes-and-threads.md","raw":"title: Android之进程和线程\ndate: 2015-11-03 14:10:23\ntags:  [Processes,Threads]\ncategory: Android\n---\n## 进程\n## 线程\n应用启动时，系统会为应用创建一个名为“主线程”的执行线程。 此线程非常重要，因为它负责将事件分派给相应的用户界面小工具，其中包括绘图事件。 此外，它也是应用与 Android UI 工具包组件（来自 android.widget 和 android.view 软件包的组件）进行交互的线程。因此，主线程有时也称为 UI 线程。\n\n系统绝对不会为每个组件实例创建单独的线程。运行于同一进程的所有组件均在 UI 线程中实例化，并且对每个组件的系统调用均由该线程进行分派。因此，响应系统回调的方法（例如，报告用户操作的 onKeyDown() 或生命周期回调方法）始终在进程的 UI 线程中运行。\n<!--more-->\n例如，当用户触摸屏幕上的按钮时，应用的 UI 线程会将触摸事件分派给小工具，而小工具反过来又设置其按下状态，并将无效请求发布到事件队列中。UI 线程从队列中取消该请求并通知小工具应该重绘自身。\n\n在应用执行繁重的任务以响应用户交互时，除非正确实施应用，否则这种单线程模式可能会导致性能低下。 特别地，如果 UI 线程需要处理所有任务，则执行耗时很长的操作（例如，网络访问或数据库查询）将会阻塞整个 UI。一旦线程被阻塞，将无法分派任何事件，包括绘图事件。从用户的角度来看，应用显示为挂起。 更糟糕的是，如果 UI 线程被阻塞超过几秒钟时间（目前大约是 5 秒钟），用户就会看到一个让人厌烦的“应用无响应”(ANR) 对话框。如果引起用户不满，他们可能就会决定退出并卸载此应用。\n\n此外，Android UI 工具包并非线程安全工具包。因此，您不得通过工作线程操纵 UI，而只能通过 UI 线程操纵用户界面。因此，Android 的`单线程模式`必须遵守两条规则：\n\n* 不要阻塞 UI 线程\n* 不要在 UI 线程之外访问 Android UI 工具包\n\n### 工作线程\n\n根据上述单线程模式，要保证应用 UI 的响应能力，关键是不能阻塞 UI 线程。如果执行的操作不能很快完成，则应确保它们在单独的线程（“后台”或“工作”线程）中运行。\n\n例如，以下代码演示了一个点击侦听器从单独的线程下载图像并将其显示在 ImageView 中：\n```java\npublic void onClick(View v) {\n    new Thread(new Runnable() {\n        public void run() {\n            Bitmap b = loadImageFromNetwork(\"http://example.com/image.png\");\n            mImageView.setImageBitmap(b);\n        }\n    }).start();\n}\n```\n乍看起来，这段代码似乎运行良好，因为它创建了一个新线程来处理网络操作。 但是，它违反了单线程模式的第二条规则：不要在 UI 线程之外访问 Android UI 工具包—此示例从工作线程（而不是 UI 线程）修改了 ImageView。这可能导致出现不明确、不可预见的行为，但要跟踪此行为困难而又费时。\n\n为解决此问题，Android 提供了几种途径来从其他线程访问 UI 线程。以下列出了几种有用的方法：\n```java\nActivity.runOnUiThread(Runnable)\n```\n```java\nView.post(Runnable)\n```\n```java\nView.postDelayed(Runnable, long)\n```\n例如，您可以通过使用 View.post(Runnable) 方法修复上述代码：\n```java\npublic void onClick(View v) {\n    new Thread(new Runnable() {\n        public void run() {\n            final Bitmap bitmap = loadImageFromNetwork(\"http://example.com/image.png\");\n            mImageView.post(new Runnable() {\n                public void run() {\n                    mImageView.setImageBitmap(bitmap);\n                }\n            });\n        }\n    }).start();\n}\n```\n现在，上述实现属于线程安全型：在单独的线程中完成网络操作，而在 UI 线程中操纵 ImageView。\n\n但是，随着操作日趋复杂，这类代码也会变得复杂且难以维护。 要通过工作线程处理更复杂的交互，可以考虑在工作线程中使用 Handler 处理来自 UI 线程的消息。当然，最好的解决方案或许是扩展 AsyncTask 类，此类简化了与 UI 进行交互所需执行的工作线程任务。\n\n使用 AsyncTask\n\nAsyncTask 允许对用户界面执行异步操作。它会先阻塞工作线程中的操作，然后在 UI 线程中发布结果，而无需您亲自处理线程和/或处理程序。\n\n要使用它，必须创建 AsyncTask 子类并实现 doInBackground() 回调方法，该方法将在后台线程池中运行。要更新 UI，必须实现 onPostExecute() 以传递 doInBackground() 返回的结果并在 UI 线程中运行，这样，您即可安全更新 UI。稍后，您可以通过从 UI 线程调用 execute() 来运行任务。\n\n例如，您可以通过以下方式使用 AsyncTask 来实现上述示例：\n```java\npublic void onClick(View v) {\n    new DownloadImageTask().execute(\"http://example.com/image.png\");\n}\n\nprivate class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {\n    /** The system calls this to perform work in a worker thread and\n      * delivers it the parameters given to AsyncTask.execute() */\n    protected Bitmap doInBackground(String... urls) {\n        return loadImageFromNetwork(urls[0]);\n    }\n    \n    /** The system calls this to perform work in the UI thread and delivers\n      * the result from doInBackground() */\n    protected void onPostExecute(Bitmap result) {\n        mImageView.setImageBitmap(result);\n    }\n}\n```\n现在 UI 是安全的，代码也得到简化，因为任务分解成了两部分：一部分应在工作线程内完成，另一部分应在 UI 线程内完成。\n\n下面简要概述了 AsyncTask 的工作方法，但要全面了解如何使用此类，您应阅读 AsyncTask 参考文档：\n\n可以使用泛型指定参数类型、进度值和任务最终值\n方法 doInBackground() 会在工作线程上自动执行\nonPreExecute()、onPostExecute() 和 onProgressUpdate() 均在 UI 线程中调用\ndoInBackground() 返回的值将发送到 onPostExecute()\n您可以随时在 doInBackground() 中调用publishProgress()，以在 UI 线程中执行 onProgressUpdate()\n您可以随时取消任何线程中的任务\n\n## 附录\n[Processes And Threads](https://developer.android.com/intl/zh-cn/guide/components/processes-and-threads.html)\n[Android--多线程之进程与线程](http://www.cnblogs.com/plokmju/p/android_ProcessOrThread.html)","slug":"processes-and-threads","published":1,"updated":"2016-03-17T00:44:06.361Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdzc0031o4pkocl348rn"},{"title":"EditText输入手机号自动带空格","date":"2015-07-08T16:00:00.000Z","_content":"\n转载：http://www.jcodecraeer.com/plus/view.php?aid=3163\n\n在android开发过程中，经常会要求用户输入手机号，为了便于观看，我们都会已135 xxxx xxxx这种格式展示。\n\n![](http://7q5c2h.com1.z0.glb.clouddn.com/20150709_phone_space.png)\n\n<!-- more -->\n\n```js\n    <EditText\n        android:id=\"@+id/editText\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:maxLength=\"13\"\n        android:inputType=\"numberSigned\" />\n\n```\n\n```java\nfinal EditText editText = (EditText) findViewById(R.id.editText);\n        editText.addTextChangedListener(new TextWatcher() {\n            @Override\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\n\n            }\n\n            @Override\n            public void onTextChanged(CharSequence charSequence, int start, int before, int count) {\n                if (charSequence == null || charSequence.length() == 0)\n                    return;\n                StringBuilder stringBuilder = new StringBuilder();\n                for (int i = 0; i < charSequence.length(); i++) {\n                    if (i != 3 && i != 8 && charSequence.charAt(i) == ' ') {\n                        continue;\n                    } else {\n                        stringBuilder.append(charSequence.charAt(i));\n                        if ((stringBuilder.length() == 4 || stringBuilder.length() == 9)\n                                && stringBuilder.charAt(stringBuilder.length() - 1) != ' ') {\n                            stringBuilder.insert(stringBuilder.length() - 1, ' ');\n                        }\n                    }\n                }\n                if (!stringBuilder.toString().equals(charSequence.toString())) {\n                    int index = start + 1;\n                    if (stringBuilder.charAt(start) == ' ') {\n                        if (before == 0) {\n                            index++;\n                        } else {\n                            index--;\n                        }\n                    } else {\n                        if (before == 1) {\n                            index--;\n                        }\n                    }\n                    editText.setText(stringBuilder.toString());\n                    editText.setSelection(index);\n                }\n            }\n\n            @Override\n            public void afterTextChanged(Editable s) {\n\n            }\n        });\n    }\n```\n","source":"_posts/phone_space.md","raw":"title: EditText输入手机号自动带空格\ndate: 2015-07-09\ncategories: [Android]\ntags: [Android,SQLite]\n---\n\n转载：http://www.jcodecraeer.com/plus/view.php?aid=3163\n\n在android开发过程中，经常会要求用户输入手机号，为了便于观看，我们都会已135 xxxx xxxx这种格式展示。\n\n![](http://7q5c2h.com1.z0.glb.clouddn.com/20150709_phone_space.png)\n\n<!-- more -->\n\n```js\n    <EditText\n        android:id=\"@+id/editText\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:maxLength=\"13\"\n        android:inputType=\"numberSigned\" />\n\n```\n\n```java\nfinal EditText editText = (EditText) findViewById(R.id.editText);\n        editText.addTextChangedListener(new TextWatcher() {\n            @Override\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\n\n            }\n\n            @Override\n            public void onTextChanged(CharSequence charSequence, int start, int before, int count) {\n                if (charSequence == null || charSequence.length() == 0)\n                    return;\n                StringBuilder stringBuilder = new StringBuilder();\n                for (int i = 0; i < charSequence.length(); i++) {\n                    if (i != 3 && i != 8 && charSequence.charAt(i) == ' ') {\n                        continue;\n                    } else {\n                        stringBuilder.append(charSequence.charAt(i));\n                        if ((stringBuilder.length() == 4 || stringBuilder.length() == 9)\n                                && stringBuilder.charAt(stringBuilder.length() - 1) != ' ') {\n                            stringBuilder.insert(stringBuilder.length() - 1, ' ');\n                        }\n                    }\n                }\n                if (!stringBuilder.toString().equals(charSequence.toString())) {\n                    int index = start + 1;\n                    if (stringBuilder.charAt(start) == ' ') {\n                        if (before == 0) {\n                            index++;\n                        } else {\n                            index--;\n                        }\n                    } else {\n                        if (before == 1) {\n                            index--;\n                        }\n                    }\n                    editText.setText(stringBuilder.toString());\n                    editText.setSelection(index);\n                }\n            }\n\n            @Override\n            public void afterTextChanged(Editable s) {\n\n            }\n        });\n    }\n```\n","slug":"phone_space","published":1,"updated":"2016-03-17T00:44:06.361Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdzf0037o4pkn6x1gu6i"},{"title":"【转】九十九段精彩的人生感悟","date":"2014-10-13T09:01:20.000Z","_content":"## 《人人需要智慧》\n　　托尔斯泰认为：\n　　“智慧就是懂得生活的任务\n　　以及怎样去完成”。\n　　一个人能够正确评价环境，\n　　能够了解自己的长处和短处，\n　　能够知道自己生活的意义，\n　　能够履行自己的责任，\n　　能够以积极心态去解决困难，\n　　能够知晓别人并与之和睦相处……\n　　这就是人生智慧。\n　　`每日提醒：人人都可以成为智者。`\n　　`人生顿悟：智慧可以照亮人生之路。`\n\n\n## 《正确认识自己》\n　　《生活之路》忠告我们：\n　　“在了解上帝之前，\n　　人必须先要了解自己”。\n　　当我们心平气和地准备学习智慧，\n　　努力去争取做一个智慧人士的时候，\n　　首要的任务是要客观公正地评价自己。\n　　“我是谁？”“我的人生是为了什么？”\n　　“我为什么会痛苦？”\n　　“我的立身资本是什么？”\n　　“我的弱点和缺点在哪里？”……\n　　`每日提醒：缺什么，补什么。`\n　　`人生顿悟：学习`\n\n<!--more-->\n\n## 《守住自己》\n　　有时你羡慕某人位居高位，\n　　显赫风光无比，\n　　真后悔当时怎么不留机关好好努力；\n　　有时你羡慕某人经商不久，\n　　就积累财富无数，\n　　真后悔怎么没有下海经商；\n　　有时你羡慕某人工作舒适，\n　　悠闲自得，轻松自在，\n　　真后悔自己还置身于繁杂的环境之中……\n　　你越是这样思想，越会活得没有人样。\n　　`每日提醒：不要盲目与人攀比。`\n　　`人生顿悟：你就是你。`\n\n\n## 《经营自己的长处》\n　　每个人都有潜在的杰出的才能，\n　　只不过有时自己和别人没有发现而已，\n　　知道自己在某个方面很优越，\n　　不仅使你充满自信，\n　　而且会让你拥有一块立身之地，\n　　不要丢掉自己的兴趣和长项，\n　　否则你会处处不如意，\n　　以自己的短处去谋生，\n　　你会被贬的一文不值，\n　　切记：宝贝放错了地方也是废物。\n　　`每日提醒：外面 的世界很精彩，也很无奈。`\n　　`人生顿悟：互补短长，扬长避短。`\n\n\n## 《别沉浸于对过眼烟云东西的追逐》\n　　有得必有失，得失总平衡。\n　　追求虚无的浮名，\n　　一生就会注满痛苦的铅云。\n　　猛回头，短暂一生匆匆已过，\n　　而生活中最应珍惜和享受的，\n　　却一点儿也没得到，\n　　许多人为此失落，为此追悔。\n　　人只有在生命的尽头，\n　　才会懊悔：为了追求无聊的东西，\n　　而丢失了自己的许多东西。\n　　`每日提醒：得到了，也失去了。`\n   　 `人生顿悟：顺其自然。`\n\n\n## 《无欲则刚》\n　　没有刻意追求的欲望，\n　　就不会在意别人的眼色，\n　　就会一身轻松，无拘无束，\n　　不为违心献媚而烦心。\n　　不要做欲望的奴隶，\n　　否则一生终无宁日。\n　　卑鄙小人最善于窥视别人的心思，\n　　利用别人的欲望和所求，\n　　达到自己不可告人的目的。\n　　不让别人牵着自己的鼻子走。\n　　`每日提醒：善去不良欲望。`\n　　`人生顿悟：不图虚荣。`\n\n\n## 《过好每一天》\n　　许多智慧人士劝告：\n　　“最重要的是今天的心”。\n　　何必为痛苦的悔恨而丧失现在的心情，\n　　何必为莫名的忧虑而惶惶不可终日，\n　　过去的已经一去不复返\n　　再去怎么悔恨也无济于事。\n　　未来的还是渴望而不可及，\n　　再去怎么忧虑也是空悲伤。\n　　过去的经验要总结，\n　　未来的风险要预防。\n　　`每日提醒：“今天心，今天事，现在人”最为重要。`\n　　`人生顿悟：不想无用的事。`\n\n\n## 《说话多用“您‘字，少用”我“字》\n　　许多人总是关心自己的事务，\n　　很少有闲心去顾及不相干的事。\n　　与人交谈有艺术，\n　　“您”字多用生笑意，\n　　“我”字多用失欢乐。\n　　以对方话题交谈，\n　　越谈会越投机；\n　　以己方话题交谈，\n　　越谈会越觉乏味。\n　　“我”字当头，烦恼不尽。\n　　`每日提醒：说话总围绕“我”字，是浅薄的表现。`\n　　`人生顿悟：提高交流技巧。`\n\n\n## 《谨慎是永恒的守则》\n　　葛拉西安的《智慧书》告诉我们：\n　　“闲者脱离忧虑和窘困，\n　　并且显示出对自我的控制。”\n　　不要在胸膛上开窗户，\n　　而要让双手长眼睛。\n　　放纵自己的言语，\n　　会惹来不必要的麻烦；\n　　放纵自己的行为，\n　　会招来不必要的灾难。\n　　喋喋不休和轻举妄动是愚蠢的表示。\n　　`每日提醒：谦虚谨慎，巧避灾难。`\n　　`人生顿悟：多听少说勤思考。`\n\n\n## 《无法逃避现实》\n　　天堂无论多么幸福，\n　　你也不会直接去天堂，\n　　地狱无论多么悲惨，\n　　你也不会直接陷地狱；\n　　现实永远介于天堂与地狱之间，\n　　人们总是挣扎在苦乐的海洋。\n　　对于尘世的冷漠，\n　　只会增加自身的痛苦，\n　　睁眼好好看一看，\n　　没有烦心的人绝不存在。\n　　`每日提醒：逃避不是解决矛盾的办法。`\n　　`人生顿悟：勇敢地面对现实。`\n　　\n## 《不要总疑春色在人家》\n　　自己的伤痛自己最清楚，\n　　自己的哀叹自己最明白，\n　　自己的快乐自己最感受。\n　　也许自己眼中的地狱，\n　　却是别人眼中的天堂；\n　　也许自己眼中的天堂，\n　　却是别人眼中的地狱。\n　　生命就是这般的滑稽。\n　　一个人有一个人的活法，\n　　关键在于心态的调整。\n　　`每日提醒：拥有自我，过好自己的生活。`\n　　`人生顿悟：不攀不比`\n\n\n## 《隐忍别人的缺点》\n　　金无赤金，人无完人，\n　　天然的宝玉总带斑点，\n　　只有人造的才会洁白无暇。\n　　总拿自己的优点与别人的缺点比较，\n　　越比越会感觉不顺眼，\n　　越不顺眼越会感觉上火。\n　　多以自己之长善补别人之短，\n　　多看别人的长处，\n　　越看越会顺眼，\n　　越处越会融洽。\n　　`每日提醒：相互对抗不如相互合作。`\n　　`人生顿悟：优势互补`\n\n\n## 《不要轻视依赖于你的人》\n　　做人要尽量自己独立，\n　　而对别人却要多给予关切。\n　　被人依赖是件好事，\n　　起码说明你是受人信赖，\n　　不可或缺，有主见，\n　　又有能力和水平。\n　　试想：一个无才无能之人，\n　　谁会去依靠呢？\n　　不要伤害依赖于你的人的自尊心，\n　　因为不独立，使其更敏感。\n　　`每日提醒：多一份关爱，就多一份友情。`\n　　`人生顿悟：厚爱有余`\n\n\n## 《别醉心宣扬别人的恶名》\n　　对于别人的过失，\n　　采取幸灾乐祸和津津乐道的方式，\n　　也许你能得到短暂的快意，\n　　却无法掩盖你的愚蠢。\n　　期望于广告他人的污点，\n　　来掩饰自己的不足，\n　　证明自己也是声名狼籍。\n　　一个人越是与发臭的事件为伴，\n　　他自己越会臭不可闻。\n　　总控告别人的人也会恶名远扬。\n　　`每日提醒：不散布谣言。`\n　　`人生顿悟：不说三道四。`\n\n\n## 《当心丑态百出》\n　　一个原本并不高尚的人，\n　　偶而一个机会，\n　　使他位居一定高位，\n　　于是轻飘飘，\n　　不知自己姓什么。\n　　一个原本很贫困的人，\n　　偶遇一笔横财，\n　　使他过上奢侈的生活，\n　　于是马上显露“爆发户”的本性……\n　　这种浅陋者生活中还少吗？！\n　　`每日提醒：有福不可享尽，更何况本身福分就浅。`\n　　`人生顿悟：不要不知天高地厚。`\n\n\n## 《不图虚荣》\n　　虚荣是男人的自残钢刀，\n　　虚荣是女人的自杀绳索。\n　　本身贫困，偏要假装奢华，\n　　本身位低，偏要假装高雅，\n　　本身自私，偏要假装大方……\n　　于是自欺欺人的丑剧就会不断。\n　　打肿脸充胖子，\n　　越活越会失掉自我，\n　　结果反误了卿卿小命。\n　　`每日提醒：假的总是假的。`\n　　`人生顿悟：真实。`\n\n\n## 《最重要的是安慰自己的心灵》\n　　自己的情绪统治自己的生活，\n　　自己的生活决定自己的命运。\n　　有权不一定有好心情，\n　　高处不胜寒；\n　　有钱不一定有好心情，\n　　谋财害命须常提防；\n　　有貌不一定有好心情，\n　　自古“红颜多薄命”。\n　　摆脱心灵的羁绊，\n　　随时清扫心灵的尘埃。\n　　`每日提醒：积极心态，快乐生活。`\n　　`人生顿悟：心态好。`\n\n\n## 《别忽视小事的重要性》\n　　不要以事小而不为，\n　　不要以恶小而为之。\n　　人生的成功，\n　　多在于事事认真。\n　　人生的失败，\n　　多在于对无足轻重事项的冷漠。\n　　许多人考察一个人，\n　　总是以小事来观察，\n　　若是小事不做，大事又不能，\n　　则是不可重用之人。\n　　`每日提醒：机会常会符合在小事上。`\n　　`人生顿悟：从不放弃小事。`\n\n\n## 《不要先说不可能》\n　　遇事不经思考就一口拒绝，\n　　就意味着你已丧失成功的机会。\n　　没有冷静的思考，\n　　没有仔细的分析，\n　　却给人以冷脸，\n　　“这种事情是不可能做到的。”\n　　这种处世方法能不失败吗？\n　　“让我试一试再说。”\n　　这是智者的技巧。\n　　其实自己的潜能是无穷无尽的。\n　　`每日提醒：拒绝是无能的标志。`\n　　`人生顿悟：尝试。`\n\n\n## 《一视同仁》\n　　我们常常能原谅一贯犯错误的人，\n　　却不会原谅偶而犯一次错误的人。\n　　从来不会向你说好话的人，\n　　偶而一句好话会让你激动不已。\n　　惯于对你顺言顺耳说好话的人，\n　　偶而一句恶语会让你愤怒万分。\n　　这里的毛病不在于别人，\n　　还是自己的判断和思考出了问题。\n　　亲则疏，远则香，\n　　这是自己的心理在作怪。\n　　`每日提醒：知人者智，知己者明。`\n　　`人生顿悟：冷静分析。`\n\n## 《克制冲动》\n　　心血来潮，就会激动不已，\n　　头脑发热，就会鲁莽行事。\n　　那些平庸的激情，\n　　多会点燃愚蠢的火把，\n　　照亮的是自己的影子，\n　　灼伤的是无辜的看客。\n　　冲动会使聪明变疯狂，\n　　冲动会让结果变苦涩。\n　　激情是冲动的借口，\n　　是产生罪恶的替罪羊。\n　　每日提醒：不要莫名的冲动。\n　　人生顿悟：冷静。\n\n\n## 《自恃清高，得不偿失》\n　　自以为高人一等，\n　　就会轻易地去侮辱别人，\n　　就会瞧不起一切。\n　　自以为贵为骄子，\n　　就会把别人看得微不足道，\n　　就不能心平气和与之相处。\n　　骄傲之心只会增加别人对你的怨恨，\n　　轻薄之心只会增添别人对你的愤怒。\n　　无论何时何地，\n　　都不能要这种结仇行为。\n　　每日提醒：剥夺别人等于剥夺自己。\n　　人生顿悟：和睦相处。\n\n\n## 《别错误的高估自己》\n　　愚蠢的人总是低估别人，\n　　高看自己一眼，\n　　认为天下皆凡人，\n　　惟有自己最高贵，\n　　于是就会占有别人的功劳，\n　　而心安理得；\n　　于是就会掠夺别人的财富，\n　　而心满意足。\n　　头脑发昏时，\n　　就有“多行不义必自毙”之后果。\n　　每日提醒：高估越多，摔得越惨。\n　　人生顿悟：客观评价。\n\n\n## 《善于遮盖别人的不足》\n　　托尔斯泰曾一针见血地说：\n　　“人们常常想用发现别人的缺点来表现自己，\n　　但他们用这种方式表明的只是他们的无能。”\n　　“一个人越聪明、越善良，\n　　他看到别人身上的美德越多；\n　　而人越愚蠢、越恶毒，\n　　他看到别人身上的缺点也越多。”\n　　能给别人台阶，自己也有台阶，\n　　能给别人面子，自己越有面子。\n　　撕破别人脸面，别人会肆无忌惮。\n　　每日提醒：遮丑是美德。\n　　人生顿悟：行善得善。\n\n\n## 《麻醉自己是最大的愚蠢》\n　　为了逃避烦恼的尘世，\n　　而采用麻醉自己的方式，\n　　实在是傻瓜才干的蠢事。\n　　以酒浇愁愁更愁，\n　　“酒伤肝”的悲剧不能不知？\n　　以毒品麻醉自己，\n　　等于让毒蛇缠绕在身。\n　　以吞云吐无雾刺激自己，\n　　“肺癌”的魔鬼紧根其后，\n　　麻醉只是暂时的现象。\n　　每日提醒：不可熄灭心中的明灯。\n　　人生顿悟：人越醉会越痛苦。\n\n## 《此路不通走另路》\n　　千万不要一条道奔到黑，\n　　不撞南墙不回头。\n　　埋没自己才能的人，\n　　往往是自己的偏见，\n　　招致失败的厄运，\n　　恰恰是自己的认死理思维。\n　　现代社会有许多活法，\n　　何必拘泥于一种形式，\n　　换一条最适合自己的路走，\n　　肯定会快乐又幸福。\n　　每日提醒：别活的太沉重、太窝囊。\n　　人生顿悟：条条道路通罗马。\n\n\n## 《心境不同，效果不一》\n　　以积极心态生活，\n　　就会发现许多美妙的东西；\n　　以消极心态生活，\n　　就会发现许多沮丧的东西；\n　　生活的快乐与烦恼，\n　　全在于你对生活的态度。\n　　乐观向上，好运不断，\n　　失落沉沦，厄运陪伴。\n　　不妨换一个角度来思考。\n　　每日提醒：好的心态决定好的命运。\n　　人生顿悟：凡事往好处想。\n\n\n## 《做一张生命的清单》\n　　当你痛苦万分时，\n　　不妨自己悄悄列一张清单。\n　　想一想“人生在世，哪些还是要做的？”\n　　有了这个“临终”的念头，\n　　你就没有时间去烦恼。\n　　就会专心致志，\n　　去完成自己认为要遗憾的事项。\n　　人的充实人的快乐，\n　　全在于实现梦想的努力之中。\n　　别把梦想带进坟墓。\n　　每日提醒：无聊，清闲，就会痛苦。\n　　人生顿悟：把梦想变为现实。\n\n\n## 《别图形式》\n　　有情人心中有爱，\n　　天天都是情人节，\n　　为什么非要得到形式上的东西，\n　　一枝玫瑰和一盒巧克力？\n　　心中并不在乎你，\n　　何必又为特殊节日的一次“义举”，\n　　而欣喜若狂呢？！\n　　有人精辟地指出：\n　　“若她爱你，会拼命地节省你的钱，\n　　相反，则会拼命地浪费你的钱财。”\n　　每日提醒：透过现象看本质。\n　　人生顿悟：爱是长久的事。\n\n\n## 《抱怨无用》\n　　抱怨要是作为偶而发泄一下，\n　　也是十分必要的。\n　　可怕的是，抱怨更会增加烦恼，\n　　只能向别人显示你的无能。\n　　抱怨是一种致命的消极心态，\n　　一旦抱怨成为恶习，\n　　则暗无天日，\n　　不仅自己好心境全无，\n　　而且别人跟着也倒霉，\n　　抱怨是怯懦的标志。\n　　每日提醒：自己的心痛只能自己疗。\n　　人生顿悟：乐观。\n　　\n## 《小心与“太阳型”的人为伴》\n　　适当的距离，\n　　不仅能够得到亮光，\n　　而且感到很温暖，\n　　相处距离太近，\n　　不仅会灼伤你自己，\n　　而且把你的才能“清洗”的得一无所有。\n　　要是你也想成为“太阳”，\n　　则一山容不了二虎，\n　　而虎相争必有恶斗，\n　　何不事前另谋高就。\n　　每日提醒：距离产生美感。\n　　人生顿悟：亲则疏。\n\n\n## 《别期望人生的公平》\n　　公平是相对的，\n　　要求天下皆公平，\n　　是痴人的梦想。\n　　不必为不公平而愤愤不平，\n　　最重要的是今天努力的心态和行动。\n　　你很有才华，却没有施展，\n　　为此怀才不遇，\n　　并且天天怨天怨地，\n　　这有什么用呢？\n　　反而会使心情更糟。\n　　每日提醒：轻轻收起你的傲骨，先踏踏实实工作。\n　　人生顿悟：努力。\n\n\n## 《今天的学习是明天的欢笑》\n　　现代社会，知识更新已成为时尚，\n　　谁不意识到这一点，谁就会沦为时代的“乞丐”。\n　　学习是为了明天，\n　　努力是为了今天，\n　　少壮不努力，老大徒伤悲。\n　　与其无所事事空悲叹，\n　　不如心平气和多学习，\n　　学习能去烦恼，又有未来的收获。\n　　每日提醒：及时充电，不断学习。\n　　人生顿悟：知识是力量。\n\n\n## 《生命的质量在于事业的追求》\n　　黑格尔曾经指出：\n　　“一种人毕生致力于拥有，\n　　另一种人毕生致力于有所作为”。\n　　一心渴望拥有，\n　　一旦没有达到目的，\n　　就会失落、痛苦和绝望。\n　　心无旁鹜，专心于事业的追求，\n　　就会忘掉许多烦恼，\n　　找到许多努力过程中的快乐。\n　　默默耕耘的人其实是最智慧的人。\n　　每日提醒：一份耕耘，一份收获。\n　　人生顿悟：有事做是种欢乐。\n\n\n## 《平淡是生活永恒的主题》\n　　生活的真谛在于理解，\n　　生活的诀窍在于理智，\n　　刻意追求卓越的生活，\n　　就会陷入庸人自扰式的苦海。\n　　整天都是鲜花和掌声，\n　　这样的日子也会腻烦。\n　　没有鲜花和掌声，\n　　这种清淡的日子也悠闲自得。\n　　一个耐不了平淡如水的人，\n　　肯定没有好日子过。\n　　每日提醒：一个人越想过特别的生活，越会失掉原来幸福的生活。\n　　人生顿悟：平凡是福。\n\n\n## 《世上不如意事十之八九》\n　　谁都有痛苦和烦恼，\n　　只不过程度大小不一而已。\n　　有些人善于变痛苦为动力，\n　　善于变烦恼为快乐。\n　　有些人却深陷不如意的苦海，\n　　越活越会感到没有意思。\n　　“祝你吉祥如意”，\n　　仅是美丽的谎言，\n　　改变的是自己的心态，\n　　不变的是事物的本象。\n　　每日提醒：烦恼是永恒的主题。\n　　人生顿悟：不耐烦更有烦恼。\n\n\n## 《凡事多往好处想》\n　　忙碌有忙碌的好处，\n　　可以无暇于烦恼和琐事，\n　　清闲有清闲的好处，\n　　可以留点时间做自己的事。\n　　位居高位自有其好处，\n　　可以多为人民服务。\n　　平常岗位多有其好处，\n　　可以免去“焦点人物”的苦恼。\n　　心平气和最重要，\n　　顺其自然是常理。\n　　每日提醒：往好处想可以产生积极心态。\n　　人生顿悟：换位思考。\n\n\n## 《见好就收》\n　　不要等到自己已是落叶败枝，\n　　还留恋不舍地故做多情。\n　　“在事情离开你之前先离开事情”，\n　　这是智者的金言劝告。\n　　葛拉西安更是善意的忠告：\n　　“不要等到你变成西下的夕阳”。\n　　在掌声和鲜花中谢幕，\n　　自己和别人还留有美好的记忆。\n　　在讥笑和愤怒中迫退，\n　　不幸和痛苦会时刻缠绕。\n　　每日提醒：别让自己变成一匹死马。\n　　人生顿悟：留有余地。\n\n## 《及时调整心态》\n　　此一时，彼一时，\n　　到什么山上唱什么歌，\n　　退位要有退位心态，\n　　在岗要有在岗的心情。\n　　要求别人什么时候都一样看待你，\n　　这是多么的不切实际，\n　　也是故做多情的一厢情愿。\n　　在位时门前车水马龙，\n　　不要为此沾沾自喜；\n　　退位时门前冷清不要自找痛苦。\n　　每日提醒：花开花落，自然规律。\n　　人生顿悟：平和心态。\n\n\n## 《分阶段实施宏大计划》\n　　志当存高远。\n　　志向远大而未见行动，\n　　却是失败的根源。\n　　不要被巨大的目标所威吓，\n　　完全可以把大目标肢解。\n　　就象爬山一样，\n　　望着远方的叠叠山峰，\n　　你可能已失去攀登的勇气，\n　　一旦当你努力爬上一个小山峰，\n　　就有成功的喜悦和继续攀登的信心。\n　　每日提醒：大计划一旦变成无数个小计划，就十分容易达到。\n　　人生顿悟：锲而不舍。\n　　\n## 《做人不要张狂》\n　　傲慢骄横，不可一世，\n　　咄咄逼人，盛气凌人，\n　　没有一个有好下场的。\n　　总唱高调容易招致怨恨，\n　　张狂示人容易召来攻击。\n　　天外有天，山外有山，\n　　做人还得低调谨慎，\n　　有点钱就烧的慌，\n　　有点权就不知姓什么，\n　　是最浅薄的人。\n　　每日提醒：在未做好人之前，先不要把自己变成神。\n　　人生顿悟：加强修养。\n\n\n## 《学会倾听是最大的智慧》\n　　越是当你滔滔不绝的时候，\n　　你的愚蠢越会暴露无疑。\n　　越是当你洗耳恭听的时候，\n　　你的智慧越会快乐生长。\n　　聆听是取人之长，\n　　补己之短的良方；\n　　聆听是沟通双方，\n　　尊重对方的桥梁；\n　　聆听是抛弃错误，\n　　远离懊悔的法宝。\n　　每日提醒：沉默能省去许多烦恼。\n　　人生顿悟：多听少说。\n\n\n## 《不义之财不可取》\n　　君子取财，必须取之有道，\n　　无道的财物再多，\n　　也是残害自己的利剑。\n　　为浊富不若为清贫，\n　　与其守着金山银山惶惶不可终日，\n　　不如粗茶淡饭却食之舒坦甘美。\n　　人生带不走的是财富，\n　　留下来的却是名声，\n　　遗留后代应是道德和教育，\n　　而不是蚀其心灵的财富。\n　　每日提醒：不做金钱的奴隶。\n　　人生顿悟：要有正确的金钱观。\n\n\n## 《相互对抗不如相互合作》\n　　俗话说：\"人抬人无价直宝\".\n　　相互对抗天地窄，\n　　相互合作天地广。\n　　相互对抗会相互拆台，\n　　就会自设障碍，\n　　自己掉入自己设置的陷阱。\n　　相互合作就会相互补台，\n　　就会共同搭台，\n　　大家一起愉快地达到双赢的目的。\n　　不要仇视心，多存合作心。\n　　每日提醒：精诚合作，事半功倍。\n　　人生顿悟：扬长避短。\n\n\n## 《减少不必要的应酬》\n　　整天忙于应酬，\n　　看上去是充实，\n　　实质是慢性自杀。\n　　应酬不仅浪费宝贵时间，\n　　而且暴饮暴食还会提前夭折，\n　　另外有可能增添口舌的额外烦恼。\n　　不要热衷于你来我往，\n　　不要热心于吃吃喝喝，\n　　多留点时间勤于思考，\n　　勤于学习，勤于工作。\n　　每日提醒：别把人生的成功寄托于应酬之上。\n　　人生顿悟：多做自己应做的事。\n\n## 《知识是立身之本》\n　　人们多会轻蔑不学无术之人，\n　　人们多会小瞧无知无识之人，\n　　现代社会的贫困，\n　　多是因为愚昧缺乏知识造成的。\n　　人没有财富不可怕，\n　　可怕的是知识的缺乏。\n　　投资教育是最好的投资，\n　　给予孩子以知识，\n　　可以使他走遍天下都不怕，\n　　没有知识的人寸步难行。\n　　每日提醒：少时不学习，长大多悲痛。\n　　人生顿悟：学以致用。\n\n## 《没有健康什么都谈不上》\n　　健康是一切的基础，\n　　离开健康的身体，\n　　去说事业、金钱、爱情等事项，\n　　都是无源之水。\n　　健健康康是福，\n　　平平安安也是福，\n　　不要牺牲健康去换取金钱，\n　　到时痛悔莫及。\n　　心理健康比机体健康更重要，\n　　健康还在于日常的保养。\n　　每日提醒：无病无灾是多么大的幸福。\n　　人生顿悟：心身并养。\n\n\n## 《不可盲目攀比》\n　　你就是独特的你自己，\n　　何必与别人盲目攀比。\n　　以自己之短比别人所长，\n　　就会越比越觉窝火，\n　　越窝火越会失落、乏味，\n　　以自己之长比别人所短，\n　　就会盲目自恋自大，\n　　就会放着好日子不过，\n　　又会去瞎折腾。\n　　盲目比较是烦恼的圈套。\n　　每日提醒：活出真实的自我来。\n　　人生顿悟：一个人一个活法。\n\n\n## 《具备自我完善的能力》\n　　人在学习阶段，\n　　有老师的不时教诲，\n　　可以随时改进不足。\n　　人在进入社会以后，\n　　就没有学校时的那种福分，\n　　这时要多靠自知之明，\n　　依赖自我反省。\n　　学习是没有止境的，\n　　尤其是自我的改造，\n　　更是没有穷尽的。\n　　每日提醒：孔子曰：吾日三省吾身。\n　　人生顿悟：自省自悟，日超完善。\n\n\n## 《不让命运捏在别人手里》\n　　掘去真实的自我，\n　　放弃自我的长处，\n　　是痛不欲生日子的开始。\n　　何必把宝押在某人身上，\n　　而舍弃自身的学习和努力？！\n　　蠢人总是急功近利，\n　　喜好投机取巧，\n　　恰好中了奸人的圈套，\n　　失去自我的人，\n　　别人的好脸色也不会长久。\n　　每日提醒：提高自身素质最重要。\n　　人生顿悟：自强才能自立。\n\n## 《重要的是做好自己的本职工作》\n　　不去努力立足本职工作，\n　　却去谈什么高远的理想，\n　　策划什么宏伟的成业方案，\n　　全是黄梁美梦式的悲剧。\n　　见异思迁，\n　　一山望着另一山高，\n　　全是人生的误区。\n　　千万不要做本末倒置的事情，\n　　本职工作是自己立身的“根据地”，\n　　丢掉“根据地”会变成“流浪儿”。\n　　每日提醒：别做眼高手低之人。\n　　人生顿悟：踏实努力。\n\n\n## 《好心有时无好报》\n　　俗语说：“行善得善，行恶得恶”，\n　　“种瓜得瓜，种豆得豆”。\n　　但有时好心也会没有好报。\n　　一是施赠人处理不当，\n　　受赠人情面上难以接受，\n　　造成好心无好报的结果。\n　　二是受赠人是个忘恩负义之人，\n　　在受恩时感激不已，\n　　一旦事过早忘九霄云外。\n　　每日提醒：相信自己的好心会有好报。\n　　人生顿悟：做善瞬事要不图回报。\n\n\n## 《吃亏是福》\n　　有经济专家总结炒股经验后认为：\n　　“会吃一分钱的亏，\n　　必是炒股的大赢家”。\n　　人生场上何尝不是如此，\n　　做人太精明，\n　　处处算计别人，\n　　谁还会乐意与你合作？\n　　没有人会自认为是傻瓜，\n　　会甘心情愿受人算计。\n　　俗话说：“傻有傻福，精有精祸”。\n　　每日提醒：聪明反被聪明误\n　　人生顿悟：利益共享\n\n\n## 《克服懒惰》\n　　懒惰是最顽固的敌人，\n　　有时总以笑微微的面貌出现。\n　　精神懒惰比身体懒惰更可恶，\n　　懒惰会毁灭我们的意志。\n　　懒惰是舒适的朋友，\n　　人越舒适越会产生懒惰之心。\n　　勤勉是成功的朋友，\n　　懒惰则是成功的敌人，\n　　我们的荣誉来自于勤勉，\n　　我们的恶名来自于懒惰。\n　　每日提醒：自满自足常是懒惰的借口。\n　　人生顿悟：勤勉。\n\n\n## 《知道人生每阶段的特色》\n　　有人研究认为：\n　　“二十岁的人，\n　　依靠青春吃饭；\n　　三十岁的人，\n　　依靠勤奋吃饭；\n　　四十岁的人，\n　　依靠智慧吃饭；\n　　五十岁的人，\n　　依靠经验吃饭；\n　　六十岁的人则忠告后人……”\n　　每日提醒：把握好每个年龄段的生活。\n　　人生顿悟：智慧加勤奋。\n\n\n## 《学会让生活充满爱》\n　　生活倘若没有爱，\n　　生活就会变成荒芜的戈壁滩，\n　　生活中要是充满爱，\n　　可以抚平许多受伤的心灵，\n　　可以挽救许多沉沦的生命，\n　　可以激励许多彷徨的游子，\n　　可以慰籍许多失败的落魄者……\n　　要想得到别人的爱，\n　　自己首先要学会爱别人。\n　　要是冷漠这个世界，\n　　就无爱意可言。\n　　每日提醒：敞开你的心扉，让彼此的爱河流畅。\n　　人生顿悟：爱是人生的希望。\n\n\n## 《爱出风头是个坏毛病》\n　　人总有妒忌之心，\n　　当你刻意想超过别人，\n　　别人心里就会不舒服。\n　　比如言谈之中的卖弄学问，\n　　就会有意或无意地冒犯别人。\n　　比如衣着时髦漂亮，\n　　就会招惹别人“爱打扮”的风言风语。\n　　切记，有些人不喜欢比他强的人，\n　　一见奇特的人就要攻击，\n　　这种爱诅咒的俗人是不少的。\n　　每日提醒：虚荣心强的人就爱出风头。\n　　人生顿悟：大众心态。\n\n\n## 《百闻不如一见》\n　　根据道听途说的东西，\n　　作为决策的依据，\n　　难免要犯错误。\n　　亲眼所见，亲口所尝，\n　　最有感受力，\n　　最有说服力。\n　　切莫以“秀才不出门，\n　　能知天下事”自居，\n　　越是与众隔绝，\n　　越会瞎指挥。\n　　每日提醒：有调查，就有发言权。\n　　人生顿悟：理论联系实际。\n\n\n## 《三个臭皮匠顶一个诸葛亮》\n　　智慧在哪里？\n　　智慧来自于虚心向别人请教。\n　　孔子曰：“三人行，必有我师”。\n　　当我们放下架子，\n　　不耻下问，\n　　请教每一个专业的行家能手，\n　　我们的智慧就会逐渐丰富起来。\n　　请教可以使我们品味许多东西，\n　　可以提升我们的灵性，\n　　可以利用别人的光芒来照亮自己。\n　　每日提醒：“文殊遇缘则有师”。\n　　人生顿悟：虚心请教、学习。\n\n\n## 《塞翁失马，焉知非福》\n　　“祸兮福所伏，福兮祸所倚”。\n　　“乐极会生悲，否极会泰来”。\n　　看问题不可片面，\n　　要透过现象看本质。\n　　得意时别太忘形，\n　　失意时别太失态。\n　　平安时要看到危险的存在，\n　　艰难时要看到希望的光明。\n　　每日提醒：事物都是一分为二的。\n　　人生顿悟：困难时不悲观。\n\n## 《经常自我检查》\n　　每天早上提醒自己一次，\n　　“哪些该做，哪些又不该做？”\n　　每天晚上又检查自己一次，\n　　“哪些对了，哪些又错了？”\n　　人活在世上，\n　　那能傻吃傻睡，\n　　那能毫无思索。\n　　自我的控制机制健全了，\n　　错误的魔鬼也无法接近你，\n　　做完人很难，少犯错误则易。\n　　每日提醒：避免犯错误。\n　　人生顿悟：勇于自我剖析。\n\n## 《常有理智的闸门》\n　　越是自我感觉良好，\n　　越要提高警惕，\n　　越是权重位显，\n　　越要提防小心。\n　　面对行贿的笑容，\n　　该说“不”字就说“不”。\n　　人的一生中，\n　　有许多事是绝不可以做的。\n　　“要让人不知，\n　　除非己莫为”。\n　　每日提醒：苦酒多是自酝的。\n　　人生顿悟：该拒绝必须拒绝。\n\n## 《别羡慕浊富和邪权》\n　　财富要是来路不明，\n　　难免夜半鬼叫门，\n　　取财要有正当手段，\n　　合法致富、勤劳致富。\n　　职权要是依靠歪门邪道取得，\n　　难免众人不服气。\n　　当官必须德才兼备，\n　　兢兢业业，克己奉公。\n　　“昨天是人，今天是鬼”式的人，\n　　千万别去羡慕。\n　　每日提醒：正常心态，保持自己。\n　　人生顿悟：走自己的路。\n\n\n## 《别在意他人的冷嘲热讽》\n　　有人一针见血的指出：\n　　“一个人只比别人高出一点点，\n　　就会招致别人百般的辱骂；\n　　而一旦当此人高出他人许多，\n　　则辱骂变成了虚伪和低三下四的恭维”。\n　　“远来的和尚好念经”。\n　　同单位之人更容易讽讥伤人，\n　　因为他们更加熟悉你，\n　　更会挑剔你的毛病来掩盖其失落。\n　　每日提醒：坚定地走好自己的路。\n　　人生顿悟：冷眼更能促人奋进。\n\n\n## 《不要极端的爱和恨》\n　　恋人不成，\n　　也要好说好散；\n　　夫妻不成，\n　　也要想想\"毕竟夫妻一场\",\n　　\"一日夫妻百日恩\",\n　　朋友不成，\n　　也要礼貌告别。\n　　昨天的亲密无间，\n　　演变成今天的仇恨满天，\n　　早知今日，何必当初呢？！\n　　每日提醒：适当距离。\n　　人生顿悟：冷静。\n\n## 《不做欲望的奴隶》\n　　每个人都会产生许多欲望，\n　　有些欲望是正常的，\n　　有些欲望则是不正常的，\n　　甚至是邪恶的欲望。\n　　“贪心不足蛇吞象”。\n　　“欲海难填，反误了卿卿小命”。\n　　正常人生的健康之道：\n　　“乐观、营养、运动、节制”。\n　　善除不良欲望是节制的核心。\n　　生活中为贪欲丧命的还少吗？\n　　每日提醒：欲望越大，痛苦越多。\n　　人生顿悟：戒贪欲。\n\n\n## 《人很少会饿死，却会被饱食撑死》\n　　终日饱食，\n　　多会无所事事。\n　　城市富贵病已经很普遍，\n　　“减肥”风已经很流行，\n　　医学专家忠告：\n　　“早上饱，中午好，\n　　晚餐吃个六成饱”。\n　　肥胖引起多种疾病，\n　　已成为现代杀手之一。\n　　许多人终为饱食所累。\n　　每日提醒：过于吃喝多遭罪。\n　　人生顿悟：别贪吃。\n\n## 《贪小失大》\n　　“贪便宜买老牛”，\n　　已是一句古训。\n　　“贪小便宜吃大亏”，\n　　更是一条警句。\n　　处处占便宜，\n　　时时得好处，\n　　表面看是尝到了一点甜头，\n　　实质上却背负了一个恶名。\n　　“做人要肯吃亏“，\n　　只有到成年才能感悟。\n　　每日提醒：眼光别太短浅。\n　　人生顿悟：不占小便宜。\n\n\n## 《衰老是极为自然的事情》\n　　“生”、“老”、“病”、“死”，\n　　虽是人生的无奈，\n　　却是大自然不可违背的规律。\n　　衰老，每个人都有这一天，\n　　年龄的增大不可怕，\n　　可怕的是未老先衰，\n　　人老心不老，\n　　心理年青，人也自然年轻。\n　　年老因有德而善终，\n　　经验是其流传的忠告。\n　　每日提醒：要确保晚节。\n　　人生顿悟：不服老。\n\n\n## 《人人皆有烦恼》\n　　贫困人士有贫困人士的烦恼，\n　　富裕人士有富裕人士的烦恼，\n　　不要认为贫困人士的日子不好过，\n　　其实富裕人士的日子，\n　　也不见得十分好过。\n　　富人的财富越多，\n　　其操心烦恼的事多，\n　　其不得安宁的日子也越多。\n　　贫困人多有清茶一杯的福分，\n　　富裕人可能要冒“绑票”的风险。\n　　每日提醒：好心态就有好心情。\n　　人生顿悟：不攀不比。\n\n## 《无聊多是清闲所致》\n　　极端的清闲，\n　　带来极度的无聊，\n　　闲得发慌，\n　　闲得郁闷，\n　　闲会闲出病来。\n　　整天有事做，\n　　就没有心思去烦恼。\n　　有追求的目标，\n　　就不会无聊郁闷。\n　　多有做事的欢乐是养生之道。\n　　每日提醒：忙碌之余，清闲片刻。\n　　人生顿悟：找事做。\n\n## 《不做金钱的奴隶》\n　　金钱不是万能的，\n　　虽然商品经济不可缺少金钱，\n　　鸟儿系上金钱飞不上蓝天。\n　　金钱一旦变成绳索，\n　　会勒死一个人。\n　　张口金钱，闭口金钱，\n　　不能穷的只剩下金钱。\n　　人的一生不能为挣钱而挣钱，\n　　否则会变成可怕的数字游戏。\n　　金钱要为人类更好的服务。\n　　每日提醒：钱既是好东西，又是害人的东西。\n　　人生顿悟：淡泊。\n\n\n## 《学会简单生活》\n　　有一名人说过：\n　　“你越习惯于奢华的生活，\n　　你就越发陷入被奴役的地位。\n　　因为你的需求越多，\n　　你的自由受到的限制就越大。”\n　　需求越少，生活就越幸福。\n　　这是一条古老的道理，\n　　贪吃是蠢猪的本性，\n　　贪财是笨鸟的习惯\n　　贪权是傻虎的幻梦。\n　　每日提醒：丢掉不该拥有的东西。\n　　人生顿悟：舍弃。\n\n\n## 《不要过于计较别人无端的评价》\n　　没有一幅画是没人评价的，\n　　没有一个人是没人指责的，\n　　你要是沉默寡言，\n　　有人会指责“城府很深”，\n　　你要是善于健谈，\n　　有人又会指责“夸夸其谈”；\n　　你要是赞美别人，\n　　有人会指责“别有用心”，\n　　你要是善于批评，\n　　有人更会暴跳如雷“多管闲事”……\n　　每日提醒：光看别人脸色，你还活不活。\n　　人生顿悟：拥有自我，又不局限于自我。\n\n\n## 《保持简洁》\n　　生活简洁的人，\n　　获得的幸福也越多；\n　　说话简洁的人，\n　　获得的赞誉也越多；\n　　人为没有必要的东西而活，\n　　会越活越沉重。\n　　一句话可以表达，\n　　为什么非要用十句话来罗嗦？\n　　简洁是美德，\n　　只有智慧的人，\n　　才会简洁。\n　　每日提醒：简洁不仅节省时间，而且能去很多烦恼。\n　　人生顿悟：学会简洁。\n\n\n## 《不甘寂寞多烦恼》\n　　人人都有寂寞难熬的时刻，\n　　没有信仰就会心灵寂寞；\n　　没有事做就会清闲烦闷，\n　　刻意自我封闭就会寂寞无援，\n　　灰暗心境更会寂寞一片。\n　　有人能耐得住寂寞，\n　　逐渐能成人生的“正果”\n　　有人耐不住寂寞，\n　　就会头脑发昏，\n　　干出身败名裂的蠢事。\n　　每日提醒：寂寞多是自找的。\n　　人生顿悟：自我修养。\n\n\n## 《任何困难都是有益的》\n　　先苦后甜式的生活，\n　　是最佳的人生模式。\n　　苦难是种财富，\n　　能使人更理解生活，\n　　能使人更明白人生的真谛，\n　　于是越会珍惜人生，\n　　越会热爱生活，\n　　越会奋发向上。\n　　能够从苦难中坦然地走过来，\n　　说明这个人已经很成熟。\n　　每日提醒：苦难能磨练我们的意志。\n　　人生顿悟：人苦志更强。\n\n\n## 《正人先正己》\n　　要求别人做到的，\n　　自己必须首先作到。\n　　言教不如身教，\n　　托尔斯泰认为：\n　　“要让所有人都做的要，\n　　首先必须自己做好。”\n　　你感到生活无味，\n　　要想改造生活，\n　　首先要改造自己对生活的态度，\n　　“微笑示人，充满信心”。\n　　每日提醒：对人严，对己更严。\n　　人生顿悟：自己先做好。\n\n\n## 《人贵有自知之明》\n　　知人者智，知己者明，\n　　人无自知之明，\n　　就会走两个极端：\n　　要么自我感觉良好，\n　　自傲自大，自恋自狂；\n　　要么缺乏自信，\n　　自轻自卑，自贱自暴，\n　　没有自知之明多是轻狂之人，\n　　没有自知之明多有狂妄和轻贱之举。\n　　每日提醒：了解自己比了解别人更重要。\n　　人生顿悟：剖析、完善。\n\n\n## 《失业不失志》\n　　市场经济，竞争时代，\n　　下岗失业已是家常便饭，\n　　从业不敬业，\n　　就会马上下岗失业。\n　　身无一技之长，\n　　也会下岗失业……\n　　下岗不可怕，\n　　可怕的是从此消沉堕落。\n　　重新振作起来，\n　　从头开始，这是大写的人生。\n　　每日提醒：在岗要有失业的忧虑。\n　　人生顿悟：多有谋生的技能。\n\n## 《不要总有不平衡的心理》\n　　多干点工作，\n　　就要讨价还价，\n　　索取过分的报酬，\n　　一旦要求达不到，\n　　心理就失去平衡。\n　　待遇不如别人，\n　　心理就会不平衡，\n　　欲望要求没有满足，\n　　心理更会失去平衡。\n　　不平衡就会烦恼不尽。\n　　每日提醒：要有吃亏精神。\n　　人生顿悟：清淡。\n\n\n## 《不要追逐世俗的荣誉》\n　　一辈子寻找所谓别人认可的东西，\n　　永远痛失自己的欢乐和幸福。\n　　庸俗的评论会湮灭你的个性，\n　　世俗的指点会让你不知所措。\n　　为钱而钱会六亲不认，\n　　为权而权会胆大妄为，\n　　为名而名会巧取强夺。\n　　真实的我在刻意的追逐之中，\n　　会变成碎片随风飘扬，\n　　世俗的我已变得面目可憎。\n　　每日提醒：得到了媚俗，失去了真实。\n　　人生顿悟：坚定信念，拥有自我。\n\n\n## 《知道智慧人的品行》\n　　智慧人让人羡慕，\n　　智慧人谨慎小心，\n　　从不卤莽行事，\n　　或者炫耀健谈。\n　　智慧人睿智自明，\n　　从不事到临头，\n　　才惊慌失措。\n　　智慧人有勇有谋，\n　　勤于思索创造，\n　　自寻快乐和幸福。\n　　每日提醒：榜样的力量是无穷的。\n　　人生顿悟：不断反省自己，不断向别人学习。\n\n\n## 《把好口风关》\n　　不要轻易许诺。\n　　君子一言，驷马难追，\n　　说出来就要做得到。\n　　不要做牛皮王，\n　　否则人人瞧不起你。\n　　不要宣扬别人的隐私，\n　　要善于给别人遮丑，\n　　津津乐道于传播别人的污点，\n　　他人会把你当作市侩似的小妇人。\n　　谨慎言语什么时候都没有错。\n　　每日提醒：想一想，再说。\n　　人生顿悟：慎言。\n\n\n## 《你无法去改变别人》\n　　我们无法去改变别人的看法，\n　　能改变的恰恰只有我们自己。\n　　坏的生活不在于别人的罪恶，\n　　而在于我们心情的恶劣。\n　　让生活变好的金钥匙不在别人手里，\n　　放弃我们的抱怨，\n　　美好生活可以唾手可得。\n　　我们主观上本想好好生活，\n　　可是客观上却没有好的生活，\n　　其原因是总想等待别人来改善生活。\n　　每日提醒：；好心境是自己创造的。\n　　人生顿悟：做生活的主人。\n\n\n## 《别做令人厌烦的人》\n　　总是给人添烦恼，\n　　别人恐怕避之不及，\n　　总是骚扰别人，\n　　只会讨人生厌。\n　　说话罗罗唆嗦，\n　　让人打心眼里厌恶，\n　　做事拖泥带水，\n　　别人终无宁日，\n　　人都会讨厌别人，\n　　却从没有人会讨厌自己。\n　　每日提醒：自我修养特别重要。\n　　人生顿悟：自知之明。\n\n\n## 《名声是金》\n　　好名声使人终生受益，\n　　还能光泽后人，\n　　坏名声使人抬不起头来，\n　　生不如死。\n　　获得好名声很不容易，\n　　而败坏好名声却易如反掌。\n　　只有基础扎实的好名声才会持久，\n　　因为它深得人们的敬佩和尊敬。\n　　多数平凡人都会忽视自己的名声，\n　　而过多关注别人的名声。\n　　每日提醒：名声是做出来的，不是吹出来的。\n　　人生顿悟：形象很重要。\n\n\n## 《极端的聪明或麻木都不可取》\n　　有些人忧虑过度，\n　　导致精神失常，\n　　有些人麻木不仁，\n　　对任何事物都无动于衷；\n　　前者常为寻找理性而痛苦，\n　　因聪明过头而衰亡，\n　　愚蠢的根源在于什么都懊悔。\n　　后者不知悔恨为何物，\n　　整天稀里糊涂，\n　　活着与死去没有什么区别。\n　　每日提醒：走极端总没有好下场。\n　　人生顿悟：寻找智慧。\n\n\n## 《人生的幸福多是无法从别人身上得到》\n　　假如你想寻找真正的幸福，\n　　一点不用瞎费劲，\n　　既不用去遥远的地方取经，\n　　也不用卑微地乞求别人的恩赐，\n　　真正的幸福蕴藏在你自己身上。\n　　以乞求、投机、强求、卖买等方式，\n　　得到的幸福均是短暂的，\n　　甚至是徒劳无益的。\n　　许多是得不偿失的。\n　　幸福不靠天地，靠自己。\n　　每日提醒：真正的幸福就是自己拥有爱的生活。\n　　人生顿悟：自强多福。\n\n\n## 《了解哲人解读的三个“最”》\n　　托尔斯泰在生活之路中描述：\n　　“有一个人问哲人：\n　　什么事是最重要的？什么人是最重要的？\n　　生活中什么时间是最重要的？”哲人认真的回答到：\n　　“最重要的事是与所有人共同相爱，\n　　最重要的人是此刻所交往的人，\n　　最重要的时间是现在的时光。”切记：今天最重要。\n　　每日提醒：昨天已经过去，未来还没有来临。\n　　人生顿悟：让今天之心永远快乐。\n\n\n## 《想开一些》\n　　先哲们智慧地说：“同是一件事，\n　　想开了是天堂，\n　　想不开是地狱。”\n　　生活的主体是自己，\n　　自己才是生命的主人。\n　　别人的劝告，\n　　只多是种安慰，\n　　不能当做根治心病的良药，\n　　心灵的伤痛只能自己慢慢治疗。\n　　每日提醒：人人都有不平事。\n　　人生顿悟：想不开是与自己过不去。\n\n\n## 《掌握改变自己处境的计策》\n　　爱默生说：\n　　“如果一个人对自己的处境不满，\n　　他可以用两种方法来改变：\n　　改善自己的生活条件；\n　　或者改善自己灵魂的状况。\n　　前者不是自己随时都可以做到的，\n　　后者则永远随他自己掌握。”\n　　处境的恶化都是心境引起的，\n　　改变心态，换位思考，\n　　是简捷的方法。\n　　每日提醒：心境愉快，环境也好。\n　　人生顿悟：心态要好。\n\n\n## 《去掉不幸的祸根》\n　　在尘世中胡乱寻找幸福的人，\n　　是世界上最不幸之人，\n　　不要盲目比较，快乐长在；\n　　不要丧失自我，自信长在；\n　　不要乞讨幸福，自尊长在；\n　　不要贪求过多，知足长乐；\n　　不要虚荣心太强，悠闲自得；\n　　不要怀疑一切，真情长在；\n　　不要复杂生活，欢乐常伴；\n　　不要仇视社会，和睦共处。\n　　每日提醒：幸福就在自己的手中。\n　　人生顿悟：不幸多是自找的。","source":"_posts/ninety-nine-life-sentiment.md","raw":"title: 【转】九十九段精彩的人生感悟\ndate: 2014-10-13 17:01:20\ntags: Life\ncategory: Life\n---\n## 《人人需要智慧》\n　　托尔斯泰认为：\n　　“智慧就是懂得生活的任务\n　　以及怎样去完成”。\n　　一个人能够正确评价环境，\n　　能够了解自己的长处和短处，\n　　能够知道自己生活的意义，\n　　能够履行自己的责任，\n　　能够以积极心态去解决困难，\n　　能够知晓别人并与之和睦相处……\n　　这就是人生智慧。\n　　`每日提醒：人人都可以成为智者。`\n　　`人生顿悟：智慧可以照亮人生之路。`\n\n\n## 《正确认识自己》\n　　《生活之路》忠告我们：\n　　“在了解上帝之前，\n　　人必须先要了解自己”。\n　　当我们心平气和地准备学习智慧，\n　　努力去争取做一个智慧人士的时候，\n　　首要的任务是要客观公正地评价自己。\n　　“我是谁？”“我的人生是为了什么？”\n　　“我为什么会痛苦？”\n　　“我的立身资本是什么？”\n　　“我的弱点和缺点在哪里？”……\n　　`每日提醒：缺什么，补什么。`\n　　`人生顿悟：学习`\n\n<!--more-->\n\n## 《守住自己》\n　　有时你羡慕某人位居高位，\n　　显赫风光无比，\n　　真后悔当时怎么不留机关好好努力；\n　　有时你羡慕某人经商不久，\n　　就积累财富无数，\n　　真后悔怎么没有下海经商；\n　　有时你羡慕某人工作舒适，\n　　悠闲自得，轻松自在，\n　　真后悔自己还置身于繁杂的环境之中……\n　　你越是这样思想，越会活得没有人样。\n　　`每日提醒：不要盲目与人攀比。`\n　　`人生顿悟：你就是你。`\n\n\n## 《经营自己的长处》\n　　每个人都有潜在的杰出的才能，\n　　只不过有时自己和别人没有发现而已，\n　　知道自己在某个方面很优越，\n　　不仅使你充满自信，\n　　而且会让你拥有一块立身之地，\n　　不要丢掉自己的兴趣和长项，\n　　否则你会处处不如意，\n　　以自己的短处去谋生，\n　　你会被贬的一文不值，\n　　切记：宝贝放错了地方也是废物。\n　　`每日提醒：外面 的世界很精彩，也很无奈。`\n　　`人生顿悟：互补短长，扬长避短。`\n\n\n## 《别沉浸于对过眼烟云东西的追逐》\n　　有得必有失，得失总平衡。\n　　追求虚无的浮名，\n　　一生就会注满痛苦的铅云。\n　　猛回头，短暂一生匆匆已过，\n　　而生活中最应珍惜和享受的，\n　　却一点儿也没得到，\n　　许多人为此失落，为此追悔。\n　　人只有在生命的尽头，\n　　才会懊悔：为了追求无聊的东西，\n　　而丢失了自己的许多东西。\n　　`每日提醒：得到了，也失去了。`\n   　 `人生顿悟：顺其自然。`\n\n\n## 《无欲则刚》\n　　没有刻意追求的欲望，\n　　就不会在意别人的眼色，\n　　就会一身轻松，无拘无束，\n　　不为违心献媚而烦心。\n　　不要做欲望的奴隶，\n　　否则一生终无宁日。\n　　卑鄙小人最善于窥视别人的心思，\n　　利用别人的欲望和所求，\n　　达到自己不可告人的目的。\n　　不让别人牵着自己的鼻子走。\n　　`每日提醒：善去不良欲望。`\n　　`人生顿悟：不图虚荣。`\n\n\n## 《过好每一天》\n　　许多智慧人士劝告：\n　　“最重要的是今天的心”。\n　　何必为痛苦的悔恨而丧失现在的心情，\n　　何必为莫名的忧虑而惶惶不可终日，\n　　过去的已经一去不复返\n　　再去怎么悔恨也无济于事。\n　　未来的还是渴望而不可及，\n　　再去怎么忧虑也是空悲伤。\n　　过去的经验要总结，\n　　未来的风险要预防。\n　　`每日提醒：“今天心，今天事，现在人”最为重要。`\n　　`人生顿悟：不想无用的事。`\n\n\n## 《说话多用“您‘字，少用”我“字》\n　　许多人总是关心自己的事务，\n　　很少有闲心去顾及不相干的事。\n　　与人交谈有艺术，\n　　“您”字多用生笑意，\n　　“我”字多用失欢乐。\n　　以对方话题交谈，\n　　越谈会越投机；\n　　以己方话题交谈，\n　　越谈会越觉乏味。\n　　“我”字当头，烦恼不尽。\n　　`每日提醒：说话总围绕“我”字，是浅薄的表现。`\n　　`人生顿悟：提高交流技巧。`\n\n\n## 《谨慎是永恒的守则》\n　　葛拉西安的《智慧书》告诉我们：\n　　“闲者脱离忧虑和窘困，\n　　并且显示出对自我的控制。”\n　　不要在胸膛上开窗户，\n　　而要让双手长眼睛。\n　　放纵自己的言语，\n　　会惹来不必要的麻烦；\n　　放纵自己的行为，\n　　会招来不必要的灾难。\n　　喋喋不休和轻举妄动是愚蠢的表示。\n　　`每日提醒：谦虚谨慎，巧避灾难。`\n　　`人生顿悟：多听少说勤思考。`\n\n\n## 《无法逃避现实》\n　　天堂无论多么幸福，\n　　你也不会直接去天堂，\n　　地狱无论多么悲惨，\n　　你也不会直接陷地狱；\n　　现实永远介于天堂与地狱之间，\n　　人们总是挣扎在苦乐的海洋。\n　　对于尘世的冷漠，\n　　只会增加自身的痛苦，\n　　睁眼好好看一看，\n　　没有烦心的人绝不存在。\n　　`每日提醒：逃避不是解决矛盾的办法。`\n　　`人生顿悟：勇敢地面对现实。`\n　　\n## 《不要总疑春色在人家》\n　　自己的伤痛自己最清楚，\n　　自己的哀叹自己最明白，\n　　自己的快乐自己最感受。\n　　也许自己眼中的地狱，\n　　却是别人眼中的天堂；\n　　也许自己眼中的天堂，\n　　却是别人眼中的地狱。\n　　生命就是这般的滑稽。\n　　一个人有一个人的活法，\n　　关键在于心态的调整。\n　　`每日提醒：拥有自我，过好自己的生活。`\n　　`人生顿悟：不攀不比`\n\n\n## 《隐忍别人的缺点》\n　　金无赤金，人无完人，\n　　天然的宝玉总带斑点，\n　　只有人造的才会洁白无暇。\n　　总拿自己的优点与别人的缺点比较，\n　　越比越会感觉不顺眼，\n　　越不顺眼越会感觉上火。\n　　多以自己之长善补别人之短，\n　　多看别人的长处，\n　　越看越会顺眼，\n　　越处越会融洽。\n　　`每日提醒：相互对抗不如相互合作。`\n　　`人生顿悟：优势互补`\n\n\n## 《不要轻视依赖于你的人》\n　　做人要尽量自己独立，\n　　而对别人却要多给予关切。\n　　被人依赖是件好事，\n　　起码说明你是受人信赖，\n　　不可或缺，有主见，\n　　又有能力和水平。\n　　试想：一个无才无能之人，\n　　谁会去依靠呢？\n　　不要伤害依赖于你的人的自尊心，\n　　因为不独立，使其更敏感。\n　　`每日提醒：多一份关爱，就多一份友情。`\n　　`人生顿悟：厚爱有余`\n\n\n## 《别醉心宣扬别人的恶名》\n　　对于别人的过失，\n　　采取幸灾乐祸和津津乐道的方式，\n　　也许你能得到短暂的快意，\n　　却无法掩盖你的愚蠢。\n　　期望于广告他人的污点，\n　　来掩饰自己的不足，\n　　证明自己也是声名狼籍。\n　　一个人越是与发臭的事件为伴，\n　　他自己越会臭不可闻。\n　　总控告别人的人也会恶名远扬。\n　　`每日提醒：不散布谣言。`\n　　`人生顿悟：不说三道四。`\n\n\n## 《当心丑态百出》\n　　一个原本并不高尚的人，\n　　偶而一个机会，\n　　使他位居一定高位，\n　　于是轻飘飘，\n　　不知自己姓什么。\n　　一个原本很贫困的人，\n　　偶遇一笔横财，\n　　使他过上奢侈的生活，\n　　于是马上显露“爆发户”的本性……\n　　这种浅陋者生活中还少吗？！\n　　`每日提醒：有福不可享尽，更何况本身福分就浅。`\n　　`人生顿悟：不要不知天高地厚。`\n\n\n## 《不图虚荣》\n　　虚荣是男人的自残钢刀，\n　　虚荣是女人的自杀绳索。\n　　本身贫困，偏要假装奢华，\n　　本身位低，偏要假装高雅，\n　　本身自私，偏要假装大方……\n　　于是自欺欺人的丑剧就会不断。\n　　打肿脸充胖子，\n　　越活越会失掉自我，\n　　结果反误了卿卿小命。\n　　`每日提醒：假的总是假的。`\n　　`人生顿悟：真实。`\n\n\n## 《最重要的是安慰自己的心灵》\n　　自己的情绪统治自己的生活，\n　　自己的生活决定自己的命运。\n　　有权不一定有好心情，\n　　高处不胜寒；\n　　有钱不一定有好心情，\n　　谋财害命须常提防；\n　　有貌不一定有好心情，\n　　自古“红颜多薄命”。\n　　摆脱心灵的羁绊，\n　　随时清扫心灵的尘埃。\n　　`每日提醒：积极心态，快乐生活。`\n　　`人生顿悟：心态好。`\n\n\n## 《别忽视小事的重要性》\n　　不要以事小而不为，\n　　不要以恶小而为之。\n　　人生的成功，\n　　多在于事事认真。\n　　人生的失败，\n　　多在于对无足轻重事项的冷漠。\n　　许多人考察一个人，\n　　总是以小事来观察，\n　　若是小事不做，大事又不能，\n　　则是不可重用之人。\n　　`每日提醒：机会常会符合在小事上。`\n　　`人生顿悟：从不放弃小事。`\n\n\n## 《不要先说不可能》\n　　遇事不经思考就一口拒绝，\n　　就意味着你已丧失成功的机会。\n　　没有冷静的思考，\n　　没有仔细的分析，\n　　却给人以冷脸，\n　　“这种事情是不可能做到的。”\n　　这种处世方法能不失败吗？\n　　“让我试一试再说。”\n　　这是智者的技巧。\n　　其实自己的潜能是无穷无尽的。\n　　`每日提醒：拒绝是无能的标志。`\n　　`人生顿悟：尝试。`\n\n\n## 《一视同仁》\n　　我们常常能原谅一贯犯错误的人，\n　　却不会原谅偶而犯一次错误的人。\n　　从来不会向你说好话的人，\n　　偶而一句好话会让你激动不已。\n　　惯于对你顺言顺耳说好话的人，\n　　偶而一句恶语会让你愤怒万分。\n　　这里的毛病不在于别人，\n　　还是自己的判断和思考出了问题。\n　　亲则疏，远则香，\n　　这是自己的心理在作怪。\n　　`每日提醒：知人者智，知己者明。`\n　　`人生顿悟：冷静分析。`\n\n## 《克制冲动》\n　　心血来潮，就会激动不已，\n　　头脑发热，就会鲁莽行事。\n　　那些平庸的激情，\n　　多会点燃愚蠢的火把，\n　　照亮的是自己的影子，\n　　灼伤的是无辜的看客。\n　　冲动会使聪明变疯狂，\n　　冲动会让结果变苦涩。\n　　激情是冲动的借口，\n　　是产生罪恶的替罪羊。\n　　每日提醒：不要莫名的冲动。\n　　人生顿悟：冷静。\n\n\n## 《自恃清高，得不偿失》\n　　自以为高人一等，\n　　就会轻易地去侮辱别人，\n　　就会瞧不起一切。\n　　自以为贵为骄子，\n　　就会把别人看得微不足道，\n　　就不能心平气和与之相处。\n　　骄傲之心只会增加别人对你的怨恨，\n　　轻薄之心只会增添别人对你的愤怒。\n　　无论何时何地，\n　　都不能要这种结仇行为。\n　　每日提醒：剥夺别人等于剥夺自己。\n　　人生顿悟：和睦相处。\n\n\n## 《别错误的高估自己》\n　　愚蠢的人总是低估别人，\n　　高看自己一眼，\n　　认为天下皆凡人，\n　　惟有自己最高贵，\n　　于是就会占有别人的功劳，\n　　而心安理得；\n　　于是就会掠夺别人的财富，\n　　而心满意足。\n　　头脑发昏时，\n　　就有“多行不义必自毙”之后果。\n　　每日提醒：高估越多，摔得越惨。\n　　人生顿悟：客观评价。\n\n\n## 《善于遮盖别人的不足》\n　　托尔斯泰曾一针见血地说：\n　　“人们常常想用发现别人的缺点来表现自己，\n　　但他们用这种方式表明的只是他们的无能。”\n　　“一个人越聪明、越善良，\n　　他看到别人身上的美德越多；\n　　而人越愚蠢、越恶毒，\n　　他看到别人身上的缺点也越多。”\n　　能给别人台阶，自己也有台阶，\n　　能给别人面子，自己越有面子。\n　　撕破别人脸面，别人会肆无忌惮。\n　　每日提醒：遮丑是美德。\n　　人生顿悟：行善得善。\n\n\n## 《麻醉自己是最大的愚蠢》\n　　为了逃避烦恼的尘世，\n　　而采用麻醉自己的方式，\n　　实在是傻瓜才干的蠢事。\n　　以酒浇愁愁更愁，\n　　“酒伤肝”的悲剧不能不知？\n　　以毒品麻醉自己，\n　　等于让毒蛇缠绕在身。\n　　以吞云吐无雾刺激自己，\n　　“肺癌”的魔鬼紧根其后，\n　　麻醉只是暂时的现象。\n　　每日提醒：不可熄灭心中的明灯。\n　　人生顿悟：人越醉会越痛苦。\n\n## 《此路不通走另路》\n　　千万不要一条道奔到黑，\n　　不撞南墙不回头。\n　　埋没自己才能的人，\n　　往往是自己的偏见，\n　　招致失败的厄运，\n　　恰恰是自己的认死理思维。\n　　现代社会有许多活法，\n　　何必拘泥于一种形式，\n　　换一条最适合自己的路走，\n　　肯定会快乐又幸福。\n　　每日提醒：别活的太沉重、太窝囊。\n　　人生顿悟：条条道路通罗马。\n\n\n## 《心境不同，效果不一》\n　　以积极心态生活，\n　　就会发现许多美妙的东西；\n　　以消极心态生活，\n　　就会发现许多沮丧的东西；\n　　生活的快乐与烦恼，\n　　全在于你对生活的态度。\n　　乐观向上，好运不断，\n　　失落沉沦，厄运陪伴。\n　　不妨换一个角度来思考。\n　　每日提醒：好的心态决定好的命运。\n　　人生顿悟：凡事往好处想。\n\n\n## 《做一张生命的清单》\n　　当你痛苦万分时，\n　　不妨自己悄悄列一张清单。\n　　想一想“人生在世，哪些还是要做的？”\n　　有了这个“临终”的念头，\n　　你就没有时间去烦恼。\n　　就会专心致志，\n　　去完成自己认为要遗憾的事项。\n　　人的充实人的快乐，\n　　全在于实现梦想的努力之中。\n　　别把梦想带进坟墓。\n　　每日提醒：无聊，清闲，就会痛苦。\n　　人生顿悟：把梦想变为现实。\n\n\n## 《别图形式》\n　　有情人心中有爱，\n　　天天都是情人节，\n　　为什么非要得到形式上的东西，\n　　一枝玫瑰和一盒巧克力？\n　　心中并不在乎你，\n　　何必又为特殊节日的一次“义举”，\n　　而欣喜若狂呢？！\n　　有人精辟地指出：\n　　“若她爱你，会拼命地节省你的钱，\n　　相反，则会拼命地浪费你的钱财。”\n　　每日提醒：透过现象看本质。\n　　人生顿悟：爱是长久的事。\n\n\n## 《抱怨无用》\n　　抱怨要是作为偶而发泄一下，\n　　也是十分必要的。\n　　可怕的是，抱怨更会增加烦恼，\n　　只能向别人显示你的无能。\n　　抱怨是一种致命的消极心态，\n　　一旦抱怨成为恶习，\n　　则暗无天日，\n　　不仅自己好心境全无，\n　　而且别人跟着也倒霉，\n　　抱怨是怯懦的标志。\n　　每日提醒：自己的心痛只能自己疗。\n　　人生顿悟：乐观。\n　　\n## 《小心与“太阳型”的人为伴》\n　　适当的距离，\n　　不仅能够得到亮光，\n　　而且感到很温暖，\n　　相处距离太近，\n　　不仅会灼伤你自己，\n　　而且把你的才能“清洗”的得一无所有。\n　　要是你也想成为“太阳”，\n　　则一山容不了二虎，\n　　而虎相争必有恶斗，\n　　何不事前另谋高就。\n　　每日提醒：距离产生美感。\n　　人生顿悟：亲则疏。\n\n\n## 《别期望人生的公平》\n　　公平是相对的，\n　　要求天下皆公平，\n　　是痴人的梦想。\n　　不必为不公平而愤愤不平，\n　　最重要的是今天努力的心态和行动。\n　　你很有才华，却没有施展，\n　　为此怀才不遇，\n　　并且天天怨天怨地，\n　　这有什么用呢？\n　　反而会使心情更糟。\n　　每日提醒：轻轻收起你的傲骨，先踏踏实实工作。\n　　人生顿悟：努力。\n\n\n## 《今天的学习是明天的欢笑》\n　　现代社会，知识更新已成为时尚，\n　　谁不意识到这一点，谁就会沦为时代的“乞丐”。\n　　学习是为了明天，\n　　努力是为了今天，\n　　少壮不努力，老大徒伤悲。\n　　与其无所事事空悲叹，\n　　不如心平气和多学习，\n　　学习能去烦恼，又有未来的收获。\n　　每日提醒：及时充电，不断学习。\n　　人生顿悟：知识是力量。\n\n\n## 《生命的质量在于事业的追求》\n　　黑格尔曾经指出：\n　　“一种人毕生致力于拥有，\n　　另一种人毕生致力于有所作为”。\n　　一心渴望拥有，\n　　一旦没有达到目的，\n　　就会失落、痛苦和绝望。\n　　心无旁鹜，专心于事业的追求，\n　　就会忘掉许多烦恼，\n　　找到许多努力过程中的快乐。\n　　默默耕耘的人其实是最智慧的人。\n　　每日提醒：一份耕耘，一份收获。\n　　人生顿悟：有事做是种欢乐。\n\n\n## 《平淡是生活永恒的主题》\n　　生活的真谛在于理解，\n　　生活的诀窍在于理智，\n　　刻意追求卓越的生活，\n　　就会陷入庸人自扰式的苦海。\n　　整天都是鲜花和掌声，\n　　这样的日子也会腻烦。\n　　没有鲜花和掌声，\n　　这种清淡的日子也悠闲自得。\n　　一个耐不了平淡如水的人，\n　　肯定没有好日子过。\n　　每日提醒：一个人越想过特别的生活，越会失掉原来幸福的生活。\n　　人生顿悟：平凡是福。\n\n\n## 《世上不如意事十之八九》\n　　谁都有痛苦和烦恼，\n　　只不过程度大小不一而已。\n　　有些人善于变痛苦为动力，\n　　善于变烦恼为快乐。\n　　有些人却深陷不如意的苦海，\n　　越活越会感到没有意思。\n　　“祝你吉祥如意”，\n　　仅是美丽的谎言，\n　　改变的是自己的心态，\n　　不变的是事物的本象。\n　　每日提醒：烦恼是永恒的主题。\n　　人生顿悟：不耐烦更有烦恼。\n\n\n## 《凡事多往好处想》\n　　忙碌有忙碌的好处，\n　　可以无暇于烦恼和琐事，\n　　清闲有清闲的好处，\n　　可以留点时间做自己的事。\n　　位居高位自有其好处，\n　　可以多为人民服务。\n　　平常岗位多有其好处，\n　　可以免去“焦点人物”的苦恼。\n　　心平气和最重要，\n　　顺其自然是常理。\n　　每日提醒：往好处想可以产生积极心态。\n　　人生顿悟：换位思考。\n\n\n## 《见好就收》\n　　不要等到自己已是落叶败枝，\n　　还留恋不舍地故做多情。\n　　“在事情离开你之前先离开事情”，\n　　这是智者的金言劝告。\n　　葛拉西安更是善意的忠告：\n　　“不要等到你变成西下的夕阳”。\n　　在掌声和鲜花中谢幕，\n　　自己和别人还留有美好的记忆。\n　　在讥笑和愤怒中迫退，\n　　不幸和痛苦会时刻缠绕。\n　　每日提醒：别让自己变成一匹死马。\n　　人生顿悟：留有余地。\n\n## 《及时调整心态》\n　　此一时，彼一时，\n　　到什么山上唱什么歌，\n　　退位要有退位心态，\n　　在岗要有在岗的心情。\n　　要求别人什么时候都一样看待你，\n　　这是多么的不切实际，\n　　也是故做多情的一厢情愿。\n　　在位时门前车水马龙，\n　　不要为此沾沾自喜；\n　　退位时门前冷清不要自找痛苦。\n　　每日提醒：花开花落，自然规律。\n　　人生顿悟：平和心态。\n\n\n## 《分阶段实施宏大计划》\n　　志当存高远。\n　　志向远大而未见行动，\n　　却是失败的根源。\n　　不要被巨大的目标所威吓，\n　　完全可以把大目标肢解。\n　　就象爬山一样，\n　　望着远方的叠叠山峰，\n　　你可能已失去攀登的勇气，\n　　一旦当你努力爬上一个小山峰，\n　　就有成功的喜悦和继续攀登的信心。\n　　每日提醒：大计划一旦变成无数个小计划，就十分容易达到。\n　　人生顿悟：锲而不舍。\n　　\n## 《做人不要张狂》\n　　傲慢骄横，不可一世，\n　　咄咄逼人，盛气凌人，\n　　没有一个有好下场的。\n　　总唱高调容易招致怨恨，\n　　张狂示人容易召来攻击。\n　　天外有天，山外有山，\n　　做人还得低调谨慎，\n　　有点钱就烧的慌，\n　　有点权就不知姓什么，\n　　是最浅薄的人。\n　　每日提醒：在未做好人之前，先不要把自己变成神。\n　　人生顿悟：加强修养。\n\n\n## 《学会倾听是最大的智慧》\n　　越是当你滔滔不绝的时候，\n　　你的愚蠢越会暴露无疑。\n　　越是当你洗耳恭听的时候，\n　　你的智慧越会快乐生长。\n　　聆听是取人之长，\n　　补己之短的良方；\n　　聆听是沟通双方，\n　　尊重对方的桥梁；\n　　聆听是抛弃错误，\n　　远离懊悔的法宝。\n　　每日提醒：沉默能省去许多烦恼。\n　　人生顿悟：多听少说。\n\n\n## 《不义之财不可取》\n　　君子取财，必须取之有道，\n　　无道的财物再多，\n　　也是残害自己的利剑。\n　　为浊富不若为清贫，\n　　与其守着金山银山惶惶不可终日，\n　　不如粗茶淡饭却食之舒坦甘美。\n　　人生带不走的是财富，\n　　留下来的却是名声，\n　　遗留后代应是道德和教育，\n　　而不是蚀其心灵的财富。\n　　每日提醒：不做金钱的奴隶。\n　　人生顿悟：要有正确的金钱观。\n\n\n## 《相互对抗不如相互合作》\n　　俗话说：\"人抬人无价直宝\".\n　　相互对抗天地窄，\n　　相互合作天地广。\n　　相互对抗会相互拆台，\n　　就会自设障碍，\n　　自己掉入自己设置的陷阱。\n　　相互合作就会相互补台，\n　　就会共同搭台，\n　　大家一起愉快地达到双赢的目的。\n　　不要仇视心，多存合作心。\n　　每日提醒：精诚合作，事半功倍。\n　　人生顿悟：扬长避短。\n\n\n## 《减少不必要的应酬》\n　　整天忙于应酬，\n　　看上去是充实，\n　　实质是慢性自杀。\n　　应酬不仅浪费宝贵时间，\n　　而且暴饮暴食还会提前夭折，\n　　另外有可能增添口舌的额外烦恼。\n　　不要热衷于你来我往，\n　　不要热心于吃吃喝喝，\n　　多留点时间勤于思考，\n　　勤于学习，勤于工作。\n　　每日提醒：别把人生的成功寄托于应酬之上。\n　　人生顿悟：多做自己应做的事。\n\n## 《知识是立身之本》\n　　人们多会轻蔑不学无术之人，\n　　人们多会小瞧无知无识之人，\n　　现代社会的贫困，\n　　多是因为愚昧缺乏知识造成的。\n　　人没有财富不可怕，\n　　可怕的是知识的缺乏。\n　　投资教育是最好的投资，\n　　给予孩子以知识，\n　　可以使他走遍天下都不怕，\n　　没有知识的人寸步难行。\n　　每日提醒：少时不学习，长大多悲痛。\n　　人生顿悟：学以致用。\n\n## 《没有健康什么都谈不上》\n　　健康是一切的基础，\n　　离开健康的身体，\n　　去说事业、金钱、爱情等事项，\n　　都是无源之水。\n　　健健康康是福，\n　　平平安安也是福，\n　　不要牺牲健康去换取金钱，\n　　到时痛悔莫及。\n　　心理健康比机体健康更重要，\n　　健康还在于日常的保养。\n　　每日提醒：无病无灾是多么大的幸福。\n　　人生顿悟：心身并养。\n\n\n## 《不可盲目攀比》\n　　你就是独特的你自己，\n　　何必与别人盲目攀比。\n　　以自己之短比别人所长，\n　　就会越比越觉窝火，\n　　越窝火越会失落、乏味，\n　　以自己之长比别人所短，\n　　就会盲目自恋自大，\n　　就会放着好日子不过，\n　　又会去瞎折腾。\n　　盲目比较是烦恼的圈套。\n　　每日提醒：活出真实的自我来。\n　　人生顿悟：一个人一个活法。\n\n\n## 《具备自我完善的能力》\n　　人在学习阶段，\n　　有老师的不时教诲，\n　　可以随时改进不足。\n　　人在进入社会以后，\n　　就没有学校时的那种福分，\n　　这时要多靠自知之明，\n　　依赖自我反省。\n　　学习是没有止境的，\n　　尤其是自我的改造，\n　　更是没有穷尽的。\n　　每日提醒：孔子曰：吾日三省吾身。\n　　人生顿悟：自省自悟，日超完善。\n\n\n## 《不让命运捏在别人手里》\n　　掘去真实的自我，\n　　放弃自我的长处，\n　　是痛不欲生日子的开始。\n　　何必把宝押在某人身上，\n　　而舍弃自身的学习和努力？！\n　　蠢人总是急功近利，\n　　喜好投机取巧，\n　　恰好中了奸人的圈套，\n　　失去自我的人，\n　　别人的好脸色也不会长久。\n　　每日提醒：提高自身素质最重要。\n　　人生顿悟：自强才能自立。\n\n## 《重要的是做好自己的本职工作》\n　　不去努力立足本职工作，\n　　却去谈什么高远的理想，\n　　策划什么宏伟的成业方案，\n　　全是黄梁美梦式的悲剧。\n　　见异思迁，\n　　一山望着另一山高，\n　　全是人生的误区。\n　　千万不要做本末倒置的事情，\n　　本职工作是自己立身的“根据地”，\n　　丢掉“根据地”会变成“流浪儿”。\n　　每日提醒：别做眼高手低之人。\n　　人生顿悟：踏实努力。\n\n\n## 《好心有时无好报》\n　　俗语说：“行善得善，行恶得恶”，\n　　“种瓜得瓜，种豆得豆”。\n　　但有时好心也会没有好报。\n　　一是施赠人处理不当，\n　　受赠人情面上难以接受，\n　　造成好心无好报的结果。\n　　二是受赠人是个忘恩负义之人，\n　　在受恩时感激不已，\n　　一旦事过早忘九霄云外。\n　　每日提醒：相信自己的好心会有好报。\n　　人生顿悟：做善瞬事要不图回报。\n\n\n## 《吃亏是福》\n　　有经济专家总结炒股经验后认为：\n　　“会吃一分钱的亏，\n　　必是炒股的大赢家”。\n　　人生场上何尝不是如此，\n　　做人太精明，\n　　处处算计别人，\n　　谁还会乐意与你合作？\n　　没有人会自认为是傻瓜，\n　　会甘心情愿受人算计。\n　　俗话说：“傻有傻福，精有精祸”。\n　　每日提醒：聪明反被聪明误\n　　人生顿悟：利益共享\n\n\n## 《克服懒惰》\n　　懒惰是最顽固的敌人，\n　　有时总以笑微微的面貌出现。\n　　精神懒惰比身体懒惰更可恶，\n　　懒惰会毁灭我们的意志。\n　　懒惰是舒适的朋友，\n　　人越舒适越会产生懒惰之心。\n　　勤勉是成功的朋友，\n　　懒惰则是成功的敌人，\n　　我们的荣誉来自于勤勉，\n　　我们的恶名来自于懒惰。\n　　每日提醒：自满自足常是懒惰的借口。\n　　人生顿悟：勤勉。\n\n\n## 《知道人生每阶段的特色》\n　　有人研究认为：\n　　“二十岁的人，\n　　依靠青春吃饭；\n　　三十岁的人，\n　　依靠勤奋吃饭；\n　　四十岁的人，\n　　依靠智慧吃饭；\n　　五十岁的人，\n　　依靠经验吃饭；\n　　六十岁的人则忠告后人……”\n　　每日提醒：把握好每个年龄段的生活。\n　　人生顿悟：智慧加勤奋。\n\n\n## 《学会让生活充满爱》\n　　生活倘若没有爱，\n　　生活就会变成荒芜的戈壁滩，\n　　生活中要是充满爱，\n　　可以抚平许多受伤的心灵，\n　　可以挽救许多沉沦的生命，\n　　可以激励许多彷徨的游子，\n　　可以慰籍许多失败的落魄者……\n　　要想得到别人的爱，\n　　自己首先要学会爱别人。\n　　要是冷漠这个世界，\n　　就无爱意可言。\n　　每日提醒：敞开你的心扉，让彼此的爱河流畅。\n　　人生顿悟：爱是人生的希望。\n\n\n## 《爱出风头是个坏毛病》\n　　人总有妒忌之心，\n　　当你刻意想超过别人，\n　　别人心里就会不舒服。\n　　比如言谈之中的卖弄学问，\n　　就会有意或无意地冒犯别人。\n　　比如衣着时髦漂亮，\n　　就会招惹别人“爱打扮”的风言风语。\n　　切记，有些人不喜欢比他强的人，\n　　一见奇特的人就要攻击，\n　　这种爱诅咒的俗人是不少的。\n　　每日提醒：虚荣心强的人就爱出风头。\n　　人生顿悟：大众心态。\n\n\n## 《百闻不如一见》\n　　根据道听途说的东西，\n　　作为决策的依据，\n　　难免要犯错误。\n　　亲眼所见，亲口所尝，\n　　最有感受力，\n　　最有说服力。\n　　切莫以“秀才不出门，\n　　能知天下事”自居，\n　　越是与众隔绝，\n　　越会瞎指挥。\n　　每日提醒：有调查，就有发言权。\n　　人生顿悟：理论联系实际。\n\n\n## 《三个臭皮匠顶一个诸葛亮》\n　　智慧在哪里？\n　　智慧来自于虚心向别人请教。\n　　孔子曰：“三人行，必有我师”。\n　　当我们放下架子，\n　　不耻下问，\n　　请教每一个专业的行家能手，\n　　我们的智慧就会逐渐丰富起来。\n　　请教可以使我们品味许多东西，\n　　可以提升我们的灵性，\n　　可以利用别人的光芒来照亮自己。\n　　每日提醒：“文殊遇缘则有师”。\n　　人生顿悟：虚心请教、学习。\n\n\n## 《塞翁失马，焉知非福》\n　　“祸兮福所伏，福兮祸所倚”。\n　　“乐极会生悲，否极会泰来”。\n　　看问题不可片面，\n　　要透过现象看本质。\n　　得意时别太忘形，\n　　失意时别太失态。\n　　平安时要看到危险的存在，\n　　艰难时要看到希望的光明。\n　　每日提醒：事物都是一分为二的。\n　　人生顿悟：困难时不悲观。\n\n## 《经常自我检查》\n　　每天早上提醒自己一次，\n　　“哪些该做，哪些又不该做？”\n　　每天晚上又检查自己一次，\n　　“哪些对了，哪些又错了？”\n　　人活在世上，\n　　那能傻吃傻睡，\n　　那能毫无思索。\n　　自我的控制机制健全了，\n　　错误的魔鬼也无法接近你，\n　　做完人很难，少犯错误则易。\n　　每日提醒：避免犯错误。\n　　人生顿悟：勇于自我剖析。\n\n## 《常有理智的闸门》\n　　越是自我感觉良好，\n　　越要提高警惕，\n　　越是权重位显，\n　　越要提防小心。\n　　面对行贿的笑容，\n　　该说“不”字就说“不”。\n　　人的一生中，\n　　有许多事是绝不可以做的。\n　　“要让人不知，\n　　除非己莫为”。\n　　每日提醒：苦酒多是自酝的。\n　　人生顿悟：该拒绝必须拒绝。\n\n## 《别羡慕浊富和邪权》\n　　财富要是来路不明，\n　　难免夜半鬼叫门，\n　　取财要有正当手段，\n　　合法致富、勤劳致富。\n　　职权要是依靠歪门邪道取得，\n　　难免众人不服气。\n　　当官必须德才兼备，\n　　兢兢业业，克己奉公。\n　　“昨天是人，今天是鬼”式的人，\n　　千万别去羡慕。\n　　每日提醒：正常心态，保持自己。\n　　人生顿悟：走自己的路。\n\n\n## 《别在意他人的冷嘲热讽》\n　　有人一针见血的指出：\n　　“一个人只比别人高出一点点，\n　　就会招致别人百般的辱骂；\n　　而一旦当此人高出他人许多，\n　　则辱骂变成了虚伪和低三下四的恭维”。\n　　“远来的和尚好念经”。\n　　同单位之人更容易讽讥伤人，\n　　因为他们更加熟悉你，\n　　更会挑剔你的毛病来掩盖其失落。\n　　每日提醒：坚定地走好自己的路。\n　　人生顿悟：冷眼更能促人奋进。\n\n\n## 《不要极端的爱和恨》\n　　恋人不成，\n　　也要好说好散；\n　　夫妻不成，\n　　也要想想\"毕竟夫妻一场\",\n　　\"一日夫妻百日恩\",\n　　朋友不成，\n　　也要礼貌告别。\n　　昨天的亲密无间，\n　　演变成今天的仇恨满天，\n　　早知今日，何必当初呢？！\n　　每日提醒：适当距离。\n　　人生顿悟：冷静。\n\n## 《不做欲望的奴隶》\n　　每个人都会产生许多欲望，\n　　有些欲望是正常的，\n　　有些欲望则是不正常的，\n　　甚至是邪恶的欲望。\n　　“贪心不足蛇吞象”。\n　　“欲海难填，反误了卿卿小命”。\n　　正常人生的健康之道：\n　　“乐观、营养、运动、节制”。\n　　善除不良欲望是节制的核心。\n　　生活中为贪欲丧命的还少吗？\n　　每日提醒：欲望越大，痛苦越多。\n　　人生顿悟：戒贪欲。\n\n\n## 《人很少会饿死，却会被饱食撑死》\n　　终日饱食，\n　　多会无所事事。\n　　城市富贵病已经很普遍，\n　　“减肥”风已经很流行，\n　　医学专家忠告：\n　　“早上饱，中午好，\n　　晚餐吃个六成饱”。\n　　肥胖引起多种疾病，\n　　已成为现代杀手之一。\n　　许多人终为饱食所累。\n　　每日提醒：过于吃喝多遭罪。\n　　人生顿悟：别贪吃。\n\n## 《贪小失大》\n　　“贪便宜买老牛”，\n　　已是一句古训。\n　　“贪小便宜吃大亏”，\n　　更是一条警句。\n　　处处占便宜，\n　　时时得好处，\n　　表面看是尝到了一点甜头，\n　　实质上却背负了一个恶名。\n　　“做人要肯吃亏“，\n　　只有到成年才能感悟。\n　　每日提醒：眼光别太短浅。\n　　人生顿悟：不占小便宜。\n\n\n## 《衰老是极为自然的事情》\n　　“生”、“老”、“病”、“死”，\n　　虽是人生的无奈，\n　　却是大自然不可违背的规律。\n　　衰老，每个人都有这一天，\n　　年龄的增大不可怕，\n　　可怕的是未老先衰，\n　　人老心不老，\n　　心理年青，人也自然年轻。\n　　年老因有德而善终，\n　　经验是其流传的忠告。\n　　每日提醒：要确保晚节。\n　　人生顿悟：不服老。\n\n\n## 《人人皆有烦恼》\n　　贫困人士有贫困人士的烦恼，\n　　富裕人士有富裕人士的烦恼，\n　　不要认为贫困人士的日子不好过，\n　　其实富裕人士的日子，\n　　也不见得十分好过。\n　　富人的财富越多，\n　　其操心烦恼的事多，\n　　其不得安宁的日子也越多。\n　　贫困人多有清茶一杯的福分，\n　　富裕人可能要冒“绑票”的风险。\n　　每日提醒：好心态就有好心情。\n　　人生顿悟：不攀不比。\n\n## 《无聊多是清闲所致》\n　　极端的清闲，\n　　带来极度的无聊，\n　　闲得发慌，\n　　闲得郁闷，\n　　闲会闲出病来。\n　　整天有事做，\n　　就没有心思去烦恼。\n　　有追求的目标，\n　　就不会无聊郁闷。\n　　多有做事的欢乐是养生之道。\n　　每日提醒：忙碌之余，清闲片刻。\n　　人生顿悟：找事做。\n\n## 《不做金钱的奴隶》\n　　金钱不是万能的，\n　　虽然商品经济不可缺少金钱，\n　　鸟儿系上金钱飞不上蓝天。\n　　金钱一旦变成绳索，\n　　会勒死一个人。\n　　张口金钱，闭口金钱，\n　　不能穷的只剩下金钱。\n　　人的一生不能为挣钱而挣钱，\n　　否则会变成可怕的数字游戏。\n　　金钱要为人类更好的服务。\n　　每日提醒：钱既是好东西，又是害人的东西。\n　　人生顿悟：淡泊。\n\n\n## 《学会简单生活》\n　　有一名人说过：\n　　“你越习惯于奢华的生活，\n　　你就越发陷入被奴役的地位。\n　　因为你的需求越多，\n　　你的自由受到的限制就越大。”\n　　需求越少，生活就越幸福。\n　　这是一条古老的道理，\n　　贪吃是蠢猪的本性，\n　　贪财是笨鸟的习惯\n　　贪权是傻虎的幻梦。\n　　每日提醒：丢掉不该拥有的东西。\n　　人生顿悟：舍弃。\n\n\n## 《不要过于计较别人无端的评价》\n　　没有一幅画是没人评价的，\n　　没有一个人是没人指责的，\n　　你要是沉默寡言，\n　　有人会指责“城府很深”，\n　　你要是善于健谈，\n　　有人又会指责“夸夸其谈”；\n　　你要是赞美别人，\n　　有人会指责“别有用心”，\n　　你要是善于批评，\n　　有人更会暴跳如雷“多管闲事”……\n　　每日提醒：光看别人脸色，你还活不活。\n　　人生顿悟：拥有自我，又不局限于自我。\n\n\n## 《保持简洁》\n　　生活简洁的人，\n　　获得的幸福也越多；\n　　说话简洁的人，\n　　获得的赞誉也越多；\n　　人为没有必要的东西而活，\n　　会越活越沉重。\n　　一句话可以表达，\n　　为什么非要用十句话来罗嗦？\n　　简洁是美德，\n　　只有智慧的人，\n　　才会简洁。\n　　每日提醒：简洁不仅节省时间，而且能去很多烦恼。\n　　人生顿悟：学会简洁。\n\n\n## 《不甘寂寞多烦恼》\n　　人人都有寂寞难熬的时刻，\n　　没有信仰就会心灵寂寞；\n　　没有事做就会清闲烦闷，\n　　刻意自我封闭就会寂寞无援，\n　　灰暗心境更会寂寞一片。\n　　有人能耐得住寂寞，\n　　逐渐能成人生的“正果”\n　　有人耐不住寂寞，\n　　就会头脑发昏，\n　　干出身败名裂的蠢事。\n　　每日提醒：寂寞多是自找的。\n　　人生顿悟：自我修养。\n\n\n## 《任何困难都是有益的》\n　　先苦后甜式的生活，\n　　是最佳的人生模式。\n　　苦难是种财富，\n　　能使人更理解生活，\n　　能使人更明白人生的真谛，\n　　于是越会珍惜人生，\n　　越会热爱生活，\n　　越会奋发向上。\n　　能够从苦难中坦然地走过来，\n　　说明这个人已经很成熟。\n　　每日提醒：苦难能磨练我们的意志。\n　　人生顿悟：人苦志更强。\n\n\n## 《正人先正己》\n　　要求别人做到的，\n　　自己必须首先作到。\n　　言教不如身教，\n　　托尔斯泰认为：\n　　“要让所有人都做的要，\n　　首先必须自己做好。”\n　　你感到生活无味，\n　　要想改造生活，\n　　首先要改造自己对生活的态度，\n　　“微笑示人，充满信心”。\n　　每日提醒：对人严，对己更严。\n　　人生顿悟：自己先做好。\n\n\n## 《人贵有自知之明》\n　　知人者智，知己者明，\n　　人无自知之明，\n　　就会走两个极端：\n　　要么自我感觉良好，\n　　自傲自大，自恋自狂；\n　　要么缺乏自信，\n　　自轻自卑，自贱自暴，\n　　没有自知之明多是轻狂之人，\n　　没有自知之明多有狂妄和轻贱之举。\n　　每日提醒：了解自己比了解别人更重要。\n　　人生顿悟：剖析、完善。\n\n\n## 《失业不失志》\n　　市场经济，竞争时代，\n　　下岗失业已是家常便饭，\n　　从业不敬业，\n　　就会马上下岗失业。\n　　身无一技之长，\n　　也会下岗失业……\n　　下岗不可怕，\n　　可怕的是从此消沉堕落。\n　　重新振作起来，\n　　从头开始，这是大写的人生。\n　　每日提醒：在岗要有失业的忧虑。\n　　人生顿悟：多有谋生的技能。\n\n## 《不要总有不平衡的心理》\n　　多干点工作，\n　　就要讨价还价，\n　　索取过分的报酬，\n　　一旦要求达不到，\n　　心理就失去平衡。\n　　待遇不如别人，\n　　心理就会不平衡，\n　　欲望要求没有满足，\n　　心理更会失去平衡。\n　　不平衡就会烦恼不尽。\n　　每日提醒：要有吃亏精神。\n　　人生顿悟：清淡。\n\n\n## 《不要追逐世俗的荣誉》\n　　一辈子寻找所谓别人认可的东西，\n　　永远痛失自己的欢乐和幸福。\n　　庸俗的评论会湮灭你的个性，\n　　世俗的指点会让你不知所措。\n　　为钱而钱会六亲不认，\n　　为权而权会胆大妄为，\n　　为名而名会巧取强夺。\n　　真实的我在刻意的追逐之中，\n　　会变成碎片随风飘扬，\n　　世俗的我已变得面目可憎。\n　　每日提醒：得到了媚俗，失去了真实。\n　　人生顿悟：坚定信念，拥有自我。\n\n\n## 《知道智慧人的品行》\n　　智慧人让人羡慕，\n　　智慧人谨慎小心，\n　　从不卤莽行事，\n　　或者炫耀健谈。\n　　智慧人睿智自明，\n　　从不事到临头，\n　　才惊慌失措。\n　　智慧人有勇有谋，\n　　勤于思索创造，\n　　自寻快乐和幸福。\n　　每日提醒：榜样的力量是无穷的。\n　　人生顿悟：不断反省自己，不断向别人学习。\n\n\n## 《把好口风关》\n　　不要轻易许诺。\n　　君子一言，驷马难追，\n　　说出来就要做得到。\n　　不要做牛皮王，\n　　否则人人瞧不起你。\n　　不要宣扬别人的隐私，\n　　要善于给别人遮丑，\n　　津津乐道于传播别人的污点，\n　　他人会把你当作市侩似的小妇人。\n　　谨慎言语什么时候都没有错。\n　　每日提醒：想一想，再说。\n　　人生顿悟：慎言。\n\n\n## 《你无法去改变别人》\n　　我们无法去改变别人的看法，\n　　能改变的恰恰只有我们自己。\n　　坏的生活不在于别人的罪恶，\n　　而在于我们心情的恶劣。\n　　让生活变好的金钥匙不在别人手里，\n　　放弃我们的抱怨，\n　　美好生活可以唾手可得。\n　　我们主观上本想好好生活，\n　　可是客观上却没有好的生活，\n　　其原因是总想等待别人来改善生活。\n　　每日提醒：；好心境是自己创造的。\n　　人生顿悟：做生活的主人。\n\n\n## 《别做令人厌烦的人》\n　　总是给人添烦恼，\n　　别人恐怕避之不及，\n　　总是骚扰别人，\n　　只会讨人生厌。\n　　说话罗罗唆嗦，\n　　让人打心眼里厌恶，\n　　做事拖泥带水，\n　　别人终无宁日，\n　　人都会讨厌别人，\n　　却从没有人会讨厌自己。\n　　每日提醒：自我修养特别重要。\n　　人生顿悟：自知之明。\n\n\n## 《名声是金》\n　　好名声使人终生受益，\n　　还能光泽后人，\n　　坏名声使人抬不起头来，\n　　生不如死。\n　　获得好名声很不容易，\n　　而败坏好名声却易如反掌。\n　　只有基础扎实的好名声才会持久，\n　　因为它深得人们的敬佩和尊敬。\n　　多数平凡人都会忽视自己的名声，\n　　而过多关注别人的名声。\n　　每日提醒：名声是做出来的，不是吹出来的。\n　　人生顿悟：形象很重要。\n\n\n## 《极端的聪明或麻木都不可取》\n　　有些人忧虑过度，\n　　导致精神失常，\n　　有些人麻木不仁，\n　　对任何事物都无动于衷；\n　　前者常为寻找理性而痛苦，\n　　因聪明过头而衰亡，\n　　愚蠢的根源在于什么都懊悔。\n　　后者不知悔恨为何物，\n　　整天稀里糊涂，\n　　活着与死去没有什么区别。\n　　每日提醒：走极端总没有好下场。\n　　人生顿悟：寻找智慧。\n\n\n## 《人生的幸福多是无法从别人身上得到》\n　　假如你想寻找真正的幸福，\n　　一点不用瞎费劲，\n　　既不用去遥远的地方取经，\n　　也不用卑微地乞求别人的恩赐，\n　　真正的幸福蕴藏在你自己身上。\n　　以乞求、投机、强求、卖买等方式，\n　　得到的幸福均是短暂的，\n　　甚至是徒劳无益的。\n　　许多是得不偿失的。\n　　幸福不靠天地，靠自己。\n　　每日提醒：真正的幸福就是自己拥有爱的生活。\n　　人生顿悟：自强多福。\n\n\n## 《了解哲人解读的三个“最”》\n　　托尔斯泰在生活之路中描述：\n　　“有一个人问哲人：\n　　什么事是最重要的？什么人是最重要的？\n　　生活中什么时间是最重要的？”哲人认真的回答到：\n　　“最重要的事是与所有人共同相爱，\n　　最重要的人是此刻所交往的人，\n　　最重要的时间是现在的时光。”切记：今天最重要。\n　　每日提醒：昨天已经过去，未来还没有来临。\n　　人生顿悟：让今天之心永远快乐。\n\n\n## 《想开一些》\n　　先哲们智慧地说：“同是一件事，\n　　想开了是天堂，\n　　想不开是地狱。”\n　　生活的主体是自己，\n　　自己才是生命的主人。\n　　别人的劝告，\n　　只多是种安慰，\n　　不能当做根治心病的良药，\n　　心灵的伤痛只能自己慢慢治疗。\n　　每日提醒：人人都有不平事。\n　　人生顿悟：想不开是与自己过不去。\n\n\n## 《掌握改变自己处境的计策》\n　　爱默生说：\n　　“如果一个人对自己的处境不满，\n　　他可以用两种方法来改变：\n　　改善自己的生活条件；\n　　或者改善自己灵魂的状况。\n　　前者不是自己随时都可以做到的，\n　　后者则永远随他自己掌握。”\n　　处境的恶化都是心境引起的，\n　　改变心态，换位思考，\n　　是简捷的方法。\n　　每日提醒：心境愉快，环境也好。\n　　人生顿悟：心态要好。\n\n\n## 《去掉不幸的祸根》\n　　在尘世中胡乱寻找幸福的人，\n　　是世界上最不幸之人，\n　　不要盲目比较，快乐长在；\n　　不要丧失自我，自信长在；\n　　不要乞讨幸福，自尊长在；\n　　不要贪求过多，知足长乐；\n　　不要虚荣心太强，悠闲自得；\n　　不要怀疑一切，真情长在；\n　　不要复杂生活，欢乐常伴；\n　　不要仇视社会，和睦共处。\n　　每日提醒：幸福就在自己的手中。\n　　人生顿悟：不幸多是自找的。","slug":"ninety-nine-life-sentiment","published":1,"updated":"2016-03-17T00:44:06.361Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdzi003co4pkzawwxhls"},{"title":"Android MVP+Retrofit+RxJava实践小结","date":"2016-06-12T03:07:23.000Z","_content":"\n关于MVP、Retrofit、RxJava，之前已经分别做了分享，如果您还没有阅读过，可以猛戳：\n1、[Android MVP 实例](http://wuxiaolong.me/2015/09/23/AndroidMVPSample/)\n2、[Android Retrofit 2.0使用](http://wuxiaolong.me/2016/01/15/retrofit/)\n3、[RxJava](http://wuxiaolong.me/2016/01/18/rxjava/)\n4、[RxBus](http://wuxiaolong.me/2016/04/07/rxbus/)\n\n假设，您对MVP、Retrofit、RxJava已经有了一点了解，那么我们开始本文：\n<!--more-->\n# Android MVP优化\n\n1、MVP绑定Activity（Fragment）生命周期\n按照之前的文章，每个Presenter都得初始化和销毁，我新加MvpActivity(MvpFragment)，加了抽象方法`protected abstract P createPresenter();`这样做的目的在需要使用MVP的地方，可以继承MvpActivity(MvpFragment)，然后初始化和销毁就不用手动一个个去加了。\n\n2、接口请求等还是放到MVP的P中\n![](http://7q5c2h.com1.z0.glb.clouddn.com/androidmvpsample2.png?watermark/2/text/5ZC05bCP6b6Z5ZCM5a24/font/5qW35L2T/fontsize/500/fill/I0VGRUZFRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10)\n这个图片，在当时写MVP文章时给出的，实际开发中，我发现每个都这样写，实在是增加了不少代码，然接口请求放到P中，还有个好处，就是MVP绑定Activity（Fragment）生命周期，当onDestroy时取消RXJava注册，以避免内存泄露。\n\n# 代码\n## 目录结构\n如图，有个大致了解：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/mvpRetrofitRxjava1.jpg)\nmvp：所有的mvp都放在这个包下\nretrofit：Retrofit接口和配置文件\nrxjava：RxJava一些回调设置\nui：Activity或fragment，建议按功能再细分包\n\n## 核心代码\n还是就贴出核心代码吧，源码在我的github上（[https://github.com/WuXiaolong/AndroidMVPSample](https://github.com/WuXiaolong/AndroidMVPSample)）。\n\nMainActivity入口，还是演示的之前的MVP的天气的接口，接口请求方法放在Presenter。\n\n### MvpActivity\nPresenter绑定Activity（Fragment）生命周期\n```java\npublic abstract class MvpActivity<P extends BasePresenter> extends BaseActivity {\n    protected P mvpPresenter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        mvpPresenter = createPresenter();\n        super.onCreate(savedInstanceState);\n    }\n\n    protected abstract P createPresenter();\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        if (mvpPresenter != null) {\n            mvpPresenter.detachView();\n        }\n    }\n}\n```\n\n### MainPresenter\napiStores.loadData方法是Retrofit做的网络请求，回调是RxJava完成的。\n```java\npublic class MainPresenter extends BasePresenter<MainView> {\n\n    public MainPresenter(MainView view) {\n        attachView(view);\n    }\n   \n    public void loadData(String cityId) {\n        mvpView.showLoading();\n        addSubscription(apiStores.loadData(cityId),\n                new SubscriberCallBack<>(new ApiCallback<MainModel>() {\n                    @Override\n                    public void onSuccess(MainModel model) {\n                        mvpView.getDataSuccess(model);\n                    }\n\n                    @Override\n                    public void onFailure(int code, String msg) {\n                        mvpView.getDataFail(msg);\n                    }\n\n                    @Override\n                    public void onCompleted() {\n                        mvpView.hideLoading();\n                    }\n                }));\n    }\n\n}\n```\n\n### apiStores.loadData\n是不是很简单，关于Retrofit配置，详见源码AppClient。\n```java\npublic interface ApiStores {\n    //baseUrl\n    String API_SERVER_URL = \"http://www.weather.com.cn/\";\n\n    //加载天气\n    @GET(\"adat/sk/{cityId}.html\")\n    Observable<MainModel> loadData(@Path(\"cityId\") String cityId);\n}\n\n```\n\n### RxJava回调方法\n这里onError，写了如果网络请求用httpcode来判断。当然可以不要。\n```java\npublic class SubscriberCallBack<T> extends Subscriber<T> {\n    private ApiCallback<T> apiCallback;\n\n    public SubscriberCallBack(ApiCallback<T> apiCallback) {\n        this.apiCallback = apiCallback;\n    }\n\n    @Override\n    public void onCompleted() {\n        apiCallback.onCompleted();\n    }\n\n    @Override\n    public void onError(Throwable e) {\n        e.printStackTrace();\n        if (e instanceof HttpException) {\n            HttpException httpException = (HttpException) e;\n            //httpException.response().errorBody().string()\n            int code = httpException.code();\n            String msg = httpException.getMessage();\n            if (code == 504) {\n                msg = \"网络不给力\";\n            }\n            apiCallback.onFailure(code, msg);\n        } else {\n            apiCallback.onFailure(0, e.getMessage());\n        }\n        apiCallback.onCompleted();\n    }\n\n    @Override\n    public void onNext(T t) {\n        apiCallback.onSuccess(t);\n    }\n}\n```\n\n### BasePresenter\n再来看看BasePresenter，这里做了Presenter初始化和销毁(包括RXjava取消注册)，调用在MvpActivity。\n```java\npublic class BasePresenter<V> implements Presenter<V> {\n    public V mvpView;\n    public ApiStores apiStores = AppClient.retrofit().create(ApiStores.class);\n    private CompositeSubscription mCompositeSubscription;\n\n    @Override\n    public void attachView(V mvpView) {\n        this.mvpView = mvpView;\n    }\n\n    @Override\n    public void detachView() {\n        this.mvpView = null;\n        onUnsubscribe();\n    }\n\n    //RXjava取消注册，以避免内存泄露\n    public void onUnsubscribe() {\n        if (mCompositeSubscription != null && mCompositeSubscription.hasSubscriptions()) {\n            mCompositeSubscription.unsubscribe();\n        }\n    }\n\n    public void addSubscription(Observable observable, Subscriber subscriber) {\n        if (mCompositeSubscription == null) {\n            mCompositeSubscription = new CompositeSubscription();\n        }\n        mCompositeSubscription.add(observable\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(subscriber));\n    }\n}\n```\n\n# 源码地址\n[https://github.com/WuXiaolong/AndroidMVPSample](https://github.com/WuXiaolong/AndroidMVPSample)\n\n# 总结\n三者结合使用，重点还是对MVP的优化，Retrofit只贴出最简单的（后续会写Retrofit详情使用），Rxjava可能我是对它认识尚浅，实际运用最多还是RxBus。\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidProgrammerLogo.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","source":"_posts/mvpRetrofitRxjava.md","raw":"title: Android MVP+Retrofit+RxJava实践小结\ndate: 2016-06-12 11:07:23\ntags: [MVP,Retrofit,RxJava]\ncategory: Android\n---\n\n关于MVP、Retrofit、RxJava，之前已经分别做了分享，如果您还没有阅读过，可以猛戳：\n1、[Android MVP 实例](http://wuxiaolong.me/2015/09/23/AndroidMVPSample/)\n2、[Android Retrofit 2.0使用](http://wuxiaolong.me/2016/01/15/retrofit/)\n3、[RxJava](http://wuxiaolong.me/2016/01/18/rxjava/)\n4、[RxBus](http://wuxiaolong.me/2016/04/07/rxbus/)\n\n假设，您对MVP、Retrofit、RxJava已经有了一点了解，那么我们开始本文：\n<!--more-->\n# Android MVP优化\n\n1、MVP绑定Activity（Fragment）生命周期\n按照之前的文章，每个Presenter都得初始化和销毁，我新加MvpActivity(MvpFragment)，加了抽象方法`protected abstract P createPresenter();`这样做的目的在需要使用MVP的地方，可以继承MvpActivity(MvpFragment)，然后初始化和销毁就不用手动一个个去加了。\n\n2、接口请求等还是放到MVP的P中\n![](http://7q5c2h.com1.z0.glb.clouddn.com/androidmvpsample2.png?watermark/2/text/5ZC05bCP6b6Z5ZCM5a24/font/5qW35L2T/fontsize/500/fill/I0VGRUZFRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10)\n这个图片，在当时写MVP文章时给出的，实际开发中，我发现每个都这样写，实在是增加了不少代码，然接口请求放到P中，还有个好处，就是MVP绑定Activity（Fragment）生命周期，当onDestroy时取消RXJava注册，以避免内存泄露。\n\n# 代码\n## 目录结构\n如图，有个大致了解：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/mvpRetrofitRxjava1.jpg)\nmvp：所有的mvp都放在这个包下\nretrofit：Retrofit接口和配置文件\nrxjava：RxJava一些回调设置\nui：Activity或fragment，建议按功能再细分包\n\n## 核心代码\n还是就贴出核心代码吧，源码在我的github上（[https://github.com/WuXiaolong/AndroidMVPSample](https://github.com/WuXiaolong/AndroidMVPSample)）。\n\nMainActivity入口，还是演示的之前的MVP的天气的接口，接口请求方法放在Presenter。\n\n### MvpActivity\nPresenter绑定Activity（Fragment）生命周期\n```java\npublic abstract class MvpActivity<P extends BasePresenter> extends BaseActivity {\n    protected P mvpPresenter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        mvpPresenter = createPresenter();\n        super.onCreate(savedInstanceState);\n    }\n\n    protected abstract P createPresenter();\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        if (mvpPresenter != null) {\n            mvpPresenter.detachView();\n        }\n    }\n}\n```\n\n### MainPresenter\napiStores.loadData方法是Retrofit做的网络请求，回调是RxJava完成的。\n```java\npublic class MainPresenter extends BasePresenter<MainView> {\n\n    public MainPresenter(MainView view) {\n        attachView(view);\n    }\n   \n    public void loadData(String cityId) {\n        mvpView.showLoading();\n        addSubscription(apiStores.loadData(cityId),\n                new SubscriberCallBack<>(new ApiCallback<MainModel>() {\n                    @Override\n                    public void onSuccess(MainModel model) {\n                        mvpView.getDataSuccess(model);\n                    }\n\n                    @Override\n                    public void onFailure(int code, String msg) {\n                        mvpView.getDataFail(msg);\n                    }\n\n                    @Override\n                    public void onCompleted() {\n                        mvpView.hideLoading();\n                    }\n                }));\n    }\n\n}\n```\n\n### apiStores.loadData\n是不是很简单，关于Retrofit配置，详见源码AppClient。\n```java\npublic interface ApiStores {\n    //baseUrl\n    String API_SERVER_URL = \"http://www.weather.com.cn/\";\n\n    //加载天气\n    @GET(\"adat/sk/{cityId}.html\")\n    Observable<MainModel> loadData(@Path(\"cityId\") String cityId);\n}\n\n```\n\n### RxJava回调方法\n这里onError，写了如果网络请求用httpcode来判断。当然可以不要。\n```java\npublic class SubscriberCallBack<T> extends Subscriber<T> {\n    private ApiCallback<T> apiCallback;\n\n    public SubscriberCallBack(ApiCallback<T> apiCallback) {\n        this.apiCallback = apiCallback;\n    }\n\n    @Override\n    public void onCompleted() {\n        apiCallback.onCompleted();\n    }\n\n    @Override\n    public void onError(Throwable e) {\n        e.printStackTrace();\n        if (e instanceof HttpException) {\n            HttpException httpException = (HttpException) e;\n            //httpException.response().errorBody().string()\n            int code = httpException.code();\n            String msg = httpException.getMessage();\n            if (code == 504) {\n                msg = \"网络不给力\";\n            }\n            apiCallback.onFailure(code, msg);\n        } else {\n            apiCallback.onFailure(0, e.getMessage());\n        }\n        apiCallback.onCompleted();\n    }\n\n    @Override\n    public void onNext(T t) {\n        apiCallback.onSuccess(t);\n    }\n}\n```\n\n### BasePresenter\n再来看看BasePresenter，这里做了Presenter初始化和销毁(包括RXjava取消注册)，调用在MvpActivity。\n```java\npublic class BasePresenter<V> implements Presenter<V> {\n    public V mvpView;\n    public ApiStores apiStores = AppClient.retrofit().create(ApiStores.class);\n    private CompositeSubscription mCompositeSubscription;\n\n    @Override\n    public void attachView(V mvpView) {\n        this.mvpView = mvpView;\n    }\n\n    @Override\n    public void detachView() {\n        this.mvpView = null;\n        onUnsubscribe();\n    }\n\n    //RXjava取消注册，以避免内存泄露\n    public void onUnsubscribe() {\n        if (mCompositeSubscription != null && mCompositeSubscription.hasSubscriptions()) {\n            mCompositeSubscription.unsubscribe();\n        }\n    }\n\n    public void addSubscription(Observable observable, Subscriber subscriber) {\n        if (mCompositeSubscription == null) {\n            mCompositeSubscription = new CompositeSubscription();\n        }\n        mCompositeSubscription.add(observable\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(subscriber));\n    }\n}\n```\n\n# 源码地址\n[https://github.com/WuXiaolong/AndroidMVPSample](https://github.com/WuXiaolong/AndroidMVPSample)\n\n# 总结\n三者结合使用，重点还是对MVP的优化，Retrofit只贴出最简单的（后续会写Retrofit详情使用），Rxjava可能我是对它认识尚浅，实际运用最多还是RxBus。\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidProgrammerLogo.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","slug":"mvpRetrofitRxjava","published":1,"updated":"2016-06-20T09:17:53.858Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdzk003fo4pkx1ntle24"},{"title":"吴小龙同學-客戶端","date":"2014-12-24T16:00:00.000Z","_content":"\n>好记忆不如烂笔头，随时记录自己所遇到的问题及疑惑。\n\n* 安卓客戶端\n\n![](http://wuxiaolong.qiniudn.com/WuXiaolong_qrcode.png)\n","source":"_posts/mobile.md","raw":"title: 吴小龙同學-客戶端\ndate: 2014-12-25 \ncategories: [Life]\ntags: [Life,Android]\n---\n\n>好记忆不如烂笔头，随时记录自己所遇到的问题及疑惑。\n\n* 安卓客戶端\n\n![](http://wuxiaolong.qiniudn.com/WuXiaolong_qrcode.png)\n","slug":"mobile","published":1,"updated":"2016-03-17T00:44:06.360Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdzn003lo4pkpu9st7f2"},{"title":"android之获取手机信息","date":"2013-07-17T16:00:00.000Z","_content":"android获取手机信息（号码，内存，CPU，分辨率，MAC，IP，SD卡，IMEI,经纬度，信号强度等等）\n\n<!-- more -->\n\n```java\n\tpackage com.android.xiaomolong.example.apkdemo;\t\n\timport java.io.BufferedReader;\n\timport java.io.File;\n\timport java.io.FileReader;\n\timport java.io.IOException;\n\timport java.io.InputStream;\n\timport java.io.InputStreamReader;\n\timport java.net.HttpURLConnection;\n\timport java.net.InetAddress;\n\timport java.net.MalformedURLException;\n\timport java.net.NetworkInterface;\n\timport java.net.SocketException;\n\timport java.net.URL;\n\timport java.net.URLConnection;\n\timport java.util.Enumeration;\n\timport java.util.List;\n\t\n\timport android.app.Activity;\n\timport android.app.ActivityManager;\n\timport android.app.ActivityManager.MemoryInfo;\n\timport android.app.AlertDialog;\n\timport android.content.Context;\n\timport android.content.DialogInterface;\n\timport android.location.Criteria;\n\timport android.location.Location;\n\timport android.location.LocationListener;\n\timport android.location.LocationManager;\n\timport android.net.ConnectivityManager;\n\timport android.net.NetworkInfo;\n\timport android.net.wifi.WifiInfo;\n\timport android.net.wifi.WifiManager;\n\timport android.os.Bundle;\n\timport android.os.Environment;\n\timport android.os.StatFs;\n\timport android.telephony.CellLocation;\n\timport android.telephony.NeighboringCellInfo;\n\timport android.telephony.PhoneStateListener;\n\timport android.telephony.ServiceState;\n\timport android.telephony.SignalStrength;\n\timport android.telephony.TelephonyManager;\n\timport android.telephony.cdma.CdmaCellLocation;\n\timport android.telephony.gsm.GsmCellLocation;\n\timport android.text.format.Formatter;\n\timport android.util.DisplayMetrics;\n\timport android.util.Log;\n\timport android.view.Gravity;\n\timport android.view.WindowManager;\n\timport android.widget.Toast;\n\t\n\t/**\n\t * \n\t * @author 小尛龙\n\t * \n\t */\n\tpublic class MainActivity extends Activity {\n\t\n\t        @Override\n\t        protected void onCreate(Bundle savedInstanceState) {\n\t                super.onCreate(savedInstanceState);\n\t                setContentView(R.layout.activity_main);\n\t\n\t                Log.d(\"wxl\", getSystemMemory());\n\t\n\t        }\n\t\n\t        // 获取Android手机中SD卡存储信息 获取剩余空间\n\t        public void getSDCardInfo() {\n\t                // 在manifest.xml文件中要添加\n\t                /*\n\t                 * <uses-permission\n\t                 * android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\">\n\t                 * </uses-permission>\n\t                 */\n\t                // 需要判断手机上面SD卡是否插好，如果有SD卡的情况下，我们才可以访问得到并获取到它的相关信息，当然以下这个语句需要用if做判断\n\t                if (Environment.getExternalStorageState().equals(\n\t                                Environment.MEDIA_MOUNTED)) {\n\t                        // 取得sdcard文件路径\n\t                        File path = Environment.getExternalStorageDirectory();\n\t                        StatFs statfs = new StatFs(path.getPath());\n\t                        // 获取block的SIZE\n\t                        long blocSize = statfs.getBlockSize();\n\t                        // 获取BLOCK数量\n\t                        long totalBlocks = statfs.getBlockCount();\n\t                        // 空闲的Block的数量\n\t                        long availaBlock = statfs.getAvailableBlocks();\n\t                        // 计算总空间大小和空闲的空间大小\n\t                        // 存储空间大小跟空闲的存储空间大小就被计算出来了。\n\t                        long availableSize = blocSize * availaBlock;\n\t                        // (availableBlocks * blockSize)/1024 KIB 单位\n\t                        // (availableBlocks * blockSize)/1024 /1024 MIB单位\n\t                        long allSize = blocSize * totalBlocks;\n\t                }\n\t\n\t        }\n\t\n\t        // 获取手机ip method-1\n\t        public String getLocalIpAddress() {\n\t                try {\n\t                        for (Enumeration<NetworkInterface> en = NetworkInterface\n\t                                        .getNetworkInterfaces(); en.hasMoreElements();) {\n\t                                NetworkInterface intf = en.nextElement();\n\t                                for (Enumeration<InetAddress> enumIpAddr = intf\n\t                                                .getInetAddresses(); enumIpAddr.hasMoreElements();) {\n\t                                        InetAddress inetAddress = enumIpAddr.nextElement();\n\t                                        if (!inetAddress.isLoopbackAddress()) {\n\t                                                Toast.makeText(this,\n\t                                                                inetAddress.getHostAddress().toString(), 3000)\n\t                                                                .show();\n\t                                                return inetAddress.getHostAddress().toString();\n\t                                        }\n\t                                }\n\t                        }\n\t                } catch (SocketException ex) {\n\t                        ex.printStackTrace();\n\t                        // Log.e(\"ifo\", ex.toString());\n\t                }\n\t                return \"\";\n\t        }\n\t\n\t        // 需要权限\n\t        // <uses-permission\n\t        // android:name=\"android.permission.ACCESS_WIFI_STATE\"></uses-permission>\n\t        // <uses-permission\n\t        // android:name=\"android.permission.INTERNET\"></uses-permission>\n\t\n\t        // 获取手机ip method-2\n\t        // 首先设置用户权限\n\t        // <uses-permission\n\t        // android:name=\"android.permission.ACCESS_WIFI_STATE\"></uses-permission>\n\t        // <uses-permission\n\t        // android:name=\"android.permission.CHANGE_WIFI_STATE\"></uses-permission>\n\t        // <uses-permission\n\t        // android:name=\"android.permission.WAKE_LOCK\"></uses-permission>\n\t        public String getLocalIpAddress2() {\n\t                // 获取wifi服务\n\t                WifiManager wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);\n\t                // 判断wifi是否开启\n\t                if (!wifiManager.isWifiEnabled()) {\n\t                        wifiManager.setWifiEnabled(true);\n\t                }\n\t                WifiInfo wifiInfo = wifiManager.getConnectionInfo();\n\t                int ipAddress = wifiInfo.getIpAddress();\n\t                String ip = intToIp(ipAddress);\n\t                return ip;\n\t        }\n\t\n\t        private String intToIp(int i) {\n\t                return (i & 0xFF) + \".\" + ((i >> 8) & 0xFF) + \".\" + ((i >> 16) & 0xFF)\n\t                                + \".\" + (i >> 24 & 0xFF);\n\t        }\n\t\n\t        // 查看本机外网IP\n\t        /*\n\t         * 该方法需要设备支持上网 查看\n\t         * System.out.println((GetNetIp(\"http://fw.qq.com/ipaddress\"))); 加权限\n\t         * <uses-permission\n\t         * android:name=\"android.permission.INTERNET\"></uses-permission>\n\t         * 通过获取http://fw.qq.com/ipaddress网页取得外网IP 这里有几个查看IP的网址然后提取IP试试。\n\t         * http://ip168.com/ http://www.cmyip.com/ http://city.ip138.com/ip2city.asp\n\t         */\n\t        public String GetNetIp(String ipaddr) {\n\t                URL infoUrl = null;\n\t                InputStream inStream = null;\n\t                try {\n\t                        infoUrl = new URL(ipaddr);\n\t                        URLConnection connection = infoUrl.openConnection();\n\t                        HttpURLConnection httpConnection = (HttpURLConnection) connection;\n\t                        int responseCode = httpConnection.getResponseCode();\n\t                        if (responseCode == HttpURLConnection.HTTP_OK) {\n\t                                inStream = httpConnection.getInputStream();\n\t                                BufferedReader reader = new BufferedReader(\n\t                                                new InputStreamReader(inStream, \"utf-8\"));\n\t                                StringBuilder strber = new StringBuilder();\n\t                                String line = null;\n\t                                while ((line = reader.readLine()) != null)\n\t                                        strber.append(line + \"\\n\");\n\t                                inStream.close();\n\t                                return strber.toString();\n\t                        }\n\t                } catch (MalformedURLException e) {\n\t                        // TODO Auto-generated catch block\n\t                        e.printStackTrace();\n\t                } catch (IOException e) {\n\t                        // TODO Auto-generated catch block\n\t                        e.printStackTrace();\n\t                }\n\t                return \"\";\n\t        }\n\t\n\t        // 获取手机MAC地址\n\t        private String getMacAddress() {\n\t                String result = \"\";\n\t                WifiManager wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);\n\t                WifiInfo wifiInfo = wifiManager.getConnectionInfo();\n\t                result = wifiInfo.getMacAddress();\n\t                // Log.i(TAG, \"macAdd:\" + result);\n\t                return result;\n\t        }\n\t\n\t        // 获取手机屏幕高度\n\t        private String getWeithAndHeight() {\n\t                // 这种方式在service中无法使用，\n\t                DisplayMetrics dm = new DisplayMetrics();\n\t                getWindowManager().getDefaultDisplay().getMetrics(dm);\n\t                int width = dm.widthPixels; // 宽\n\t                int height = dm.heightPixels; // 高\n\t                float density = dm.density; // 屏幕密度（0.75 / 1.0 / 1.5）\n\t                int densityDpi = dm.densityDpi; // 屏幕密度DPI（120 / 160 / 240）\n\t                // 在service中也能得到高和宽\n\t                WindowManager mWindowManager = (WindowManager) getSystemService(Context.WINDOW_SERVICE);\n\t                width = mWindowManager.getDefaultDisplay().getWidth();\n\t                height = mWindowManager.getDefaultDisplay().getHeight();\n\t\n\t                // 居中显示Toast\n\t                Toast msg = Toast.makeText(this, \"宽=\" + width + \"   高=\" + height,\n\t                                Toast.LENGTH_LONG);\n\t                msg.setGravity(Gravity.CENTER, msg.getXOffset() / 2,\n\t                                msg.getYOffset() / 2);\n\t                msg.show();\n\t                return \"(像素)宽:\" + width + \"\\n\" + \"(像素)高:\" + height + \"\\n\"\n\t                                + \"屏幕密度（0.75 / 1.0 / 1.5）:\" + density + \"\\n\"\n\t                                + \"屏幕密度DPI（120 / 160 / 240）:\" + densityDpi + \"\\n\";\n\t                /*\n\t                 * 下面的代码即可获取屏幕的尺寸。 在一个Activity的onCreate方法中，写入如下代码： DisplayMetrics metric\n\t                 * = new DisplayMetrics();\n\t                 * getWindowManager().getDefaultDisplay().getMetrics(metric); int width\n\t                 * = metric.widthPixels; // 屏幕宽度（像素） int height = metric.heightPixels;\n\t                 * // 屏幕高度（像素） float density = metric.density; // 屏幕密度（0.75 / 1.0 / 1.5）\n\t                 * int densityDpi = metric.densityDpi; // 屏幕密度DPI（120 / 160 / 240）\n\t                 * \n\t                 * 但是，需要注意的是，在一个低密度的小屏手机上，仅靠上面的代码是不能获取正确的尺寸的。\n\t                 * 比如说，一部240x320像素的低密度手机，如果运行上述代码，获取到的屏幕尺寸是320x427。\n\t                 * 因此，研究之后发现，若没有设定多分辨率支持的话\n\t                 * ，Android系统会将240x320的低密度（120）尺寸转换为中等密度（160）对应的尺寸，\n\t                 * 这样的话就大大影响了程序的编码。所以，需要在工程的AndroidManifest\n\t                 * .xml文件中，加入supports-screens节点，具体的内容如下： <supports-screens\n\t                 * android:smallScreens=\"true\" android:normalScreens=\"true\"\n\t                 * android:largeScreens=\"true\" android:resizeable=\"true\"\n\t                 * android:anyDensity=\"true\" />\n\t                 * 这样的话，当前的Android程序就支持了多种分辨率，那么就可以得到正确的物理尺寸了。\n\t                 */\n\t        }\n\t\n\t        // 获取手机经纬度\n\t        public void getLocation() {\n\t                // 1. 创建一个 LocationManager对象。\n\t                LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\n\t                // 2. 创建一个 LocationListener对象。\n\t                LocationListener myGPSListener = new LocationListener() {\n\t                        // 一旦Location发生改变就会调用这个方法\n\t                        public void onLocationChanged(Location location) {\n\t                                double latitude = location.getLatitude();\n\t                                double longitude = location.getLongitude();\n\t                        }\n\t\n\t                        public void onStatusChanged(String provider, int status,\n\t                                        Bundle extras) {\n\t                        }\n\t\n\t                        public void onProviderEnabled(String provider) {\n\t                        }\n\t\n\t                        public void onProviderDisabled(String provider) {\n\t                        }\n\t                };\n\t                // 3.向LocationManager 注册一个LocationListener。\n\t                Criteria criteria = new Criteria();\n\t                criteria.setAccuracy(Criteria.ACCURACY_COARSE);\n\t                criteria.setAltitudeRequired(false);\n\t                criteria.setCostAllowed(true);\n\t                criteria.setPowerRequirement(Criteria.POWER_LOW);\n\t                String provider = locationManager.getBestProvider(criteria, true); // 根据Criteria\n\t                                                                                                                                                        // 的设置获取一个最佳的Provider\n\t                locationManager\n\t                                .requestLocationUpdates(provider, 5000, 0, myGPSListener);\n\t                // 4.移除LocationManager 注册的 LocationListener。\n\t                locationManager.removeUpdates(myGPSListener);\n\t\n\t        }\n\t\n\t        // 当前网络是否连接\n\t        public boolean isNetConnecting() {\n\t                ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n\t                NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n\t                if (networkInfo == null || !networkInfo.isConnected()) {\n\t                        // info.setConnected(false);\n\t                        return false;\n\t                } else {\n\t                        // info.setConnected(true);\n\t                        return true;\n\t                }\n\t        }\n\t\n\t        // 获取信号强度\n\t        public void getPhoneState() {\n\t                // 1. 创建telephonyManager 对象。\n\t                TelephonyManager telephonyManager = (TelephonyManager) /* context. */getSystemService(Context.TELEPHONY_SERVICE);\n\t                // 2. 创建PhoneStateListener 对象\n\t                PhoneStateListener MyPhoneListener = new PhoneStateListener() {\n\t                        @Override\n\t                        public void onCellLocationChanged(CellLocation location) {\n\t                                if (location instanceof GsmCellLocation) {// gsm网络\n\t                                        int CID = ((GsmCellLocation) location).getCid();\n\t                                } else if (location instanceof CdmaCellLocation) {// 其他CDMA等网络\n\t                                        int ID = ((CdmaCellLocation) location).getBaseStationId();\n\t                                }\n\t                        }\n\t\n\t                        @Override\n\t                        public void onServiceStateChanged(ServiceState serviceState) {\n\t                                super.onServiceStateChanged(serviceState);\n\t                        }\n\t\n\t                        @Override\n\t                        public void onSignalStrengthsChanged(SignalStrength signalStrength) {\n\t                                int asu = signalStrength.getGsmSignalStrength();\n\t                                int dbm = -113 + 2 * asu; // 信号强度\n\t                                super.onSignalStrengthsChanged(signalStrength);\n\t                        }\n\t                };\n\t                // 3. 监听信号改变\n\t                telephonyManager.listen(MyPhoneListener,\n\t                                PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);\n\t\n\t                /*\n\t                 * 可能需要的权限 <uses-permission\n\t                 * android:name=\"android.permission.WAKE_LOCK\"></uses-permission>\n\t                 * <uses-permission\n\t                 * android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>\n\t                 * <uses-permission\n\t                 * android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n\t                 * <uses-permission android:name=\"android.permission.READ_PHONE_STATE\"\n\t                 * /> <uses-permission\n\t                 * android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\n\t                 */\n\t        }\n\t\n\t        // 获取手机可用内存和总内存\n\t        private String getSystemMemory() {\n\t                /*\n\t                 * 在Android开发中，有时候我们想获取手机的一些硬件信息，比如android手机的总内存和可用内存大小。这个该如何实现呢？\n\t                 * 通过读取文件\"/proc/meminfo\"\n\t                 * 的信息能够获取手机Memory的总量，而通过ActivityManager.getMemoryInfo\n\t                 * (ActivityManager.MemoryInfo)方法可以获取当前的可用Memory量。\n\t                 * \"/proc/meminfo\"文件记录了android手机的一些内存信息\n\t                 * ，在命令行窗口里输入\"adb shell\"，进入shell环境，输入\n\t                 * \"cat /proc/meminfo\"即可在命令行里显示meminfo文件的内容，具体如下所示。\n\t                 * \n\t                 * C:\\Users\\Figo>adb shell # cat /proc/meminfo cat /proc/meminfo\n\t                 * MemTotal: 94096 kB MemFree: 1684 kB Buffers: 16 kB Cached: 27160 kB\n\t                 * SwapCached: 0 kB Active: 35392 kB Inactive: 44180 kB Active(anon):\n\t                 * 26540 kB Inactive(anon): 28244 kB Active(file): 8852 kB\n\t                 * Inactive(file): 15936 kB Unevictable: 280 kB Mlocked: 0 kB *\n\t                 * SwapTotal: 0 kB SwapFree: 0 kB Dirty: 0 kB Writeback: 0 kB AnonPages:\n\t                 * 52688 kB Mapped: 17960 kB Slab: 3816 kB SReclaimable: 936 kB\n\t                 * SUnreclaim: 2880 kB PageTables: 5260 kB NFS_Unstable: 0 kB Bounce: 0\n\t                 * kB WritebackTmp: 0 kB CommitLimit: 47048 kB Committed_AS: 1483784 kB\n\t                 * VmallocTotal: 876544 kB VmallocUsed: 15456 kB VmallocChunk: 829444 kB\n\t                 * #\n\t                 * \n\t                 * 下面先对\"/proc/meminfo\"文件里列出的字段进行粗略解释： MemTotal: 所有可用RAM大小。 MemFree:\n\t                 * LowFree与HighFree的总和，被系统留着未使用的内存。 Buffers: 用来给文件做缓冲大小。 Cached:\n\t                 * 被高速缓冲存储器（cache memory）用的内存的大小（等于diskcache minus SwapCache）。\n\t                 * SwapCached:被高速缓冲存储器（cache\n\t                 * memory）用的交换空间的大小。已经被交换出来的内存，仍然被存放在swapfile中，\n\t                 * 用来在需要的时候很快的被替换而不需要再次打开I/O端口。 Active:\n\t                 * 在活跃使用中的缓冲或高速缓冲存储器页面文件的大小，除非非常必要，否则不会被移作他用。 Inactive:\n\t                 * 在不经常使用中的缓冲或高速缓冲存储器页面文件的大小，可能被用于其他途径。 SwapTotal: 交换空间的总大小。 SwapFree:\n\t                 * 未被使用交换空间的大小。 Dirty: 等待被写回到磁盘的内存大小。 Writeback: 正在被写回到磁盘的内存大小。\n\t                 * AnonPages：未映射页的内存大小。 Mapped: 设备和文件等映射的大小。 Slab:\n\t                 * 内核数据结构缓存的大小，可以减少申请和释放内存带来的消耗。 SReclaimable:可收回Slab的大小。\n\t                 * SUnreclaim：不可收回Slab的大小（SUnreclaim+SReclaimable＝Slab）。\n\t                 * PageTables：管理内存分页页面的索引表的大小。 NFS_Unstable:不稳定页表的大小。\n\t                 * 要获取android手机总内存大小，只需读取\"/proc/meminfo\"文件的第1行，并进行简单的字符串处理即可。\n\t                 */\n\t                String availMemory = getAvailMemory();\n\t                String totalMemory = getTotalMemory();\n\t                return \"可用内存=\" + availMemory + \"\\n\" + \"总内存=\" + totalMemory;\n\t\n\t        }// 手机的内存信息主要在/proc/meminfo文件中，其中第一行是总内存，而剩余内存可通过ActivityManager.MemoryInfo得到。\n\t\n\t        private String getAvailMemory() {// 获取android当前可用内存大小\n\t                ActivityManager am = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);\n\t                MemoryInfo mi = new MemoryInfo();\n\t                am.getMemoryInfo(mi);\n\t                // mi.availMem; 当前系统的可用内存\n\t                return Formatter.formatFileSize(getBaseContext(), mi.availMem);// 将获取的内存大小规格化\n\t        }\n\t\n\t        private String getTotalMemory() {\n\t                String str1 = \"/proc/meminfo\";// 系统内存信息文件\n\t                String str2;\n\t                String[] arrayOfString;\n\t                long initial_memory = 0;\n\t                try {\n\t                        FileReader localFileReader = new FileReader(str1);\n\t                        BufferedReader localBufferedReader = new BufferedReader(\n\t                                        localFileReader, 8192);\n\t                        str2 = localBufferedReader.readLine();// 读取meminfo第一行，系统总内存大小\n\t\n\t                        arrayOfString = str2.split(\"\\\\s+\");\n\t                        for (String num : arrayOfString) {\n\t                                Log.i(str2, num + \"\\t\");\n\t                        }\n\t\n\t                        initial_memory = Integer.valueOf(arrayOfString[1]).intValue() * 1024;// 获得系统总内存，单位是KB，乘以1024转换为Byte\n\t                        localBufferedReader.close();\n\t\n\t                } catch (IOException e) {\n\t                }\n\t                return Formatter.formatFileSize(getBaseContext(), initial_memory);// Byte转换为KB或者MB，内存大小规格化\n\t        }\n\t\n\t        // 获取手机CPU信息\n\t        private String getCpuInfo() {\n\t                String str1 = \"/proc/cpuinfo\";\n\t                String str2 = \"\";\n\t                String[] cpuInfo = { \"\", \"\" }; // 1-cpu型号 //2-cpu频率\n\t                String[] arrayOfString;\n\t                try {\n\t                        FileReader fr = new FileReader(str1);\n\t                        BufferedReader localBufferedReader = new BufferedReader(fr, 8192);\n\t                        str2 = localBufferedReader.readLine();\n\t                        arrayOfString = str2.split(\"\\\\s+\");\n\t                        for (int i = 2; i < arrayOfString.length; i++) {\n\t                                cpuInfo[0] = cpuInfo[0] + arrayOfString[i] + \" \";\n\t                        }\n\t                        str2 = localBufferedReader.readLine();\n\t                        arrayOfString = str2.split(\"\\\\s+\");\n\t                        cpuInfo[1] += arrayOfString[2];\n\t                        localBufferedReader.close();\n\t                } catch (IOException e) {\n\t                }\n\t                // Log.i(TAG, \"cpuinfo:\" + cpuInfo[0] + \" \" + cpuInfo[1]);\n\t                return \"1-cpu型号:\" + cpuInfo[0] + \"2-cpu频率:\" + cpuInfo[1];\n\t        }// 和内存信息同理，cpu信息可通过读取/proc/cpuinfo文件来得到，其中第一行为cpu型号，第二行为cpu频率。\n\t\n\t        /*\n\t         * 一、Android 获取手机中已安装apk文件信息(PackageInfo、ResolveInfo)(应用图片、应用名、包名等)\n\t         * 1、通过PackageManager可获取手机端已安装的apk文件的信息，具体代码如下: PackageManager\n\t         * packageManager = this.getPackageManager(); List<PackageInfo>\n\t         * packageInfoList = packageManager.getInstalledPackages(0);\n\t         * 通过上述方法，可得到手机中安装的所有应用程序，包括手动安装的apk包的信息、、系统预装的应用软件的信息，要区分这两类软件可使用以下方法:\n\t         * （a）从packageInfoList获取的packageInfo\n\t         * ，再通过packageInfo.applicationInfo获取applicationInfo。\n\t         * （b）判断(applicationInfo.flags &\n\t         * ApplicationInfo.FLAG_SYSTEM)的值，该值大于0时，表示获取的应用为系统预装的应用，反之则为手动安装的应用。\n\t         * (1)获取应用的代码: public static List<PackageInfo> getAllApps(Context context) {\n\t         * List<PackageInfo> apps = new ArrayList<PackageInfo>(); PackageManager\n\t         * pManager = context.getPackageManager(); //获取手机内所有应用 List<PackageInfo>\n\t         * paklist = pManager.getInstalledPackages(0); for (int i = 0; i <\n\t         * paklist.size(); i++) { PackageInfo pak = (PackageInfo) paklist.get(i);\n\t         * //判断是否为非系统预装的应用程序 if ((pak.applicationInfo.flags &\n\t         * pak.applicationInfo.FLAG_SYSTEM) <= 0) { apps.add(pak); } } return apps;\n\t         * } (2)、获取图片、应用名、包名: PackageManager pManager =\n\t         * MessageSendActivity.this.getPackageManager(); List<PackageInfo> appList =\n\t         * Utils.getAllApps(MessageSendActivity.this); for(int\n\t         * i=0;i<appList.size();i++) { PackageInfo pinfo = appList.get(i); shareItem\n\t         * = new ShareItemInfo();\n\t         * shareItem.setIcon(pManager.getApplicationIcon(pinfo.applicationInfo));\n\t         * shareItem\n\t         * .setLabel(pManager.getApplicationLabel(pinfo.applicationInfo).toString\n\t         * ()); shareItem.setPackageName(pinfo.applicationInfo.packageName); }\n\t         * 其中ShareItemInfo 类自己写的，各位可以忽略 (3)获取支持分享的应用的代码： public static\n\t         * List<ResolveInfo> getShareApps(Context context){ List<ResolveInfo> mApps\n\t         * = new ArrayList<ResolveInfo>(); Intent intent=new\n\t         * Intent(Intent.ACTION_SEND,null);\n\t         * intent.addCategory(Intent.CATEGORY_DEFAULT);\n\t         * intent.setType(\"text/plain\"); PackageManager pManager =\n\t         * context.getPackageManager(); mApps =\n\t         * pManager.queryIntentActivities(intent\n\t         * ,PackageManager.COMPONENT_ENABLED_STATE_DEFAULT); return mApps; }\n\t         * 由于该方法，返回的并不是PackageInfo 对象。而是ResolveInfo。因此获取图片、应用名、包名的方法不一样，如下：\n\t         * PackageManager pManager = MessageSendActivity.this.getPackageManager();\n\t         * List<ResolveInfo> resolveList =\n\t         * Utils.getShareApps(MessageSendActivity.this); for(int\n\t         * i=0;i<resolveList.size();i++) { ResolveInfo resolve = resolveList.get(i);\n\t         * ShareItemInfo shareItem = new ShareItemInfo(); //set Icon\n\t         * shareItem.setIcon(resolve.loadIcon(pManager)); //set Application Name\n\t         * shareItem.setLabel(resolve.loadLabel(pManager).toString()); //set Package\n\t         * Name shareItem.setPackageName(resolve.activityInfo.packageName); } 总结： 通过\n\t         * PackageInfo 获取具体信息方法： 包名获取方法：packageInfo.packageName\n\t         * icon获取获取方法：packageManager.getApplicationIcon(applicationInfo)\n\t         * 应用名称获取方法：packageManager.getApplicationLabel(applicationInfo)\n\t         * 使用权限获取方法：packageManager\n\t         * .getPackageInfo(packageName,PackageManager.GET_PERMISSIONS)\n\t         * .requestedPermissions 通过 ResolveInfo 获取具体信息方法：\n\t         * 包名获取方法：resolve.activityInfo.packageName\n\t         * icon获取获取方法：resolve.loadIcon(packageManager)\n\t         * 应用名称获取方法：resolve.loadLabel(packageManager).toString()\n\t         */\n\t        public String getSimCardInfo() {\n\t                // 在manifest.xml文件中要添加\n\t                // <uses-permission android:name=\"android.permission.READ_PHONE_STATE\"/>\n\t                /*\n\t                 * TelephonyManager类主要提供了一系列用于访问与手机通讯相关的状态和信息的get方法。其中包括手机SIM的状态和信息\n\t                 * 、电信网络的状态及手机用户的信息。\n\t                 * 在应用程序中可以使用这些get方法获取相关数据。TelephonyManager类的对象可以通过Context\n\t                 * .getSystemService(Context.TELEPHONY_SERVICE)\n\t                 * 方法来获得，需要注意的是有些通讯信息的获取对应用程序的权限有一定的限制\n\t                 * ，在开发的时候需要为其添加相应的权限。以下列出TelephonyManager类所有方法及说明：\n\t                 * TelephonyManager提供设备上获取通讯服务信息的入口。 应用程序可以使用这个类方法确定的电信服务商和国家\n\t                 * 以及某些类型的用户访问信息。 应用程序也可以注册一个监听器到电话收状态的变化。不需要直接实例化这个类\n\t                 * 使用Context.getSystemService (Context.TELEPHONY_SERVICE)来获取这个类的实例。\n\t                 */\n\t\n\t                // 解释：\n\t                // IMSI是国际移动用户识别码的简称(International Mobile Subscriber Identity)\n\t                // IMSI共有15位，其结构如下：\n\t                // MCC+MNC+MIN\n\t                // MCC：Mobile Country Code，移动国家码，共3位，中国为460;\n\t                // MNC:Mobile NetworkCode，移动网络码，共2位\n\t                // 在中国，移动的代码为电00和02，联通的代码为01，电信的代码为03\n\t                // 合起来就是（也是Android手机中APN配置文件中的代码）：\n\t                // 中国移动：46000 46002\n\t                // 中国联通：46001\n\t                // 中国电信：46003\n\t                // 举例，一个典型的IMSI号码为460030912121001\n\t\n\t                // IMEI是International Mobile Equipment Identity （国际移动设备标识）的简称\n\t                // IMEI由15位数字组成的”电子串号”，它与每台手机一一对应，而且该码是全世界唯一的\n\t                // 其组成为：\n\t                // 1. 前6位数(TAC)是”型号核准号码”，一般代表机型\n\t                // 2. 接着的2位数(FAC)是”最后装配号”，一般代表产地\n\t                // 3. 之后的6位数(SNR)是”串号”，一般代表生产顺序号\n\t                // 4. 最后1位数(SP)通常是”0″，为检验码，目前暂备用\n\t\n\t                TelephonyManager tm = (TelephonyManager) this\n\t                                .getSystemService(TELEPHONY_SERVICE);\n\t                /*\n\t                 * 电话状态： 1.tm.CALL_STATE_IDLE=0 无活动，无任何状态时 2.tm.CALL_STATE_RINGING=1\n\t                 * 响铃，电话进来时 3.tm.CALL_STATE_OFFHOOK=2 摘机\n\t                 */\n\t                tm.getCallState();// int\n\t\n\t                /*\n\t                 * 电话方位：\n\t                 */\n\t                // 返回当前移动终端的位置\n\t                CellLocation location = tm.getCellLocation();\n\t                // 请求位置更新，如果更新将产生广播，接收对象为注册LISTEN_CELL_LOCATION的对象，需要的permission名称为\n\t                // ACCESS_COARSE_LOCATION。\n\t                location.requestLocationUpdate();\n\t\n\t                /**\n\t                 * 获取数据活动状态\n\t                 * \n\t                 * DATA_ACTIVITY_IN 数据连接状态：活动，正在接受数据 DATA_ACTIVITY_OUT 数据连接状态：活动，正在发送数据\n\t                 * DATA_ACTIVITY_INOUT 数据连接状态：活动，正在接受和发送数据 DATA_ACTIVITY_NONE\n\t                 * 数据连接状态：活动，但无数据发送和接受\n\t                 */\n\t                tm.getDataActivity();\n\t\n\t                /**\n\t                 * 获取数据连接状态\n\t                 * \n\t                 * DATA_CONNECTED 数据连接状态：已连接 DATA_CONNECTING 数据连接状态：正在连接\n\t                 * DATA_DISCONNECTED 数据连接状态：断开 DATA_SUSPENDED 数据连接状态：暂停\n\t                 */\n\t                tm.getDataState();\n\t\n\t                /**\n\t                 * 返回当前移动终端的唯一标识，设备ID\n\t                 * \n\t                 * 如果是GSM网络，返回IMEI；如果是CDMA网络，返回MEID Return null if device ID is not\n\t                 * available.\n\t                 */\n\t                String Imei = tm.getDeviceId();// String\n\t\n\t                /*\n\t                 * 返回移动终端的软件版本，例如：GSM手机的IMEI/SV码。 设备的软件版本号： 例如：the IMEI/SV(software\n\t                 * version) for GSM phones. Return null if the software version is not\n\t                 * available.\n\t                 */\n\t                tm.getDeviceSoftwareVersion();// String\n\t\n\t                /*\n\t                 * 手机号： GSM手机的 MSISDN. Return null if it is unavailable.\n\t                 */\n\t                String phoneNum = tm.getLine1Number();// String\n\t\n\t                /*\n\t                 * 获取ISO标准的国家码，即国际长途区号。 注意：仅当用户已在网络注册后有效。 在CDMA网络中结果也许不可靠。\n\t                 */\n\t                tm.getNetworkCountryIso();// String\n\t\n\t                /*\n\t                 * MCC+MNC(mobile country code + mobile network code) 注意：仅当用户已在网络注册时有效。\n\t                 * 在CDMA网络中结果也许不可靠。\n\t                 */\n\t                tm.getNetworkOperator();// String\n\t\n\t                /*\n\t                 * 按照字母次序的current registered operator(当前已注册的用户)的名字 注意：仅当用户已在网络注册时有效。\n\t                 * 在CDMA网络中结果也许不可靠。\n\t                 */\n\t\n\t                tm.getNetworkOperatorName();// String\n\t\n\t                /*\n\t                 * 当前使用的网络类型： 例如： NETWORK_TYPE_UNKNOWN 网络类型未知 0 NETWORK_TYPE_GPRS GPRS网络\n\t                 * 1 NETWORK_TYPE_EDGE EDGE网络 2 NETWORK_TYPE_UMTS UMTS网络 3\n\t                 * NETWORK_TYPE_HSDPA HSDPA网络 8 NETWORK_TYPE_HSUPA HSUPA网络 9\n\t                 * NETWORK_TYPE_HSPA HSPA网络 10 NETWORK_TYPE_CDMA CDMA网络,IS95A 或 IS95B. 4\n\t                 * NETWORK_TYPE_EVDO_0 EVDO网络, revision 0. 5 NETWORK_TYPE_EVDO_A EVDO网络,\n\t                 * revision A. 6 NETWORK_TYPE_1xRTT 1xRTT网络 7\n\t                 */\n\t                tm.getNetworkType();// int\n\t\n\t                /*\n\t                 * 手机类型： 例如： PHONE_TYPE_NONE 无信号 PHONE_TYPE_GSM GSM信号 PHONE_TYPE_CDMA\n\t                 * CDMA信号\n\t                 */\n\t                tm.getPhoneType();// int\n\t\n\t                /*\n\t                 * Returns the ISO country code equivalent for the SIM provider's\n\t                 * country code. 获取ISO国家码，相当于提供SIM卡的国家码。\n\t                 */\n\t                tm.getSimCountryIso();// String\n\t\n\t                /*\n\t                 * Returns the MCC+MNC (mobile country code + mobile network code) of\n\t                 * the provider of the SIM. 5 or 6 decimal digits.\n\t                 * 获取SIM卡提供的移动国家码和移动网络码.5或6位的十进制数字. SIM卡的状态必须是\n\t                 * SIM_STATE_READY(使用getSimState()判断).\n\t                 */\n\t                tm.getSimOperator();// String\n\t\n\t                /*\n\t                 * 服务商名称： 例如：中国移动、联通 SIM卡的状态必须是 SIM_STATE_READY(使用getSimState()判断).\n\t                 */\n\t                tm.getSimOperatorName();// String\n\t\n\t                /*\n\t                 * SIM卡的序列号： 需要权限：READ_PHONE_STATE\n\t                 */\n\t                tm.getSimSerialNumber();// String\n\t\n\t                /*\n\t                 * SIM的状态信息： SIM_STATE_UNKNOWN 未知状态 0 SIM_STATE_ABSENT 没插卡 1\n\t                 * SIM_STATE_PIN_REQUIRED 锁定状态，需要用户的PIN码解锁 2 SIM_STATE_PUK_REQUIRED\n\t                 * 锁定状态，需要用户的PUK码解锁 3 SIM_STATE_NETWORK_LOCKED 锁定状态，需要网络的PIN码解锁 4\n\t                 * SIM_STATE_READY 就绪状态 5\n\t                 */\n\t                tm.getSimState();// int\n\t\n\t                /*\n\t                 * 唯一的用户ID： 例如：IMSI(国际移动用户识别码) for a GSM phone. 需要权限：READ_PHONE_STATE\n\t                 */\n\t                tm.getSubscriberId();// String\n\t\n\t                /*\n\t                 * 取得和语音邮件相关的标签，即为识别符 需要权限：READ_PHONE_STATE\n\t                 */\n\t\n\t                tm.getVoiceMailAlphaTag();// String\n\t\n\t                /*\n\t                 * 获取语音邮件号码： 需要权限：READ_PHONE_STATE\n\t                 */\n\t                tm.getVoiceMailNumber();// String\n\t\n\t                /*\n\t                 * ICC卡是否存在\n\t                 */\n\t                tm.hasIccCard();// boolean\n\t\n\t                /*\n\t                 * 是否漫游: (在GSM用途下)\n\t                 */\n\t                tm.isNetworkRoaming();//\n\t\n\t                String ProvidersName = null;\n\t                // 返回唯一的用户ID;就是这张卡的编号神马的\n\t                String IMSI = tm.getSubscriberId(); // 国际移动用户识别码\n\t                // IMSI号前面3位460是国家，紧接着后面2位00 02是中国移动，01是中国联通，03是中国电信。\n\t                System.out.println(IMSI);\n\t                if (IMSI.startsWith(\"46000\") || IMSI.startsWith(\"46002\")) {\n\t                        ProvidersName = \"中国移动\";\n\t                } else if (IMSI.startsWith(\"46001\")) {\n\t\n\t                        ProvidersName = \"中国联通\";\n\t\n\t                } else if (IMSI.startsWith(\"46003\")) {\n\t\n\t                        ProvidersName = \"中国电信\";\n\t\n\t                }\n\t                // 返回当前移动终端附近移动终端的信息\n\t                /*\n\t                 * 附近的电话的信息: 类型：List<NeighboringCellInfo>\n\t                 * 需要权限：android.Manifest.permission#ACCESS_COARSE_UPDATES\n\t                 */\n\t                List<NeighboringCellInfo> infos = tm.getNeighboringCellInfo();\n\t                for (NeighboringCellInfo info : infos) {\n\t                        // 获取邻居小区号\n\t                        int cid = info.getCid();\n\t                        // 获取邻居小区LAC，LAC:\n\t                        // 位置区域码。为了确定移动台的位置，每个GSM/PLMN的覆盖区都被划分成许多位置区，LAC则用于标识不同的位置区。\n\t                        info.getLac();\n\t                        info.getNetworkType();\n\t                        info.getPsc();\n\t                        // 获取邻居小区信号强度\n\t                        info.getRssi();\n\t                }\n\t                return \"手机号码:\" + phoneNum + \"\\n\" + \"服务商：\" + ProvidersName + \"\\n\"\n\t                                + \"IMEI：\" + Imei;\n\t\n\t        }\n\t\n\t        // 显示信息对话框\n\t        public void showDialog(String title, String info) {\n\t                AlertDialog dialog = new AlertDialog.Builder(this)\n\t                                .setTitle(title)\n\t                                .setMessage(info)\n\t                                .setPositiveButton(\"close\",\n\t                                                new DialogInterface.OnClickListener() {\n\t                                                        @Override\n\t                                                        public void onClick(DialogInterface dialog,\n\t                                                                        int which) {\n\t                                                                dialog.cancel();\n\t                                                                dialog = null;\n\t                                                        }\n\t                                                }).create();\n\t                dialog.show();\n\t        }\n\t}\n\n\n```\n","source":"_posts/mobile-phone-information-acquisition.md","raw":"title: android之获取手机信息\ncategories: [Android]\ntags: [Android]\ndate: 2013-07-18\n---\nandroid获取手机信息（号码，内存，CPU，分辨率，MAC，IP，SD卡，IMEI,经纬度，信号强度等等）\n\n<!-- more -->\n\n```java\n\tpackage com.android.xiaomolong.example.apkdemo;\t\n\timport java.io.BufferedReader;\n\timport java.io.File;\n\timport java.io.FileReader;\n\timport java.io.IOException;\n\timport java.io.InputStream;\n\timport java.io.InputStreamReader;\n\timport java.net.HttpURLConnection;\n\timport java.net.InetAddress;\n\timport java.net.MalformedURLException;\n\timport java.net.NetworkInterface;\n\timport java.net.SocketException;\n\timport java.net.URL;\n\timport java.net.URLConnection;\n\timport java.util.Enumeration;\n\timport java.util.List;\n\t\n\timport android.app.Activity;\n\timport android.app.ActivityManager;\n\timport android.app.ActivityManager.MemoryInfo;\n\timport android.app.AlertDialog;\n\timport android.content.Context;\n\timport android.content.DialogInterface;\n\timport android.location.Criteria;\n\timport android.location.Location;\n\timport android.location.LocationListener;\n\timport android.location.LocationManager;\n\timport android.net.ConnectivityManager;\n\timport android.net.NetworkInfo;\n\timport android.net.wifi.WifiInfo;\n\timport android.net.wifi.WifiManager;\n\timport android.os.Bundle;\n\timport android.os.Environment;\n\timport android.os.StatFs;\n\timport android.telephony.CellLocation;\n\timport android.telephony.NeighboringCellInfo;\n\timport android.telephony.PhoneStateListener;\n\timport android.telephony.ServiceState;\n\timport android.telephony.SignalStrength;\n\timport android.telephony.TelephonyManager;\n\timport android.telephony.cdma.CdmaCellLocation;\n\timport android.telephony.gsm.GsmCellLocation;\n\timport android.text.format.Formatter;\n\timport android.util.DisplayMetrics;\n\timport android.util.Log;\n\timport android.view.Gravity;\n\timport android.view.WindowManager;\n\timport android.widget.Toast;\n\t\n\t/**\n\t * \n\t * @author 小尛龙\n\t * \n\t */\n\tpublic class MainActivity extends Activity {\n\t\n\t        @Override\n\t        protected void onCreate(Bundle savedInstanceState) {\n\t                super.onCreate(savedInstanceState);\n\t                setContentView(R.layout.activity_main);\n\t\n\t                Log.d(\"wxl\", getSystemMemory());\n\t\n\t        }\n\t\n\t        // 获取Android手机中SD卡存储信息 获取剩余空间\n\t        public void getSDCardInfo() {\n\t                // 在manifest.xml文件中要添加\n\t                /*\n\t                 * <uses-permission\n\t                 * android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\">\n\t                 * </uses-permission>\n\t                 */\n\t                // 需要判断手机上面SD卡是否插好，如果有SD卡的情况下，我们才可以访问得到并获取到它的相关信息，当然以下这个语句需要用if做判断\n\t                if (Environment.getExternalStorageState().equals(\n\t                                Environment.MEDIA_MOUNTED)) {\n\t                        // 取得sdcard文件路径\n\t                        File path = Environment.getExternalStorageDirectory();\n\t                        StatFs statfs = new StatFs(path.getPath());\n\t                        // 获取block的SIZE\n\t                        long blocSize = statfs.getBlockSize();\n\t                        // 获取BLOCK数量\n\t                        long totalBlocks = statfs.getBlockCount();\n\t                        // 空闲的Block的数量\n\t                        long availaBlock = statfs.getAvailableBlocks();\n\t                        // 计算总空间大小和空闲的空间大小\n\t                        // 存储空间大小跟空闲的存储空间大小就被计算出来了。\n\t                        long availableSize = blocSize * availaBlock;\n\t                        // (availableBlocks * blockSize)/1024 KIB 单位\n\t                        // (availableBlocks * blockSize)/1024 /1024 MIB单位\n\t                        long allSize = blocSize * totalBlocks;\n\t                }\n\t\n\t        }\n\t\n\t        // 获取手机ip method-1\n\t        public String getLocalIpAddress() {\n\t                try {\n\t                        for (Enumeration<NetworkInterface> en = NetworkInterface\n\t                                        .getNetworkInterfaces(); en.hasMoreElements();) {\n\t                                NetworkInterface intf = en.nextElement();\n\t                                for (Enumeration<InetAddress> enumIpAddr = intf\n\t                                                .getInetAddresses(); enumIpAddr.hasMoreElements();) {\n\t                                        InetAddress inetAddress = enumIpAddr.nextElement();\n\t                                        if (!inetAddress.isLoopbackAddress()) {\n\t                                                Toast.makeText(this,\n\t                                                                inetAddress.getHostAddress().toString(), 3000)\n\t                                                                .show();\n\t                                                return inetAddress.getHostAddress().toString();\n\t                                        }\n\t                                }\n\t                        }\n\t                } catch (SocketException ex) {\n\t                        ex.printStackTrace();\n\t                        // Log.e(\"ifo\", ex.toString());\n\t                }\n\t                return \"\";\n\t        }\n\t\n\t        // 需要权限\n\t        // <uses-permission\n\t        // android:name=\"android.permission.ACCESS_WIFI_STATE\"></uses-permission>\n\t        // <uses-permission\n\t        // android:name=\"android.permission.INTERNET\"></uses-permission>\n\t\n\t        // 获取手机ip method-2\n\t        // 首先设置用户权限\n\t        // <uses-permission\n\t        // android:name=\"android.permission.ACCESS_WIFI_STATE\"></uses-permission>\n\t        // <uses-permission\n\t        // android:name=\"android.permission.CHANGE_WIFI_STATE\"></uses-permission>\n\t        // <uses-permission\n\t        // android:name=\"android.permission.WAKE_LOCK\"></uses-permission>\n\t        public String getLocalIpAddress2() {\n\t                // 获取wifi服务\n\t                WifiManager wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);\n\t                // 判断wifi是否开启\n\t                if (!wifiManager.isWifiEnabled()) {\n\t                        wifiManager.setWifiEnabled(true);\n\t                }\n\t                WifiInfo wifiInfo = wifiManager.getConnectionInfo();\n\t                int ipAddress = wifiInfo.getIpAddress();\n\t                String ip = intToIp(ipAddress);\n\t                return ip;\n\t        }\n\t\n\t        private String intToIp(int i) {\n\t                return (i & 0xFF) + \".\" + ((i >> 8) & 0xFF) + \".\" + ((i >> 16) & 0xFF)\n\t                                + \".\" + (i >> 24 & 0xFF);\n\t        }\n\t\n\t        // 查看本机外网IP\n\t        /*\n\t         * 该方法需要设备支持上网 查看\n\t         * System.out.println((GetNetIp(\"http://fw.qq.com/ipaddress\"))); 加权限\n\t         * <uses-permission\n\t         * android:name=\"android.permission.INTERNET\"></uses-permission>\n\t         * 通过获取http://fw.qq.com/ipaddress网页取得外网IP 这里有几个查看IP的网址然后提取IP试试。\n\t         * http://ip168.com/ http://www.cmyip.com/ http://city.ip138.com/ip2city.asp\n\t         */\n\t        public String GetNetIp(String ipaddr) {\n\t                URL infoUrl = null;\n\t                InputStream inStream = null;\n\t                try {\n\t                        infoUrl = new URL(ipaddr);\n\t                        URLConnection connection = infoUrl.openConnection();\n\t                        HttpURLConnection httpConnection = (HttpURLConnection) connection;\n\t                        int responseCode = httpConnection.getResponseCode();\n\t                        if (responseCode == HttpURLConnection.HTTP_OK) {\n\t                                inStream = httpConnection.getInputStream();\n\t                                BufferedReader reader = new BufferedReader(\n\t                                                new InputStreamReader(inStream, \"utf-8\"));\n\t                                StringBuilder strber = new StringBuilder();\n\t                                String line = null;\n\t                                while ((line = reader.readLine()) != null)\n\t                                        strber.append(line + \"\\n\");\n\t                                inStream.close();\n\t                                return strber.toString();\n\t                        }\n\t                } catch (MalformedURLException e) {\n\t                        // TODO Auto-generated catch block\n\t                        e.printStackTrace();\n\t                } catch (IOException e) {\n\t                        // TODO Auto-generated catch block\n\t                        e.printStackTrace();\n\t                }\n\t                return \"\";\n\t        }\n\t\n\t        // 获取手机MAC地址\n\t        private String getMacAddress() {\n\t                String result = \"\";\n\t                WifiManager wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);\n\t                WifiInfo wifiInfo = wifiManager.getConnectionInfo();\n\t                result = wifiInfo.getMacAddress();\n\t                // Log.i(TAG, \"macAdd:\" + result);\n\t                return result;\n\t        }\n\t\n\t        // 获取手机屏幕高度\n\t        private String getWeithAndHeight() {\n\t                // 这种方式在service中无法使用，\n\t                DisplayMetrics dm = new DisplayMetrics();\n\t                getWindowManager().getDefaultDisplay().getMetrics(dm);\n\t                int width = dm.widthPixels; // 宽\n\t                int height = dm.heightPixels; // 高\n\t                float density = dm.density; // 屏幕密度（0.75 / 1.0 / 1.5）\n\t                int densityDpi = dm.densityDpi; // 屏幕密度DPI（120 / 160 / 240）\n\t                // 在service中也能得到高和宽\n\t                WindowManager mWindowManager = (WindowManager) getSystemService(Context.WINDOW_SERVICE);\n\t                width = mWindowManager.getDefaultDisplay().getWidth();\n\t                height = mWindowManager.getDefaultDisplay().getHeight();\n\t\n\t                // 居中显示Toast\n\t                Toast msg = Toast.makeText(this, \"宽=\" + width + \"   高=\" + height,\n\t                                Toast.LENGTH_LONG);\n\t                msg.setGravity(Gravity.CENTER, msg.getXOffset() / 2,\n\t                                msg.getYOffset() / 2);\n\t                msg.show();\n\t                return \"(像素)宽:\" + width + \"\\n\" + \"(像素)高:\" + height + \"\\n\"\n\t                                + \"屏幕密度（0.75 / 1.0 / 1.5）:\" + density + \"\\n\"\n\t                                + \"屏幕密度DPI（120 / 160 / 240）:\" + densityDpi + \"\\n\";\n\t                /*\n\t                 * 下面的代码即可获取屏幕的尺寸。 在一个Activity的onCreate方法中，写入如下代码： DisplayMetrics metric\n\t                 * = new DisplayMetrics();\n\t                 * getWindowManager().getDefaultDisplay().getMetrics(metric); int width\n\t                 * = metric.widthPixels; // 屏幕宽度（像素） int height = metric.heightPixels;\n\t                 * // 屏幕高度（像素） float density = metric.density; // 屏幕密度（0.75 / 1.0 / 1.5）\n\t                 * int densityDpi = metric.densityDpi; // 屏幕密度DPI（120 / 160 / 240）\n\t                 * \n\t                 * 但是，需要注意的是，在一个低密度的小屏手机上，仅靠上面的代码是不能获取正确的尺寸的。\n\t                 * 比如说，一部240x320像素的低密度手机，如果运行上述代码，获取到的屏幕尺寸是320x427。\n\t                 * 因此，研究之后发现，若没有设定多分辨率支持的话\n\t                 * ，Android系统会将240x320的低密度（120）尺寸转换为中等密度（160）对应的尺寸，\n\t                 * 这样的话就大大影响了程序的编码。所以，需要在工程的AndroidManifest\n\t                 * .xml文件中，加入supports-screens节点，具体的内容如下： <supports-screens\n\t                 * android:smallScreens=\"true\" android:normalScreens=\"true\"\n\t                 * android:largeScreens=\"true\" android:resizeable=\"true\"\n\t                 * android:anyDensity=\"true\" />\n\t                 * 这样的话，当前的Android程序就支持了多种分辨率，那么就可以得到正确的物理尺寸了。\n\t                 */\n\t        }\n\t\n\t        // 获取手机经纬度\n\t        public void getLocation() {\n\t                // 1. 创建一个 LocationManager对象。\n\t                LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\n\t                // 2. 创建一个 LocationListener对象。\n\t                LocationListener myGPSListener = new LocationListener() {\n\t                        // 一旦Location发生改变就会调用这个方法\n\t                        public void onLocationChanged(Location location) {\n\t                                double latitude = location.getLatitude();\n\t                                double longitude = location.getLongitude();\n\t                        }\n\t\n\t                        public void onStatusChanged(String provider, int status,\n\t                                        Bundle extras) {\n\t                        }\n\t\n\t                        public void onProviderEnabled(String provider) {\n\t                        }\n\t\n\t                        public void onProviderDisabled(String provider) {\n\t                        }\n\t                };\n\t                // 3.向LocationManager 注册一个LocationListener。\n\t                Criteria criteria = new Criteria();\n\t                criteria.setAccuracy(Criteria.ACCURACY_COARSE);\n\t                criteria.setAltitudeRequired(false);\n\t                criteria.setCostAllowed(true);\n\t                criteria.setPowerRequirement(Criteria.POWER_LOW);\n\t                String provider = locationManager.getBestProvider(criteria, true); // 根据Criteria\n\t                                                                                                                                                        // 的设置获取一个最佳的Provider\n\t                locationManager\n\t                                .requestLocationUpdates(provider, 5000, 0, myGPSListener);\n\t                // 4.移除LocationManager 注册的 LocationListener。\n\t                locationManager.removeUpdates(myGPSListener);\n\t\n\t        }\n\t\n\t        // 当前网络是否连接\n\t        public boolean isNetConnecting() {\n\t                ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n\t                NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n\t                if (networkInfo == null || !networkInfo.isConnected()) {\n\t                        // info.setConnected(false);\n\t                        return false;\n\t                } else {\n\t                        // info.setConnected(true);\n\t                        return true;\n\t                }\n\t        }\n\t\n\t        // 获取信号强度\n\t        public void getPhoneState() {\n\t                // 1. 创建telephonyManager 对象。\n\t                TelephonyManager telephonyManager = (TelephonyManager) /* context. */getSystemService(Context.TELEPHONY_SERVICE);\n\t                // 2. 创建PhoneStateListener 对象\n\t                PhoneStateListener MyPhoneListener = new PhoneStateListener() {\n\t                        @Override\n\t                        public void onCellLocationChanged(CellLocation location) {\n\t                                if (location instanceof GsmCellLocation) {// gsm网络\n\t                                        int CID = ((GsmCellLocation) location).getCid();\n\t                                } else if (location instanceof CdmaCellLocation) {// 其他CDMA等网络\n\t                                        int ID = ((CdmaCellLocation) location).getBaseStationId();\n\t                                }\n\t                        }\n\t\n\t                        @Override\n\t                        public void onServiceStateChanged(ServiceState serviceState) {\n\t                                super.onServiceStateChanged(serviceState);\n\t                        }\n\t\n\t                        @Override\n\t                        public void onSignalStrengthsChanged(SignalStrength signalStrength) {\n\t                                int asu = signalStrength.getGsmSignalStrength();\n\t                                int dbm = -113 + 2 * asu; // 信号强度\n\t                                super.onSignalStrengthsChanged(signalStrength);\n\t                        }\n\t                };\n\t                // 3. 监听信号改变\n\t                telephonyManager.listen(MyPhoneListener,\n\t                                PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);\n\t\n\t                /*\n\t                 * 可能需要的权限 <uses-permission\n\t                 * android:name=\"android.permission.WAKE_LOCK\"></uses-permission>\n\t                 * <uses-permission\n\t                 * android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>\n\t                 * <uses-permission\n\t                 * android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n\t                 * <uses-permission android:name=\"android.permission.READ_PHONE_STATE\"\n\t                 * /> <uses-permission\n\t                 * android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\n\t                 */\n\t        }\n\t\n\t        // 获取手机可用内存和总内存\n\t        private String getSystemMemory() {\n\t                /*\n\t                 * 在Android开发中，有时候我们想获取手机的一些硬件信息，比如android手机的总内存和可用内存大小。这个该如何实现呢？\n\t                 * 通过读取文件\"/proc/meminfo\"\n\t                 * 的信息能够获取手机Memory的总量，而通过ActivityManager.getMemoryInfo\n\t                 * (ActivityManager.MemoryInfo)方法可以获取当前的可用Memory量。\n\t                 * \"/proc/meminfo\"文件记录了android手机的一些内存信息\n\t                 * ，在命令行窗口里输入\"adb shell\"，进入shell环境，输入\n\t                 * \"cat /proc/meminfo\"即可在命令行里显示meminfo文件的内容，具体如下所示。\n\t                 * \n\t                 * C:\\Users\\Figo>adb shell # cat /proc/meminfo cat /proc/meminfo\n\t                 * MemTotal: 94096 kB MemFree: 1684 kB Buffers: 16 kB Cached: 27160 kB\n\t                 * SwapCached: 0 kB Active: 35392 kB Inactive: 44180 kB Active(anon):\n\t                 * 26540 kB Inactive(anon): 28244 kB Active(file): 8852 kB\n\t                 * Inactive(file): 15936 kB Unevictable: 280 kB Mlocked: 0 kB *\n\t                 * SwapTotal: 0 kB SwapFree: 0 kB Dirty: 0 kB Writeback: 0 kB AnonPages:\n\t                 * 52688 kB Mapped: 17960 kB Slab: 3816 kB SReclaimable: 936 kB\n\t                 * SUnreclaim: 2880 kB PageTables: 5260 kB NFS_Unstable: 0 kB Bounce: 0\n\t                 * kB WritebackTmp: 0 kB CommitLimit: 47048 kB Committed_AS: 1483784 kB\n\t                 * VmallocTotal: 876544 kB VmallocUsed: 15456 kB VmallocChunk: 829444 kB\n\t                 * #\n\t                 * \n\t                 * 下面先对\"/proc/meminfo\"文件里列出的字段进行粗略解释： MemTotal: 所有可用RAM大小。 MemFree:\n\t                 * LowFree与HighFree的总和，被系统留着未使用的内存。 Buffers: 用来给文件做缓冲大小。 Cached:\n\t                 * 被高速缓冲存储器（cache memory）用的内存的大小（等于diskcache minus SwapCache）。\n\t                 * SwapCached:被高速缓冲存储器（cache\n\t                 * memory）用的交换空间的大小。已经被交换出来的内存，仍然被存放在swapfile中，\n\t                 * 用来在需要的时候很快的被替换而不需要再次打开I/O端口。 Active:\n\t                 * 在活跃使用中的缓冲或高速缓冲存储器页面文件的大小，除非非常必要，否则不会被移作他用。 Inactive:\n\t                 * 在不经常使用中的缓冲或高速缓冲存储器页面文件的大小，可能被用于其他途径。 SwapTotal: 交换空间的总大小。 SwapFree:\n\t                 * 未被使用交换空间的大小。 Dirty: 等待被写回到磁盘的内存大小。 Writeback: 正在被写回到磁盘的内存大小。\n\t                 * AnonPages：未映射页的内存大小。 Mapped: 设备和文件等映射的大小。 Slab:\n\t                 * 内核数据结构缓存的大小，可以减少申请和释放内存带来的消耗。 SReclaimable:可收回Slab的大小。\n\t                 * SUnreclaim：不可收回Slab的大小（SUnreclaim+SReclaimable＝Slab）。\n\t                 * PageTables：管理内存分页页面的索引表的大小。 NFS_Unstable:不稳定页表的大小。\n\t                 * 要获取android手机总内存大小，只需读取\"/proc/meminfo\"文件的第1行，并进行简单的字符串处理即可。\n\t                 */\n\t                String availMemory = getAvailMemory();\n\t                String totalMemory = getTotalMemory();\n\t                return \"可用内存=\" + availMemory + \"\\n\" + \"总内存=\" + totalMemory;\n\t\n\t        }// 手机的内存信息主要在/proc/meminfo文件中，其中第一行是总内存，而剩余内存可通过ActivityManager.MemoryInfo得到。\n\t\n\t        private String getAvailMemory() {// 获取android当前可用内存大小\n\t                ActivityManager am = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);\n\t                MemoryInfo mi = new MemoryInfo();\n\t                am.getMemoryInfo(mi);\n\t                // mi.availMem; 当前系统的可用内存\n\t                return Formatter.formatFileSize(getBaseContext(), mi.availMem);// 将获取的内存大小规格化\n\t        }\n\t\n\t        private String getTotalMemory() {\n\t                String str1 = \"/proc/meminfo\";// 系统内存信息文件\n\t                String str2;\n\t                String[] arrayOfString;\n\t                long initial_memory = 0;\n\t                try {\n\t                        FileReader localFileReader = new FileReader(str1);\n\t                        BufferedReader localBufferedReader = new BufferedReader(\n\t                                        localFileReader, 8192);\n\t                        str2 = localBufferedReader.readLine();// 读取meminfo第一行，系统总内存大小\n\t\n\t                        arrayOfString = str2.split(\"\\\\s+\");\n\t                        for (String num : arrayOfString) {\n\t                                Log.i(str2, num + \"\\t\");\n\t                        }\n\t\n\t                        initial_memory = Integer.valueOf(arrayOfString[1]).intValue() * 1024;// 获得系统总内存，单位是KB，乘以1024转换为Byte\n\t                        localBufferedReader.close();\n\t\n\t                } catch (IOException e) {\n\t                }\n\t                return Formatter.formatFileSize(getBaseContext(), initial_memory);// Byte转换为KB或者MB，内存大小规格化\n\t        }\n\t\n\t        // 获取手机CPU信息\n\t        private String getCpuInfo() {\n\t                String str1 = \"/proc/cpuinfo\";\n\t                String str2 = \"\";\n\t                String[] cpuInfo = { \"\", \"\" }; // 1-cpu型号 //2-cpu频率\n\t                String[] arrayOfString;\n\t                try {\n\t                        FileReader fr = new FileReader(str1);\n\t                        BufferedReader localBufferedReader = new BufferedReader(fr, 8192);\n\t                        str2 = localBufferedReader.readLine();\n\t                        arrayOfString = str2.split(\"\\\\s+\");\n\t                        for (int i = 2; i < arrayOfString.length; i++) {\n\t                                cpuInfo[0] = cpuInfo[0] + arrayOfString[i] + \" \";\n\t                        }\n\t                        str2 = localBufferedReader.readLine();\n\t                        arrayOfString = str2.split(\"\\\\s+\");\n\t                        cpuInfo[1] += arrayOfString[2];\n\t                        localBufferedReader.close();\n\t                } catch (IOException e) {\n\t                }\n\t                // Log.i(TAG, \"cpuinfo:\" + cpuInfo[0] + \" \" + cpuInfo[1]);\n\t                return \"1-cpu型号:\" + cpuInfo[0] + \"2-cpu频率:\" + cpuInfo[1];\n\t        }// 和内存信息同理，cpu信息可通过读取/proc/cpuinfo文件来得到，其中第一行为cpu型号，第二行为cpu频率。\n\t\n\t        /*\n\t         * 一、Android 获取手机中已安装apk文件信息(PackageInfo、ResolveInfo)(应用图片、应用名、包名等)\n\t         * 1、通过PackageManager可获取手机端已安装的apk文件的信息，具体代码如下: PackageManager\n\t         * packageManager = this.getPackageManager(); List<PackageInfo>\n\t         * packageInfoList = packageManager.getInstalledPackages(0);\n\t         * 通过上述方法，可得到手机中安装的所有应用程序，包括手动安装的apk包的信息、、系统预装的应用软件的信息，要区分这两类软件可使用以下方法:\n\t         * （a）从packageInfoList获取的packageInfo\n\t         * ，再通过packageInfo.applicationInfo获取applicationInfo。\n\t         * （b）判断(applicationInfo.flags &\n\t         * ApplicationInfo.FLAG_SYSTEM)的值，该值大于0时，表示获取的应用为系统预装的应用，反之则为手动安装的应用。\n\t         * (1)获取应用的代码: public static List<PackageInfo> getAllApps(Context context) {\n\t         * List<PackageInfo> apps = new ArrayList<PackageInfo>(); PackageManager\n\t         * pManager = context.getPackageManager(); //获取手机内所有应用 List<PackageInfo>\n\t         * paklist = pManager.getInstalledPackages(0); for (int i = 0; i <\n\t         * paklist.size(); i++) { PackageInfo pak = (PackageInfo) paklist.get(i);\n\t         * //判断是否为非系统预装的应用程序 if ((pak.applicationInfo.flags &\n\t         * pak.applicationInfo.FLAG_SYSTEM) <= 0) { apps.add(pak); } } return apps;\n\t         * } (2)、获取图片、应用名、包名: PackageManager pManager =\n\t         * MessageSendActivity.this.getPackageManager(); List<PackageInfo> appList =\n\t         * Utils.getAllApps(MessageSendActivity.this); for(int\n\t         * i=0;i<appList.size();i++) { PackageInfo pinfo = appList.get(i); shareItem\n\t         * = new ShareItemInfo();\n\t         * shareItem.setIcon(pManager.getApplicationIcon(pinfo.applicationInfo));\n\t         * shareItem\n\t         * .setLabel(pManager.getApplicationLabel(pinfo.applicationInfo).toString\n\t         * ()); shareItem.setPackageName(pinfo.applicationInfo.packageName); }\n\t         * 其中ShareItemInfo 类自己写的，各位可以忽略 (3)获取支持分享的应用的代码： public static\n\t         * List<ResolveInfo> getShareApps(Context context){ List<ResolveInfo> mApps\n\t         * = new ArrayList<ResolveInfo>(); Intent intent=new\n\t         * Intent(Intent.ACTION_SEND,null);\n\t         * intent.addCategory(Intent.CATEGORY_DEFAULT);\n\t         * intent.setType(\"text/plain\"); PackageManager pManager =\n\t         * context.getPackageManager(); mApps =\n\t         * pManager.queryIntentActivities(intent\n\t         * ,PackageManager.COMPONENT_ENABLED_STATE_DEFAULT); return mApps; }\n\t         * 由于该方法，返回的并不是PackageInfo 对象。而是ResolveInfo。因此获取图片、应用名、包名的方法不一样，如下：\n\t         * PackageManager pManager = MessageSendActivity.this.getPackageManager();\n\t         * List<ResolveInfo> resolveList =\n\t         * Utils.getShareApps(MessageSendActivity.this); for(int\n\t         * i=0;i<resolveList.size();i++) { ResolveInfo resolve = resolveList.get(i);\n\t         * ShareItemInfo shareItem = new ShareItemInfo(); //set Icon\n\t         * shareItem.setIcon(resolve.loadIcon(pManager)); //set Application Name\n\t         * shareItem.setLabel(resolve.loadLabel(pManager).toString()); //set Package\n\t         * Name shareItem.setPackageName(resolve.activityInfo.packageName); } 总结： 通过\n\t         * PackageInfo 获取具体信息方法： 包名获取方法：packageInfo.packageName\n\t         * icon获取获取方法：packageManager.getApplicationIcon(applicationInfo)\n\t         * 应用名称获取方法：packageManager.getApplicationLabel(applicationInfo)\n\t         * 使用权限获取方法：packageManager\n\t         * .getPackageInfo(packageName,PackageManager.GET_PERMISSIONS)\n\t         * .requestedPermissions 通过 ResolveInfo 获取具体信息方法：\n\t         * 包名获取方法：resolve.activityInfo.packageName\n\t         * icon获取获取方法：resolve.loadIcon(packageManager)\n\t         * 应用名称获取方法：resolve.loadLabel(packageManager).toString()\n\t         */\n\t        public String getSimCardInfo() {\n\t                // 在manifest.xml文件中要添加\n\t                // <uses-permission android:name=\"android.permission.READ_PHONE_STATE\"/>\n\t                /*\n\t                 * TelephonyManager类主要提供了一系列用于访问与手机通讯相关的状态和信息的get方法。其中包括手机SIM的状态和信息\n\t                 * 、电信网络的状态及手机用户的信息。\n\t                 * 在应用程序中可以使用这些get方法获取相关数据。TelephonyManager类的对象可以通过Context\n\t                 * .getSystemService(Context.TELEPHONY_SERVICE)\n\t                 * 方法来获得，需要注意的是有些通讯信息的获取对应用程序的权限有一定的限制\n\t                 * ，在开发的时候需要为其添加相应的权限。以下列出TelephonyManager类所有方法及说明：\n\t                 * TelephonyManager提供设备上获取通讯服务信息的入口。 应用程序可以使用这个类方法确定的电信服务商和国家\n\t                 * 以及某些类型的用户访问信息。 应用程序也可以注册一个监听器到电话收状态的变化。不需要直接实例化这个类\n\t                 * 使用Context.getSystemService (Context.TELEPHONY_SERVICE)来获取这个类的实例。\n\t                 */\n\t\n\t                // 解释：\n\t                // IMSI是国际移动用户识别码的简称(International Mobile Subscriber Identity)\n\t                // IMSI共有15位，其结构如下：\n\t                // MCC+MNC+MIN\n\t                // MCC：Mobile Country Code，移动国家码，共3位，中国为460;\n\t                // MNC:Mobile NetworkCode，移动网络码，共2位\n\t                // 在中国，移动的代码为电00和02，联通的代码为01，电信的代码为03\n\t                // 合起来就是（也是Android手机中APN配置文件中的代码）：\n\t                // 中国移动：46000 46002\n\t                // 中国联通：46001\n\t                // 中国电信：46003\n\t                // 举例，一个典型的IMSI号码为460030912121001\n\t\n\t                // IMEI是International Mobile Equipment Identity （国际移动设备标识）的简称\n\t                // IMEI由15位数字组成的”电子串号”，它与每台手机一一对应，而且该码是全世界唯一的\n\t                // 其组成为：\n\t                // 1. 前6位数(TAC)是”型号核准号码”，一般代表机型\n\t                // 2. 接着的2位数(FAC)是”最后装配号”，一般代表产地\n\t                // 3. 之后的6位数(SNR)是”串号”，一般代表生产顺序号\n\t                // 4. 最后1位数(SP)通常是”0″，为检验码，目前暂备用\n\t\n\t                TelephonyManager tm = (TelephonyManager) this\n\t                                .getSystemService(TELEPHONY_SERVICE);\n\t                /*\n\t                 * 电话状态： 1.tm.CALL_STATE_IDLE=0 无活动，无任何状态时 2.tm.CALL_STATE_RINGING=1\n\t                 * 响铃，电话进来时 3.tm.CALL_STATE_OFFHOOK=2 摘机\n\t                 */\n\t                tm.getCallState();// int\n\t\n\t                /*\n\t                 * 电话方位：\n\t                 */\n\t                // 返回当前移动终端的位置\n\t                CellLocation location = tm.getCellLocation();\n\t                // 请求位置更新，如果更新将产生广播，接收对象为注册LISTEN_CELL_LOCATION的对象，需要的permission名称为\n\t                // ACCESS_COARSE_LOCATION。\n\t                location.requestLocationUpdate();\n\t\n\t                /**\n\t                 * 获取数据活动状态\n\t                 * \n\t                 * DATA_ACTIVITY_IN 数据连接状态：活动，正在接受数据 DATA_ACTIVITY_OUT 数据连接状态：活动，正在发送数据\n\t                 * DATA_ACTIVITY_INOUT 数据连接状态：活动，正在接受和发送数据 DATA_ACTIVITY_NONE\n\t                 * 数据连接状态：活动，但无数据发送和接受\n\t                 */\n\t                tm.getDataActivity();\n\t\n\t                /**\n\t                 * 获取数据连接状态\n\t                 * \n\t                 * DATA_CONNECTED 数据连接状态：已连接 DATA_CONNECTING 数据连接状态：正在连接\n\t                 * DATA_DISCONNECTED 数据连接状态：断开 DATA_SUSPENDED 数据连接状态：暂停\n\t                 */\n\t                tm.getDataState();\n\t\n\t                /**\n\t                 * 返回当前移动终端的唯一标识，设备ID\n\t                 * \n\t                 * 如果是GSM网络，返回IMEI；如果是CDMA网络，返回MEID Return null if device ID is not\n\t                 * available.\n\t                 */\n\t                String Imei = tm.getDeviceId();// String\n\t\n\t                /*\n\t                 * 返回移动终端的软件版本，例如：GSM手机的IMEI/SV码。 设备的软件版本号： 例如：the IMEI/SV(software\n\t                 * version) for GSM phones. Return null if the software version is not\n\t                 * available.\n\t                 */\n\t                tm.getDeviceSoftwareVersion();// String\n\t\n\t                /*\n\t                 * 手机号： GSM手机的 MSISDN. Return null if it is unavailable.\n\t                 */\n\t                String phoneNum = tm.getLine1Number();// String\n\t\n\t                /*\n\t                 * 获取ISO标准的国家码，即国际长途区号。 注意：仅当用户已在网络注册后有效。 在CDMA网络中结果也许不可靠。\n\t                 */\n\t                tm.getNetworkCountryIso();// String\n\t\n\t                /*\n\t                 * MCC+MNC(mobile country code + mobile network code) 注意：仅当用户已在网络注册时有效。\n\t                 * 在CDMA网络中结果也许不可靠。\n\t                 */\n\t                tm.getNetworkOperator();// String\n\t\n\t                /*\n\t                 * 按照字母次序的current registered operator(当前已注册的用户)的名字 注意：仅当用户已在网络注册时有效。\n\t                 * 在CDMA网络中结果也许不可靠。\n\t                 */\n\t\n\t                tm.getNetworkOperatorName();// String\n\t\n\t                /*\n\t                 * 当前使用的网络类型： 例如： NETWORK_TYPE_UNKNOWN 网络类型未知 0 NETWORK_TYPE_GPRS GPRS网络\n\t                 * 1 NETWORK_TYPE_EDGE EDGE网络 2 NETWORK_TYPE_UMTS UMTS网络 3\n\t                 * NETWORK_TYPE_HSDPA HSDPA网络 8 NETWORK_TYPE_HSUPA HSUPA网络 9\n\t                 * NETWORK_TYPE_HSPA HSPA网络 10 NETWORK_TYPE_CDMA CDMA网络,IS95A 或 IS95B. 4\n\t                 * NETWORK_TYPE_EVDO_0 EVDO网络, revision 0. 5 NETWORK_TYPE_EVDO_A EVDO网络,\n\t                 * revision A. 6 NETWORK_TYPE_1xRTT 1xRTT网络 7\n\t                 */\n\t                tm.getNetworkType();// int\n\t\n\t                /*\n\t                 * 手机类型： 例如： PHONE_TYPE_NONE 无信号 PHONE_TYPE_GSM GSM信号 PHONE_TYPE_CDMA\n\t                 * CDMA信号\n\t                 */\n\t                tm.getPhoneType();// int\n\t\n\t                /*\n\t                 * Returns the ISO country code equivalent for the SIM provider's\n\t                 * country code. 获取ISO国家码，相当于提供SIM卡的国家码。\n\t                 */\n\t                tm.getSimCountryIso();// String\n\t\n\t                /*\n\t                 * Returns the MCC+MNC (mobile country code + mobile network code) of\n\t                 * the provider of the SIM. 5 or 6 decimal digits.\n\t                 * 获取SIM卡提供的移动国家码和移动网络码.5或6位的十进制数字. SIM卡的状态必须是\n\t                 * SIM_STATE_READY(使用getSimState()判断).\n\t                 */\n\t                tm.getSimOperator();// String\n\t\n\t                /*\n\t                 * 服务商名称： 例如：中国移动、联通 SIM卡的状态必须是 SIM_STATE_READY(使用getSimState()判断).\n\t                 */\n\t                tm.getSimOperatorName();// String\n\t\n\t                /*\n\t                 * SIM卡的序列号： 需要权限：READ_PHONE_STATE\n\t                 */\n\t                tm.getSimSerialNumber();// String\n\t\n\t                /*\n\t                 * SIM的状态信息： SIM_STATE_UNKNOWN 未知状态 0 SIM_STATE_ABSENT 没插卡 1\n\t                 * SIM_STATE_PIN_REQUIRED 锁定状态，需要用户的PIN码解锁 2 SIM_STATE_PUK_REQUIRED\n\t                 * 锁定状态，需要用户的PUK码解锁 3 SIM_STATE_NETWORK_LOCKED 锁定状态，需要网络的PIN码解锁 4\n\t                 * SIM_STATE_READY 就绪状态 5\n\t                 */\n\t                tm.getSimState();// int\n\t\n\t                /*\n\t                 * 唯一的用户ID： 例如：IMSI(国际移动用户识别码) for a GSM phone. 需要权限：READ_PHONE_STATE\n\t                 */\n\t                tm.getSubscriberId();// String\n\t\n\t                /*\n\t                 * 取得和语音邮件相关的标签，即为识别符 需要权限：READ_PHONE_STATE\n\t                 */\n\t\n\t                tm.getVoiceMailAlphaTag();// String\n\t\n\t                /*\n\t                 * 获取语音邮件号码： 需要权限：READ_PHONE_STATE\n\t                 */\n\t                tm.getVoiceMailNumber();// String\n\t\n\t                /*\n\t                 * ICC卡是否存在\n\t                 */\n\t                tm.hasIccCard();// boolean\n\t\n\t                /*\n\t                 * 是否漫游: (在GSM用途下)\n\t                 */\n\t                tm.isNetworkRoaming();//\n\t\n\t                String ProvidersName = null;\n\t                // 返回唯一的用户ID;就是这张卡的编号神马的\n\t                String IMSI = tm.getSubscriberId(); // 国际移动用户识别码\n\t                // IMSI号前面3位460是国家，紧接着后面2位00 02是中国移动，01是中国联通，03是中国电信。\n\t                System.out.println(IMSI);\n\t                if (IMSI.startsWith(\"46000\") || IMSI.startsWith(\"46002\")) {\n\t                        ProvidersName = \"中国移动\";\n\t                } else if (IMSI.startsWith(\"46001\")) {\n\t\n\t                        ProvidersName = \"中国联通\";\n\t\n\t                } else if (IMSI.startsWith(\"46003\")) {\n\t\n\t                        ProvidersName = \"中国电信\";\n\t\n\t                }\n\t                // 返回当前移动终端附近移动终端的信息\n\t                /*\n\t                 * 附近的电话的信息: 类型：List<NeighboringCellInfo>\n\t                 * 需要权限：android.Manifest.permission#ACCESS_COARSE_UPDATES\n\t                 */\n\t                List<NeighboringCellInfo> infos = tm.getNeighboringCellInfo();\n\t                for (NeighboringCellInfo info : infos) {\n\t                        // 获取邻居小区号\n\t                        int cid = info.getCid();\n\t                        // 获取邻居小区LAC，LAC:\n\t                        // 位置区域码。为了确定移动台的位置，每个GSM/PLMN的覆盖区都被划分成许多位置区，LAC则用于标识不同的位置区。\n\t                        info.getLac();\n\t                        info.getNetworkType();\n\t                        info.getPsc();\n\t                        // 获取邻居小区信号强度\n\t                        info.getRssi();\n\t                }\n\t                return \"手机号码:\" + phoneNum + \"\\n\" + \"服务商：\" + ProvidersName + \"\\n\"\n\t                                + \"IMEI：\" + Imei;\n\t\n\t        }\n\t\n\t        // 显示信息对话框\n\t        public void showDialog(String title, String info) {\n\t                AlertDialog dialog = new AlertDialog.Builder(this)\n\t                                .setTitle(title)\n\t                                .setMessage(info)\n\t                                .setPositiveButton(\"close\",\n\t                                                new DialogInterface.OnClickListener() {\n\t                                                        @Override\n\t                                                        public void onClick(DialogInterface dialog,\n\t                                                                        int which) {\n\t                                                                dialog.cancel();\n\t                                                                dialog = null;\n\t                                                        }\n\t                                                }).create();\n\t                dialog.show();\n\t        }\n\t}\n\n\n```\n","slug":"mobile-phone-information-acquisition","published":1,"updated":"2016-03-17T00:44:06.360Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdzt003po4pk0gkhfrx5"},{"title":"SQLite随机取n行的方法","date":"2013-03-01T16:00:00.000Z","_content":"\n百度SQLite 随机取n行的方法大多数如下：\n\n```java\n\tSELECT key,value FROM dict ORDER BY RANDOM(key) LIMIT 1\n```\n那如何写入android的SQLite？LIMIT 1\n我也懂了就是拿到一条数据，可能是key给我误导了，\n我运行时一直报错，现在才调试好。\n现在分享给大家，代码如下：\n\n```java\n\tCursor cursor = db.query(\"表名\", new String[] { \"*\" }, null, null,null, null, \"RANDOM()\"); \n```\n","source":"_posts/methods-SQLite-were-randomly-selected-for-the-N.md","raw":"title: SQLite随机取n行的方法\ndate: 2013-03-02\ncategories: Android\ntags: [Android,SQLite]\n---\n\n百度SQLite 随机取n行的方法大多数如下：\n\n```java\n\tSELECT key,value FROM dict ORDER BY RANDOM(key) LIMIT 1\n```\n那如何写入android的SQLite？LIMIT 1\n我也懂了就是拿到一条数据，可能是key给我误导了，\n我运行时一直报错，现在才调试好。\n现在分享给大家，代码如下：\n\n```java\n\tCursor cursor = db.query(\"表名\", new String[] { \"*\" }, null, null,null, null, \"RANDOM()\"); \n```\n","slug":"methods-SQLite-were-randomly-selected-for-the-N","published":1,"updated":"2016-03-17T00:44:06.359Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdzv003so4pkk3vcfd5k"},{"title":"解决Android视频锁屏还在继续播放","date":"2014-11-23T16:00:00.000Z","_content":"###一、锁屏\nT_T被整哭了，我明知道锁屏走了onDestroy()方法，没有着手这个，反而去监听锁屏，还是`太菜`，`基础不牢`。\n\n看日志发现，主Activity先onDestroy()了，随即又onCreate()，原因如下：\n\n视频本身是横屏，手机界面是竖屏，锁屏操作存在一个横屏转竖屏的过程，这个过程如果不加android:configChanges=\"orientation\",\nActivity会自动重新走一遍它的生命周期，即先销毁再重新创建，加上后只会调用onConfigurationChanged。`哎，我知道这个，怎么没有想到这点啊`。\n\n另外如果你的target > 13时，还必须得加上“ScreenSize”。\n\n<!-- more -->\n\n```java\n <activity\n  android:name=\"com.xiaomolong.ufosay.ui.VideoPlayActivity\"\n  android:configChanges=\"keyboardHidden|orientation|screenSize\"\n  android:label=\"PlayingActivity\"\n  android:screenOrientation=\"landscape\"\n  android:theme=\"@android:style/Theme.Holo.Light.NoActionBar.Fullscreen\" >\n  </activity>\n```\n\n###二、记录视频进度\n\n视频播放点击Home建和锁屏时需要保存播放的进度，因此有必要了解下onSaveInstanceState和onRestoreInstanceState触发的时机\n\n* 1、onSaveInstanceState\n\n(1)、当用户按下HOME键时。\n\n这是显而易见的，系统不知道你按下HOME后要运行多少其他的程序，自然也不知道activity A是否会被销毁，故系统会调用onSaveInstanceState，让用户有机会保存某些非永久性的数据。以下几种情况的分析都遵循该原则\n\n(2)、长按HOME键，选择运行其他的程序时。\n\n(3)、按下电源按键（关闭屏幕显示）时。\n\n(4)、从activity A中启动一个新的activity时。\n\n(5)、屏幕方向切换时，例如从竖屏切换到横屏时。\n\n在屏幕切换之前，系统会销毁activity A，在屏幕切换之后系统又会自动地创建activity A，所以onSaveInstanceState一定会被执行\n\n* 2、onRestoreInstanceState\n\nonRestoreInstanceState被调用的前提是，activity A“确实”被系统销毁了，而如果仅仅是停留在有这种可能性的情况下，则该方法不会被调用，例如，当正在显示activity A的时候，用户按下HOME键回到主界面，然后用户紧接着又返回到activity A，这种情况下activity A一般不会因为内存的原因被系统销毁，故activity A的onRestoreInstanceState方法不会被执行\n\n另外，onRestoreInstanceState的bundle参数也会传递到onCreate方法中，你也可以选择在onCreate方法中做数据还原。\n\n```java\n  /**\n\t * 记录播放位置\n\t */\n\tprivate int mLastPos = 0;\n  protected void onCreate(Bundle savedInstanceState) {\n\t\tsuper.onCreate(savedInstanceState);\n\t\tsetContentView(R.layout.video_play);\n\t\tif (savedInstanceState != null) {\n\t\tmLastPos = savedInstanceState.getInt(\"LastPosition\");\n\t\t}\n\t}\n\tprotected void onRestoreInstanceState(Bundle savedInstanceState) {\n\t\tsuper.onRestoreInstanceState(savedInstanceState);\n\t\tLog.d(\"wxl\", \"onRestoreInstanceState start\");\n\t\tif (savedInstanceState != null) {\n\t\t\tmLastPos = savedInstanceState.getInt(\"LastPosition\");\n\t\t\tLog.d(\"wxl\", \"onRestoreInstanceState \" + mLastPos);\n\t\t}\n\t}\n\n\t@Override\n\tprotected void onSaveInstanceState(Bundle outState) {\n\t\tsuper.onSaveInstanceState(outState);\n\t\tLog.d(\"wxl\", \"onSaveInstanceState start\");\n\t\toutState.putInt(\"LastPosition\", mLastPos);\n\t}\n```\n\n###三、附录\n\n[Android锁屏后主Activity的onDestroy方法被调用](http://blog.csdn.net/terrantian/article/details/18670381)\n\n[onSaveInstanceState和onRestoreInstanceState触发的时机](http://android.blog.51cto.com/268543/634646/)\n\n[Android 监听屏幕锁屏,用户解锁](http://www.cnblogs.com/a284628487/p/3345317.html)\n","source":"_posts/lock-screen-video.md","raw":"title: 解决Android视频锁屏还在继续播放\ndate: 2014-11-24\ncategories: [Android]\ntags: [Android,Video]\n---\n###一、锁屏\nT_T被整哭了，我明知道锁屏走了onDestroy()方法，没有着手这个，反而去监听锁屏，还是`太菜`，`基础不牢`。\n\n看日志发现，主Activity先onDestroy()了，随即又onCreate()，原因如下：\n\n视频本身是横屏，手机界面是竖屏，锁屏操作存在一个横屏转竖屏的过程，这个过程如果不加android:configChanges=\"orientation\",\nActivity会自动重新走一遍它的生命周期，即先销毁再重新创建，加上后只会调用onConfigurationChanged。`哎，我知道这个，怎么没有想到这点啊`。\n\n另外如果你的target > 13时，还必须得加上“ScreenSize”。\n\n<!-- more -->\n\n```java\n <activity\n  android:name=\"com.xiaomolong.ufosay.ui.VideoPlayActivity\"\n  android:configChanges=\"keyboardHidden|orientation|screenSize\"\n  android:label=\"PlayingActivity\"\n  android:screenOrientation=\"landscape\"\n  android:theme=\"@android:style/Theme.Holo.Light.NoActionBar.Fullscreen\" >\n  </activity>\n```\n\n###二、记录视频进度\n\n视频播放点击Home建和锁屏时需要保存播放的进度，因此有必要了解下onSaveInstanceState和onRestoreInstanceState触发的时机\n\n* 1、onSaveInstanceState\n\n(1)、当用户按下HOME键时。\n\n这是显而易见的，系统不知道你按下HOME后要运行多少其他的程序，自然也不知道activity A是否会被销毁，故系统会调用onSaveInstanceState，让用户有机会保存某些非永久性的数据。以下几种情况的分析都遵循该原则\n\n(2)、长按HOME键，选择运行其他的程序时。\n\n(3)、按下电源按键（关闭屏幕显示）时。\n\n(4)、从activity A中启动一个新的activity时。\n\n(5)、屏幕方向切换时，例如从竖屏切换到横屏时。\n\n在屏幕切换之前，系统会销毁activity A，在屏幕切换之后系统又会自动地创建activity A，所以onSaveInstanceState一定会被执行\n\n* 2、onRestoreInstanceState\n\nonRestoreInstanceState被调用的前提是，activity A“确实”被系统销毁了，而如果仅仅是停留在有这种可能性的情况下，则该方法不会被调用，例如，当正在显示activity A的时候，用户按下HOME键回到主界面，然后用户紧接着又返回到activity A，这种情况下activity A一般不会因为内存的原因被系统销毁，故activity A的onRestoreInstanceState方法不会被执行\n\n另外，onRestoreInstanceState的bundle参数也会传递到onCreate方法中，你也可以选择在onCreate方法中做数据还原。\n\n```java\n  /**\n\t * 记录播放位置\n\t */\n\tprivate int mLastPos = 0;\n  protected void onCreate(Bundle savedInstanceState) {\n\t\tsuper.onCreate(savedInstanceState);\n\t\tsetContentView(R.layout.video_play);\n\t\tif (savedInstanceState != null) {\n\t\tmLastPos = savedInstanceState.getInt(\"LastPosition\");\n\t\t}\n\t}\n\tprotected void onRestoreInstanceState(Bundle savedInstanceState) {\n\t\tsuper.onRestoreInstanceState(savedInstanceState);\n\t\tLog.d(\"wxl\", \"onRestoreInstanceState start\");\n\t\tif (savedInstanceState != null) {\n\t\t\tmLastPos = savedInstanceState.getInt(\"LastPosition\");\n\t\t\tLog.d(\"wxl\", \"onRestoreInstanceState \" + mLastPos);\n\t\t}\n\t}\n\n\t@Override\n\tprotected void onSaveInstanceState(Bundle outState) {\n\t\tsuper.onSaveInstanceState(outState);\n\t\tLog.d(\"wxl\", \"onSaveInstanceState start\");\n\t\toutState.putInt(\"LastPosition\", mLastPos);\n\t}\n```\n\n###三、附录\n\n[Android锁屏后主Activity的onDestroy方法被调用](http://blog.csdn.net/terrantian/article/details/18670381)\n\n[onSaveInstanceState和onRestoreInstanceState触发的时机](http://android.blog.51cto.com/268543/634646/)\n\n[Android 监听屏幕锁屏,用户解锁](http://www.cnblogs.com/a284628487/p/3345317.html)\n","slug":"lock-screen-video","published":1,"updated":"2016-03-17T00:44:06.359Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1gdzz003wo4pkbxz0kzij"},{"title":"刷新RecyclerView/ListView某个item状态","date":"2015-07-07T16:00:00.000Z","_content":"> 本文是实际开发遇到的问题，结合情景，给出解决方案，很有启示作用。\n\n# 1、比如列表有收藏按钮，当前页面收藏\n\n```java\nprivate List<Map<String, String>> mList = new ArrayList<>();\n...\n  //走收藏接口，在成功后，只更改刚刚点击的item的收藏按钮状态\n  mList.get(position).put(\"favorites\", \"1\");\n  notifyDataSetChanged();\n```\n\n<!-- more -->\n\n# 2、比如列表有收藏按钮，下个页面也有收藏功能\n\n这种情况下，下个页面收藏成功后，按照常理最好返回列表页刷新以下收藏按钮的状态（话说新浪微博没有这样做）。\n\nDataAdapter\n\n```java\n //点击跳转下个页面\n Intent intent = new Intent(activity, NextActivity.class);  \n intent.putExtra(\"position\", position);\n startActivityForResult(intent,AppConfig.REQUEST_CODE_DIALOGUE);\n```\n\nNextActivity.class\n\n```java\n//收藏成功后，返回列表页\nIntent intent;\nintent = new Intent();\nBundle bundle = new Bundle();\nbundle.putInt(\"position\", position);\nbundle.putString(\"isCollection\", \"1\";//isCollection:0代表未收藏，1代表已收藏。\nintent.putExtras(bundle);\nsetResult(RESULT_OK, intent);\nfinish();\n```\n\nonActivityResult\n回到上页面的onActivityResult方法\n```java\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\n            if (requestCode == AppConfig.REQUEST_CODE_DIALOGUE\n                && resultCode == RESULT_OK) {\n            int position = data.getExtras().getInt(\"position\");\n            String isCollection = data.getExtras().getString(\"isCollection \");\n            Object object = dataAdapter.getItem(position);\n            if (object instanceof DoctorList) {\n                DoctorList doctorList = (DoctorList) object;\n                doctorList.setIsCollection(isCollection);\n                dataAdapter.notifyDataSetChanged();\n            }\n        }\n        super.onActivityResult(requestCode, resultCode, data);\n    }\n```\n\nDoctorList\n\n```java\nclass DialogueBean {\n    private String result;\n    private ArrayList<DoctorList> doctorList;\npublic class DoctorList implements Serializable {\n        private String isCollection;       \n}\n}\n```\n\n# 3、以上只是未重新请求接口下刷新View，未真正局部刷新 \n以上应该是大部分人会使用的一种解决思路，但是很抱歉，使用notifyDataSetChanged方法，未做到局部刷新。\n\n## ListView局部刷新\n\n```java\n   private List<Map<String, Object>> mData;\n   private ListView mListView;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        mData = getData();\n        MyAdapter adapter = new MyAdapter(this);\n        mListView = (ListView) findViewById(R.id.listView);\n        mListView.setAdapter(adapter);\n    }\n\n    private List<Map<String, Object>> getData() {\n        List<Map<String, Object>> list = new ArrayList<>();\n        Map<String, Object> map;\n        for (int i = 0; i < 50; i++) {\n            map = new HashMap<>();\n            map.put(\"title\", \"G\" + i);\n            list.add(map);\n        }\n        return list;\n    }\n\n\n    public class MyAdapter extends BaseAdapter {\n        private LayoutInflater mInflater;\n\n        public MyAdapter(Context context) {\n            this.mInflater = LayoutInflater.from(context);\n        }\n\n        @Override\n        public int getCount() {\n            return mData.size();\n        }\n\n        @Override\n        public Object getItem(int arg0) {\n            return mData.get(arg0);\n        }\n\n        @Override\n        public long getItemId(int arg0) {\n            return arg0;\n        }\n\n        @Override\n        public View getView(final int position, View convertView, ViewGroup parent) {\n            Log.d(\"wxl\", \"getView=\" + position);\n            ViewHolder holder = null;\n            if (convertView == null) {\n                holder = new ViewHolder();\n                convertView = mInflater.inflate(R.layout.listview_item, null);\n                holder.textview = (TextView) convertView.findViewById(R.id.textview);\n                convertView.setTag(holder);\n            } else {\n                holder = (ViewHolder) convertView.getTag();\n            }\n            holder.textview.setText((String) mData.get(position).get(\"title\"));\n            convertView.setOnClickListener(new View.OnClickListener() {\n\n                @Override\n                public void onClick(View v) {\n                    updateItemView(position);//状态改变时，调用，这里是为了演示方便\n                }\n            });\n\n\n            return convertView;\n        }\n\n        public class ViewHolder {\n            public TextView textview;\n        }\n    }\n\n    public void updateItemView(int position) {\n        //得到第一个可显示控件的位置，\n        int visiblePosition = mListView.getFirstVisiblePosition();\n        //只有当要更新的view在可见的位置时才更新，不可见时，跳过不更新\n        int index = position - visiblePosition;\n        if (index >= 0) {\n            //得到要更新的item的view\n            View view = mListView.getChildAt(index);\n            //从view中取得holder\n            MyAdapter.ViewHolder holder = (MyAdapter.ViewHolder) view.getTag();\n            //更改状态\n            holder.textview.setText(\"测试数据\");\n            //直接更改数据源\n            mData.get(index).put(\"title\", \"测试数据\");\n        }\n    }\n}\n```\nlistview_item.xml\n\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n\n    <TextView\n        android:id=\"@+id/textview\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"60dp\"\n        android:layout_gravity=\"center_vertical\"\n        android:gravity=\"center_vertical\" />\n</LinearLayout>\n```\n\n## RecyclerView局部刷新\n\nRecyclerView已经替代了ListView，局部刷新很有必要知道\n\n```java\n//收藏成功后\nmList.get(position).put(\"favorites\", \"0\");//直接更改数据源\nViewHolder viewHolder = (ViewHolder) mRecyclerView.findViewHolderForAdapterPosition(position); //得到要更新的item的view\nviewHolder.mCheck.setBackgroundResource(R.mipmap.collect_normal);//更改状态\n```\n\t\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n","source":"_posts/listView_item_state.md","raw":"title: 刷新RecyclerView/ListView某个item状态\ndate: 2015-07-08\ncategories: [Android]\ntags: [RecyclerView,ListView]\n---\n> 本文是实际开发遇到的问题，结合情景，给出解决方案，很有启示作用。\n\n# 1、比如列表有收藏按钮，当前页面收藏\n\n```java\nprivate List<Map<String, String>> mList = new ArrayList<>();\n...\n  //走收藏接口，在成功后，只更改刚刚点击的item的收藏按钮状态\n  mList.get(position).put(\"favorites\", \"1\");\n  notifyDataSetChanged();\n```\n\n<!-- more -->\n\n# 2、比如列表有收藏按钮，下个页面也有收藏功能\n\n这种情况下，下个页面收藏成功后，按照常理最好返回列表页刷新以下收藏按钮的状态（话说新浪微博没有这样做）。\n\nDataAdapter\n\n```java\n //点击跳转下个页面\n Intent intent = new Intent(activity, NextActivity.class);  \n intent.putExtra(\"position\", position);\n startActivityForResult(intent,AppConfig.REQUEST_CODE_DIALOGUE);\n```\n\nNextActivity.class\n\n```java\n//收藏成功后，返回列表页\nIntent intent;\nintent = new Intent();\nBundle bundle = new Bundle();\nbundle.putInt(\"position\", position);\nbundle.putString(\"isCollection\", \"1\";//isCollection:0代表未收藏，1代表已收藏。\nintent.putExtras(bundle);\nsetResult(RESULT_OK, intent);\nfinish();\n```\n\nonActivityResult\n回到上页面的onActivityResult方法\n```java\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\n            if (requestCode == AppConfig.REQUEST_CODE_DIALOGUE\n                && resultCode == RESULT_OK) {\n            int position = data.getExtras().getInt(\"position\");\n            String isCollection = data.getExtras().getString(\"isCollection \");\n            Object object = dataAdapter.getItem(position);\n            if (object instanceof DoctorList) {\n                DoctorList doctorList = (DoctorList) object;\n                doctorList.setIsCollection(isCollection);\n                dataAdapter.notifyDataSetChanged();\n            }\n        }\n        super.onActivityResult(requestCode, resultCode, data);\n    }\n```\n\nDoctorList\n\n```java\nclass DialogueBean {\n    private String result;\n    private ArrayList<DoctorList> doctorList;\npublic class DoctorList implements Serializable {\n        private String isCollection;       \n}\n}\n```\n\n# 3、以上只是未重新请求接口下刷新View，未真正局部刷新 \n以上应该是大部分人会使用的一种解决思路，但是很抱歉，使用notifyDataSetChanged方法，未做到局部刷新。\n\n## ListView局部刷新\n\n```java\n   private List<Map<String, Object>> mData;\n   private ListView mListView;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        mData = getData();\n        MyAdapter adapter = new MyAdapter(this);\n        mListView = (ListView) findViewById(R.id.listView);\n        mListView.setAdapter(adapter);\n    }\n\n    private List<Map<String, Object>> getData() {\n        List<Map<String, Object>> list = new ArrayList<>();\n        Map<String, Object> map;\n        for (int i = 0; i < 50; i++) {\n            map = new HashMap<>();\n            map.put(\"title\", \"G\" + i);\n            list.add(map);\n        }\n        return list;\n    }\n\n\n    public class MyAdapter extends BaseAdapter {\n        private LayoutInflater mInflater;\n\n        public MyAdapter(Context context) {\n            this.mInflater = LayoutInflater.from(context);\n        }\n\n        @Override\n        public int getCount() {\n            return mData.size();\n        }\n\n        @Override\n        public Object getItem(int arg0) {\n            return mData.get(arg0);\n        }\n\n        @Override\n        public long getItemId(int arg0) {\n            return arg0;\n        }\n\n        @Override\n        public View getView(final int position, View convertView, ViewGroup parent) {\n            Log.d(\"wxl\", \"getView=\" + position);\n            ViewHolder holder = null;\n            if (convertView == null) {\n                holder = new ViewHolder();\n                convertView = mInflater.inflate(R.layout.listview_item, null);\n                holder.textview = (TextView) convertView.findViewById(R.id.textview);\n                convertView.setTag(holder);\n            } else {\n                holder = (ViewHolder) convertView.getTag();\n            }\n            holder.textview.setText((String) mData.get(position).get(\"title\"));\n            convertView.setOnClickListener(new View.OnClickListener() {\n\n                @Override\n                public void onClick(View v) {\n                    updateItemView(position);//状态改变时，调用，这里是为了演示方便\n                }\n            });\n\n\n            return convertView;\n        }\n\n        public class ViewHolder {\n            public TextView textview;\n        }\n    }\n\n    public void updateItemView(int position) {\n        //得到第一个可显示控件的位置，\n        int visiblePosition = mListView.getFirstVisiblePosition();\n        //只有当要更新的view在可见的位置时才更新，不可见时，跳过不更新\n        int index = position - visiblePosition;\n        if (index >= 0) {\n            //得到要更新的item的view\n            View view = mListView.getChildAt(index);\n            //从view中取得holder\n            MyAdapter.ViewHolder holder = (MyAdapter.ViewHolder) view.getTag();\n            //更改状态\n            holder.textview.setText(\"测试数据\");\n            //直接更改数据源\n            mData.get(index).put(\"title\", \"测试数据\");\n        }\n    }\n}\n```\nlistview_item.xml\n\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n\n    <TextView\n        android:id=\"@+id/textview\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"60dp\"\n        android:layout_gravity=\"center_vertical\"\n        android:gravity=\"center_vertical\" />\n</LinearLayout>\n```\n\n## RecyclerView局部刷新\n\nRecyclerView已经替代了ListView，局部刷新很有必要知道\n\n```java\n//收藏成功后\nmList.get(position).put(\"favorites\", \"0\");//直接更改数据源\nViewHolder viewHolder = (ViewHolder) mRecyclerView.findViewHolderForAdapterPosition(position); //得到要更新的item的view\nviewHolder.mCheck.setBackgroundResource(R.mipmap.collect_normal);//更改状态\n```\n\t\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n","slug":"listView_item_state","published":1,"updated":"2016-05-06T03:30:58.759Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge020041o4pkxcqilly0"},{"title":"Android之ListView属性","date":"2013-07-18T16:00:00.000Z","_content":"\n```java \n\t<ListView \n\tandroid:divider=\"@drawable/song_item_line\"  item之间的分割线\n        android:cacheColorHint=\"#00000000\"拖动系统切换item时的缓存色\n        android:scrollbars=\"none\"不显示滚动条\n        android:listSelector=\"#00000000\"/>选中时背景色\n        android:fadingEdge=\"none\" 设置后上边和下边没有阴影了\n        android:fastScrollEnabled=\"true\" 快速滚动滑块\n        android:cacheColorHint 如果你是用图片做背景的话，那也只要将android:cacheColorHint指定为透明（#00000000）就可以了.  \n        android:divider=\"@drawable/list_driver\" 设置显示分割线图形，如果不想显示分割线则只要设置为\n        android:divider=\"@null\" 就可以了，分割线可以自定义颜色、或图片.\n        android:dividerHeight=\"6px\"设置分割线高度像素.  \n        android:fadeScrollbars=\"true\"  滚动条的自动隐藏和显示. \n        android:transcriptMode=\"alwaysScroll\"  （支持ScrollBar）自动滑动到最底部.\n        android:stackFromBottom=\"true\" 设置你做好的列表显示在列表的最下面，值为true和false. \n        android:drawSelectorOnTop=\"true\"  点击某一条记录，颜色会显示在最上面，记录上的文字被遮住，所以点击文字不放，文字就看不到\n        android:drawSelectorOnTop=\"false\" 点击某条记录不放，颜色会在记录的后面，成为背景色，但是记录内容的文字是可见的\n\t/>\n```\n\n\n","source":"_posts/listView.md","raw":"title: Android之ListView属性\ncategories: [Android]\ntags: [Android,ListView]\ndate: 2013-07-19\n---\n\n```java \n\t<ListView \n\tandroid:divider=\"@drawable/song_item_line\"  item之间的分割线\n        android:cacheColorHint=\"#00000000\"拖动系统切换item时的缓存色\n        android:scrollbars=\"none\"不显示滚动条\n        android:listSelector=\"#00000000\"/>选中时背景色\n        android:fadingEdge=\"none\" 设置后上边和下边没有阴影了\n        android:fastScrollEnabled=\"true\" 快速滚动滑块\n        android:cacheColorHint 如果你是用图片做背景的话，那也只要将android:cacheColorHint指定为透明（#00000000）就可以了.  \n        android:divider=\"@drawable/list_driver\" 设置显示分割线图形，如果不想显示分割线则只要设置为\n        android:divider=\"@null\" 就可以了，分割线可以自定义颜色、或图片.\n        android:dividerHeight=\"6px\"设置分割线高度像素.  \n        android:fadeScrollbars=\"true\"  滚动条的自动隐藏和显示. \n        android:transcriptMode=\"alwaysScroll\"  （支持ScrollBar）自动滑动到最底部.\n        android:stackFromBottom=\"true\" 设置你做好的列表显示在列表的最下面，值为true和false. \n        android:drawSelectorOnTop=\"true\"  点击某一条记录，颜色会显示在最上面，记录上的文字被遮住，所以点击文字不放，文字就看不到\n        android:drawSelectorOnTop=\"false\" 点击某条记录不放，颜色会在记录的后面，成为背景色，但是记录内容的文字是可见的\n\t/>\n```\n\n\n","slug":"listView","published":1,"updated":"2016-03-17T00:44:06.359Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge050047o4pkinokcrec"},{"title":"Lambda for Android","date":"2016-03-28T12:59:20.000Z","_content":"> Lambda，是我去年学习RxJava时知道的，它让代码看起来更加简洁，但个人认为代码的可读性差了很多，因此一直没有去深入学习。\n\n# 什么是lambda\nlambda是一种匿名表达式，retrolambda使得Android能使用lambda特性，举个例子：\n```\nview.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                 Log.d(\"wxl\", \"retrolambda test\");\n            }\n});\n```\n使用 lambda\n```\nview.setOnClickListener(\nv -> Log.d(\"wxl\", \"retrolambda test\"));\n```\n<!--more-->\n\n# Android如何使用\n这里是使用[Retrolambda](https://github.com/evant/gradle-retrolambda)的gradle插件，这样就可以在代码中使用lambda了。\n\n## Android Studio配置Retrolambda\n1. lambda需要安装JDK8，下载最新版本[jdk-8u73](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)\n2.  build.gradle\n```\nbuildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:1.5.0'\n        classpath 'me.tatarka:gradle-retrolambda:3.2.4'//加上这句依赖，这会使用retrolambda来编译Java代码\n    }\n}\n```\n3.  app/build.gradle \n```\napply plugin: 'com.android.application'\napply plugin: 'me.tatarka.retrolambda'//加上这句加,入plugin声明\nandroid {\n\t……\n    compileOptions {//使用JAVA8语法解析\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\nretrolambda {//指定将源码编译的级别，使用下列代码，会将代码编译到兼容1.6的字节码格式\n    javaVersion JavaVersion.VERSION_1_6\n}\n```\n\n\n# Android Studio自动生成lambda\n![](http://7q5c2h.com1.z0.glb.clouddn.com/lambda4android1.png)\n当配置Retrolambda成功后，Android Studio会有提示，按Alt+Enter键\n![](http://7q5c2h.com1.z0.glb.clouddn.com/lambda4android2.png)\n点击替换，这样就能自动生成，使用lambda了。到这里我就可以洗洗睡了，也很晚了，但为什么可以这样写呢，还是来简单了解lambda语法吧。\n\n# lambda语法简介 \n基本格式\n```\ninput -> body\n```\n## intput种类\n* 无输入 void\n() -> body\n```\nnew Thread(new Runnable() {\n            @Override\n            public void run() {\n                Log.d(\"wxl\", \"retrolambda test\");\n            }\n        });\n```\n使用 lambda\n```\n new Thread(() -> Log.d(\"wxl\", \"retrolambda test\"));\n```\n\n* 一个参数输入\nx -> body\n```\nview.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                 Log.d(\"wxl\", \"retrolambda test\");\n            }\n});\n```\n使用 lambda\n```\nview.setOnClickListener(\nv -> Log.d(\"wxl\", \"retrolambda test\"));\n```\n* 多个参数输入\n(x, y) -> x + y;\n```\nList<String> names = Arrays.asList(\"peter\", \"anna\", \"mike\", \"xenia\");\nCollections.sort(names, new Comparator<String>() {\n            @Override\n            public int compare(String a, String b) {\n                return b.compareTo(a);\n}\n        });\nfor (String name : names) {\n     Log.d(\"wxl\", name);\n}\n```\n使用 lambda\n```\nList<String> names = Arrays.asList(\"peter\", \"anna\", \"mike\", \"xenia\");\nCollections.sort(names, (a, b) -> b.compareTo(a));\nfor (String name : names) {\n     Log.d(\"wxl\", name);\n}\n```\n\n* 不省略型別\n(int x, int y) -> x + y;\n\n##  body 种类\n* 什麼都不做\n() -> {}\n* 单行不需要有返回值，单行可省略{}\n(x, y) -> x + y;\n* 单行需要有返回值\n(x, y) -> x + y//注意没有分号结尾\n```\nObservable.just(\"Hello\", \"RxJava\")\n          .map(new Func1<String, String>() {\n                    @Override\n                    public String call(String s) {\n                        return s.toUpperCase();\n                    }\n          });\n```\n使用 lambda\n```\n Observable.just(\"Hello\", \"RxJava\")\n           .map(s -> s.toUpperCase());\n```\n* 多行不需要有返回值\n(x, y) ->{\n  x * x;\n  y * y;\n}\n* 多行需要有返回值\n(x, y) ->{\n  x * x;\n  y * y;\n  return x + y;\n}\n \n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 附录\n[Lambda表达式的意义](http://www.jianshu.com/p/f02b04344365)","source":"_posts/lambda4android.md","raw":"title: Lambda for Android\ndate: 2016-03-28 20:59:20\ntags: [lambda,retrolambda]\ncategory: Android\n---\n> Lambda，是我去年学习RxJava时知道的，它让代码看起来更加简洁，但个人认为代码的可读性差了很多，因此一直没有去深入学习。\n\n# 什么是lambda\nlambda是一种匿名表达式，retrolambda使得Android能使用lambda特性，举个例子：\n```\nview.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                 Log.d(\"wxl\", \"retrolambda test\");\n            }\n});\n```\n使用 lambda\n```\nview.setOnClickListener(\nv -> Log.d(\"wxl\", \"retrolambda test\"));\n```\n<!--more-->\n\n# Android如何使用\n这里是使用[Retrolambda](https://github.com/evant/gradle-retrolambda)的gradle插件，这样就可以在代码中使用lambda了。\n\n## Android Studio配置Retrolambda\n1. lambda需要安装JDK8，下载最新版本[jdk-8u73](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)\n2.  build.gradle\n```\nbuildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:1.5.0'\n        classpath 'me.tatarka:gradle-retrolambda:3.2.4'//加上这句依赖，这会使用retrolambda来编译Java代码\n    }\n}\n```\n3.  app/build.gradle \n```\napply plugin: 'com.android.application'\napply plugin: 'me.tatarka.retrolambda'//加上这句加,入plugin声明\nandroid {\n\t……\n    compileOptions {//使用JAVA8语法解析\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\nretrolambda {//指定将源码编译的级别，使用下列代码，会将代码编译到兼容1.6的字节码格式\n    javaVersion JavaVersion.VERSION_1_6\n}\n```\n\n\n# Android Studio自动生成lambda\n![](http://7q5c2h.com1.z0.glb.clouddn.com/lambda4android1.png)\n当配置Retrolambda成功后，Android Studio会有提示，按Alt+Enter键\n![](http://7q5c2h.com1.z0.glb.clouddn.com/lambda4android2.png)\n点击替换，这样就能自动生成，使用lambda了。到这里我就可以洗洗睡了，也很晚了，但为什么可以这样写呢，还是来简单了解lambda语法吧。\n\n# lambda语法简介 \n基本格式\n```\ninput -> body\n```\n## intput种类\n* 无输入 void\n() -> body\n```\nnew Thread(new Runnable() {\n            @Override\n            public void run() {\n                Log.d(\"wxl\", \"retrolambda test\");\n            }\n        });\n```\n使用 lambda\n```\n new Thread(() -> Log.d(\"wxl\", \"retrolambda test\"));\n```\n\n* 一个参数输入\nx -> body\n```\nview.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                 Log.d(\"wxl\", \"retrolambda test\");\n            }\n});\n```\n使用 lambda\n```\nview.setOnClickListener(\nv -> Log.d(\"wxl\", \"retrolambda test\"));\n```\n* 多个参数输入\n(x, y) -> x + y;\n```\nList<String> names = Arrays.asList(\"peter\", \"anna\", \"mike\", \"xenia\");\nCollections.sort(names, new Comparator<String>() {\n            @Override\n            public int compare(String a, String b) {\n                return b.compareTo(a);\n}\n        });\nfor (String name : names) {\n     Log.d(\"wxl\", name);\n}\n```\n使用 lambda\n```\nList<String> names = Arrays.asList(\"peter\", \"anna\", \"mike\", \"xenia\");\nCollections.sort(names, (a, b) -> b.compareTo(a));\nfor (String name : names) {\n     Log.d(\"wxl\", name);\n}\n```\n\n* 不省略型別\n(int x, int y) -> x + y;\n\n##  body 种类\n* 什麼都不做\n() -> {}\n* 单行不需要有返回值，单行可省略{}\n(x, y) -> x + y;\n* 单行需要有返回值\n(x, y) -> x + y//注意没有分号结尾\n```\nObservable.just(\"Hello\", \"RxJava\")\n          .map(new Func1<String, String>() {\n                    @Override\n                    public String call(String s) {\n                        return s.toUpperCase();\n                    }\n          });\n```\n使用 lambda\n```\n Observable.just(\"Hello\", \"RxJava\")\n           .map(s -> s.toUpperCase());\n```\n* 多行不需要有返回值\n(x, y) ->{\n  x * x;\n  y * y;\n}\n* 多行需要有返回值\n(x, y) ->{\n  x * x;\n  y * y;\n  return x + y;\n}\n \n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 附录\n[Lambda表达式的意义](http://www.jianshu.com/p/f02b04344365)","slug":"lambda4android","published":1,"updated":"2016-03-23T03:37:17.339Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge08004bo4pk1qd4pr5u"},{"title":"Android library分享到jcenter","date":"2016-05-06T03:07:29.000Z","_content":"> 之前写过同样的一篇教程（地址：[Android library分享到jcenter](http://wuxiaolong.me/2015/11/12/jcenter/)），但是配置较多，还不能自己写库名（最新的貌似可以写），起码当时不能（直接取的建库时的名），这点被坑了，后来想改名都不行，后文会说。这篇教程和之前差不多，就配置这块不一样。好，快上车，老司机要开车了。\n\n# 申请bintray账号\n登录 [bintray.com](https://bintray.com/)\n在[bintray.com](https://bintray.com/)上注册一个账号。\n点击maven，点击Add New Package，为我们的library创建一个新的package。\n命名所有字母应该为小写，单词之间用－分割。\n需要API Key，点击进入你的账户信息里再点击Edit即有查看API Key的选项，把他复制下来。\n\n# 配置\nlibrary项目最好分成两个module，一个Application Module，一个Library Module。Application Module用于展示库的用法，Library Module是library的源代码。\n<!--more-->\n## 配置项目\n修改项目的build.gradle件中的依赖部分，\n```java\ndependencies {\n        classpath 'com.android.tools.build:gradle:2.1.0'\n        classpath 'com.novoda:bintray-release:0.3.4'\n    }\n```\n\n## 配置library\n具体配置可参考我的开源库[PullLoadMoreRecyclerView](https://github.com/WuXiaolong/PullLoadMoreRecyclerView/blob/master/library/build.gradle)。\n```java\napply plugin: 'com.android.library'\nandroid {\n   ……\n}\n\ndependencies {\n  ……\n}\n//添加\napply plugin: 'com.novoda.bintray-release'\npublish {\n    //bintray.com用户名\n    userOrg = 'wuxiaolong'\n    //jcenter上的路径\n    groupId = 'com.wuxiaolong.pullloadmorerecyclerview'\n    //项目名称\n    artifactId = 'pullloadmorerecyclerview'\n    //版本号\n    publishVersion = '1.0.5'\n    //描述，不重要\n    desc = '实现RecyclerView下拉刷新和上拉加载更多以及RecyclerView线性、网格、瀑布流效果演示'\n    //网站，不重要\n    website = 'https://github.com/WuXiaolong/PullLoadMoreRecyclerView'\n\n}\n```\n`是不是配置少了很多哇，这里解释下，本来我想把项目名称改成pullloadmorerecyclerview，上传也成功了，但是依赖却找不到了，之前默认名是library，我改成了library，上传，这样算一个新的库，得重新审核，哎无奈，只能按照之前的方法去上传。`\n\n# 上传library到bintray空间\n请到Android Studio的终端（Terminal）选项卡。\n输入下面的命令：\n\n```js\ngradlew clean build bintrayUpload \n -PbintrayUser=wuxiaolong \n -PbintrayKey=这里填写刚刚保存的API Key\n -PdryRun=false\n```\n如果显示如下，说明成功了！否则有log提示错误。\n```js\nBUILD SUCCESSFUL\n```\n![](http://7q5c2h.com1.z0.glb.clouddn.com/includeMyPackage.png)\n上传完成即可在Bintray网站上找到你的Repo，我们需要完成最后一步工作，申请你的Repo添加到JCenter。可以进入[这个页面](https://bintray.com/bintray/jcenter)，点击Include My Package，输入你的项目名字，点击匹配到的项目，直接send即可，然后就等管理员批准了。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/jcenterApproved.png)\n如上，网站上会给你一条通过信息，然后就OK了，大功告成。\n\n```java\ncompile 'com.wuxiaolong.pullloadmorerecyclerview:library:1.0.5'\n```\n一般来说，我们需要知道library的字符串形式，包含3部分\nGROUP_ID:ARTIFACT_ID:VERSION\n上面的例子中，GROUP_ID是com.wuxiaolong.pullloadmorerecyclerview ，即配置library中group的值；ARTIFACT_ID是library，配置library中没有写到，是library项目的名字；VERSION是1.0.5。\n查看bintray上库：\nhttp://jcenter.bintray.com/com/wuxiaolong/\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 附录\n[bintray-release](https://github.com/novoda/bintray-release)\n[Android 快速发布开源项目到jcenter](http://blog.csdn.net/lmj623565791/article/details/51148825)\n","source":"_posts/jcenter2.md","raw":"title: Android library分享到jcenter\ndate: 2016-05-06 11:07:29\ntags: jcenter\ncategory: jcenter\n---\n> 之前写过同样的一篇教程（地址：[Android library分享到jcenter](http://wuxiaolong.me/2015/11/12/jcenter/)），但是配置较多，还不能自己写库名（最新的貌似可以写），起码当时不能（直接取的建库时的名），这点被坑了，后来想改名都不行，后文会说。这篇教程和之前差不多，就配置这块不一样。好，快上车，老司机要开车了。\n\n# 申请bintray账号\n登录 [bintray.com](https://bintray.com/)\n在[bintray.com](https://bintray.com/)上注册一个账号。\n点击maven，点击Add New Package，为我们的library创建一个新的package。\n命名所有字母应该为小写，单词之间用－分割。\n需要API Key，点击进入你的账户信息里再点击Edit即有查看API Key的选项，把他复制下来。\n\n# 配置\nlibrary项目最好分成两个module，一个Application Module，一个Library Module。Application Module用于展示库的用法，Library Module是library的源代码。\n<!--more-->\n## 配置项目\n修改项目的build.gradle件中的依赖部分，\n```java\ndependencies {\n        classpath 'com.android.tools.build:gradle:2.1.0'\n        classpath 'com.novoda:bintray-release:0.3.4'\n    }\n```\n\n## 配置library\n具体配置可参考我的开源库[PullLoadMoreRecyclerView](https://github.com/WuXiaolong/PullLoadMoreRecyclerView/blob/master/library/build.gradle)。\n```java\napply plugin: 'com.android.library'\nandroid {\n   ……\n}\n\ndependencies {\n  ……\n}\n//添加\napply plugin: 'com.novoda.bintray-release'\npublish {\n    //bintray.com用户名\n    userOrg = 'wuxiaolong'\n    //jcenter上的路径\n    groupId = 'com.wuxiaolong.pullloadmorerecyclerview'\n    //项目名称\n    artifactId = 'pullloadmorerecyclerview'\n    //版本号\n    publishVersion = '1.0.5'\n    //描述，不重要\n    desc = '实现RecyclerView下拉刷新和上拉加载更多以及RecyclerView线性、网格、瀑布流效果演示'\n    //网站，不重要\n    website = 'https://github.com/WuXiaolong/PullLoadMoreRecyclerView'\n\n}\n```\n`是不是配置少了很多哇，这里解释下，本来我想把项目名称改成pullloadmorerecyclerview，上传也成功了，但是依赖却找不到了，之前默认名是library，我改成了library，上传，这样算一个新的库，得重新审核，哎无奈，只能按照之前的方法去上传。`\n\n# 上传library到bintray空间\n请到Android Studio的终端（Terminal）选项卡。\n输入下面的命令：\n\n```js\ngradlew clean build bintrayUpload \n -PbintrayUser=wuxiaolong \n -PbintrayKey=这里填写刚刚保存的API Key\n -PdryRun=false\n```\n如果显示如下，说明成功了！否则有log提示错误。\n```js\nBUILD SUCCESSFUL\n```\n![](http://7q5c2h.com1.z0.glb.clouddn.com/includeMyPackage.png)\n上传完成即可在Bintray网站上找到你的Repo，我们需要完成最后一步工作，申请你的Repo添加到JCenter。可以进入[这个页面](https://bintray.com/bintray/jcenter)，点击Include My Package，输入你的项目名字，点击匹配到的项目，直接send即可，然后就等管理员批准了。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/jcenterApproved.png)\n如上，网站上会给你一条通过信息，然后就OK了，大功告成。\n\n```java\ncompile 'com.wuxiaolong.pullloadmorerecyclerview:library:1.0.5'\n```\n一般来说，我们需要知道library的字符串形式，包含3部分\nGROUP_ID:ARTIFACT_ID:VERSION\n上面的例子中，GROUP_ID是com.wuxiaolong.pullloadmorerecyclerview ，即配置library中group的值；ARTIFACT_ID是library，配置library中没有写到，是library项目的名字；VERSION是1.0.5。\n查看bintray上库：\nhttp://jcenter.bintray.com/com/wuxiaolong/\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 附录\n[bintray-release](https://github.com/novoda/bintray-release)\n[Android 快速发布开源项目到jcenter](http://blog.csdn.net/lmj623565791/article/details/51148825)\n","slug":"jcenter2","published":1,"updated":"2016-05-06T03:50:47.572Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge0b004ho4pkiwphvcvf"},{"title":"Android library分享到jcenter","date":"2015-11-12T07:30:50.000Z","_content":"```java\ndependencies {\n  compile 'com.wuxiaolong.pullloadmorerecyclerview:library:1.0.4'\n}\n```\nbuild.gradle文件中只写上如上一行，就能在Android Studio中引入你的library到项目中，这样岂不是酷比了。之前github上分享一个简单的库，这两天花了点时间研究了下，如何也能这样一行就能依赖我的那个库。\n<!--more-->\n## 申请bintray账号\njcenter是一个由 [bintray.com](https://bintray.com/)维护的Maven仓库 。\n在[bintray.com](https://bintray.com/)上注册一个账号。然后点击maven。点击Add New Package，为我们的library创建一个新的package。命名所有字母应该为小写，单词之间用－分割。\n\n## 配置\nlibrary项目最好分成两个module，一个Application Module，一个Library Module。Application Module用于展示库的用法，Library Module是library的源代码。\n\n### 配置项目\n修改项目的build.gradle文件中的依赖部分\n```java\ndependencies {\n        classpath 'com.android.tools.build:gradle:1.5.0'\n        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.2'\n        classpath 'com.github.dcendents:android-maven-gradle-plugin:1.3'\n    }\n```\n\n打开项目的local.properties，加入以下两句:\n```java\nbintray.user=your_user_name\nbintray.apikey=your_apikey\n```\nbintray username 放在第一行， API Key放在第二行， API Key为你bintray的账户的apikey，可以点击进入你的账户信息里再点击Edit即有查看API Key的选项，把他复制下来。\n这些信息比较重要，幸而local.properties文件就已经被添加到.gitignore了。因此这些敏感数据不会被误传到git服务器。\n\n## 配置library\n很多，具体配置可参考我的开源库[PullLoadMoreRecyclerView](https://github.com/WuXiaolong/PullLoadMoreRecyclerView/blob/master/library/build.gradle)。\n```java\napply plugin: 'com.android.library'\napply plugin: 'com.github.dcendents.android-maven'\napply plugin: 'com.jfrog.bintray'\n\n// 这个version是区分library版本的，因此当我们需要更新library时记得修改这个version, 这个version影响后面的引用\nversion = \"1.0.4\"\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion \"22.0.1\"\n    resourcePrefix \"PullLoadMoreRecyclerView\"\t//这个随便填\n    defaultConfig {\n        minSdkVersion 14\n        targetSdkVersion 22\n        versionCode 101\n        versionName \"1.0.4\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    compile 'com.android.support:appcompat-v7:22.2.0'\n    compile 'com.android.support:recyclerview-v7:22.2.0'\n\n}\n\ndef siteUrl = 'https://github.com/WuXiaolong/PullLoadMoreRecyclerView'      // 项目的主页\ndef gitUrl = 'https://github.com/WuXiaolong/PullLoadMoreRecyclerView.git'   // Git仓库的url\ngroup = \"com.wuxiaolong.pullloadmorerecyclerview\"                                        // Maven Group ID for the artifact，一般填你唯一的包名\ninstall {\n    repositories.mavenInstaller {\n        // This generates POM.xml with proper parameters\n        pom {\n            project {\n                packaging 'aar'\n                // Add your description here\n                name 'RecyclerView实现下拉刷新和上拉加载更多以及瀑布流效果' \t//项目描述\n                url siteUrl\n                // Set your license\n                licenses {\n                    license {\n                        name 'The Apache Software License, Version 2.0'\n                        url 'http://www.apache.org/licenses/LICENSE-2.0.txt'\n                    }\n                }\n                developers {\n                    developer {\n                        id 'WuXiaolong'\t\t//填写的一些基本信息\n                        name 'WuXiaolong'\n                        email '1413129987@qq.com'\n                    }\n                }\n                scm {\n                    connection gitUrl\n                    developerConnection gitUrl\n                    url siteUrl\n                }\n            }\n        }\n    }\n}\ntask sourcesJar(type: Jar) {\n    from android.sourceSets.main.java.srcDirs\n    classifier = 'sources'\n}\ntask javadoc(type: Javadoc) {\n    source = android.sourceSets.main.java.srcDirs\n    classpath += project.files(android.getBootClasspath().join(File.pathSeparator))\n    options.encoding = \"UTF-8\" //添加编码方式，才不会报编码错误\n}\ntask javadocJar(type: Jar, dependsOn: javadoc) {\n    classifier = 'javadoc'\n    from javadoc.destinationDir\n}\nartifacts {\n    archives javadocJar\n    archives sourcesJar\n}\nProperties properties = new Properties()\nproperties.load(project.rootProject.file('local.properties').newDataInputStream())\nbintray {\n    user = properties.getProperty(\"bintray.user\")\n    key = properties.getProperty(\"bintray.apikey\")\n    configurations = ['archives']\n    pkg {\n        repo = \"maven\"\n        name = \"pullloadmorerecyclerview\"\t//发布到JCenter上的项目名字\n        websiteUrl = siteUrl\n        vcsUrl = gitUrl\n        licenses = [\"Apache-2.0\"]\n        publish = true\n    }\n}\n\n\n\n```\n## 上传library到bintray空间\n请到Android Studio的终端（Terminal）选项卡。\n检查代码的正确性，输入下面的命令：\n\n```js\ngradlew install\n```\n如果没有什么问题，会显示：\n```js\nBUILD SUCCESSFUL\n```\n上传编译的文件到bintray，使用如下的命令：\n```js\ngradlew bintrayUpload\n```\n\n如果显示如下说明成功了！\n```js\nBUILD SUCCESSFUL\n```\n![](http://7q5c2h.com1.z0.glb.clouddn.com/includeMyPackage.png)\n上传完成即可在Bintray网站上找到你的Repo，我们需要完成最后一步工作，申请你的Repo添加到JCenter。可以进入[这个页面](https://bintray.com/bintray/jcenter)，点击Include My Package，输入你的项目名字，点击匹配到的项目，直接send即可，然后就等管理员批准了。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/jcenterApproved.png)\n如上，网站上会给你一条通过信息，然后就OK了，大功告成。\n\n```java\ncompile 'com.wuxiaolong.pullloadmorerecyclerview:library:1.0.4'\n```\n一般来说，我们需要知道library的字符串形式，包含3部分\nGROUP_ID:ARTIFACT_ID:VERSION\n上面的例子中，GROUP_ID是com.wuxiaolong.pullloadmorerecyclerview ，即配置library中group的值；ARTIFACT_ID是library，配置library中没有写到，是library项目的名字；VERSION是1.0.4。\n查看bintray上库：\nhttp://jcenter.bintray.com/com/wuxiaolong/\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n## 附录\n[如何使用Android Studio把自己的Android library分享到jCenter和Maven Central](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0623/3097.html)\n[将Library上传到Jcenter](http://www.jianshu.com/p/0ba8960f80a9)\n","source":"_posts/jcenter.md","raw":"title: Android library分享到jcenter\ndate: 2015-11-12 15:30:50\ntags: jcenter\ncategory: jcenter\n---\n```java\ndependencies {\n  compile 'com.wuxiaolong.pullloadmorerecyclerview:library:1.0.4'\n}\n```\nbuild.gradle文件中只写上如上一行，就能在Android Studio中引入你的library到项目中，这样岂不是酷比了。之前github上分享一个简单的库，这两天花了点时间研究了下，如何也能这样一行就能依赖我的那个库。\n<!--more-->\n## 申请bintray账号\njcenter是一个由 [bintray.com](https://bintray.com/)维护的Maven仓库 。\n在[bintray.com](https://bintray.com/)上注册一个账号。然后点击maven。点击Add New Package，为我们的library创建一个新的package。命名所有字母应该为小写，单词之间用－分割。\n\n## 配置\nlibrary项目最好分成两个module，一个Application Module，一个Library Module。Application Module用于展示库的用法，Library Module是library的源代码。\n\n### 配置项目\n修改项目的build.gradle文件中的依赖部分\n```java\ndependencies {\n        classpath 'com.android.tools.build:gradle:1.5.0'\n        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.2'\n        classpath 'com.github.dcendents:android-maven-gradle-plugin:1.3'\n    }\n```\n\n打开项目的local.properties，加入以下两句:\n```java\nbintray.user=your_user_name\nbintray.apikey=your_apikey\n```\nbintray username 放在第一行， API Key放在第二行， API Key为你bintray的账户的apikey，可以点击进入你的账户信息里再点击Edit即有查看API Key的选项，把他复制下来。\n这些信息比较重要，幸而local.properties文件就已经被添加到.gitignore了。因此这些敏感数据不会被误传到git服务器。\n\n## 配置library\n很多，具体配置可参考我的开源库[PullLoadMoreRecyclerView](https://github.com/WuXiaolong/PullLoadMoreRecyclerView/blob/master/library/build.gradle)。\n```java\napply plugin: 'com.android.library'\napply plugin: 'com.github.dcendents.android-maven'\napply plugin: 'com.jfrog.bintray'\n\n// 这个version是区分library版本的，因此当我们需要更新library时记得修改这个version, 这个version影响后面的引用\nversion = \"1.0.4\"\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion \"22.0.1\"\n    resourcePrefix \"PullLoadMoreRecyclerView\"\t//这个随便填\n    defaultConfig {\n        minSdkVersion 14\n        targetSdkVersion 22\n        versionCode 101\n        versionName \"1.0.4\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    compile 'com.android.support:appcompat-v7:22.2.0'\n    compile 'com.android.support:recyclerview-v7:22.2.0'\n\n}\n\ndef siteUrl = 'https://github.com/WuXiaolong/PullLoadMoreRecyclerView'      // 项目的主页\ndef gitUrl = 'https://github.com/WuXiaolong/PullLoadMoreRecyclerView.git'   // Git仓库的url\ngroup = \"com.wuxiaolong.pullloadmorerecyclerview\"                                        // Maven Group ID for the artifact，一般填你唯一的包名\ninstall {\n    repositories.mavenInstaller {\n        // This generates POM.xml with proper parameters\n        pom {\n            project {\n                packaging 'aar'\n                // Add your description here\n                name 'RecyclerView实现下拉刷新和上拉加载更多以及瀑布流效果' \t//项目描述\n                url siteUrl\n                // Set your license\n                licenses {\n                    license {\n                        name 'The Apache Software License, Version 2.0'\n                        url 'http://www.apache.org/licenses/LICENSE-2.0.txt'\n                    }\n                }\n                developers {\n                    developer {\n                        id 'WuXiaolong'\t\t//填写的一些基本信息\n                        name 'WuXiaolong'\n                        email '1413129987@qq.com'\n                    }\n                }\n                scm {\n                    connection gitUrl\n                    developerConnection gitUrl\n                    url siteUrl\n                }\n            }\n        }\n    }\n}\ntask sourcesJar(type: Jar) {\n    from android.sourceSets.main.java.srcDirs\n    classifier = 'sources'\n}\ntask javadoc(type: Javadoc) {\n    source = android.sourceSets.main.java.srcDirs\n    classpath += project.files(android.getBootClasspath().join(File.pathSeparator))\n    options.encoding = \"UTF-8\" //添加编码方式，才不会报编码错误\n}\ntask javadocJar(type: Jar, dependsOn: javadoc) {\n    classifier = 'javadoc'\n    from javadoc.destinationDir\n}\nartifacts {\n    archives javadocJar\n    archives sourcesJar\n}\nProperties properties = new Properties()\nproperties.load(project.rootProject.file('local.properties').newDataInputStream())\nbintray {\n    user = properties.getProperty(\"bintray.user\")\n    key = properties.getProperty(\"bintray.apikey\")\n    configurations = ['archives']\n    pkg {\n        repo = \"maven\"\n        name = \"pullloadmorerecyclerview\"\t//发布到JCenter上的项目名字\n        websiteUrl = siteUrl\n        vcsUrl = gitUrl\n        licenses = [\"Apache-2.0\"]\n        publish = true\n    }\n}\n\n\n\n```\n## 上传library到bintray空间\n请到Android Studio的终端（Terminal）选项卡。\n检查代码的正确性，输入下面的命令：\n\n```js\ngradlew install\n```\n如果没有什么问题，会显示：\n```js\nBUILD SUCCESSFUL\n```\n上传编译的文件到bintray，使用如下的命令：\n```js\ngradlew bintrayUpload\n```\n\n如果显示如下说明成功了！\n```js\nBUILD SUCCESSFUL\n```\n![](http://7q5c2h.com1.z0.glb.clouddn.com/includeMyPackage.png)\n上传完成即可在Bintray网站上找到你的Repo，我们需要完成最后一步工作，申请你的Repo添加到JCenter。可以进入[这个页面](https://bintray.com/bintray/jcenter)，点击Include My Package，输入你的项目名字，点击匹配到的项目，直接send即可，然后就等管理员批准了。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/jcenterApproved.png)\n如上，网站上会给你一条通过信息，然后就OK了，大功告成。\n\n```java\ncompile 'com.wuxiaolong.pullloadmorerecyclerview:library:1.0.4'\n```\n一般来说，我们需要知道library的字符串形式，包含3部分\nGROUP_ID:ARTIFACT_ID:VERSION\n上面的例子中，GROUP_ID是com.wuxiaolong.pullloadmorerecyclerview ，即配置library中group的值；ARTIFACT_ID是library，配置library中没有写到，是library项目的名字；VERSION是1.0.4。\n查看bintray上库：\nhttp://jcenter.bintray.com/com/wuxiaolong/\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n## 附录\n[如何使用Android Studio把自己的Android library分享到jCenter和Maven Central](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0623/3097.html)\n[将Library上传到Jcenter](http://www.jianshu.com/p/0ba8960f80a9)\n","slug":"jcenter","published":1,"updated":"2016-05-06T03:29:49.640Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge0f004mo4pkv5o2t7gh"},{"title":"java.lang.IllegalStateException:Fragment（XXFragment） not attached to Activity","date":"2014-06-23T16:00:00.000Z","_content":"java.lang.IllegalStateException: Fragment already active\n\n说明：当Fragment处于激活状态，使用Fragment.setArguments(bundle)就会跑出该异常\n\n解决：setArguments()之前，判断Fragment是否可见，Fragment.isVisible();\n\n转载：http://jogickis.iteye.com/blog/1990790\n\n下边两个问题，是在开发中碰到的一些关于Fragment的偶发性的问题，下面是网上搜了一些解决方式：\n\n<!-- more -->\n\n \n1、关于Fragment（XXFragment） not attached to Activity 异常。出现该异常，是因为Fragment的还没有Attach到Activity时，调用了如getResource()等，需要上下文Content的函数。\n\n解决方法，就是等将调用的代码写在OnStart（）中。网上还有几处这样的参考：http://stackoverflow.com/questions/10919240/fragment-myfragment-not-attached-to-activity  \n回答的主要是在调用\ngetResources().getString(R.string.app_name); \ngetResources().getString(R.string.app_name);\n\n之前增加一个判断isAdded(),两外说这个异常解决办法的有http://stackoverflow.com/questions/6870325/android-compatibility-package-fragment-not-attached-to-activity\n这个是针对另外一种情况下的解决方式。\n\n2、在使用Fragment保存参数的时候，可能是因为需要保存的参数比较大或者比较多，这种情况下页会引起异常。比如代码\n\n```java\nBundle b = new Bundle(); b.putParcelable(\"bitmap\", bitmap2); imageRecognitionFragment.setArguments(b);\nBundle b = new Bundle(); b.putParcelable(\"bitmap\", bitmap2); imageRecognitionFragment.setArguments(b);\n```\n\n设置好参数，并且添加hide(),add(),方法之后，需要commit()，来实现两个Fragment跳转的时候，这种情形下参数需要进行系统保存，但是这个时候你已经实现了跳转，系统参数却没有保存。\n此时就会报java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState异常。\n\n分析原因：你并不需要系统保存的参数，只要你自己设置的参数能够传递过去，在另外一个Fragment里能够顺利接受就行了，现在android里提供了另外一种形式的提交方式commitAllowingStateLoss()，从名字上就能看出，这种提交是允许状态值丢失的。到此问题得到完美解决，值的传递是你自己控制的。\n\n这里也说一下另外一个问题，bitmap 也可以通过Bundle传递的，使用putParacelable就可以了\n\n转载：http://www.cnblogs.com/fanglove/archive/2013/05/09/3069325.html\n","source":"_posts/java-lang-IllegalStateException-Fragment-not-attached-to-Activity.md","raw":"title: java.lang.IllegalStateException:Fragment（XXFragment） not attached to Activity\ndate: 2014-06-24 \ncategories: [Android]\ntags: [Android,Fragment]\n---\njava.lang.IllegalStateException: Fragment already active\n\n说明：当Fragment处于激活状态，使用Fragment.setArguments(bundle)就会跑出该异常\n\n解决：setArguments()之前，判断Fragment是否可见，Fragment.isVisible();\n\n转载：http://jogickis.iteye.com/blog/1990790\n\n下边两个问题，是在开发中碰到的一些关于Fragment的偶发性的问题，下面是网上搜了一些解决方式：\n\n<!-- more -->\n\n \n1、关于Fragment（XXFragment） not attached to Activity 异常。出现该异常，是因为Fragment的还没有Attach到Activity时，调用了如getResource()等，需要上下文Content的函数。\n\n解决方法，就是等将调用的代码写在OnStart（）中。网上还有几处这样的参考：http://stackoverflow.com/questions/10919240/fragment-myfragment-not-attached-to-activity  \n回答的主要是在调用\ngetResources().getString(R.string.app_name); \ngetResources().getString(R.string.app_name);\n\n之前增加一个判断isAdded(),两外说这个异常解决办法的有http://stackoverflow.com/questions/6870325/android-compatibility-package-fragment-not-attached-to-activity\n这个是针对另外一种情况下的解决方式。\n\n2、在使用Fragment保存参数的时候，可能是因为需要保存的参数比较大或者比较多，这种情况下页会引起异常。比如代码\n\n```java\nBundle b = new Bundle(); b.putParcelable(\"bitmap\", bitmap2); imageRecognitionFragment.setArguments(b);\nBundle b = new Bundle(); b.putParcelable(\"bitmap\", bitmap2); imageRecognitionFragment.setArguments(b);\n```\n\n设置好参数，并且添加hide(),add(),方法之后，需要commit()，来实现两个Fragment跳转的时候，这种情形下参数需要进行系统保存，但是这个时候你已经实现了跳转，系统参数却没有保存。\n此时就会报java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState异常。\n\n分析原因：你并不需要系统保存的参数，只要你自己设置的参数能够传递过去，在另外一个Fragment里能够顺利接受就行了，现在android里提供了另外一种形式的提交方式commitAllowingStateLoss()，从名字上就能看出，这种提交是允许状态值丢失的。到此问题得到完美解决，值的传递是你自己控制的。\n\n这里也说一下另外一个问题，bitmap 也可以通过Bundle传递的，使用putParacelable就可以了\n\n转载：http://www.cnblogs.com/fanglove/archive/2013/05/09/3069325.html\n","slug":"java-lang-IllegalStateException-Fragment-not-attached-to-Activity","published":1,"updated":"2016-03-17T00:44:06.358Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge0h004po4pkr6jldipy"},{"title":"jarsigner签名安卓Apk程序","date":"2014-12-04T16:00:00.000Z","_content":"\n发布过Android应用的朋友们应该都知道，Android APK的发布是必需要签名，本签名指南演示如何使用WoSign安卓代码签名证书，签名安卓 .apk 程序。\n\n## 签名证书\n\n制作证书，证书文件名：android.keystore, 证书别名：android.keystore\n \n## 安装签名环境JDK包\n\n签名工具包可以在JDK官方网站下载：[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)，也可以直接点击这里下载JDK工具包(请使用JDK 1.6版本)。\n文件包下载安装完成后，然后就开始进入jdk的签名根目录，具体如下：\n\n开始-> 运行-> cmd->cd 到您安装的jdk的目录这里我是D:\\Program Files\\Java\\jdk1.6.0\\bin\n \n<!-- more -->\n## 签名\n\n在D:\\Program Files\\Java\\jdk1.6.0\\bin 找到工具 jarsigner.exe，并把证书android.keystore 文件放入当前目录。签名命令：\n\njarsigner -verbose -keystore android.keystore -signedjar Last_gongs_sign.apk Before_sign.apk android.keystore\n\n1）jarsigner是工具名称，-verbose表示将签名过程中的详细信息打印出来，显示在dos窗口中；\n\n2）-keystore android.keystore 表示签名所使用的数字证书和所在位置，这里没有写路径，表示在当前目录下；\n\n3）-signedjar Last_gongs_sign.apk Before_sign.apk 表示给 Before_sign.apk文件签名，签名后的文件名称为Last_gongs_sign.apk；\n\n4）最后面的android.keystore 表示证书的别名\n![](http://7q5c2h.com1.z0.glb.clouddn.com/2014-12-05-jarsigner-0.png)\n \n![](http://wuxiaolong.qiniudn.com/2014-12-05-jarsigner-1.png)\n如上图所示，签名成功。\n \n## 验证签名\n\n使用命令验证已经签名的apk文件：jarsigner –verify Last_gongs_sign.apk\n\n![](http://wuxiaolong.qiniudn.com/2014-12-05-jarsigner-2.png)\n\n如果想要知道更多明细, 你可以尝试如下几个命令:\n\n    jarsigner -verify -verbose Last_gongs_sign.apk                                            \n或\n    jarsigner -verify -verbose -certs Last_gongs_sign.apk  \n    \n上面的命令, 使用 -certs 参数, 将显示 \"CN=\" 行, 描述是谁签名了APK文件.\n\n原文：[http://feelyou.info/trying_to_manually_sign_android_package_with_jarsigner_but_install_failed/](http://feelyou.info/trying_to_manually_sign_android_package_with_jarsigner_but_install_failed/)\n\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n","source":"_posts/jarsigner.md","raw":"title: jarsigner签名安卓Apk程序\ndate: 2014-12-05 \ncategories: [Android]\ntags: [Android,jarsigner]\n---\n\n发布过Android应用的朋友们应该都知道，Android APK的发布是必需要签名，本签名指南演示如何使用WoSign安卓代码签名证书，签名安卓 .apk 程序。\n\n## 签名证书\n\n制作证书，证书文件名：android.keystore, 证书别名：android.keystore\n \n## 安装签名环境JDK包\n\n签名工具包可以在JDK官方网站下载：[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)，也可以直接点击这里下载JDK工具包(请使用JDK 1.6版本)。\n文件包下载安装完成后，然后就开始进入jdk的签名根目录，具体如下：\n\n开始-> 运行-> cmd->cd 到您安装的jdk的目录这里我是D:\\Program Files\\Java\\jdk1.6.0\\bin\n \n<!-- more -->\n## 签名\n\n在D:\\Program Files\\Java\\jdk1.6.0\\bin 找到工具 jarsigner.exe，并把证书android.keystore 文件放入当前目录。签名命令：\n\njarsigner -verbose -keystore android.keystore -signedjar Last_gongs_sign.apk Before_sign.apk android.keystore\n\n1）jarsigner是工具名称，-verbose表示将签名过程中的详细信息打印出来，显示在dos窗口中；\n\n2）-keystore android.keystore 表示签名所使用的数字证书和所在位置，这里没有写路径，表示在当前目录下；\n\n3）-signedjar Last_gongs_sign.apk Before_sign.apk 表示给 Before_sign.apk文件签名，签名后的文件名称为Last_gongs_sign.apk；\n\n4）最后面的android.keystore 表示证书的别名\n![](http://7q5c2h.com1.z0.glb.clouddn.com/2014-12-05-jarsigner-0.png)\n \n![](http://wuxiaolong.qiniudn.com/2014-12-05-jarsigner-1.png)\n如上图所示，签名成功。\n \n## 验证签名\n\n使用命令验证已经签名的apk文件：jarsigner –verify Last_gongs_sign.apk\n\n![](http://wuxiaolong.qiniudn.com/2014-12-05-jarsigner-2.png)\n\n如果想要知道更多明细, 你可以尝试如下几个命令:\n\n    jarsigner -verify -verbose Last_gongs_sign.apk                                            \n或\n    jarsigner -verify -verbose -certs Last_gongs_sign.apk  \n    \n上面的命令, 使用 -certs 参数, 将显示 \"CN=\" 行, 描述是谁签名了APK文件.\n\n原文：[http://feelyou.info/trying_to_manually_sign_android_package_with_jarsigner_but_install_failed/](http://feelyou.info/trying_to_manually_sign_android_package_with_jarsigner_but_install_failed/)\n\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n","slug":"jarsigner","published":1,"updated":"2016-03-17T00:44:06.358Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge0j004uo4pko0f4ru7v"},{"title":"Android如何防止apk程序被反编译","date":"2013-07-22T16:00:00.000Z","_content":"作为Android应用开发者，不得不面对一个尴尬的局面，就是自己辛辛苦苦开发的应用可以被别人很轻易的就反编译出来。Google似乎也发现了这个问题，从SDK2.3开始我们可以看到在android-sdk-windows\\tools\\下面多了一个proguard文件夹。proguard是一个java代码混淆的工具，通过proguard，别人即使反编译你的apk包，也只会看到一些让人很难看懂的代码，从而达到保护代码的作用。新建项目都会有以下两个文件：\n![](http://wuxiaolong.qiniudn.com/2013-07-18-mobile-phone-information-acquisition-1.png)\nproject.properties文件“proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt”注释放开。\n![](http://wuxiaolong.qiniudn.com/2013-07-18-mobile-phone-information-acquisition-2.png)\n然后在proguard-project.txt文件里做混淆，例如：\n\n<!-- more -->\n\n```java\n\t#---------------Begin: support-v4包 ----------\n\t-libraryjars   libs/android-support-v4.jar\n\t-dontwarn android.support.v4.**  #打包时忽略以下类的警告  \n\t-keep class android.support.v4.** { *; }  \n\t-keep interface android.support.v4.app.** { *; }  \n\t-keep public class * extends android.support.v4.**  \n\t#-keep public class * extends android.app.Fragment\n\t#---------------End: support-v4包 ----------\n```\n以上是混淆了support-v4包，如果混淆其他的jar，举一反三。\n比如A.jar，它的包名是a.b.c.d。然后做混淆就如下：\n\n\n```java \n\t-keep class a.b.c.d.** { *; }  \n```\n正常的编译签名后就可以防止代码被反编译了。反编译经过代码混淆的apk得到的代码应该类似于下面的效果，是很难看懂的：\n![](http://wuxiaolong.qiniudn.com/2013-07-18-mobile-phone-information-acquisition-3.png)\n","source":"_posts/how-to-prevent-the-APK-program-by-decompile.md","raw":"title: Android如何防止apk程序被反编译\ncategories: [Android]\ntags: [Android]\ndate: 2013-07-23\n---\n作为Android应用开发者，不得不面对一个尴尬的局面，就是自己辛辛苦苦开发的应用可以被别人很轻易的就反编译出来。Google似乎也发现了这个问题，从SDK2.3开始我们可以看到在android-sdk-windows\\tools\\下面多了一个proguard文件夹。proguard是一个java代码混淆的工具，通过proguard，别人即使反编译你的apk包，也只会看到一些让人很难看懂的代码，从而达到保护代码的作用。新建项目都会有以下两个文件：\n![](http://wuxiaolong.qiniudn.com/2013-07-18-mobile-phone-information-acquisition-1.png)\nproject.properties文件“proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt”注释放开。\n![](http://wuxiaolong.qiniudn.com/2013-07-18-mobile-phone-information-acquisition-2.png)\n然后在proguard-project.txt文件里做混淆，例如：\n\n<!-- more -->\n\n```java\n\t#---------------Begin: support-v4包 ----------\n\t-libraryjars   libs/android-support-v4.jar\n\t-dontwarn android.support.v4.**  #打包时忽略以下类的警告  \n\t-keep class android.support.v4.** { *; }  \n\t-keep interface android.support.v4.app.** { *; }  \n\t-keep public class * extends android.support.v4.**  \n\t#-keep public class * extends android.app.Fragment\n\t#---------------End: support-v4包 ----------\n```\n以上是混淆了support-v4包，如果混淆其他的jar，举一反三。\n比如A.jar，它的包名是a.b.c.d。然后做混淆就如下：\n\n\n```java \n\t-keep class a.b.c.d.** { *; }  \n```\n正常的编译签名后就可以防止代码被反编译了。反编译经过代码混淆的apk得到的代码应该类似于下面的效果，是很难看懂的：\n![](http://wuxiaolong.qiniudn.com/2013-07-18-mobile-phone-information-acquisition-3.png)\n","slug":"how-to-prevent-the-APK-program-by-decompile","published":1,"updated":"2016-03-17T00:44:06.358Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge0m004zo4pkf6mcig2s"},{"title":"Hello hexo","date":"2015-07-29T23:56:29.000Z","_content":"Welcome to [Hexo](http://hexo.io/)! This is your very first post. Check [documentation](http://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](http://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n<!--more-->\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](http://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](http://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](http://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](http://hexo.io/docs/deployment.html)\n","source":"_posts/hello-hexo.md","raw":"title: Hello hexo\ndate: 2015-07-30 07:56:29 #发表日期，一般不改动\ncategories: hexo #文章文类\ntags: hexo #文章标签，多于一项时用这种格式\n---\nWelcome to [Hexo](http://hexo.io/)! This is your very first post. Check [documentation](http://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](http://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n<!--more-->\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](http://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](http://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](http://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](http://hexo.io/docs/deployment.html)\n","slug":"hello-hexo","published":1,"updated":"2016-03-17T00:44:06.357Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge0o0052o4pkau55lp3q"},{"title":"Gradle for Android（三）多渠道打包、配置签名信息","date":"2016-04-01T06:11:14.000Z","_content":"# 系列博客\n> [Gradle for Android（一）基本配置、依赖管理](http://wuxiaolong.me/2016/03/30/gradle4android1/)\n> [Gradle for Android（二）全局设置、自定义BuildConfig、混淆](http://wuxiaolong.me/2016/03/31/gradle4android2/)\n\n# 多渠道打包\n国内有太多Android App市场，每次发版几十个渠道包。还好Android Gradle给我们提供了productFlavors，我们可以对生成的APK包进行定制。\n```\n    productFlavors {//多渠道打包\n        xiaomi {\n            applicationId 'com.wuxiaolong.gradle4android1'\n        }\n\n        googlepaly {\n            applicationId 'com.wuxiaolong.gradle4android2'\n        }\n    }\n```\n<!--more-->\n\n## 定制生成的apk文件名\n```\n   applicationVariants.all { variant ->\n                if (variant.buildType.name.equals('release')) {\n                    variant.outputs.each { output ->\n                        def outputFile = output.outputFile\n                        if (outputFile != null && outputFile.name.endsWith('.apk')) {\n                            def fileName = \"gradle4android_v${defaultConfig.versionName}_${releaseTime()}_${variant.flavorName}.apk\"\n                            output.outputFile = new File(outputFile.parent, fileName)\n                        }\n                    }\n                }\n            }\n```\n输出apk名字：gradle4android_v1.0_2016-03-23_xiaomi.apk\n\n## 占位符\n多渠道打包，还会遇到一个问题，比如友盟统计的渠道号，Gradle处理办法：manifestPlaceholders，它允许我们动态替换我们在AndroidManifest文件里定义的占位符。\nAndroidManifest.xml：\n```\n <meta-data\n            android:name=\"UMENG_CHANNEL\"\n            android:value=\"${UMENG_CHANNEL_VALUE}\" />\n```\n如下，${UMENG_CHANNEL_VALUE}占位符会被dev替换。\n```\n defaultConfig {\n        manifestPlaceholders = [UMENG_CHANNEL_VALUE: 'dev']\n    }\n```\n如果渠道太多，不用这样一个个去写，可以循环：\n```\n productFlavors.all { flavor ->\n                manifestPlaceholders.put(\"UMENG_CHANNEL_VALUE\",name)\n            }\n```\n## 渠道打包完整代码：\n```\nandroid {\n//省略部分代码\n     buildTypes {\n        release {\n            minifyEnabled false//是否启动混淆\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            applicationVariants.all { variant ->\n                if (variant.buildType.name.equals('release')) {\n                    variant.outputs.each { output ->\n                        def outputFile = output.outputFile\n                        if (outputFile != null && outputFile.name.endsWith('.apk')) {\n                            def fileName = \"gradleTest_v${defaultConfig.versionName}_${releaseTime()}_${variant.flavorName}.apk\"\n                            output.outputFile = new File(outputFile.parent, fileName)\n                        }\n                    }\n                }\n            }\n            //针对很多渠道\n            //productFlavors.all { flavor ->\n            //   manifestPlaceholders.put(\"UMENG_CHANNEL_VALUE\",name)\n            // }\n        }\n    }\n    productFlavors {//多渠道打包，命令行打包：gradlew assembleRelease\n        xiaomi {\n            applicationId 'com.wuxiaolong.gradle4android1'\n            manifestPlaceholders.put(\"UMENG_CHANNEL_VALUE\", 'xiaomi')\n        }\n        googlepaly {\n            applicationId 'com.wuxiaolong.gradle4android2'\n            manifestPlaceholders.put(\"UMENG_CHANNEL_VALUE\", 'googlepaly')\n        }\n    }\n //省略部分代码\n\ndef releaseTime() {\n    return new Date().format(\"yyyy-MM-dd\", TimeZone.getTimeZone(\"UTC\"))\n}\n```\n\n# 配置签名信息\n## Android Studio设置默认的签名文件\n新浪微博SSO登录，微信分享这些都需要签名打包，才能看到效果，设置默认签名文件为自己的签名jks，这样就不需要打包了直接运行起来就是正式的签名。\n在android.signingConfigs{}下定义一个或者多个签名信息，然后在buildTypes{}配置使用即可。\n在app目录下添加你的.jks，然后app的build.gradle文件中的增加以下内容：\n第一种：\n```\nandroid {  \n    signingConfigs {  \n        debug {  \n            storeFile file(\"WuXiaolong.jks\")\n            storePassword 'android'\n            keyAlias 'android'\n            keyPassword 'android'\n        }          \n    }  \t\n}\n```\nbuildTypes没有配置，也是直接取得debug，是不是不配置默认取得是debug呢？\n第二种：\n```\nandroid {  \n    signingConfigs {  \n        release {  \n            storeFile file(\"WuXiaolong.jks\")\n            storePassword 'android'\n            keyAlias 'android'\n            keyPassword 'android'\n        }          \n    }  \n\tbuildTypes {\n        debug {\n            signingConfig signingConfigs.release\n        }        \n    }\n}\n```\n# 签名打包\n## 通过Android Studio签名\n这里不细说了。\n## 通过命令行签名\n如上那样配置签名信息\n```\nandroid {  \n    signingConfigs {  \n        release {  \n            storeFile file(\"WuXiaolong.jks\")\n            storePassword 'android'\n            keyAlias 'android'\n            keyPassword 'android'\n        }          \n    }  \n\tbuildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            signingConfig signingConfigs.release\n        }      \n    }\n}\n```\n先\"build-clean Project\"，然后Terminal输入命名行：\n```\ngradlew assembleRelease\n```\n打印信息如下：\n```\nE:\\AndroidStudioProjects\\Gradle4Android>gradlew assembleRelease\n:app:preBuild UP-TO-DATE                                                             \n:app:preReleaseBuild UP-TO-DATE     \n:app:checkReleaseManifest                  \n//省略部分               \n:app:packageRelease                 \n:app:zipalignRelease                 \n:app:assembleRelease                 \n               \nBUILD SUCCESSFUL\n```\nOK，打包成功的apk路径如：E:\\AndroidStudioProjects\\Gradle4Android\\app\\build\\outputs\\apk\\app-release.apk\n![](http://7q5c2h.com1.z0.glb.clouddn.com/gradle4android3.png)\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 完整配置\n[https://github.com/WuXiaolong/Gradle4Android](https://github.com/WuXiaolong/Gradle4Android)\n\n# 附录\n[Gradle for Android 第一篇( 从 Gradle 和 AS 开始 )](https://segmentfault.com/a/1190000004229002)\n[使用Gradle管理你的Android Studio工程](http://www.flysnow.org/2015/03/30/manage-your-android-project-with-gradle.html)\n\n","source":"_posts/gradle4android3.md","raw":"title: Gradle for Android（三）多渠道打包、配置签名信息\ndate: 2016-04-01 14:11:14\ntags: Gradle \ncategory: Gradle \n---\n# 系列博客\n> [Gradle for Android（一）基本配置、依赖管理](http://wuxiaolong.me/2016/03/30/gradle4android1/)\n> [Gradle for Android（二）全局设置、自定义BuildConfig、混淆](http://wuxiaolong.me/2016/03/31/gradle4android2/)\n\n# 多渠道打包\n国内有太多Android App市场，每次发版几十个渠道包。还好Android Gradle给我们提供了productFlavors，我们可以对生成的APK包进行定制。\n```\n    productFlavors {//多渠道打包\n        xiaomi {\n            applicationId 'com.wuxiaolong.gradle4android1'\n        }\n\n        googlepaly {\n            applicationId 'com.wuxiaolong.gradle4android2'\n        }\n    }\n```\n<!--more-->\n\n## 定制生成的apk文件名\n```\n   applicationVariants.all { variant ->\n                if (variant.buildType.name.equals('release')) {\n                    variant.outputs.each { output ->\n                        def outputFile = output.outputFile\n                        if (outputFile != null && outputFile.name.endsWith('.apk')) {\n                            def fileName = \"gradle4android_v${defaultConfig.versionName}_${releaseTime()}_${variant.flavorName}.apk\"\n                            output.outputFile = new File(outputFile.parent, fileName)\n                        }\n                    }\n                }\n            }\n```\n输出apk名字：gradle4android_v1.0_2016-03-23_xiaomi.apk\n\n## 占位符\n多渠道打包，还会遇到一个问题，比如友盟统计的渠道号，Gradle处理办法：manifestPlaceholders，它允许我们动态替换我们在AndroidManifest文件里定义的占位符。\nAndroidManifest.xml：\n```\n <meta-data\n            android:name=\"UMENG_CHANNEL\"\n            android:value=\"${UMENG_CHANNEL_VALUE}\" />\n```\n如下，${UMENG_CHANNEL_VALUE}占位符会被dev替换。\n```\n defaultConfig {\n        manifestPlaceholders = [UMENG_CHANNEL_VALUE: 'dev']\n    }\n```\n如果渠道太多，不用这样一个个去写，可以循环：\n```\n productFlavors.all { flavor ->\n                manifestPlaceholders.put(\"UMENG_CHANNEL_VALUE\",name)\n            }\n```\n## 渠道打包完整代码：\n```\nandroid {\n//省略部分代码\n     buildTypes {\n        release {\n            minifyEnabled false//是否启动混淆\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            applicationVariants.all { variant ->\n                if (variant.buildType.name.equals('release')) {\n                    variant.outputs.each { output ->\n                        def outputFile = output.outputFile\n                        if (outputFile != null && outputFile.name.endsWith('.apk')) {\n                            def fileName = \"gradleTest_v${defaultConfig.versionName}_${releaseTime()}_${variant.flavorName}.apk\"\n                            output.outputFile = new File(outputFile.parent, fileName)\n                        }\n                    }\n                }\n            }\n            //针对很多渠道\n            //productFlavors.all { flavor ->\n            //   manifestPlaceholders.put(\"UMENG_CHANNEL_VALUE\",name)\n            // }\n        }\n    }\n    productFlavors {//多渠道打包，命令行打包：gradlew assembleRelease\n        xiaomi {\n            applicationId 'com.wuxiaolong.gradle4android1'\n            manifestPlaceholders.put(\"UMENG_CHANNEL_VALUE\", 'xiaomi')\n        }\n        googlepaly {\n            applicationId 'com.wuxiaolong.gradle4android2'\n            manifestPlaceholders.put(\"UMENG_CHANNEL_VALUE\", 'googlepaly')\n        }\n    }\n //省略部分代码\n\ndef releaseTime() {\n    return new Date().format(\"yyyy-MM-dd\", TimeZone.getTimeZone(\"UTC\"))\n}\n```\n\n# 配置签名信息\n## Android Studio设置默认的签名文件\n新浪微博SSO登录，微信分享这些都需要签名打包，才能看到效果，设置默认签名文件为自己的签名jks，这样就不需要打包了直接运行起来就是正式的签名。\n在android.signingConfigs{}下定义一个或者多个签名信息，然后在buildTypes{}配置使用即可。\n在app目录下添加你的.jks，然后app的build.gradle文件中的增加以下内容：\n第一种：\n```\nandroid {  \n    signingConfigs {  \n        debug {  \n            storeFile file(\"WuXiaolong.jks\")\n            storePassword 'android'\n            keyAlias 'android'\n            keyPassword 'android'\n        }          \n    }  \t\n}\n```\nbuildTypes没有配置，也是直接取得debug，是不是不配置默认取得是debug呢？\n第二种：\n```\nandroid {  \n    signingConfigs {  \n        release {  \n            storeFile file(\"WuXiaolong.jks\")\n            storePassword 'android'\n            keyAlias 'android'\n            keyPassword 'android'\n        }          \n    }  \n\tbuildTypes {\n        debug {\n            signingConfig signingConfigs.release\n        }        \n    }\n}\n```\n# 签名打包\n## 通过Android Studio签名\n这里不细说了。\n## 通过命令行签名\n如上那样配置签名信息\n```\nandroid {  \n    signingConfigs {  \n        release {  \n            storeFile file(\"WuXiaolong.jks\")\n            storePassword 'android'\n            keyAlias 'android'\n            keyPassword 'android'\n        }          \n    }  \n\tbuildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            signingConfig signingConfigs.release\n        }      \n    }\n}\n```\n先\"build-clean Project\"，然后Terminal输入命名行：\n```\ngradlew assembleRelease\n```\n打印信息如下：\n```\nE:\\AndroidStudioProjects\\Gradle4Android>gradlew assembleRelease\n:app:preBuild UP-TO-DATE                                                             \n:app:preReleaseBuild UP-TO-DATE     \n:app:checkReleaseManifest                  \n//省略部分               \n:app:packageRelease                 \n:app:zipalignRelease                 \n:app:assembleRelease                 \n               \nBUILD SUCCESSFUL\n```\nOK，打包成功的apk路径如：E:\\AndroidStudioProjects\\Gradle4Android\\app\\build\\outputs\\apk\\app-release.apk\n![](http://7q5c2h.com1.z0.glb.clouddn.com/gradle4android3.png)\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 完整配置\n[https://github.com/WuXiaolong/Gradle4Android](https://github.com/WuXiaolong/Gradle4Android)\n\n# 附录\n[Gradle for Android 第一篇( 从 Gradle 和 AS 开始 )](https://segmentfault.com/a/1190000004229002)\n[使用Gradle管理你的Android Studio工程](http://www.flysnow.org/2015/03/30/manage-your-android-project-with-gradle.html)\n\n","slug":"gradle4android3","published":1,"updated":"2016-04-01T01:11:59.978Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge0q0057o4pk2s2f3cax"},{"title":"Gradle for Android（二）全局设置、自定义BuildConfig、混淆","date":"2016-03-31T06:11:14.000Z","_content":"# 系列博客\n> [Gradle for Android（一）基本配置、依赖管理](http://wuxiaolong.me/2016/03/30/gradle4android1/)\n> [Gradle for Android（三）多渠道打包、配置签名信息](http://wuxiaolong.me/2016/04/01/gradle4android3/)\n\n# 全局设置\n如果有很多项目，可以设置全局来统一管理版本号或依赖库，根目录下build.gradle下：\n```\next {\n    compileSdkVersion = 23\n    buildToolsVersion = \"23.0.2\"\n    minSdkVersion = 14\n    targetSdkVersion = 23\n}\n```\n<!--more-->\n\napp/build.gradle\n```\nandroid {\n    compileSdkVersion rootProject.ext.compileSdkVersion\n    buildToolsVersion rootProject.ext.buildToolsVersion\n\n    defaultConfig {\n        applicationId \"com.wuxiaolong.gradle4android\"\n        minSdkVersion rootProject.ext.minSdkVersion\n        targetSdkVersion rootProject.ext.targetSdkVersion\n        versionCode 1\n        versionName \"1.0\"\n    }\n```\n可以在根目录下建个config.gradle，然后只需在根目录下build.gradle最顶部加上下面一行代码，然后同步下，意思就是所有的子项目或者所有的modules都可以从这个配置文件里读取内容。\n```\napply from: \"config.gradle\"\n```\nconfig.gradle\n```\next {\n\n    android = [\n            compileSdkVersion: 23,\n            buildToolsVersion: \"23.0.2\",\n            minSdkVersion    : 14,\n            targetSdkVersion : 22,\n\n    ]\n\n    dependencies = [\n            appcompatV7': 'com.android.support:appcompat-v7:23.2.1',\n            design      : 'com.android.support:design:23.2.1'\n\n    ]\n}\n\n```\napp/build.gradle\n```\nandroid {\n    compileSdkVersion rootProject.ext.android.compileSdkVersion\n    buildToolsVersion rootProject.ext.buildToolsVersion\n\n    defaultConfig {\n        applicationId \"com.wuxiaolong.gradle4android\"\n        minSdkVersion rootProject.ext.android.minSdkVersion\n        targetSdkVersion rootProject.ext.android.targetSdkVersion\n        versionCode 1\n        versionName \"1.0\"\n    }\n  \n...\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n    compile rootProject.ext.dependencies.appcompatV7\n    compile rootProject.ext.dependencies.design\n}\n```\n\n\n# 自定义BuildConfig\n实际开发中服务器可能有正式环境和测试环境，gradle可以通过buildConfigField来配置。\n```\n defaultConfig {\n        buildConfigField 'String','API_SERVER_URL','\"http://wuxiaolong.me/\"'\n    }\n```\nbuildConfigField 一共有3个参数，第一个是数据类型，和Java的类型是对等的；第二个参数是常量名，这里是API_SERVER_URL；第三个参数就是你要配置的值。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/gradle4android2.png)\n如图路径下就有个常量API_SERVER_URL，如何在代码取得这个常量值：\n```\n  Log.d(\"wxl\", \"API_SERVER_URL=\" + BuildConfig.API_SERVER_URL);\n```\n# 启用proguard混淆\n一般release发布版本是需要启用混淆的，这样别人反编译之后就很难分析你的代码，而我们自己开发调试的时候是不需要混淆的，所以debug不启用混淆。对release启用混淆的配置如下：\n```\nandroid {\n\n    buildTypes {\n        release {\n            minifyEnabled true//是否启动混淆\n\t\t\tshrinkResources true //是否移除无用资源文件，shrinkResources依赖于minifyEnabled，必须和minifyEnabled一起用\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n   }\n}\n```\nminifyEnabled为true表示启用混淆，proguardFile是混淆使用的配置文件，这里是module根目录下的proguard-rules.pro文件\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 完整配置\n[https://github.com/WuXiaolong/Gradle4Android](https://github.com/WuXiaolong/Gradle4Android)\n","source":"_posts/gradle4android2.md","raw":"title: Gradle for Android（二）全局设置、自定义BuildConfig、混淆\ndate: 2016-03-31 14:11:14\ntags: Gradle \ncategory: Gradle \n---\n# 系列博客\n> [Gradle for Android（一）基本配置、依赖管理](http://wuxiaolong.me/2016/03/30/gradle4android1/)\n> [Gradle for Android（三）多渠道打包、配置签名信息](http://wuxiaolong.me/2016/04/01/gradle4android3/)\n\n# 全局设置\n如果有很多项目，可以设置全局来统一管理版本号或依赖库，根目录下build.gradle下：\n```\next {\n    compileSdkVersion = 23\n    buildToolsVersion = \"23.0.2\"\n    minSdkVersion = 14\n    targetSdkVersion = 23\n}\n```\n<!--more-->\n\napp/build.gradle\n```\nandroid {\n    compileSdkVersion rootProject.ext.compileSdkVersion\n    buildToolsVersion rootProject.ext.buildToolsVersion\n\n    defaultConfig {\n        applicationId \"com.wuxiaolong.gradle4android\"\n        minSdkVersion rootProject.ext.minSdkVersion\n        targetSdkVersion rootProject.ext.targetSdkVersion\n        versionCode 1\n        versionName \"1.0\"\n    }\n```\n可以在根目录下建个config.gradle，然后只需在根目录下build.gradle最顶部加上下面一行代码，然后同步下，意思就是所有的子项目或者所有的modules都可以从这个配置文件里读取内容。\n```\napply from: \"config.gradle\"\n```\nconfig.gradle\n```\next {\n\n    android = [\n            compileSdkVersion: 23,\n            buildToolsVersion: \"23.0.2\",\n            minSdkVersion    : 14,\n            targetSdkVersion : 22,\n\n    ]\n\n    dependencies = [\n            appcompatV7': 'com.android.support:appcompat-v7:23.2.1',\n            design      : 'com.android.support:design:23.2.1'\n\n    ]\n}\n\n```\napp/build.gradle\n```\nandroid {\n    compileSdkVersion rootProject.ext.android.compileSdkVersion\n    buildToolsVersion rootProject.ext.buildToolsVersion\n\n    defaultConfig {\n        applicationId \"com.wuxiaolong.gradle4android\"\n        minSdkVersion rootProject.ext.android.minSdkVersion\n        targetSdkVersion rootProject.ext.android.targetSdkVersion\n        versionCode 1\n        versionName \"1.0\"\n    }\n  \n...\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n    compile rootProject.ext.dependencies.appcompatV7\n    compile rootProject.ext.dependencies.design\n}\n```\n\n\n# 自定义BuildConfig\n实际开发中服务器可能有正式环境和测试环境，gradle可以通过buildConfigField来配置。\n```\n defaultConfig {\n        buildConfigField 'String','API_SERVER_URL','\"http://wuxiaolong.me/\"'\n    }\n```\nbuildConfigField 一共有3个参数，第一个是数据类型，和Java的类型是对等的；第二个参数是常量名，这里是API_SERVER_URL；第三个参数就是你要配置的值。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/gradle4android2.png)\n如图路径下就有个常量API_SERVER_URL，如何在代码取得这个常量值：\n```\n  Log.d(\"wxl\", \"API_SERVER_URL=\" + BuildConfig.API_SERVER_URL);\n```\n# 启用proguard混淆\n一般release发布版本是需要启用混淆的，这样别人反编译之后就很难分析你的代码，而我们自己开发调试的时候是不需要混淆的，所以debug不启用混淆。对release启用混淆的配置如下：\n```\nandroid {\n\n    buildTypes {\n        release {\n            minifyEnabled true//是否启动混淆\n\t\t\tshrinkResources true //是否移除无用资源文件，shrinkResources依赖于minifyEnabled，必须和minifyEnabled一起用\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n   }\n}\n```\nminifyEnabled为true表示启用混淆，proguardFile是混淆使用的配置文件，这里是module根目录下的proguard-rules.pro文件\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 完整配置\n[https://github.com/WuXiaolong/Gradle4Android](https://github.com/WuXiaolong/Gradle4Android)\n","slug":"gradle4android2","published":1,"updated":"2016-05-20T08:03:51.085Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge0t005co4pktos6xbmy"},{"title":"Gradle for Android（一）基本配置、依赖管理","date":"2016-03-30T06:11:14.000Z","_content":"> Gradle是一种基于Groovy的动态DSL，而Groovy语言是一种基于jvm的动态语言。这里只分享实际开发中会用到的场景，您不需要去学习Groovy语言，知道Java的您是很容易阅读Groovy语言的。\n> 系列博客涉及的知识点有：Gradle基本配置、依赖管理、全局设置、自定义BuildConfig、混淆、多渠道打包、配置签名信息、单元测试，是不是迫不及待了啊，快来学习学习。\n\n# 基本配置\n新建项目，目录结构如下：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/gradle4android1.png)\n<!--more-->\n## app/build.gradle\n初始化的Gradle配置：\n```\napply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion \"23.0.2\"\n\n    defaultConfig {\n        applicationId \"com.wuxiaolong.gradle4android\"\n        minSdkVersion 15\n        targetSdkVersion 23\n        versionCode 1\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:23.2.1'\n    compile 'com.android.support:design:23.2.1'\n}\n```\n\n```\napply plugin: ‘com.android.application’，表示该module是一个app module，应用了com.android.application插件，如果是一个android library，那么这里写apply plugin: ‘com.android.library’\n\ncompileSdkVersion：基于哪个SDK编译，这里是API LEVEL\n\nbuildToolsVersion：基于哪个构建工具版本进行构建的。\n\ndefaultConfig：默认配置，如果没有其他的配置覆盖，就会使用这里的。\napplicationId：配置包名的\nversionCode：版本号\nversionName：版本名称\n\nbuildTypes是构建类型，常用的有release和debug两种，可以在这里面启用混淆，启用zipAlign以及配置签名信息等。\n\ndependencies：不属于Android专有的配置了，它定义了该module需要依赖的jar，aar，jcenter库信息。\n```\n## gradle-wrapper.properties\n声明了gradle的目录与下载路径以及当前项目使用的gradle版本，这些默认的路径我们一般不会更改的\n```\ndistributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-2.8-all.zip\n\n```\n\n## 根目录的build.gradle\n定义在这个工程下的所有模块的公共属性\n```\nbuildscript {\n    repositories {\n        jcenter()//使用jcenter库\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:1.5.0'// 依赖android提供的1.5.0的gradle build\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n//为所有的工程的repositories配置为jcenters\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n\n```\n\n## setting.gradle\n包含哪些模块，比如有app和library：\n```\ninclude ':app',':library'\n```\n\n# 依赖管理\n## 本地依赖\n### jar\n默认情况下，新建的Android项目会有一个lib文件夹\n```\ndependencies {\n       compile fileTree(dir: 'libs', include: ['*.jar'])//即添加所有在libs文件夹中的jar\n       //compile files('libs/WuXiaolong.jar')//不需要这样一个个去写了\n}\n```\n### so包\n用c或者c++写的library会被叫做so包，Android插件默认情况下支持native包，你需要把.so文件放在对应的文件夹中\n```\napp\n   ├── AndroidManifest.xml\n   └── jniLibs\n       ├── armeabi\n       │   └── WuXiaolong.so\n       ├── armeabi-v7a\n       │   └── WuXiaolong.so\n       ├── mips\n       │   └── WuXiaolong.so\n       └── x86\n           └── WuXiaolong.so\n```\n### aar文件\nlibrary库输出文件是.aar文件，包含了Android 资源文件，在library工程build/output/aar/下\n\n直接依赖library库\n```\ndependencies {\n       compile project(':library名字')\n       compile project(':libraries:library名字')//多个library，libraries是文件夹名字\n  }\n```\n\n依赖.aar文件\n创建一个aars文件夹，然后把.aar文件拷贝到该文件夹里面，然后添加该文件夹作为依赖库：\napp/bulid.gradle\n```\nrepositories {\n    flatDir {\n        dirs 'aars' \n    }\n}\ndependencies {\n       compile(name:'libraryname', ext:'aar')\n}\n```\n注意：如果你的library依赖了第三方库，须app再次依赖。\n\n## 远程仓库\n```\ndependencies {\n\t\tcompile 'com.wuxiaolong.pullloadmorerecyclerview:library:1.0.4'\n}\n```\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 完整配置\n[https://github.com/WuXiaolong/Gradle4Android](https://github.com/WuXiaolong/Gradle4Android)\n\n# 系列博客\n[Gradle for Android（二）全局设置、自定义BuildConfig、混淆](http://wuxiaolong.me/2016/03/31/gradle4android2/)\n[Gradle for Android（三）多渠道打包、配置签名信息](http://wuxiaolong.me/2016/04/01/gradle4android3/)\n\n\n\n","source":"_posts/gradle4android1.md","raw":"title: Gradle for Android（一）基本配置、依赖管理\ndate: 2016-03-30 14:11:14\ntags: Gradle \ncategory: Gradle \n---\n> Gradle是一种基于Groovy的动态DSL，而Groovy语言是一种基于jvm的动态语言。这里只分享实际开发中会用到的场景，您不需要去学习Groovy语言，知道Java的您是很容易阅读Groovy语言的。\n> 系列博客涉及的知识点有：Gradle基本配置、依赖管理、全局设置、自定义BuildConfig、混淆、多渠道打包、配置签名信息、单元测试，是不是迫不及待了啊，快来学习学习。\n\n# 基本配置\n新建项目，目录结构如下：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/gradle4android1.png)\n<!--more-->\n## app/build.gradle\n初始化的Gradle配置：\n```\napply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion \"23.0.2\"\n\n    defaultConfig {\n        applicationId \"com.wuxiaolong.gradle4android\"\n        minSdkVersion 15\n        targetSdkVersion 23\n        versionCode 1\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:23.2.1'\n    compile 'com.android.support:design:23.2.1'\n}\n```\n\n```\napply plugin: ‘com.android.application’，表示该module是一个app module，应用了com.android.application插件，如果是一个android library，那么这里写apply plugin: ‘com.android.library’\n\ncompileSdkVersion：基于哪个SDK编译，这里是API LEVEL\n\nbuildToolsVersion：基于哪个构建工具版本进行构建的。\n\ndefaultConfig：默认配置，如果没有其他的配置覆盖，就会使用这里的。\napplicationId：配置包名的\nversionCode：版本号\nversionName：版本名称\n\nbuildTypes是构建类型，常用的有release和debug两种，可以在这里面启用混淆，启用zipAlign以及配置签名信息等。\n\ndependencies：不属于Android专有的配置了，它定义了该module需要依赖的jar，aar，jcenter库信息。\n```\n## gradle-wrapper.properties\n声明了gradle的目录与下载路径以及当前项目使用的gradle版本，这些默认的路径我们一般不会更改的\n```\ndistributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-2.8-all.zip\n\n```\n\n## 根目录的build.gradle\n定义在这个工程下的所有模块的公共属性\n```\nbuildscript {\n    repositories {\n        jcenter()//使用jcenter库\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:1.5.0'// 依赖android提供的1.5.0的gradle build\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n//为所有的工程的repositories配置为jcenters\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n\n```\n\n## setting.gradle\n包含哪些模块，比如有app和library：\n```\ninclude ':app',':library'\n```\n\n# 依赖管理\n## 本地依赖\n### jar\n默认情况下，新建的Android项目会有一个lib文件夹\n```\ndependencies {\n       compile fileTree(dir: 'libs', include: ['*.jar'])//即添加所有在libs文件夹中的jar\n       //compile files('libs/WuXiaolong.jar')//不需要这样一个个去写了\n}\n```\n### so包\n用c或者c++写的library会被叫做so包，Android插件默认情况下支持native包，你需要把.so文件放在对应的文件夹中\n```\napp\n   ├── AndroidManifest.xml\n   └── jniLibs\n       ├── armeabi\n       │   └── WuXiaolong.so\n       ├── armeabi-v7a\n       │   └── WuXiaolong.so\n       ├── mips\n       │   └── WuXiaolong.so\n       └── x86\n           └── WuXiaolong.so\n```\n### aar文件\nlibrary库输出文件是.aar文件，包含了Android 资源文件，在library工程build/output/aar/下\n\n直接依赖library库\n```\ndependencies {\n       compile project(':library名字')\n       compile project(':libraries:library名字')//多个library，libraries是文件夹名字\n  }\n```\n\n依赖.aar文件\n创建一个aars文件夹，然后把.aar文件拷贝到该文件夹里面，然后添加该文件夹作为依赖库：\napp/bulid.gradle\n```\nrepositories {\n    flatDir {\n        dirs 'aars' \n    }\n}\ndependencies {\n       compile(name:'libraryname', ext:'aar')\n}\n```\n注意：如果你的library依赖了第三方库，须app再次依赖。\n\n## 远程仓库\n```\ndependencies {\n\t\tcompile 'com.wuxiaolong.pullloadmorerecyclerview:library:1.0.4'\n}\n```\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 完整配置\n[https://github.com/WuXiaolong/Gradle4Android](https://github.com/WuXiaolong/Gradle4Android)\n\n# 系列博客\n[Gradle for Android（二）全局设置、自定义BuildConfig、混淆](http://wuxiaolong.me/2016/03/31/gradle4android2/)\n[Gradle for Android（三）多渠道打包、配置签名信息](http://wuxiaolong.me/2016/04/01/gradle4android3/)\n\n\n\n","slug":"gradle4android1","published":1,"updated":"2016-04-22T02:19:39.994Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge0u005fo4pkq3n37p50"},{"title":"Android build.gradle文件","date":"2015-11-10T07:03:23.000Z","_content":"app/build.gradle\n\nAndroid Studio使用Gradle 编译运行Android工程，工程的每个模块以及整个工程都有一个build.gradle文件。通常你只需要关注模块的build.gradle文件，该文件存放编译依赖设置，包括defaultConfig设置：\n<!--more-->\n## compiledSdkVersion \n应用将要编译的目标Android版本，此处默认为你的SDK已安装的最新Android版本，我们仍然可以使用较老的版本编译项目，但把该值设为最新版本，可以使用Android的最新特性，同时可以在最新的设备上优化应用来提高用户体验。\n\n## buildToolsVersion\n使用什么版本的编译工具。使用SDK Manager安装多个版本的编译工具。\n\n## applicationId \n创建新项目时指定的包名。\n\n## minSdkVersion \n\n创建项目时指定的最低SDK版本，是新建应用支持的最低SDK版本。\n\n## targetSdkVersion \n表示你测试过你的应用支持的最高Android版本(同样用API level表示)，当Android发布最新版本后，我们应该在最新版本的Android测试自己的应用同时更新target sdk到Android最新版本，以便充分利用Android新版本的特性。举例来说，设置这个值为11或更高，当你的应用运行在Android3.0或更高的系统上时，系统会为你的应用使用新的默认主题（Holo主题），并且当运行在大屏幕的设备上时会禁用屏幕兼容模式（screen compatibility mode），因为支持了 API level 11就暗示了支持大屏幕。\n\n## 附录\n[http://www.jianshu.com/p/02cb9a0eb2a0](Android Studio中Gradle使用详解)","source":"_posts/gradle.md","raw":"title: Android build.gradle文件\ndate: 2015-11-10 15:03:23\ntags: gradle\ncategory: Android\n---\napp/build.gradle\n\nAndroid Studio使用Gradle 编译运行Android工程，工程的每个模块以及整个工程都有一个build.gradle文件。通常你只需要关注模块的build.gradle文件，该文件存放编译依赖设置，包括defaultConfig设置：\n<!--more-->\n## compiledSdkVersion \n应用将要编译的目标Android版本，此处默认为你的SDK已安装的最新Android版本，我们仍然可以使用较老的版本编译项目，但把该值设为最新版本，可以使用Android的最新特性，同时可以在最新的设备上优化应用来提高用户体验。\n\n## buildToolsVersion\n使用什么版本的编译工具。使用SDK Manager安装多个版本的编译工具。\n\n## applicationId \n创建新项目时指定的包名。\n\n## minSdkVersion \n\n创建项目时指定的最低SDK版本，是新建应用支持的最低SDK版本。\n\n## targetSdkVersion \n表示你测试过你的应用支持的最高Android版本(同样用API level表示)，当Android发布最新版本后，我们应该在最新版本的Android测试自己的应用同时更新target sdk到Android最新版本，以便充分利用Android新版本的特性。举例来说，设置这个值为11或更高，当你的应用运行在Android3.0或更高的系统上时，系统会为你的应用使用新的默认主题（Holo主题），并且当运行在大屏幕的设备上时会禁用屏幕兼容模式（screen compatibility mode），因为支持了 API level 11就暗示了支持大屏幕。\n\n## 附录\n[http://www.jianshu.com/p/02cb9a0eb2a0](Android Studio中Gradle使用详解)","slug":"gradle","published":1,"updated":"2016-03-17T00:44:06.357Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge0w005io4pk4a249nnc"},{"title":"购房车","date":"2013-06-15T14:06:39.000Z","_content":"> 进入公司来，这是我独立完成的第一个项目，主要功能就是“抄”搜房房，基本和人家差不多，对于我这个新手来，难度还是相当的大的，分一期和二期。做完这个项目，我学习了很多，进步也是可见的。\n\n# 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/goufangche1.jpg)\n\n<!--more-->\n\n![](http://7q5c2h.com1.z0.glb.clouddn.com/goufangche2.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/goufangche3.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/goufangche4.jpg)\n\n# 应用介绍 \n购房车是国内首款专业房产团购应用。在上海地区已成功运行并帮助众多家庭实现轻松置业，同时正以上海为中心不断向外拓展，囊括当地98%以上的新房信息，为购房者提供团购报名、楼盘最新动态、看房车信息、新房独家优惠、各种购房工具等。可爱图标、动感滑屏、贴心设置都使得团购房屋变成了一件快乐的事。搭购房车——轻轻松松买好房！\n\n# 下载地址\n[360手机助手](http://zhushou.360.cn/detail/index/soft_id/714302?recrefer=SE_D_%E8%B4%AD%E6%88%BF%E8%BD%A6#prev)\n\n`温馨提示：`由于时间过久，某些机型未适配，或某些手机已经打不开此APP啦。","source":"_posts/goufangche.md","raw":"title: 购房车\ndate: 2013-06-15 22:06:39\ntags: goufangche\ncategory: App\n---\n> 进入公司来，这是我独立完成的第一个项目，主要功能就是“抄”搜房房，基本和人家差不多，对于我这个新手来，难度还是相当的大的，分一期和二期。做完这个项目，我学习了很多，进步也是可见的。\n\n# 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/goufangche1.jpg)\n\n<!--more-->\n\n![](http://7q5c2h.com1.z0.glb.clouddn.com/goufangche2.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/goufangche3.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/goufangche4.jpg)\n\n# 应用介绍 \n购房车是国内首款专业房产团购应用。在上海地区已成功运行并帮助众多家庭实现轻松置业，同时正以上海为中心不断向外拓展，囊括当地98%以上的新房信息，为购房者提供团购报名、楼盘最新动态、看房车信息、新房独家优惠、各种购房工具等。可爱图标、动感滑屏、贴心设置都使得团购房屋变成了一件快乐的事。搭购房车——轻轻松松买好房！\n\n# 下载地址\n[360手机助手](http://zhushou.360.cn/detail/index/soft_id/714302?recrefer=SE_D_%E8%B4%AD%E6%88%BF%E8%BD%A6#prev)\n\n`温馨提示：`由于时间过久，某些机型未适配，或某些手机已经打不开此APP啦。","slug":"goufangche","published":1,"updated":"2016-03-17T00:44:06.357Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge15005mo4pk19hclvbn"},{"title":"不花钱上谷歌","date":"2015-01-11T16:00:00.000Z","_content":"\n>\n不会谷歌的程序猿不是好的程序猿!\n>\n\n![](http://wuxiaolong.qiniudn.com/2015-01-12-google.png)\n在大天朝，上谷歌竟成了一项\"技能\"，当然花钱另说，我当然不会花钱啦，之前goagent翻墙已经不好谷歌了，现在的方案是更改HOSTS（C:\\Windows\\System32\\drivers\\etc），复制以下Hosts文件替换即可：\n\n[http://pan.baidu.com/s/1o63Hqrg](http://pan.baidu.com/s/1o63Hqrg)\n\n<!-- more -->\n\n如果此HOSTS不好用，请留言告知，我将及时更新，祝大家工作愉快，生活愉快！\n\n附：\n[不用翻墙，即可访问google等网站hosts，及修改方法](http://levi.cg.am/archives/3553)\n","source":"_posts/google.md","raw":"title: 不花钱上谷歌\ndate: 2015-01-12 \ncategories: [Life]\ntags: [Life]\n---\n\n>\n不会谷歌的程序猿不是好的程序猿!\n>\n\n![](http://wuxiaolong.qiniudn.com/2015-01-12-google.png)\n在大天朝，上谷歌竟成了一项\"技能\"，当然花钱另说，我当然不会花钱啦，之前goagent翻墙已经不好谷歌了，现在的方案是更改HOSTS（C:\\Windows\\System32\\drivers\\etc），复制以下Hosts文件替换即可：\n\n[http://pan.baidu.com/s/1o63Hqrg](http://pan.baidu.com/s/1o63Hqrg)\n\n<!-- more -->\n\n如果此HOSTS不好用，请留言告知，我将及时更新，祝大家工作愉快，生活愉快！\n\n附：\n[不用翻墙，即可访问google等网站hosts，及修改方法](http://levi.cg.am/archives/3553)\n","slug":"google","published":1,"updated":"2016-03-17T00:44:06.357Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge18005qo4pksse2fahh"},{"title":"Android Fragment使用Toolbar","date":"2015-12-21T02:34:49.000Z","_content":"# Activity使用Toolbar\n一般在Activity里使用Toolbar如下：\ntoolbar.xml\n```js \n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<android.support.v7.widget.Toolbar xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:id=\"@+id/toolbar\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"?attr/colorPrimary\"\n    android:minHeight=\"?actionBarSize\">\n</android.support.v7.widget.Toolbar>\n```\nxml调用：\n```js\n<include\n     layout=\"@layout/toolbar\" />\n```\n<!--more-->\nActivity一般写到基类：\n```java\n public Toolbar initToolbar(int title) {\n        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n        ActionBar actionBar = getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(true);\n          }\n        return toolbar;\n    }\n\n    public Toolbar initToolbar(CharSequence title) {\n        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n        ActionBar actionBar = getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(true);\n        }\n        return toolbar;\n    }\n```\nActivity调用：\n```java\n  initToolbar(\"标题\");\n```\n# Fragment使用Toolbar\n现在项目需求，每个title不一样，就不能像以上一样写一个toolbar，放在最外层。问题来了，Fragment如何使用Toolbar？像上面一样写吗？No，Fragment没有setSupportActionBar，于是Google，得到：\n```java\npublic class BaseFragment extends Fragment {\n\n    Activity mActivity;\n    AppCompatActivity mAppCompatActivity;\n\n    @Override\n    public void onViewCreated(View view, Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n        mActivity = getActivity();\n        \n    }\n\n    public Toolbar initToolbar(int title) {\n        AppCompatActivity mAppCompatActivity = (AppCompatActivity) mActivity;\n        Toolbar toolbar = (Toolbar) mAppCompatActivity.findViewById(R.id.toolbar);\n        mAppCompatActivity.setSupportActionBar(toolbar);       \n        ActionBar actionBar = mAppCompatActivity.getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(false);            \n        }\n        return toolbar;\n    }\n\n    public Toolbar initToolbar(CharSequence title) {\n        mAppCompatActivity = (AppCompatActivity) mActivity;\n        Toolbar toolbar = (Toolbar) mAppCompatActivity.findViewById(toolbarId);\n        mAppCompatActivity.setSupportActionBar(R.id.toolbar);\n        ActionBar actionBar = mAppCompatActivity.getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(false);\n        }\n        return toolbar;\n    }\n}\n```\n这样就解决Fragment使用Toolbar，却抛出了一个问题：Fragment标题错乱。\n\n# Fragment标题错乱\n当出来这个问题时，我恍然大悟，Fragment里的Toolbar findViewById取的都是MainActivity，include不能共用一个ID，应该加个ID区别一下：\n```js\n<include\n        android:id=\"@+id/program_toolbar\"\n        layout=\"@layout/toolbar\" />\n```\nBaseFragment 做相应的修改：\n```java\n public Toolbar initToolbar(int toolbarId, int title) {\n        AppCompatActivity mAppCompatActivity = (AppCompatActivity) mActivity;\n        Toolbar toolbar = (Toolbar) mAppCompatActivity.findViewById(toolbarId);\n        mAppCompatActivity.setSupportActionBar(toolbar);\n        ActionBar actionBar = mAppCompatActivity.getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(false);\n            actionBar.setDisplayShowTitleEnabled(false);\n        }\n        return toolbar;\n    }\n```\n好的，这样标题就没有错乱了，然后又来了新的“需求”：Fragment如何让Toolbar菜单生效？\n\n# Fragment让Toolbar菜单生效\n在activity中：\n```java\n@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    getMenuInflater().inflate(R.menu.main, menu);\n    return super.onCreateOptionsMenu(menu);\n}\n```\n在Fragment中：\n```java\n@Override\npublic void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {\n        inflater.inflate(R.menu.pictrue_list, menu);\n        super.onCreateOptionsMenu(menu,inflater);\n}\n```\n两者不同的地方在于:\n1、一个有返回值（boolean类型），一个没有返回值。\n2、Fragment中onCreateOptionsMenu的参数多了一个MenuInflater\n\n想让Fragment中的onCreateOptionsMenu生效必须先调用setHasOptionsMenu方法，否则Toolbar没有菜单。\n```java\npublic class BaseFragment extends Fragment {\n    Activity mActivity;   \n    @Override\n    public void onViewCreated(View view, Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n        mActivity = getActivity();\n        setHasOptionsMenu(true);\n    }\n }\n```\nsetHasOptionsMenu方法源码如下：\n```java\n  /**\n     * Report that this fragment would like to participate in populating\n     * the options menu by receiving a call to {@link #onCreateOptionsMenu}\n     * and related methods.\n     *\n     * @param hasMenu If true, the fragment has menu items to contribute.\n     */\n    public void setHasOptionsMenu(boolean hasMenu) {\n        if (mHasMenu != hasMenu) {\n            mHasMenu = hasMenu;\n            if (isAdded() && !isHidden()) {\n                mHost.onSupportInvalidateOptionsMenu();\n            }\n        }\n    }\n```\n\n# 单独使用而不与ActionBar进行关联\n多谢@XZoomEye提示，对于Fragment使用Toolbar思维被局限了，在[Android Toolbar](http://wuxiaolong.me/2015/11/10/toolbar/)一文中介绍了单独使用而不与ActionBar进行关联，直接使用ToolBar的inflateMenu方法，Menu的事件也是独立的，需要通过设置ToolBar的setOnMenuItemClickListener来实现，这样做就不会发生标题错乱。\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","source":"_posts/fragmentToolbar.md","raw":"title: Android Fragment使用Toolbar\ndate: 2015-12-21 10:34:49\ntags: [Fragment,Toolbar]\ncategory: Android \n---\n# Activity使用Toolbar\n一般在Activity里使用Toolbar如下：\ntoolbar.xml\n```js \n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<android.support.v7.widget.Toolbar xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:id=\"@+id/toolbar\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"?attr/colorPrimary\"\n    android:minHeight=\"?actionBarSize\">\n</android.support.v7.widget.Toolbar>\n```\nxml调用：\n```js\n<include\n     layout=\"@layout/toolbar\" />\n```\n<!--more-->\nActivity一般写到基类：\n```java\n public Toolbar initToolbar(int title) {\n        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n        ActionBar actionBar = getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(true);\n          }\n        return toolbar;\n    }\n\n    public Toolbar initToolbar(CharSequence title) {\n        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n        ActionBar actionBar = getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(true);\n        }\n        return toolbar;\n    }\n```\nActivity调用：\n```java\n  initToolbar(\"标题\");\n```\n# Fragment使用Toolbar\n现在项目需求，每个title不一样，就不能像以上一样写一个toolbar，放在最外层。问题来了，Fragment如何使用Toolbar？像上面一样写吗？No，Fragment没有setSupportActionBar，于是Google，得到：\n```java\npublic class BaseFragment extends Fragment {\n\n    Activity mActivity;\n    AppCompatActivity mAppCompatActivity;\n\n    @Override\n    public void onViewCreated(View view, Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n        mActivity = getActivity();\n        \n    }\n\n    public Toolbar initToolbar(int title) {\n        AppCompatActivity mAppCompatActivity = (AppCompatActivity) mActivity;\n        Toolbar toolbar = (Toolbar) mAppCompatActivity.findViewById(R.id.toolbar);\n        mAppCompatActivity.setSupportActionBar(toolbar);       \n        ActionBar actionBar = mAppCompatActivity.getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(false);            \n        }\n        return toolbar;\n    }\n\n    public Toolbar initToolbar(CharSequence title) {\n        mAppCompatActivity = (AppCompatActivity) mActivity;\n        Toolbar toolbar = (Toolbar) mAppCompatActivity.findViewById(toolbarId);\n        mAppCompatActivity.setSupportActionBar(R.id.toolbar);\n        ActionBar actionBar = mAppCompatActivity.getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(false);\n        }\n        return toolbar;\n    }\n}\n```\n这样就解决Fragment使用Toolbar，却抛出了一个问题：Fragment标题错乱。\n\n# Fragment标题错乱\n当出来这个问题时，我恍然大悟，Fragment里的Toolbar findViewById取的都是MainActivity，include不能共用一个ID，应该加个ID区别一下：\n```js\n<include\n        android:id=\"@+id/program_toolbar\"\n        layout=\"@layout/toolbar\" />\n```\nBaseFragment 做相应的修改：\n```java\n public Toolbar initToolbar(int toolbarId, int title) {\n        AppCompatActivity mAppCompatActivity = (AppCompatActivity) mActivity;\n        Toolbar toolbar = (Toolbar) mAppCompatActivity.findViewById(toolbarId);\n        mAppCompatActivity.setSupportActionBar(toolbar);\n        ActionBar actionBar = mAppCompatActivity.getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(false);\n            actionBar.setDisplayShowTitleEnabled(false);\n        }\n        return toolbar;\n    }\n```\n好的，这样标题就没有错乱了，然后又来了新的“需求”：Fragment如何让Toolbar菜单生效？\n\n# Fragment让Toolbar菜单生效\n在activity中：\n```java\n@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    getMenuInflater().inflate(R.menu.main, menu);\n    return super.onCreateOptionsMenu(menu);\n}\n```\n在Fragment中：\n```java\n@Override\npublic void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {\n        inflater.inflate(R.menu.pictrue_list, menu);\n        super.onCreateOptionsMenu(menu,inflater);\n}\n```\n两者不同的地方在于:\n1、一个有返回值（boolean类型），一个没有返回值。\n2、Fragment中onCreateOptionsMenu的参数多了一个MenuInflater\n\n想让Fragment中的onCreateOptionsMenu生效必须先调用setHasOptionsMenu方法，否则Toolbar没有菜单。\n```java\npublic class BaseFragment extends Fragment {\n    Activity mActivity;   \n    @Override\n    public void onViewCreated(View view, Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n        mActivity = getActivity();\n        setHasOptionsMenu(true);\n    }\n }\n```\nsetHasOptionsMenu方法源码如下：\n```java\n  /**\n     * Report that this fragment would like to participate in populating\n     * the options menu by receiving a call to {@link #onCreateOptionsMenu}\n     * and related methods.\n     *\n     * @param hasMenu If true, the fragment has menu items to contribute.\n     */\n    public void setHasOptionsMenu(boolean hasMenu) {\n        if (mHasMenu != hasMenu) {\n            mHasMenu = hasMenu;\n            if (isAdded() && !isHidden()) {\n                mHost.onSupportInvalidateOptionsMenu();\n            }\n        }\n    }\n```\n\n# 单独使用而不与ActionBar进行关联\n多谢@XZoomEye提示，对于Fragment使用Toolbar思维被局限了，在[Android Toolbar](http://wuxiaolong.me/2015/11/10/toolbar/)一文中介绍了单独使用而不与ActionBar进行关联，直接使用ToolBar的inflateMenu方法，Menu的事件也是独立的，需要通过设置ToolBar的setOnMenuItemClickListener来实现，这样做就不会发生标题错乱。\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","slug":"fragmentToolbar","published":1,"updated":"2016-03-25T07:34:02.470Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge19005to4pko87n7ga7"},{"title":"Fragment里更改Activity菜单","date":"2015-06-09T16:00:00.000Z","_content":"\n```java\n  @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        //来指出fragment愿意添加item到选项菜单(否则, fragment将接收不到对 onCreateOptionsMenu()的调用)\n        setHasOptionsMenu(true);\n    }\n    \n @Override\n    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {\n        getActivity().getMenuInflater().inflate(R.menu.menu_yuqing_search, menu);\n    }\n```\n","source":"_posts/fragmentMenu.md","raw":"title: Fragment里更改Activity菜单\ndate: 2015-06-10\ncategories: [Android]\ntags: [Android,Fragment]\n---\n\n```java\n  @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        //来指出fragment愿意添加item到选项菜单(否则, fragment将接收不到对 onCreateOptionsMenu()的调用)\n        setHasOptionsMenu(true);\n    }\n    \n @Override\n    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {\n        getActivity().getMenuInflater().inflate(R.menu.menu_yuqing_search, menu);\n    }\n```\n","slug":"fragmentMenu","published":1,"updated":"2016-03-17T00:44:06.356Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge1c005xo4pk7pm99njn"},{"title":"Android之emulator ERROR x86 emulation currently requires hardware acceleration","date":"2015-12-03T02:45:38.000Z","_content":"一直在用Genymotion模拟器，话说Android studio将出2.0，速度提速50倍，这是要断Genymotion的路，于是我在家里电脑运行AVD，却报以下错误：\nemulator: ERROR: x86 emulation currently requires hardware acceleration!\nPlease ensure Intel HAXM is properly installed and usable.\nCPU acceleration status: HAX kernel module is not installed!\n\n<!--more-->\n\n## 解决方案\n折腾一番，解决方案如下：\n\n* BIOS\n开机按F2或delete键，进入BIOS，CPU选项，选择Intel Virtualization Technology为enable \n![](http://7q5c2h.com1.z0.glb.clouddn.com/emulatorError1.gif)\n\n* 下载Intel x86 Emulator Accelerator  \n 打开 SDK Manager，如果没有Intel x86 Emulator Accelerator ，下载\n  ![](http://7q5c2h.com1.z0.glb.clouddn.com/emulatorError3.png)\n  \n* 安装intelhaxm-android.exe\n你的Android sdk安装目录\\extras\\intel\\Hardware_Accelerated_Execution_Manager\n ![](http://7q5c2h.com1.z0.glb.clouddn.com/emulatorError2.png)\n\n* 重启\n重启Android Studio，再试下AVD\n\n## 附录\n1. [Emulator: ERROR: x86 emulation currently requires hardware acceleration](http://stackoverflow.com/questions/29136173/emulator-error-x86-emulation-currently-requires-hardware-acceleration)\n2. [Error in launching AVD](http://stackoverflow.com/questions/26355645/error-in-launching-avd)\n\n","source":"_posts/emulatorError.md","raw":"title: Android之emulator ERROR x86 emulation currently requires hardware acceleration\ndate: 2015-12-03 10:45:38\ntags: emulator\ncategory: Android\n---\n一直在用Genymotion模拟器，话说Android studio将出2.0，速度提速50倍，这是要断Genymotion的路，于是我在家里电脑运行AVD，却报以下错误：\nemulator: ERROR: x86 emulation currently requires hardware acceleration!\nPlease ensure Intel HAXM is properly installed and usable.\nCPU acceleration status: HAX kernel module is not installed!\n\n<!--more-->\n\n## 解决方案\n折腾一番，解决方案如下：\n\n* BIOS\n开机按F2或delete键，进入BIOS，CPU选项，选择Intel Virtualization Technology为enable \n![](http://7q5c2h.com1.z0.glb.clouddn.com/emulatorError1.gif)\n\n* 下载Intel x86 Emulator Accelerator  \n 打开 SDK Manager，如果没有Intel x86 Emulator Accelerator ，下载\n  ![](http://7q5c2h.com1.z0.glb.clouddn.com/emulatorError3.png)\n  \n* 安装intelhaxm-android.exe\n你的Android sdk安装目录\\extras\\intel\\Hardware_Accelerated_Execution_Manager\n ![](http://7q5c2h.com1.z0.glb.clouddn.com/emulatorError2.png)\n\n* 重启\n重启Android Studio，再试下AVD\n\n## 附录\n1. [Emulator: ERROR: x86 emulation currently requires hardware acceleration](http://stackoverflow.com/questions/29136173/emulator-error-x86-emulation-currently-requires-hardware-acceleration)\n2. [Error in launching AVD](http://stackoverflow.com/questions/26355645/error-in-launching-avd)\n\n","slug":"emulatorError","published":1,"updated":"2016-03-17T00:44:06.356Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge1e0061o4pktpm0i3v1"},{"title":"Eclipse中整合git","date":"2014-08-25T16:00:00.000Z","_content":"首先在github上面创建工程。\n\n在个人主页上点击Responsitories选项卡的New\n\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-1.png)\n\n填写一些信息，点Create respository\n\n<!-- more -->\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-2.png)\n\ngithub上的项目就创建好了。\n在Eclipse中创建一个工程。\n然后在工程上右击->Team->Share project->git->next.\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-3.png)\n\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-4.png)\n\n选择Use or create repository in parent folder of project->Create Repository，如下图，点finish。\n\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-5.png)\n\n执行完成之后项目文件夹下就会创建好一个.git的文件夹，仓库就创建好了。\n\n由于项目中的有一些文件没有必要上传，比如bin文件夹，需要在项目中设置好。\n\n展开对应的项目，有小箭头的表示需要上传到服务器的目录，在不想要上传的目录上右击，Team->Ignoe,该目录就会被忽略了。\n\n下面来commit代码到本机一下。\n\n项目上右击Team->commit。\n\n\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-6.png)\n\n选中要commit的文件，点commit，完成之后，代码就上传到本地的服务器了。\n\n接下来把代码上传到github的服务器。\n\n命令行中进入到项目的文件夹，运行\ngit remote add origin https://github.com/WuXiaolong/ApkTest.git\n\n\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-7.png)\n再执行\ngit push -u origin master\n\n成功执行后就像这样：\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-8.png)\n查看github的项目主页，发现文件已经上传好。\n\n\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-9.png)\n\n之后在Eclipse中修改好项目代码之后，commit，之后pull，为止代码冲突，然后项目上右击Team->push to Upstream就可以进行代码提交。\n\n\n上传到github上之后，团队中另外的成员可以通过Eclipse->File->Import->Project from Git->URI来提取工程。\n\n在团队开发中，通常在新的一天的开始工作之前，把最新的代码fecth下来。\n\n直接在项目想右击->Team->fetch\n再执行->Team->Merge.\n\n服务器上的新文件就会添加进来了。\n","source":"_posts/eclipse-git.md","raw":"title: Eclipse中整合git\ndate: 2014-08-26 \ncategories: [Life]\ntags: [Life,git]\n---\n首先在github上面创建工程。\n\n在个人主页上点击Responsitories选项卡的New\n\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-1.png)\n\n填写一些信息，点Create respository\n\n<!-- more -->\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-2.png)\n\ngithub上的项目就创建好了。\n在Eclipse中创建一个工程。\n然后在工程上右击->Team->Share project->git->next.\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-3.png)\n\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-4.png)\n\n选择Use or create repository in parent folder of project->Create Repository，如下图，点finish。\n\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-5.png)\n\n执行完成之后项目文件夹下就会创建好一个.git的文件夹，仓库就创建好了。\n\n由于项目中的有一些文件没有必要上传，比如bin文件夹，需要在项目中设置好。\n\n展开对应的项目，有小箭头的表示需要上传到服务器的目录，在不想要上传的目录上右击，Team->Ignoe,该目录就会被忽略了。\n\n下面来commit代码到本机一下。\n\n项目上右击Team->commit。\n\n\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-6.png)\n\n选中要commit的文件，点commit，完成之后，代码就上传到本地的服务器了。\n\n接下来把代码上传到github的服务器。\n\n命令行中进入到项目的文件夹，运行\ngit remote add origin https://github.com/WuXiaolong/ApkTest.git\n\n\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-7.png)\n再执行\ngit push -u origin master\n\n成功执行后就像这样：\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-8.png)\n查看github的项目主页，发现文件已经上传好。\n\n\n\n![](http://wuxiaolong.qiniudn.com/2014-08-26-eclipse-git-9.png)\n\n之后在Eclipse中修改好项目代码之后，commit，之后pull，为止代码冲突，然后项目上右击Team->push to Upstream就可以进行代码提交。\n\n\n上传到github上之后，团队中另外的成员可以通过Eclipse->File->Import->Project from Git->URI来提取工程。\n\n在团队开发中，通常在新的一天的开始工作之前，把最新的代码fecth下来。\n\n直接在项目想右击->Team->fetch\n再执行->Team->Merge.\n\n服务器上的新文件就会添加进来了。\n","slug":"eclipse-git","published":1,"updated":"2016-03-17T00:44:06.356Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge1g0065o4pk2v3fezc4"},{"title":"大湿说","date":"2015-11-09T00:55:32.000Z","_content":"![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuo_meizu.png)\n魅族应用市场累计下载`4.4万+`，我可没有做过什么推广哦，精品APP，值得下载！\n<!--more-->\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuoScreenshots.gif)\n\n## 应用介绍\n大湿说没有复杂的算法，不猜你喜欢，只与您分享简单搞笑的视频，一切只为娱乐。 \n★ 内容 \n大湿说整合时下最热的视频专辑。囊括飞碟说、Big笑工坊、飞碟一分钟、唐唐脱口秀、轻松时刻、万万没想到、暴走大事件、TED等。 \n★ 寄语 \n在这里您可以最短的时间收集灵感，寻找有趣的东西。享受大湿说给您带来的简单生活和乐趣。\n\n## 二维码下载\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuoDownload.png)\n\n## 应用市场\n[魅族应用市场](http://app.meizu.com/apps/public/detail?package_name=com.xiaomolong.ufosay)\n[小米应用市场](http://app.mi.com/detail/65621)\n\n## 花絮\n这两天微博上看到了老湿的一个视频（[http://v.youku.com/v_show/id_XOTE3Nzk0MjQw.html](http://v.youku.com/v_show/id_XOTE3Nzk0MjQw.html)），也是好久没有看到他的视频了。继而想为他做个APP（老湿说）。\n其实这个想法，我个人就能实现，可是联想到之前有个算成功但又失败的经历。那是我刚工作之初（12年），我想业余时间练手视频类APP是如何做的。于是选取了优酷的飞碟说（[http://i.youku.com/u/UNTMxOTkwNjA0](http://i.youku.com/u/UNTMxOTkwNjA0)），一开始限于我技术水平，还只是简单的网页播放，后来用Android的视频控件播放，这个APP也是越做越好。\n\n再之后我不满足飞碟说这一家视频，于是就把优酷比较火的视频专辑（比如暴走大事件、万万没想到等）都加入了这个APP里来。对于用户，只要在我这一家APP，就能看到优酷上很火的搞笑视频，岂不是很爽。这个APP火了一段时间。我个人却一直很低调，担心这个APP火了，飞碟说他们官方找我麻烦。\n\n果不然，去年，飞碟说他们想（那会儿他们很强大了，都有了他们的自己的网站了，可以不依赖优酷平台）做个他们的自己APP，结果发现安卓市场上“飞碟说”这个名字被我给站了。\n\n他们联系到了我，提供了各种资质，说“飞碟说”他们早已注册，他们正在开发他们自己的产品“飞碟说”，让我从安卓市场下架“飞碟说”应用。\n\n无奈我被迫把飞碟说改了个其他的名字，业余时间我也不想继续维护这个项目了，毕竟个人开发者有诸多限制，个人开发者是没这些视频的版权的，某些市场干脆直接不让个人开发者上线视频类应用。\n \n不过我还是利用业余时间完成了这个APP的更名，并使用最新的Android Design Support Library，完成后准备就叫老湿说，老婆大人说上次叫飞碟说，这次又是借老湿名声，专门做擦边球的事，殊不知，没有名声哪来用户下载，我没有时间和精力来打造属于自己的品牌。第二天我咨询了我群里，叫啥名合适，结果“FUCK碟”、“亚麻碟”、“笑你妈逼”、“东京热”、“无码视频”，都出来了，都是淫才啊，在他们调侃中我想到了大师（湿）说，多谢群里的小伙伴们。APP精选精彩搞笑的视频，不乏大师制作。大师（湿）说很是贴切，真是棒极了。","source":"_posts/dashishuo.md","raw":"title: 大湿说\ndate: 2015-11-09 08:55:32\ntags: [Android,Life,App]\ncategory: App\n---\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuo_meizu.png)\n魅族应用市场累计下载`4.4万+`，我可没有做过什么推广哦，精品APP，值得下载！\n<!--more-->\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuoScreenshots.gif)\n\n## 应用介绍\n大湿说没有复杂的算法，不猜你喜欢，只与您分享简单搞笑的视频，一切只为娱乐。 \n★ 内容 \n大湿说整合时下最热的视频专辑。囊括飞碟说、Big笑工坊、飞碟一分钟、唐唐脱口秀、轻松时刻、万万没想到、暴走大事件、TED等。 \n★ 寄语 \n在这里您可以最短的时间收集灵感，寻找有趣的东西。享受大湿说给您带来的简单生活和乐趣。\n\n## 二维码下载\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuoDownload.png)\n\n## 应用市场\n[魅族应用市场](http://app.meizu.com/apps/public/detail?package_name=com.xiaomolong.ufosay)\n[小米应用市场](http://app.mi.com/detail/65621)\n\n## 花絮\n这两天微博上看到了老湿的一个视频（[http://v.youku.com/v_show/id_XOTE3Nzk0MjQw.html](http://v.youku.com/v_show/id_XOTE3Nzk0MjQw.html)），也是好久没有看到他的视频了。继而想为他做个APP（老湿说）。\n其实这个想法，我个人就能实现，可是联想到之前有个算成功但又失败的经历。那是我刚工作之初（12年），我想业余时间练手视频类APP是如何做的。于是选取了优酷的飞碟说（[http://i.youku.com/u/UNTMxOTkwNjA0](http://i.youku.com/u/UNTMxOTkwNjA0)），一开始限于我技术水平，还只是简单的网页播放，后来用Android的视频控件播放，这个APP也是越做越好。\n\n再之后我不满足飞碟说这一家视频，于是就把优酷比较火的视频专辑（比如暴走大事件、万万没想到等）都加入了这个APP里来。对于用户，只要在我这一家APP，就能看到优酷上很火的搞笑视频，岂不是很爽。这个APP火了一段时间。我个人却一直很低调，担心这个APP火了，飞碟说他们官方找我麻烦。\n\n果不然，去年，飞碟说他们想（那会儿他们很强大了，都有了他们的自己的网站了，可以不依赖优酷平台）做个他们的自己APP，结果发现安卓市场上“飞碟说”这个名字被我给站了。\n\n他们联系到了我，提供了各种资质，说“飞碟说”他们早已注册，他们正在开发他们自己的产品“飞碟说”，让我从安卓市场下架“飞碟说”应用。\n\n无奈我被迫把飞碟说改了个其他的名字，业余时间我也不想继续维护这个项目了，毕竟个人开发者有诸多限制，个人开发者是没这些视频的版权的，某些市场干脆直接不让个人开发者上线视频类应用。\n \n不过我还是利用业余时间完成了这个APP的更名，并使用最新的Android Design Support Library，完成后准备就叫老湿说，老婆大人说上次叫飞碟说，这次又是借老湿名声，专门做擦边球的事，殊不知，没有名声哪来用户下载，我没有时间和精力来打造属于自己的品牌。第二天我咨询了我群里，叫啥名合适，结果“FUCK碟”、“亚麻碟”、“笑你妈逼”、“东京热”、“无码视频”，都出来了，都是淫才啊，在他们调侃中我想到了大师（湿）说，多谢群里的小伙伴们。APP精选精彩搞笑的视频，不乏大师制作。大师（湿）说很是贴切，真是棒极了。","slug":"dashishuo","published":1,"updated":"2016-03-17T00:44:06.355Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge1j006ao4pkfgqmgd38"},{"title":"Eclipse ADT的Custom debug keystore所需证书规格","date":"2014-06-29T16:00:00.000Z","_content":"自定义的调试证书，也需要保证和默认证书一样的密码，别名alias和别名密码。\n\n默认证书信息如下：\n\n```js\nKeystore name: “debug.keystore”\nKeystore password: “android”\nKey alias: “androiddebugkey”\nKey password: “android”\n```\n\n遵循这个规则就可以用自定义调试证书了。\n\nAndroid apk签名方法\nhttp://hi.baidu.com/40406_jun/item/8b936db4a9a0e79b19469782\n","source":"_posts/custom-debug-keystore.md","raw":"title: Eclipse ADT的Custom debug keystore所需证书规格\ndate: 2014-06-30 \ncategories: [Android]\ntags: [Android]\n---\n自定义的调试证书，也需要保证和默认证书一样的密码，别名alias和别名密码。\n\n默认证书信息如下：\n\n```js\nKeystore name: “debug.keystore”\nKeystore password: “android”\nKey alias: “androiddebugkey”\nKey password: “android”\n```\n\n遵循这个规则就可以用自定义调试证书了。\n\nAndroid apk签名方法\nhttp://hi.baidu.com/40406_jun/item/8b936db4a9a0e79b19469782\n","slug":"custom-debug-keystore","published":1,"updated":"2016-03-17T00:44:06.355Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge1k006go4pkndio1axa"},{"title":"Android通讯录索引效果","date":"2015-08-29T03:04:21.000Z","_content":"> 通讯录索引效果，网上很多了，我这里做个记录。\n\n# 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/contactIndex.png)\n<!--more-->\n# SideBar\n此类自定义索引的字母\n```java\npublic class SideBar extends View {\n\n    // 触摸事件\n    private OnTouchingLetterChangedListener onTouchingLetterChangedListener;\n    // 26个字母\n    public static String[] A_Z = {\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\",\n            \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\",\n            \"W\", \"X\", \"Y\", \"Z\", \"#\"};\n    private int choose = -1;// 选中\n    private Paint paint = new Paint();\n\n    private TextView mTextDialog;\n\n    /**\n     * 为SideBar设置显示字母的TextView\n     *\n     * @param mTextDialog\n     */\n    public void setTextView(TextView mTextDialog) {\n        this.mTextDialog = mTextDialog;\n    }\n\n\n    public SideBar(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n    }\n\n    public SideBar(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public SideBar(Context context) {\n        super(context);\n    }\n\n    /**\n     * 重写这个方法\n     */\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        // 获取焦点改变背景颜色.\n        int height = getHeight();// 获取对应高度\n        int width = getWidth(); // 获取对应宽度\n        int singleHeight = height / A_Z.length - 2;// 获取每一个字母的高度  (这里-2仅仅是为了好看而已)\n\n        for (int i = 0; i < A_Z.length; i++) {\n            paint.setColor(Color.rgb(33, 65, 98));  //设置字体颜色\n            paint.setTypeface(Typeface.DEFAULT_BOLD);  //设置字体\n            paint.setAntiAlias(true);  //设置抗锯齿\n            paint.setTextSize(30);  //设置字母字体大小\n            // 选中的状态\n            if (i == choose) {\n                paint.setColor(Color.parseColor(\"#3399ff\"));  //选中的字母改变颜色\n                paint.setFakeBoldText(true);  //设置字体为粗体\n            }\n            // x坐标等于中间-字符串宽度的一半.\n            float xPos = width / 2 - paint.measureText(A_Z[i]) / 2;\n            float yPos = singleHeight * i + singleHeight;\n            canvas.drawText(A_Z[i], xPos, yPos, paint);  //绘制所有的字母\n            paint.reset();// 重置画笔\n        }\n\n    }\n\n    @Override\n    public boolean dispatchTouchEvent(MotionEvent event) {\n        final int action = event.getAction();\n        final float y = event.getY();// 点击y坐标\n        final int oldChoose = choose;\n        final OnTouchingLetterChangedListener listener = onTouchingLetterChangedListener;\n        final int c = (int) (y / getHeight() * A_Z.length);// 点击y坐标所占总高度的比例*b数组的长度就等于点击b中的个数.\n\n        switch (action) {\n            case MotionEvent.ACTION_UP:\n                setBackgroundDrawable(new ColorDrawable(0x00000000));\n                choose = -1;//\n                invalidate();\n                if (mTextDialog != null) {\n                    mTextDialog.setVisibility(View.INVISIBLE);\n                }\n                break;\n\n            default:\n                setBackgroundResource(R.color.colorPrimary);\n                if (oldChoose != c) {  //判断选中字母是否发生改变\n                    if (c >= 0 && c < A_Z.length) {\n                        if (listener != null) {\n                            listener.onTouchingLetterChanged(A_Z[c]);\n                        }\n                        if (mTextDialog != null) {\n                            mTextDialog.setText(A_Z[c]);\n                            mTextDialog.setVisibility(View.VISIBLE);\n                        }\n\n                        choose = c;\n                        invalidate();\n                    }\n                }\n\n                break;\n        }\n        return true;\n    }\n\n    /**\n     * 向外公开的方法\n     *\n     * @param onTouchingLetterChangedListener\n     */\n    public void setOnTouchingLetterChangedListener(\n            OnTouchingLetterChangedListener onTouchingLetterChangedListener) {\n        this.onTouchingLetterChangedListener = onTouchingLetterChangedListener;\n    }\n\n    /**\n     * 接口\n     *\n     * @author coder\n     */\n    public interface OnTouchingLetterChangedListener {\n        public void onTouchingLetterChanged(String s);\n    }\n}\n```\n\n# xml调用\n```js\n <RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\">\n\n        <android.support.v7.widget.RecyclerView\n            android:id=\"@+id/mRecyclerView\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\" />\n\n        <TextView\n            android:id=\"@+id/textDialog\"\n            android:layout_width=\"80dip\"\n            android:layout_height=\"80dip\"\n            android:layout_centerInParent=\"true\"\n            android:layout_gravity=\"center\"\n            android:gravity=\"center\"\n            android:textColor=\"#ffffffff\"\n            android:background=\"@color/colorPrimary\"\n            android:textSize=\"30.0dip\"\n            android:visibility=\"invisible\" />\n\n        <你的包名.SideBar\n            android:id=\"@+id/sidebar\"\n            android:layout_width=\"20dip\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignParentRight=\"true\" />\n\n    </RelativeLayout>\n```\n# ContactActivity\n```java\npublic class ContactActivity extends BaseActivity {\n    @Bind(R.id.mRecyclerView)\n    RecyclerView mRecyclerView;\n\n    @Bind(R.id.sidebar)\n    SideBar sidebar;\n    @Bind(R.id.textDialog)\n    TextView textDialog;\n    private List<PersonBean> data;\n    ContactAdapter mContactAdapter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_contact);        \n        sidebar.setTextView(textDialog);\n        // 设置字母导航触摸监听\n        sidebar.setOnTouchingLetterChangedListener(new SideBar.OnTouchingLetterChangedListener() {\n\n            @Override\n            public void onTouchingLetterChanged(String s) {\n                // TODO Auto-generated method stub\n                // 该字母首次出现的位置\n                int position = mContactAdapter.getPositionForSelection(s.charAt(0));\n\n                if (position != -1) {\n                    mRecyclerView.getLayoutManager().scrollToPosition(position);\n                }\n            }\n        });\n        data = getData(getResources().getStringArray(R.array.listpersons));\n        // 数据在放在adapter之前需要排序\n        Collections.sort(data, new PinyinComparator());\n        for (int i = 0; i < data.size(); i++) {\n            Log.i(\"wxl\", \"Fpinyin=\" + data.get(i).getFirstPinYin());\n        }\n        LinearLayoutManager linearLayoutManager = new LinearLayoutManager(this);\n        linearLayoutManager.setOrientation(LinearLayoutManager.VERTICAL);\n        mRecyclerView.setLayoutManager(linearLayoutManager);\n        mContactAdapter = new ContactAdapter(data);\n        mRecyclerView.setAdapter(mContactAdapter);\n    }\n\n    private List<PersonBean> getData(String[] data) {\n        List<PersonBean> listarray = new ArrayList<PersonBean>();\n        for (int i = 0; i < data.length; i++) {\n            String pinyin = PinyinUtils.getPingYin(data[i]);\n            String Fpinyin = pinyin.substring(0, 1).toUpperCase();\n\n            PersonBean person = new PersonBean();\n            person.setName(data[i]);\n            person.setPinYin(pinyin);\n            // 正则表达式，判断首字母是否是英文字母\n            if (Fpinyin.matches(\"[A-Z]\")) {\n                person.setFirstPinYin(Fpinyin);\n            } else {\n                person.setFirstPinYin(\"#\");\n            }\n\n            listarray.add(person);\n        }\n\n        return listarray;\n\n    }  \n   \n}\n```\n# persons.xml\n模拟数据\n```js \n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<resources>\n    <string-array name=\"listpersons\">\n        <item> 马云</item>\n        <item> 马化腾</item>\n        <item> 佩兰</item>\n        <item> 奥巴马</item>\n        <item> 普京</item>\n        <item> 金三胖</item>\n        <item> 暗影军团</item>\n        <item> 141特遣队</item>\n        <item> 冲锋号</item>\n        <item> +胜利号</item>\n        <item> 超级赛亚人</item>\n        <item> 金克拉</item>\n        <item> 亚古兽</item>\n        <item> 数码宝贝大冒险</item>\n        <item> 大胜归来</item>\n        <item> 道士下山</item>\n        <item> A利亚克</item>\n        <item> 胜利冲锋龙卷风</item>\n        <item> 走在冷风中</item>\n        <item> 外面的世界</item>\n        <item> 烦恼歌</item>\n        <item> 如果没有你</item>\n        <item> 四季歌</item>\n        <item> 南山南</item>\n        <item> +胜利号</item>\n        <item> 光能使者</item>\n        <item> 铁甲小宝</item>\n        <item> 皮卡丘</item>\n        <item> 奥特曼</item>\n        <item> 开普勒452b</item>\n        <item> 神舟20号</item>\n        <item> 屌炸天的结尾</item>\n    </string-array>\n</resources>\n\n```\n\n# PersonBean\n```java\npublic class PersonBean {\n\n    private String Name;\n    private String PinYin;\n    private String FirstPinYin;\n\n    public String getName() {\n        return Name;\n    }\n\n    public void setName(String name) {\n        Name = name;\n    }\n\n    public String getPinYin() {\n        return PinYin;\n    }\n\n    public void setPinYin(String pinYin) {\n        PinYin = pinYin;\n    }\n\n    public String getFirstPinYin() {\n        return FirstPinYin;\n    }\n\n    public void setFirstPinYin(String firstPinYin) {\n        FirstPinYin = firstPinYin;\n    }\n\n    public String toString() {\n        return \"姓名：\" + getName() + \"   拼音：\" + getPinYin() + \"    首字母：\"\n                + getFirstPinYin();\n\n    }\n}\n```\n# PinyinUtils\n这里需要pinyin4j包，下载地址：http://pinyin4j.sourceforge.net/\n```java\npublic class PinyinUtils {\n    /**\n     * 汉字转拼音\n     */\n    public static String getPingYin(String inputString) {\n        HanyuPinyinOutputFormat format = new HanyuPinyinOutputFormat();\n        format.setCaseType(HanyuPinyinCaseType.LOWERCASE);\n        format.setToneType(HanyuPinyinToneType.WITHOUT_TONE);\n        format.setVCharType(HanyuPinyinVCharType.WITH_V);\n\n        char[] input = inputString.trim().toCharArray();\n        String output = \"\";\n\n        try {\n            for (char curchar : input) {\n                if (java.lang.Character.toString(curchar).matches(\"[\\\\u4E00-\\\\u9FA5]+\")) {\n                    String[] temp = PinyinHelper.toHanyuPinyinStringArray(curchar, format);\n                    output += temp[0];\n                } else\n                    output += java.lang.Character.toString(curchar);\n            }\n        } catch (BadHanyuPinyinOutputFormatCombination e) {\n            e.printStackTrace();\n        }\n        return output;\n    }\n}\n```\n# PinyinComparator\n按照字母排序类\n```java\npublic class PinyinComparator implements Comparator<PersonBean> {\n\n    @Override\n    public int compare(PersonBean lhs, PersonBean rhs) {\n        return sort(lhs, rhs);\n    }\n\n    private int sort(PersonBean lhs, PersonBean rhs) {\n        // 获取ascii值\n        int lhs_ascii = lhs.getFirstPinYin().toUpperCase().charAt(0);\n        int rhs_ascii = rhs.getFirstPinYin().toUpperCase().charAt(0);\n        // 判断若不是字母，则排在字母之后\n        if (lhs_ascii < 65 || lhs_ascii > 90)\n            return 1;\n        else if (rhs_ascii < 65 || rhs_ascii > 90)\n            return -1;\n        else\n            return lhs.getPinYin().compareTo(rhs.getPinYin());\n    }\n}\n\n```\n# ContactAdapter\n```java\npublic class ContactAdapter extends RecyclerView.Adapter<ContactAdapter.ViewHolder> {\n    List<PersonBean> data;\n\n    public ContactAdapter(List<PersonBean> data) {\n        this.data = data;\n    }\n\n    class ViewHolder extends RecyclerView.ViewHolder {\n        TextView nickname;\n        TextView tag;\n\n        public ViewHolder(View itemView) {\n            super(itemView);\n            nickname = (TextView) itemView.findViewById(R.id.nickname);\n            tag = (TextView) itemView.findViewById(R.id.tag);\n        }\n    }\n\n\n    @Override\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View view = View.inflate(parent.getContext(), R.layout.contact_item, null);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(ViewHolder holder, int position) {\n        PersonBean person = data.get(position);\n        // 获取首字母的assii值\n        int selection = person.getFirstPinYin().charAt(0);\n        // 通过首字母的assii值来判断是否显示字母\n        int positionForSelection = getPositionForSelection(selection);\n        if (position == positionForSelection) {// 相等说明需要显示字母\n            holder.tag.setVisibility(View.VISIBLE);\n            holder.tag.setText(person.getFirstPinYin());\n        } else {\n            holder.tag.setVisibility(View.GONE);\n\n        }\n        holder.nickname.setText(data.get(position).getName());\n    }\n\n    public int getPositionForSelection(int selection) {\n        for (int i = 0; i < data.size(); i++) {\n            String Fpinyin = data.get(i).getFirstPinYin();\n\n            char first = Fpinyin.toUpperCase().charAt(0);\n            if (first == selection) {\n                return i;\n            }\n        }\n        return -1;\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return data.size();\n    }\n}\n```\n## contact_item.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n    <!-- 这个TextView就是显示字母的 -->\n    <TextView\n        android:id=\"@+id/tag\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"20dp\"\n        android:background=\"#e6e6e6\"\n        android:gravity=\"center_vertical\"\n        android:paddingLeft=\"10dip\"\n        android:text=\"Z\"\n        android:visibility=\"visible\" />\n\n    <RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\">\n\n        <View\n            android:id=\"@+id/view_lv_item_line\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"0.5dip\"\n            android:layout_marginLeft=\"10dip\"\n            android:layout_marginRight=\"20dip\"\n            android:background=\"#174465\" />\n\n        <ImageView\n            android:id=\"@+id/iv_lv_item_head\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_below=\"@id/view_lv_item_line\"\n            android:layout_marginLeft=\"5dp\"\n            android:src=\"@mipmap/ic_launcher\" />\n\n        <TextView\n            android:id=\"@+id/nickname\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_centerVertical=\"true\"\n            android:layout_marginLeft=\"5dip\"\n            android:layout_toRightOf=\"@id/iv_lv_item_head\"\n            android:text=\"周华健\" />\n    </RelativeLayout>\n\n</LinearLayout>\n```\n# 附录\n[Android 联系人字母排序（仿微信）](http://www.cnblogs.com/scetopcsa/p/4724308.html)\n\n# 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n","source":"_posts/contactIndex.md","raw":"title: Android通讯录索引效果\ndate: 2015-08-29 11:04:21\ntags: contact\ncategory: Android\n---\n> 通讯录索引效果，网上很多了，我这里做个记录。\n\n# 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/contactIndex.png)\n<!--more-->\n# SideBar\n此类自定义索引的字母\n```java\npublic class SideBar extends View {\n\n    // 触摸事件\n    private OnTouchingLetterChangedListener onTouchingLetterChangedListener;\n    // 26个字母\n    public static String[] A_Z = {\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\",\n            \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\",\n            \"W\", \"X\", \"Y\", \"Z\", \"#\"};\n    private int choose = -1;// 选中\n    private Paint paint = new Paint();\n\n    private TextView mTextDialog;\n\n    /**\n     * 为SideBar设置显示字母的TextView\n     *\n     * @param mTextDialog\n     */\n    public void setTextView(TextView mTextDialog) {\n        this.mTextDialog = mTextDialog;\n    }\n\n\n    public SideBar(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n    }\n\n    public SideBar(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public SideBar(Context context) {\n        super(context);\n    }\n\n    /**\n     * 重写这个方法\n     */\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        // 获取焦点改变背景颜色.\n        int height = getHeight();// 获取对应高度\n        int width = getWidth(); // 获取对应宽度\n        int singleHeight = height / A_Z.length - 2;// 获取每一个字母的高度  (这里-2仅仅是为了好看而已)\n\n        for (int i = 0; i < A_Z.length; i++) {\n            paint.setColor(Color.rgb(33, 65, 98));  //设置字体颜色\n            paint.setTypeface(Typeface.DEFAULT_BOLD);  //设置字体\n            paint.setAntiAlias(true);  //设置抗锯齿\n            paint.setTextSize(30);  //设置字母字体大小\n            // 选中的状态\n            if (i == choose) {\n                paint.setColor(Color.parseColor(\"#3399ff\"));  //选中的字母改变颜色\n                paint.setFakeBoldText(true);  //设置字体为粗体\n            }\n            // x坐标等于中间-字符串宽度的一半.\n            float xPos = width / 2 - paint.measureText(A_Z[i]) / 2;\n            float yPos = singleHeight * i + singleHeight;\n            canvas.drawText(A_Z[i], xPos, yPos, paint);  //绘制所有的字母\n            paint.reset();// 重置画笔\n        }\n\n    }\n\n    @Override\n    public boolean dispatchTouchEvent(MotionEvent event) {\n        final int action = event.getAction();\n        final float y = event.getY();// 点击y坐标\n        final int oldChoose = choose;\n        final OnTouchingLetterChangedListener listener = onTouchingLetterChangedListener;\n        final int c = (int) (y / getHeight() * A_Z.length);// 点击y坐标所占总高度的比例*b数组的长度就等于点击b中的个数.\n\n        switch (action) {\n            case MotionEvent.ACTION_UP:\n                setBackgroundDrawable(new ColorDrawable(0x00000000));\n                choose = -1;//\n                invalidate();\n                if (mTextDialog != null) {\n                    mTextDialog.setVisibility(View.INVISIBLE);\n                }\n                break;\n\n            default:\n                setBackgroundResource(R.color.colorPrimary);\n                if (oldChoose != c) {  //判断选中字母是否发生改变\n                    if (c >= 0 && c < A_Z.length) {\n                        if (listener != null) {\n                            listener.onTouchingLetterChanged(A_Z[c]);\n                        }\n                        if (mTextDialog != null) {\n                            mTextDialog.setText(A_Z[c]);\n                            mTextDialog.setVisibility(View.VISIBLE);\n                        }\n\n                        choose = c;\n                        invalidate();\n                    }\n                }\n\n                break;\n        }\n        return true;\n    }\n\n    /**\n     * 向外公开的方法\n     *\n     * @param onTouchingLetterChangedListener\n     */\n    public void setOnTouchingLetterChangedListener(\n            OnTouchingLetterChangedListener onTouchingLetterChangedListener) {\n        this.onTouchingLetterChangedListener = onTouchingLetterChangedListener;\n    }\n\n    /**\n     * 接口\n     *\n     * @author coder\n     */\n    public interface OnTouchingLetterChangedListener {\n        public void onTouchingLetterChanged(String s);\n    }\n}\n```\n\n# xml调用\n```js\n <RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\">\n\n        <android.support.v7.widget.RecyclerView\n            android:id=\"@+id/mRecyclerView\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\" />\n\n        <TextView\n            android:id=\"@+id/textDialog\"\n            android:layout_width=\"80dip\"\n            android:layout_height=\"80dip\"\n            android:layout_centerInParent=\"true\"\n            android:layout_gravity=\"center\"\n            android:gravity=\"center\"\n            android:textColor=\"#ffffffff\"\n            android:background=\"@color/colorPrimary\"\n            android:textSize=\"30.0dip\"\n            android:visibility=\"invisible\" />\n\n        <你的包名.SideBar\n            android:id=\"@+id/sidebar\"\n            android:layout_width=\"20dip\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignParentRight=\"true\" />\n\n    </RelativeLayout>\n```\n# ContactActivity\n```java\npublic class ContactActivity extends BaseActivity {\n    @Bind(R.id.mRecyclerView)\n    RecyclerView mRecyclerView;\n\n    @Bind(R.id.sidebar)\n    SideBar sidebar;\n    @Bind(R.id.textDialog)\n    TextView textDialog;\n    private List<PersonBean> data;\n    ContactAdapter mContactAdapter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_contact);        \n        sidebar.setTextView(textDialog);\n        // 设置字母导航触摸监听\n        sidebar.setOnTouchingLetterChangedListener(new SideBar.OnTouchingLetterChangedListener() {\n\n            @Override\n            public void onTouchingLetterChanged(String s) {\n                // TODO Auto-generated method stub\n                // 该字母首次出现的位置\n                int position = mContactAdapter.getPositionForSelection(s.charAt(0));\n\n                if (position != -1) {\n                    mRecyclerView.getLayoutManager().scrollToPosition(position);\n                }\n            }\n        });\n        data = getData(getResources().getStringArray(R.array.listpersons));\n        // 数据在放在adapter之前需要排序\n        Collections.sort(data, new PinyinComparator());\n        for (int i = 0; i < data.size(); i++) {\n            Log.i(\"wxl\", \"Fpinyin=\" + data.get(i).getFirstPinYin());\n        }\n        LinearLayoutManager linearLayoutManager = new LinearLayoutManager(this);\n        linearLayoutManager.setOrientation(LinearLayoutManager.VERTICAL);\n        mRecyclerView.setLayoutManager(linearLayoutManager);\n        mContactAdapter = new ContactAdapter(data);\n        mRecyclerView.setAdapter(mContactAdapter);\n    }\n\n    private List<PersonBean> getData(String[] data) {\n        List<PersonBean> listarray = new ArrayList<PersonBean>();\n        for (int i = 0; i < data.length; i++) {\n            String pinyin = PinyinUtils.getPingYin(data[i]);\n            String Fpinyin = pinyin.substring(0, 1).toUpperCase();\n\n            PersonBean person = new PersonBean();\n            person.setName(data[i]);\n            person.setPinYin(pinyin);\n            // 正则表达式，判断首字母是否是英文字母\n            if (Fpinyin.matches(\"[A-Z]\")) {\n                person.setFirstPinYin(Fpinyin);\n            } else {\n                person.setFirstPinYin(\"#\");\n            }\n\n            listarray.add(person);\n        }\n\n        return listarray;\n\n    }  \n   \n}\n```\n# persons.xml\n模拟数据\n```js \n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<resources>\n    <string-array name=\"listpersons\">\n        <item> 马云</item>\n        <item> 马化腾</item>\n        <item> 佩兰</item>\n        <item> 奥巴马</item>\n        <item> 普京</item>\n        <item> 金三胖</item>\n        <item> 暗影军团</item>\n        <item> 141特遣队</item>\n        <item> 冲锋号</item>\n        <item> +胜利号</item>\n        <item> 超级赛亚人</item>\n        <item> 金克拉</item>\n        <item> 亚古兽</item>\n        <item> 数码宝贝大冒险</item>\n        <item> 大胜归来</item>\n        <item> 道士下山</item>\n        <item> A利亚克</item>\n        <item> 胜利冲锋龙卷风</item>\n        <item> 走在冷风中</item>\n        <item> 外面的世界</item>\n        <item> 烦恼歌</item>\n        <item> 如果没有你</item>\n        <item> 四季歌</item>\n        <item> 南山南</item>\n        <item> +胜利号</item>\n        <item> 光能使者</item>\n        <item> 铁甲小宝</item>\n        <item> 皮卡丘</item>\n        <item> 奥特曼</item>\n        <item> 开普勒452b</item>\n        <item> 神舟20号</item>\n        <item> 屌炸天的结尾</item>\n    </string-array>\n</resources>\n\n```\n\n# PersonBean\n```java\npublic class PersonBean {\n\n    private String Name;\n    private String PinYin;\n    private String FirstPinYin;\n\n    public String getName() {\n        return Name;\n    }\n\n    public void setName(String name) {\n        Name = name;\n    }\n\n    public String getPinYin() {\n        return PinYin;\n    }\n\n    public void setPinYin(String pinYin) {\n        PinYin = pinYin;\n    }\n\n    public String getFirstPinYin() {\n        return FirstPinYin;\n    }\n\n    public void setFirstPinYin(String firstPinYin) {\n        FirstPinYin = firstPinYin;\n    }\n\n    public String toString() {\n        return \"姓名：\" + getName() + \"   拼音：\" + getPinYin() + \"    首字母：\"\n                + getFirstPinYin();\n\n    }\n}\n```\n# PinyinUtils\n这里需要pinyin4j包，下载地址：http://pinyin4j.sourceforge.net/\n```java\npublic class PinyinUtils {\n    /**\n     * 汉字转拼音\n     */\n    public static String getPingYin(String inputString) {\n        HanyuPinyinOutputFormat format = new HanyuPinyinOutputFormat();\n        format.setCaseType(HanyuPinyinCaseType.LOWERCASE);\n        format.setToneType(HanyuPinyinToneType.WITHOUT_TONE);\n        format.setVCharType(HanyuPinyinVCharType.WITH_V);\n\n        char[] input = inputString.trim().toCharArray();\n        String output = \"\";\n\n        try {\n            for (char curchar : input) {\n                if (java.lang.Character.toString(curchar).matches(\"[\\\\u4E00-\\\\u9FA5]+\")) {\n                    String[] temp = PinyinHelper.toHanyuPinyinStringArray(curchar, format);\n                    output += temp[0];\n                } else\n                    output += java.lang.Character.toString(curchar);\n            }\n        } catch (BadHanyuPinyinOutputFormatCombination e) {\n            e.printStackTrace();\n        }\n        return output;\n    }\n}\n```\n# PinyinComparator\n按照字母排序类\n```java\npublic class PinyinComparator implements Comparator<PersonBean> {\n\n    @Override\n    public int compare(PersonBean lhs, PersonBean rhs) {\n        return sort(lhs, rhs);\n    }\n\n    private int sort(PersonBean lhs, PersonBean rhs) {\n        // 获取ascii值\n        int lhs_ascii = lhs.getFirstPinYin().toUpperCase().charAt(0);\n        int rhs_ascii = rhs.getFirstPinYin().toUpperCase().charAt(0);\n        // 判断若不是字母，则排在字母之后\n        if (lhs_ascii < 65 || lhs_ascii > 90)\n            return 1;\n        else if (rhs_ascii < 65 || rhs_ascii > 90)\n            return -1;\n        else\n            return lhs.getPinYin().compareTo(rhs.getPinYin());\n    }\n}\n\n```\n# ContactAdapter\n```java\npublic class ContactAdapter extends RecyclerView.Adapter<ContactAdapter.ViewHolder> {\n    List<PersonBean> data;\n\n    public ContactAdapter(List<PersonBean> data) {\n        this.data = data;\n    }\n\n    class ViewHolder extends RecyclerView.ViewHolder {\n        TextView nickname;\n        TextView tag;\n\n        public ViewHolder(View itemView) {\n            super(itemView);\n            nickname = (TextView) itemView.findViewById(R.id.nickname);\n            tag = (TextView) itemView.findViewById(R.id.tag);\n        }\n    }\n\n\n    @Override\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View view = View.inflate(parent.getContext(), R.layout.contact_item, null);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(ViewHolder holder, int position) {\n        PersonBean person = data.get(position);\n        // 获取首字母的assii值\n        int selection = person.getFirstPinYin().charAt(0);\n        // 通过首字母的assii值来判断是否显示字母\n        int positionForSelection = getPositionForSelection(selection);\n        if (position == positionForSelection) {// 相等说明需要显示字母\n            holder.tag.setVisibility(View.VISIBLE);\n            holder.tag.setText(person.getFirstPinYin());\n        } else {\n            holder.tag.setVisibility(View.GONE);\n\n        }\n        holder.nickname.setText(data.get(position).getName());\n    }\n\n    public int getPositionForSelection(int selection) {\n        for (int i = 0; i < data.size(); i++) {\n            String Fpinyin = data.get(i).getFirstPinYin();\n\n            char first = Fpinyin.toUpperCase().charAt(0);\n            if (first == selection) {\n                return i;\n            }\n        }\n        return -1;\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return data.size();\n    }\n}\n```\n## contact_item.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n    <!-- 这个TextView就是显示字母的 -->\n    <TextView\n        android:id=\"@+id/tag\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"20dp\"\n        android:background=\"#e6e6e6\"\n        android:gravity=\"center_vertical\"\n        android:paddingLeft=\"10dip\"\n        android:text=\"Z\"\n        android:visibility=\"visible\" />\n\n    <RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\">\n\n        <View\n            android:id=\"@+id/view_lv_item_line\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"0.5dip\"\n            android:layout_marginLeft=\"10dip\"\n            android:layout_marginRight=\"20dip\"\n            android:background=\"#174465\" />\n\n        <ImageView\n            android:id=\"@+id/iv_lv_item_head\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_below=\"@id/view_lv_item_line\"\n            android:layout_marginLeft=\"5dp\"\n            android:src=\"@mipmap/ic_launcher\" />\n\n        <TextView\n            android:id=\"@+id/nickname\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_centerVertical=\"true\"\n            android:layout_marginLeft=\"5dip\"\n            android:layout_toRightOf=\"@id/iv_lv_item_head\"\n            android:text=\"周华健\" />\n    </RelativeLayout>\n\n</LinearLayout>\n```\n# 附录\n[Android 联系人字母排序（仿微信）](http://www.cnblogs.com/scetopcsa/p/4724308.html)\n\n# 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n","slug":"contactIndex","published":1,"updated":"2016-03-17T00:44:06.355Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge1m006jo4pkz07gasxl"},{"title":"企业通","date":"2014-12-29T16:00:00.000Z","_content":"\n>\n灵感源于生活，进而反馈生活。\n>\n\n前段时间坐公交突然一个想法，咱们公司不是人数很多，除了本部门人认识，其他部门基本不认识，也没交集，能不能有款App把大家连起来，于是有了“企业通”。企业通针对企业，便于企业内部交流。\n\n\n##（一）前提\n该企业开放程度较高，员工可以言论自由\n\n##（二）模块划分\n* 最新公告\n \n发布公司重大信息\n<!-- more -->\n\n* 部门论坛\n\n根据各个公司，细分各部门板块，各部门的人在相应的部门发帖吐槽等，看其他部门帖子可以评论\n\n* 通讯录\n\n列出公司所有人，可以查看相应的介绍，聊天\n\n##（三）盈利模式\n买给其他企业，只需要更改服务器地址就能配置成他们公司企业通\n","source":"_posts/company.md","raw":"title: 企业通\ndate: 2014-12-30 \ncategories: [Life]\ntags: [Life]\n---\n\n>\n灵感源于生活，进而反馈生活。\n>\n\n前段时间坐公交突然一个想法，咱们公司不是人数很多，除了本部门人认识，其他部门基本不认识，也没交集，能不能有款App把大家连起来，于是有了“企业通”。企业通针对企业，便于企业内部交流。\n\n\n##（一）前提\n该企业开放程度较高，员工可以言论自由\n\n##（二）模块划分\n* 最新公告\n \n发布公司重大信息\n<!-- more -->\n\n* 部门论坛\n\n根据各个公司，细分各部门板块，各部门的人在相应的部门发帖吐槽等，看其他部门帖子可以评论\n\n* 通讯录\n\n列出公司所有人，可以查看相应的介绍，聊天\n\n##（三）盈利模式\n买给其他企业，只需要更改服务器地址就能配置成他们公司企业通\n","slug":"company","published":1,"updated":"2016-03-17T00:44:06.355Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge1o006no4pkd6lxiat9"},{"title":"Android判断权限被限制","date":"2015-06-09T16:00:00.000Z","_content":"\n开发过程，如果某个权限被第三方限制了，比如录音，网上查了下\n\n```java\n String permName = \"android.permission.RECORD_AUDIO\";\n        String pkgName = getPackageName();\n        // 结果为0则表示使用了该权限，-1则表求没有使用该权限\n        int reslut = getPackageManager().checkPermission(permName, pkgName);\n        Log.d(\"wxl\", \"reslut=\" + reslut + \"======\"\n                + PackageManager.PERMISSION_GRANTED);\n```\n实际这个方法只是检测你的APP是否使用了某个权限，但是不能检测是否被限制了。\n\n<!-- more -->\n\n我以为做不了，找了微信，限制录音权限，结果提示录音权限被限，于是我仔细看了异常信息。\n\n```js\n06-11 11:33:58.644    7706-7706/cn.cntv.tvt W/System.err﹕ java.io.IOException: Recording permission has been disabled for current app\n06-11 11:33:58.644    7706-7706/cn.cntv.tvt W/System.err﹕ at com.lbe.security.service.core.client.MultimediaClient.mrShouldBlock(Unknown Source)\n06-11 11:33:58.644    7706-7706/cn.cntv.tvt W/System.err﹕ at android.media.MediaRecorder._setOutputFile(Native Method)\n06-11 11:33:58.644    7706-7706/cn.cntv.tvt W/System.err﹕ at android.media.MediaRecorder.prepare(MediaRecorder.java:769)\n```\n对比Recording permission has been disabled for current app，做相应的提示就OK！\n\n","source":"_posts/checkPermission.md","raw":"title: Android判断权限被限制\ndate: 2015-06-10 \ncategories: [Android]\ntags: [Android,Permission]\n---\n\n开发过程，如果某个权限被第三方限制了，比如录音，网上查了下\n\n```java\n String permName = \"android.permission.RECORD_AUDIO\";\n        String pkgName = getPackageName();\n        // 结果为0则表示使用了该权限，-1则表求没有使用该权限\n        int reslut = getPackageManager().checkPermission(permName, pkgName);\n        Log.d(\"wxl\", \"reslut=\" + reslut + \"======\"\n                + PackageManager.PERMISSION_GRANTED);\n```\n实际这个方法只是检测你的APP是否使用了某个权限，但是不能检测是否被限制了。\n\n<!-- more -->\n\n我以为做不了，找了微信，限制录音权限，结果提示录音权限被限，于是我仔细看了异常信息。\n\n```js\n06-11 11:33:58.644    7706-7706/cn.cntv.tvt W/System.err﹕ java.io.IOException: Recording permission has been disabled for current app\n06-11 11:33:58.644    7706-7706/cn.cntv.tvt W/System.err﹕ at com.lbe.security.service.core.client.MultimediaClient.mrShouldBlock(Unknown Source)\n06-11 11:33:58.644    7706-7706/cn.cntv.tvt W/System.err﹕ at android.media.MediaRecorder._setOutputFile(Native Method)\n06-11 11:33:58.644    7706-7706/cn.cntv.tvt W/System.err﹕ at android.media.MediaRecorder.prepare(MediaRecorder.java:769)\n```\n对比Recording permission has been disabled for current app，做相应的提示就OK！\n\n","slug":"checkPermission","published":1,"updated":"2016-03-17T00:44:06.354Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge1q006qo4pkcxlujr7q"},{"title":"Android Studio如何更改JDK和SDK的路径","date":"2014-11-21T16:00:00.000Z","_content":"安装Android Studio后它默认在自己的文件目录下又安装了一个sdk，然后SDK路径默认到这个文件下。\n今天更新Android Studio到0.8.14，提示要移动这个sdk，但是我在设置中始终没有找到更改sdk的路径的地方。\n网上找了，我没有想到居然在这里设置，直接上图：\n![](http://wuxiaolong.qiniudn.com/2014-11-22-change-sdk-path.png)\n","source":"_posts/change-sdk-path.md","raw":"title: Android Studio如何更改JDK和SDK的路径\ndate: 2014-11-22 \ncategories: [Android Studio]\ntags: [Android Studio]\n---\n安装Android Studio后它默认在自己的文件目录下又安装了一个sdk，然后SDK路径默认到这个文件下。\n今天更新Android Studio到0.8.14，提示要移动这个sdk，但是我在设置中始终没有找到更改sdk的路径的地方。\n网上找了，我没有想到居然在这里设置，直接上图：\n![](http://wuxiaolong.qiniudn.com/2014-11-22-change-sdk-path.png)\n","slug":"change-sdk-path","published":1,"updated":"2016-03-17T00:44:06.354Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge1s006vo4pk06xjewra"},{"title":"手把手教你建github技术博客by jekyll","date":"2014-10-25T23:56:29.000Z","_content":"\n\n******\n\n## <a name=\"index\"/>目录\n* [一、适合人群](#for-the-crowd)\n* [二、github创建博客](#build-blog)\n\t* 注册账号\n\t* 创建页面仓库\n\t* 项目设置\n\t* 页面生成器\n\t* 创建用户页面\n\t* 页面发布\n\t* 查看效果\n* [三、如何发布博客](#write-blog)\n\t* 安装 Ruby\n\t* 安装 DevKit\n\t* 安装 Python\n\t* 安装 Jekyll\n\t* 启动 Jekyll\n\t* 图床\n* [四、总结](#ps)\n* [五、附录](#appendix)\n\n<!-- more -->\n\n<a name=\"for-the-crowd\"/>\n\n## 一、适合人群\n\n* 喜欢写Blog的人\n* 有一定的编程基础\n* 爱折腾的人\n* 熟练使用版本控制Git\n* 了解使用Github\n* 熟悉基本的MarkDown语法\n\n\n\n<a name=\"build-blog\"/>\n\n## 二、github 创建博客\n\n* ### 注册账号\n地址：[https://github.com/](https://github.com/)  \n输入账号、邮箱、密码,然后点击注册按钮.\n![1](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-1.png)\n\n* ### 创建页面仓库\n这个仓库的名字需要和你的账号对应，格式:`yourname`.github.io\n输入基本信息，然后点击创建仓库.\n![2](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-2.png)\n![3](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-3.png)\n\n* ### 项目设置\n![4](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-4.png)\n\n* ### 页面生成器\n![5](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-5.png)\n\n* ### 创建用户页面\n![6](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-6.png)\n\n* ### 页面发布\n![7](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-7.png)\n\n* ### 查看效果\n需要等待十分钟，自此，完成了github的博客创建，访问地址：yourname.github.io\n![8](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-8.png)\n<a name=\"write-blog\"/>\n\n## 三、如何发布博客\n\n以上只是创建了博客，那怎么发布自己的博客？共分为以下几个重要步骤（window下）：\n\n* 安装 Ruby\n* 安装 DevKit\n* 安装 Python\n* 安装 Jekyll\n\n### 安装 Ruby\n\n* 下载地址：[http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/) \n* 安装\n\t* 最好保持默认的路径 C:\\Ruby200-x64， 因为安装包明确提出 “请不要使用带有空格的文件夹 (如： Program Files)”。\n\t* 勾选 “Add Ruby executables to your PATH”，这样执行程序会被自动添加至 PATH 而避免不必要的头疼。\n\t\n![9](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-9.png)\n\t* 命令行ruby -v来检测Ruby是否成功安装\t    \n\t\n```js \n\tC:\\Users\\WuXL>ruby -v\t\n\t返回ruby 2.1.3p242 (2014-09-19 revision 47630) [x64-mingw32]，ok\n\t\n```\n\t\n### 五、安装 DevKit\n\n* 下载地址：[http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/) \n* 下载同系统及 Ruby 版本相对应的 DevKit 安装包。 例如，DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe 适用于64位 Windows 系统上的 Ruby 2.0.0 x64。\n* 运行安装包并解压缩至某文件夹，如 C:\\DevKit\n* 通过初始化来创建 config.yml 文件。在命令行窗口内，输入下列命令：\n\n```js\n\tcd “C:\\DevKit”\n\truby dk.rb init\n\tnotepad config.yml\n```\n\n* 在打开的记事本窗口中，于末尾添加新的一行 - C:\\Ruby200-x64，保存文件并退出。\n* 回到命令行窗口内，审查（非必须）并安装。\n\n```js\n\truby dk.rb review\n\truby dk.rb install\n```\n### 安装 pyhton\n\n* 下载地址：[http://www.python.org/download/](http://www.python.org/download/) \n* 添加安装路径 (如C:\\Python27)至PATH。\n\n### 安装 Jekyll\n\n\n* 查看是否安装 gem 成功\n\n```js\n\tgem --version\n\t返回2.2.2，OK\n```\n\n* 更新为 淘宝镜像<br>\n\tRubyGems镜像换为 淘宝、防止下载包出错(官网https://ruby.taobao.org/)\n\n* 移除旧地址\n \n```js\n\tgem sources --remove https://rubygems.org/ \n\t返回https://rubygems.org/ removed from sources，ok\n```\n* 更新为淘宝镜像\n\n```js\n\tgem sources -a https://ruby.taobao.org/\n\t返回https://ruby.taobao.org/ added to sources，ok\n```\n* 安装jekyll\n\n```js\n\tgem install jekyll \n```\n* 查看是否安装jekyll成功\n\n```js\n\tjekyll -version\n\t返回jekyll 2.4.0，ok\n```\n* 安装 依赖包 \n\n```js\n\tgem install wdm\n```\n* 安装依赖包代码 高亮 \n\n```js\n\tgem install rdiscount\n```\n* 安装 ‘Easy Install’\n \n```js\n\t浏览 https://pypi.python.org/pypi/setuptools#installation-instructions 来查看详细的安装指南。\n\t对于 Windows 7 的机器，下载 ez_setup.py 并保存，例如，至C:\\。 然后从命令行使用 Python 运行此文件：python “C:\\ez_setup.py”\n\t添加 ‘Python Scripts’ 路径 (如： C:\\Python27\\Scripts) 至 PATH\n```\n* 安装 Pygments\n\n```js\n\t确保 easy_install 已经正确安装\n\teasy_install --version\n\t输出示例：\n\tsetuptools 3.1\n```\n* 使用 “easy_install” 来安装 Pygments\n\n```js\n\teasy_install Pygments\n```\n* 安装指定版本的yajl\n\n\n```js\n\t删除86版本的yajl\n\tC:\\OpenSources\\liyouhai>gem uninstall yajl-ruby\n\tSuccessfully uninstalled yajl-ruby-1.1.0-x86-mingw32\n\t安装指定版本的yajl\n\tC:\\OpenSources\\liyouhai>gem install yajl-ruby -v 1.1.0 --platform=ruby\n\tFetching: yajl-ruby-1.1.0.gem (100%)\n\tTemporarily enhancing PATH to include DevKit...\n\tBuilding native extensions.  This could take a while...\n\tSuccessfully installed yajl-ruby-1.1.0\n\tParsing documentation for yajl-ruby-1.1.0\n\tunable to convert \"\\x90\" from ASCII-8BIT to UTF-8 for lib/yajl/yajl.so, skipping\n\tInstalling ri documentation for yajl-ruby-1.1.0\n\t1 gem installed\n```\n\n### 启动 Jekyll\n\n按照官方的 Jekyll[`快速开始手册`](http://jekyllrb.com/docs/quickstart/)的步骤，或者克隆[`模板`](https://github.com/jekyll/jekyll/wiki/Sites)到本地，cmd下cd进入目录运行如下命令，就能在 localhost:4000 中预览了，大功告成。\n\n```js\n\tjekyll serve -watch (或jekyll serve -w)\n```\n### 图床\n\n1.墙裂推荐七牛云储存,[注册地址](https://portal.qiniu.com/signup?code=3lk4saqepkdhu)。\n\n2.七牛云储存提供10G的免费空间,以及每月10G的流量.存放个人博客图片最好不过了\n\n3.七牛云储存还有各种图形处理功能、缩略图、视频存放速度也给力（非打广告）。\n\n具体使用见[使用七牛作为github博客的图床](http://wuxiaolong.github.io/blog/2014/10/30/qiniu-photo-bed.html)\n\n<a name=\"ps\"/>\n\n## 四、总结\n\n一开始认为 GitHub.io 技术博客很有难度，从10月23日着手，经历24日一天摸索，知道了jekyll，MarkDown(其实就是github的 READ.md ,幸亏之前自学过READ.md语法），也有幸自学了git，不然还不知道这个建博客 什么时候能做好，进jekyll安装就花了半天，反正各种错误，然后各种谷歌百度  ，25日一天就写了这个博客（集众建博客的帖子所长），问题主要是没有 文章摘要 ，一下子全部显示出来，我有强迫症，不能接受这个，到26日才解决，如果您没有一定的编程基础，爱折腾，坚持不懈的精神，还是不要建自己的 GitHub.io 技术博客吧。\n\n<a name=\"appendix\"/>\n\n## 五、附录\n\njekyll中文官网：[http://jekyllcn.com/](http://jekyllcn.com/) <br>\nMarkdown 语法说明：[http://wowubuntu.com/markdown/#autoescape](http://wowubuntu.com/markdown/#autoescape) \n\n","source":"_posts/build-blog.md","raw":"title: 手把手教你建github技术博客by jekyll\ndate: 2014-10-26 07:56:29 \ncategories: jekyll\ntags: [github,jekyll]\n---\n\n\n******\n\n## <a name=\"index\"/>目录\n* [一、适合人群](#for-the-crowd)\n* [二、github创建博客](#build-blog)\n\t* 注册账号\n\t* 创建页面仓库\n\t* 项目设置\n\t* 页面生成器\n\t* 创建用户页面\n\t* 页面发布\n\t* 查看效果\n* [三、如何发布博客](#write-blog)\n\t* 安装 Ruby\n\t* 安装 DevKit\n\t* 安装 Python\n\t* 安装 Jekyll\n\t* 启动 Jekyll\n\t* 图床\n* [四、总结](#ps)\n* [五、附录](#appendix)\n\n<!-- more -->\n\n<a name=\"for-the-crowd\"/>\n\n## 一、适合人群\n\n* 喜欢写Blog的人\n* 有一定的编程基础\n* 爱折腾的人\n* 熟练使用版本控制Git\n* 了解使用Github\n* 熟悉基本的MarkDown语法\n\n\n\n<a name=\"build-blog\"/>\n\n## 二、github 创建博客\n\n* ### 注册账号\n地址：[https://github.com/](https://github.com/)  \n输入账号、邮箱、密码,然后点击注册按钮.\n![1](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-1.png)\n\n* ### 创建页面仓库\n这个仓库的名字需要和你的账号对应，格式:`yourname`.github.io\n输入基本信息，然后点击创建仓库.\n![2](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-2.png)\n![3](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-3.png)\n\n* ### 项目设置\n![4](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-4.png)\n\n* ### 页面生成器\n![5](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-5.png)\n\n* ### 创建用户页面\n![6](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-6.png)\n\n* ### 页面发布\n![7](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-7.png)\n\n* ### 查看效果\n需要等待十分钟，自此，完成了github的博客创建，访问地址：yourname.github.io\n![8](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-8.png)\n<a name=\"write-blog\"/>\n\n## 三、如何发布博客\n\n以上只是创建了博客，那怎么发布自己的博客？共分为以下几个重要步骤（window下）：\n\n* 安装 Ruby\n* 安装 DevKit\n* 安装 Python\n* 安装 Jekyll\n\n### 安装 Ruby\n\n* 下载地址：[http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/) \n* 安装\n\t* 最好保持默认的路径 C:\\Ruby200-x64， 因为安装包明确提出 “请不要使用带有空格的文件夹 (如： Program Files)”。\n\t* 勾选 “Add Ruby executables to your PATH”，这样执行程序会被自动添加至 PATH 而避免不必要的头疼。\n\t\n![9](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-9.png)\n\t* 命令行ruby -v来检测Ruby是否成功安装\t    \n\t\n```js \n\tC:\\Users\\WuXL>ruby -v\t\n\t返回ruby 2.1.3p242 (2014-09-19 revision 47630) [x64-mingw32]，ok\n\t\n```\n\t\n### 五、安装 DevKit\n\n* 下载地址：[http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/) \n* 下载同系统及 Ruby 版本相对应的 DevKit 安装包。 例如，DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe 适用于64位 Windows 系统上的 Ruby 2.0.0 x64。\n* 运行安装包并解压缩至某文件夹，如 C:\\DevKit\n* 通过初始化来创建 config.yml 文件。在命令行窗口内，输入下列命令：\n\n```js\n\tcd “C:\\DevKit”\n\truby dk.rb init\n\tnotepad config.yml\n```\n\n* 在打开的记事本窗口中，于末尾添加新的一行 - C:\\Ruby200-x64，保存文件并退出。\n* 回到命令行窗口内，审查（非必须）并安装。\n\n```js\n\truby dk.rb review\n\truby dk.rb install\n```\n### 安装 pyhton\n\n* 下载地址：[http://www.python.org/download/](http://www.python.org/download/) \n* 添加安装路径 (如C:\\Python27)至PATH。\n\n### 安装 Jekyll\n\n\n* 查看是否安装 gem 成功\n\n```js\n\tgem --version\n\t返回2.2.2，OK\n```\n\n* 更新为 淘宝镜像<br>\n\tRubyGems镜像换为 淘宝、防止下载包出错(官网https://ruby.taobao.org/)\n\n* 移除旧地址\n \n```js\n\tgem sources --remove https://rubygems.org/ \n\t返回https://rubygems.org/ removed from sources，ok\n```\n* 更新为淘宝镜像\n\n```js\n\tgem sources -a https://ruby.taobao.org/\n\t返回https://ruby.taobao.org/ added to sources，ok\n```\n* 安装jekyll\n\n```js\n\tgem install jekyll \n```\n* 查看是否安装jekyll成功\n\n```js\n\tjekyll -version\n\t返回jekyll 2.4.0，ok\n```\n* 安装 依赖包 \n\n```js\n\tgem install wdm\n```\n* 安装依赖包代码 高亮 \n\n```js\n\tgem install rdiscount\n```\n* 安装 ‘Easy Install’\n \n```js\n\t浏览 https://pypi.python.org/pypi/setuptools#installation-instructions 来查看详细的安装指南。\n\t对于 Windows 7 的机器，下载 ez_setup.py 并保存，例如，至C:\\。 然后从命令行使用 Python 运行此文件：python “C:\\ez_setup.py”\n\t添加 ‘Python Scripts’ 路径 (如： C:\\Python27\\Scripts) 至 PATH\n```\n* 安装 Pygments\n\n```js\n\t确保 easy_install 已经正确安装\n\teasy_install --version\n\t输出示例：\n\tsetuptools 3.1\n```\n* 使用 “easy_install” 来安装 Pygments\n\n```js\n\teasy_install Pygments\n```\n* 安装指定版本的yajl\n\n\n```js\n\t删除86版本的yajl\n\tC:\\OpenSources\\liyouhai>gem uninstall yajl-ruby\n\tSuccessfully uninstalled yajl-ruby-1.1.0-x86-mingw32\n\t安装指定版本的yajl\n\tC:\\OpenSources\\liyouhai>gem install yajl-ruby -v 1.1.0 --platform=ruby\n\tFetching: yajl-ruby-1.1.0.gem (100%)\n\tTemporarily enhancing PATH to include DevKit...\n\tBuilding native extensions.  This could take a while...\n\tSuccessfully installed yajl-ruby-1.1.0\n\tParsing documentation for yajl-ruby-1.1.0\n\tunable to convert \"\\x90\" from ASCII-8BIT to UTF-8 for lib/yajl/yajl.so, skipping\n\tInstalling ri documentation for yajl-ruby-1.1.0\n\t1 gem installed\n```\n\n### 启动 Jekyll\n\n按照官方的 Jekyll[`快速开始手册`](http://jekyllrb.com/docs/quickstart/)的步骤，或者克隆[`模板`](https://github.com/jekyll/jekyll/wiki/Sites)到本地，cmd下cd进入目录运行如下命令，就能在 localhost:4000 中预览了，大功告成。\n\n```js\n\tjekyll serve -watch (或jekyll serve -w)\n```\n### 图床\n\n1.墙裂推荐七牛云储存,[注册地址](https://portal.qiniu.com/signup?code=3lk4saqepkdhu)。\n\n2.七牛云储存提供10G的免费空间,以及每月10G的流量.存放个人博客图片最好不过了\n\n3.七牛云储存还有各种图形处理功能、缩略图、视频存放速度也给力（非打广告）。\n\n具体使用见[使用七牛作为github博客的图床](http://wuxiaolong.github.io/blog/2014/10/30/qiniu-photo-bed.html)\n\n<a name=\"ps\"/>\n\n## 四、总结\n\n一开始认为 GitHub.io 技术博客很有难度，从10月23日着手，经历24日一天摸索，知道了jekyll，MarkDown(其实就是github的 READ.md ,幸亏之前自学过READ.md语法），也有幸自学了git，不然还不知道这个建博客 什么时候能做好，进jekyll安装就花了半天，反正各种错误，然后各种谷歌百度  ，25日一天就写了这个博客（集众建博客的帖子所长），问题主要是没有 文章摘要 ，一下子全部显示出来，我有强迫症，不能接受这个，到26日才解决，如果您没有一定的编程基础，爱折腾，坚持不懈的精神，还是不要建自己的 GitHub.io 技术博客吧。\n\n<a name=\"appendix\"/>\n\n## 五、附录\n\njekyll中文官网：[http://jekyllcn.com/](http://jekyllcn.com/) <br>\nMarkdown 语法说明：[http://wowubuntu.com/markdown/#autoescape](http://wowubuntu.com/markdown/#autoescape) \n\n","slug":"build-blog","published":1,"updated":"2016-03-17T00:44:06.354Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge1u006zo4pk7oz4fiud"},{"title":"手把手教你建github技术博客by hexo","date":"2015-07-31T06:22:35.000Z","_content":"## 适合人群\n\n* 喜欢写Blog的人\n* 有一定的编程基础\n* 爱折腾的人\n* 熟练使用版本控制Git\n* 了解使用Github\n* 熟悉基本的MarkDown语法\n\n<!-- more -->\n\n## 环境准备\n\n### 安装Git\n下载 [msysgit](http://msysgit.github.io/) 并执行即可完成安装。\n\n### 安装Node.js\n在 Windows 环境下安装 [Node.js](http://nodejs.org/) 非常简单，仅须下载安装文件并执行即可完成安装。\n\n### 安装hexo\n利用 npm 命令即可安装。（在任意位置点击鼠标右键，选择Git bash）\n```js\nnpm install -g hexo\n```\n`问题`\n* npm ERR! registry error parsing json 错误\n\n可能需要设置npm代理,执行命令\n```js \nnpm config set registry http://registry.cnpmjs.org\n```\n\n* hexo:command not found\n删除刚刚安装的npm目录，重新执行命令npm install -g hexo安装hexo，\n\n\n### 创建hexo文件夹\n安装完成后，在你喜爱的文件夹下（如H:\\hexo），执行以下指令(在H:\\hexo内点击鼠标右键，选择Git bash)，Hexo 即会自动在目标文件夹建立网站所需要的所有文件。\n```js\nhexo init\n```\n\n### 安装依赖包\n```js\nnpm install\n```\n\n### 本地查看\n\n现在我们已经搭建起本地的hexo博客了，执行以下命令(在H:\\hexo)，然后到浏览器输入localhost:4000看看。\n```js\nhexo generate\nhexo server\n```\n好了，至此，本地博客已经搭建起来了，只是本地哦，别人看不到的。下面，我们要部署到Github。\n\n`问题`\n* 执行hexo server提示找不到该指令 \n解决办法： \n在Hexo 3.0 后server被单独出来了，需要安装server，安装的命令如下：\n```js\nnpm install hexo -server --save \n```\n安装此server后再试，问题解决\n\n## github 创建博客\n\n* ### 注册账号\n地址：[https://github.com/](https://github.com/)  \n输入账号、邮箱、密码,然后点击注册按钮.\n![1](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-1.png)\n\n### 创建页面仓库\n这个仓库的名字需要和你的账号对应，格式: yourname.github.io\n输入基本信息，然后点击创建仓库.\n![2](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-2.png)\n![3](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-3.png)\n`注意`\n命名规则：你的github账号.github.io，我这里被坑了，之前是jekell写的，现在换成hexo，所以我是另建创库了。\n\n### 生成SSH密钥\nssh-keygen -t rsa -C \"你的邮箱地址\"，按3个回车，密码为空。\n\n在C:\\Users\\Administrator\\.ssh下，得到两个文件id_rsa和id_rsa.pub。\n\n### 在GitHub上添加SSH密钥\n打开id_rsa.pub，复制全文。[https://github.com/settings/ssh](https://github.com/settings/ssh) ，Add SSH key，粘贴进去。\n\n## hexo使用\n\n### 目录结构\n\n.\n├── .deploy       #需要部署的文件\n├── node_modules  #Hexo插件\n├── public        #生成的静态网页文件\n├── scaffolds     #模板\n├── source        #博客正文和其他源文件，404、favicon、CNAME 都应该放在这里\n|   ├── _drafts   #草稿\n|   └── _posts    #文章\n├── themes        #主题\n├── _config.yml   #全局配置文件\n└── package.json\n\n### 全局配置 _config.yml\n\n```js\n# Hexo Configuration\n## Docs: http://hexo.io/docs/configuration.html\n## Source: https://github.com/hexojs/hexo/\n# Site #站点信息\ntitle:  #标题\nsubtitle:  #副标题\ndescription:  #站点描述，给搜索引擎看的\nauthor:  #作者\nemail:  #电子邮箱\nlanguage: zh-CN #语言\n# URL #链接格式\nurl:  #网址\nroot: / #根目录\npermalink: :year/:month/:day/:title/ #文章的链接格式\ntag_dir: tags #标签目录\narchive_dir: archives #存档目录\ncategory_dir: categories #分类目录\ncode_dir: downloads/code\npermalink_defaults:\n# Directory #目录\nsource_dir: source #源文件目录\npublic_dir: public #生成的网页文件目录\n# Writing #写作\nnew_post_name: :title.md #新文章标题\ndefault_layout: post #默认的模板，包括 post、page、photo、draft（文章、页面、照片、草稿）\ntitlecase: false #标题转换成大写\nexternal_link: true #在新选项卡中打开连接\nfilename_case: 0\nrender_drafts: false\npost_asset_folder: false\nrelative_link: false\nhighlight: #语法高亮\n  enable: true #是否启用\n  line_number: true #显示行号\n  tab_replace:\n# Category & Tag #分类和标签\ndefault_category: uncategorized #默认分类\ncategory_map:\ntag_map:\n# Archives\n2: 开启分页\n1: 禁用分页\n0: 全部禁用\narchive: 2\ncategory: 2\ntag: 2\n# Server #本地服务器\nport: 4000 #端口号\nserver_ip: localhost #IP 地址\nlogger: false\nlogger_format: dev\n# Date / Time format #日期时间格式\ndate_format: YYYY-MM-DD #参考http://momentjs.com/docs/#/displaying/format/\ntime_format: H:mm:ss\n# Pagination #分页\nper_page: 10 #每页文章数，设置成 0 禁用分页\npagination_dir: page\n# Disqus #Disqus评论，替换为多说\ndisqus_shortname:\n# Extensions #拓展插件\ntheme: landscape-plus #主题\nexclude_generator:\nplugins: #插件，例如生成 RSS 和站点地图的\n- hexo-generator-feed\n- hexo-generator-sitemap\n# Deployment #部署，将 lmintlcx 改成用户名\ndeploy:\n  type: git\n  repo: 刚刚github创库地址.git\n  branch: master\n```\n`注意`\n* 配置文件的冒号“:”后面有一个空格\n* repo: 刚刚github创库地址.git\n\n### hexo命令行使用\n\n常用命令：\n\n```js\nhexo help #查看帮助\nhexo init #初始化一个目录\nhexo new \"postName\" #新建文章\nhexo new page \"pageName\" #新建页面\nhexo generate #生成网页，可以在 public 目录查看整个网站的文件\nhexo server #本地预览，'Ctrl+C'关闭\nhexo deploy #部署.deploy目录\nhexo clean #清除缓存，**强烈建议每次执行命令前先清理缓存，每次部署前先删除 .deploy 文件夹**\n```\n\n简写：\n\n```js\nhexo n == hexo new\nhexo g == hexo generate\nhexo s == hexo server\nhexo d == hexo deploy\n```\n\n### 编辑文章\n\n新建文章\n\n```js\nhexo new \"标题\"\n```\n在 _posts 目录下会生成文件标题.md\n```js\ntitle: Hello World\ndate: 2015-07-30 07:56:29 #发表日期，一般不改动\ncategories: hexo #文章文类\ntags: [hexo,github] #文章标签，多于一项时用这种格式\n---\n正文，使用Markdown语法书写\n```\n编辑完后保存，hexo server 预览\n\n## hexo部署\n\n执行下列指令即可完成部署。\n```js\nhexo generate\nhexo deploy\n```\n\n以下提示说明部署成功\n```js\n[info] Deploy done: git\n```\n点击 Github 上项目的 Settings，GitHub Pages，提示Your site is published at http://wuxiaolong.me (这是我买的域名)\n\n## 图床\n1.墙裂推荐七牛云储存,[注册地址](https://portal.qiniu.com/signup?code=3lk4saqepkdhu)。\n\n2.七牛云储存提供10G的免费空间,以及每月10G的流量.存放个人博客图片最好不过了\n\n3.七牛云储存还有各种图形处理功能、缩略图、视频存放速度也给力（非打广告）。\n\n具体使用见[使用七牛作为github博客的图床](http://wuxiaolong.github.io/blog/2014/10/30/qiniu-photo-bed.html)\n\n## 域名\n### 将独立域名与GitHub Pages的空间绑定\n方法一：在站点source目录下面，新建一个名为CNAME的文本文件，里面写入你要绑定的域名，比如wuxiaolong.me\n方法二：在Repository的根目录下面，新建一个名为CNAME的文本文件，里面写入你要绑定的域名，比如wuxiaolong.me\n\n### DNS设置\n用[DNSpod](https://www.dnspod.cn/)，快，免费，稳定。\n注册DNSpod，添加域名，如下图设置。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/build-blog-by-hexo-1.png)\n其中A的两条记录指向的ip地址是github Pages的提供的ip\n如何知道你的github上项目的IP，如下：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/build-blog-by-hexo-2.png)\n\n### 去Godaddy修改DNS地址\n更改godaddy的Nameservers为DNSpod的NameServers。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/build-blog-by-hexo-5.png)\n\n## 总结\n之前用的jekell写的，[手把手教你建github技术博客by jekyll](http://wuxiaolong.github.io/2014/10/26/build-blog/)，也是折腾了几天才做成自己满意的，昨天决定换成hexo，也是花了一天半时间，为了追求更好，必须折腾！\n\n## AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n## 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n## 附录\n* [hexo系列教程：（一）hexo介绍](http://zipperary.com/2013/05/28/hexo-guide-1/)\n* [使用Hexo搭建博客](http://blog.lmintlcx.com/post/blog-with-hexo.html)\n* [如何搭建一个独立博客——简明Github Pages与Hexo教程](http://blog.csdn.net/poem_of_sunshine/article/details/29369785)\n* [windows下搭建hexo博客并将其部署到GitCafe终极教程](http://www.jianshu.com/p/e858a90d0a17)\n* [GoDaddy优惠码](http://www.dute.me/)\n* [Godaddy购买域名及配置](http://blog.csdn.net/poem_of_sunshine/article/details/29369785)\n* [GitHub配置域名（Godaddy）](http://blog.csdn.net/yuguiyang1990/article/details/39523005)\n\n\n\n","source":"_posts/build-blog-by-hexo.md","raw":"title: 手把手教你建github技术博客by hexo\ndate: 2015-07-31 14:22:35\ntags: [github,hexo]\ncategory: hexo\n---\n## 适合人群\n\n* 喜欢写Blog的人\n* 有一定的编程基础\n* 爱折腾的人\n* 熟练使用版本控制Git\n* 了解使用Github\n* 熟悉基本的MarkDown语法\n\n<!-- more -->\n\n## 环境准备\n\n### 安装Git\n下载 [msysgit](http://msysgit.github.io/) 并执行即可完成安装。\n\n### 安装Node.js\n在 Windows 环境下安装 [Node.js](http://nodejs.org/) 非常简单，仅须下载安装文件并执行即可完成安装。\n\n### 安装hexo\n利用 npm 命令即可安装。（在任意位置点击鼠标右键，选择Git bash）\n```js\nnpm install -g hexo\n```\n`问题`\n* npm ERR! registry error parsing json 错误\n\n可能需要设置npm代理,执行命令\n```js \nnpm config set registry http://registry.cnpmjs.org\n```\n\n* hexo:command not found\n删除刚刚安装的npm目录，重新执行命令npm install -g hexo安装hexo，\n\n\n### 创建hexo文件夹\n安装完成后，在你喜爱的文件夹下（如H:\\hexo），执行以下指令(在H:\\hexo内点击鼠标右键，选择Git bash)，Hexo 即会自动在目标文件夹建立网站所需要的所有文件。\n```js\nhexo init\n```\n\n### 安装依赖包\n```js\nnpm install\n```\n\n### 本地查看\n\n现在我们已经搭建起本地的hexo博客了，执行以下命令(在H:\\hexo)，然后到浏览器输入localhost:4000看看。\n```js\nhexo generate\nhexo server\n```\n好了，至此，本地博客已经搭建起来了，只是本地哦，别人看不到的。下面，我们要部署到Github。\n\n`问题`\n* 执行hexo server提示找不到该指令 \n解决办法： \n在Hexo 3.0 后server被单独出来了，需要安装server，安装的命令如下：\n```js\nnpm install hexo -server --save \n```\n安装此server后再试，问题解决\n\n## github 创建博客\n\n* ### 注册账号\n地址：[https://github.com/](https://github.com/)  \n输入账号、邮箱、密码,然后点击注册按钮.\n![1](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-1.png)\n\n### 创建页面仓库\n这个仓库的名字需要和你的账号对应，格式: yourname.github.io\n输入基本信息，然后点击创建仓库.\n![2](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-2.png)\n![3](http://7q5c2h.com1.z0.glb.clouddn.com/2014-10-26-build-blog-3.png)\n`注意`\n命名规则：你的github账号.github.io，我这里被坑了，之前是jekell写的，现在换成hexo，所以我是另建创库了。\n\n### 生成SSH密钥\nssh-keygen -t rsa -C \"你的邮箱地址\"，按3个回车，密码为空。\n\n在C:\\Users\\Administrator\\.ssh下，得到两个文件id_rsa和id_rsa.pub。\n\n### 在GitHub上添加SSH密钥\n打开id_rsa.pub，复制全文。[https://github.com/settings/ssh](https://github.com/settings/ssh) ，Add SSH key，粘贴进去。\n\n## hexo使用\n\n### 目录结构\n\n.\n├── .deploy       #需要部署的文件\n├── node_modules  #Hexo插件\n├── public        #生成的静态网页文件\n├── scaffolds     #模板\n├── source        #博客正文和其他源文件，404、favicon、CNAME 都应该放在这里\n|   ├── _drafts   #草稿\n|   └── _posts    #文章\n├── themes        #主题\n├── _config.yml   #全局配置文件\n└── package.json\n\n### 全局配置 _config.yml\n\n```js\n# Hexo Configuration\n## Docs: http://hexo.io/docs/configuration.html\n## Source: https://github.com/hexojs/hexo/\n# Site #站点信息\ntitle:  #标题\nsubtitle:  #副标题\ndescription:  #站点描述，给搜索引擎看的\nauthor:  #作者\nemail:  #电子邮箱\nlanguage: zh-CN #语言\n# URL #链接格式\nurl:  #网址\nroot: / #根目录\npermalink: :year/:month/:day/:title/ #文章的链接格式\ntag_dir: tags #标签目录\narchive_dir: archives #存档目录\ncategory_dir: categories #分类目录\ncode_dir: downloads/code\npermalink_defaults:\n# Directory #目录\nsource_dir: source #源文件目录\npublic_dir: public #生成的网页文件目录\n# Writing #写作\nnew_post_name: :title.md #新文章标题\ndefault_layout: post #默认的模板，包括 post、page、photo、draft（文章、页面、照片、草稿）\ntitlecase: false #标题转换成大写\nexternal_link: true #在新选项卡中打开连接\nfilename_case: 0\nrender_drafts: false\npost_asset_folder: false\nrelative_link: false\nhighlight: #语法高亮\n  enable: true #是否启用\n  line_number: true #显示行号\n  tab_replace:\n# Category & Tag #分类和标签\ndefault_category: uncategorized #默认分类\ncategory_map:\ntag_map:\n# Archives\n2: 开启分页\n1: 禁用分页\n0: 全部禁用\narchive: 2\ncategory: 2\ntag: 2\n# Server #本地服务器\nport: 4000 #端口号\nserver_ip: localhost #IP 地址\nlogger: false\nlogger_format: dev\n# Date / Time format #日期时间格式\ndate_format: YYYY-MM-DD #参考http://momentjs.com/docs/#/displaying/format/\ntime_format: H:mm:ss\n# Pagination #分页\nper_page: 10 #每页文章数，设置成 0 禁用分页\npagination_dir: page\n# Disqus #Disqus评论，替换为多说\ndisqus_shortname:\n# Extensions #拓展插件\ntheme: landscape-plus #主题\nexclude_generator:\nplugins: #插件，例如生成 RSS 和站点地图的\n- hexo-generator-feed\n- hexo-generator-sitemap\n# Deployment #部署，将 lmintlcx 改成用户名\ndeploy:\n  type: git\n  repo: 刚刚github创库地址.git\n  branch: master\n```\n`注意`\n* 配置文件的冒号“:”后面有一个空格\n* repo: 刚刚github创库地址.git\n\n### hexo命令行使用\n\n常用命令：\n\n```js\nhexo help #查看帮助\nhexo init #初始化一个目录\nhexo new \"postName\" #新建文章\nhexo new page \"pageName\" #新建页面\nhexo generate #生成网页，可以在 public 目录查看整个网站的文件\nhexo server #本地预览，'Ctrl+C'关闭\nhexo deploy #部署.deploy目录\nhexo clean #清除缓存，**强烈建议每次执行命令前先清理缓存，每次部署前先删除 .deploy 文件夹**\n```\n\n简写：\n\n```js\nhexo n == hexo new\nhexo g == hexo generate\nhexo s == hexo server\nhexo d == hexo deploy\n```\n\n### 编辑文章\n\n新建文章\n\n```js\nhexo new \"标题\"\n```\n在 _posts 目录下会生成文件标题.md\n```js\ntitle: Hello World\ndate: 2015-07-30 07:56:29 #发表日期，一般不改动\ncategories: hexo #文章文类\ntags: [hexo,github] #文章标签，多于一项时用这种格式\n---\n正文，使用Markdown语法书写\n```\n编辑完后保存，hexo server 预览\n\n## hexo部署\n\n执行下列指令即可完成部署。\n```js\nhexo generate\nhexo deploy\n```\n\n以下提示说明部署成功\n```js\n[info] Deploy done: git\n```\n点击 Github 上项目的 Settings，GitHub Pages，提示Your site is published at http://wuxiaolong.me (这是我买的域名)\n\n## 图床\n1.墙裂推荐七牛云储存,[注册地址](https://portal.qiniu.com/signup?code=3lk4saqepkdhu)。\n\n2.七牛云储存提供10G的免费空间,以及每月10G的流量.存放个人博客图片最好不过了\n\n3.七牛云储存还有各种图形处理功能、缩略图、视频存放速度也给力（非打广告）。\n\n具体使用见[使用七牛作为github博客的图床](http://wuxiaolong.github.io/blog/2014/10/30/qiniu-photo-bed.html)\n\n## 域名\n### 将独立域名与GitHub Pages的空间绑定\n方法一：在站点source目录下面，新建一个名为CNAME的文本文件，里面写入你要绑定的域名，比如wuxiaolong.me\n方法二：在Repository的根目录下面，新建一个名为CNAME的文本文件，里面写入你要绑定的域名，比如wuxiaolong.me\n\n### DNS设置\n用[DNSpod](https://www.dnspod.cn/)，快，免费，稳定。\n注册DNSpod，添加域名，如下图设置。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/build-blog-by-hexo-1.png)\n其中A的两条记录指向的ip地址是github Pages的提供的ip\n如何知道你的github上项目的IP，如下：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/build-blog-by-hexo-2.png)\n\n### 去Godaddy修改DNS地址\n更改godaddy的Nameservers为DNSpod的NameServers。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/build-blog-by-hexo-5.png)\n\n## 总结\n之前用的jekell写的，[手把手教你建github技术博客by jekyll](http://wuxiaolong.github.io/2014/10/26/build-blog/)，也是折腾了几天才做成自己满意的，昨天决定换成hexo，也是花了一天半时间，为了追求更好，必须折腾！\n\n## AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n## 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n## 附录\n* [hexo系列教程：（一）hexo介绍](http://zipperary.com/2013/05/28/hexo-guide-1/)\n* [使用Hexo搭建博客](http://blog.lmintlcx.com/post/blog-with-hexo.html)\n* [如何搭建一个独立博客——简明Github Pages与Hexo教程](http://blog.csdn.net/poem_of_sunshine/article/details/29369785)\n* [windows下搭建hexo博客并将其部署到GitCafe终极教程](http://www.jianshu.com/p/e858a90d0a17)\n* [GoDaddy优惠码](http://www.dute.me/)\n* [Godaddy购买域名及配置](http://blog.csdn.net/poem_of_sunshine/article/details/29369785)\n* [GitHub配置域名（Godaddy）](http://blog.csdn.net/yuguiyang1990/article/details/39523005)\n\n\n\n","slug":"build-blog-by-hexo","published":1,"updated":"2016-03-30T06:31:24.516Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge1w0075o4pk9a5jpdg3"},{"title":"播恩堂","date":"2013-10-15T14:34:14.000Z","_content":"> 我的第二个独立完成的项目，已经很轻车熟路，没有第一个独立项目[购房车](http://wuxiaolong.me/2013/10/15/goufangche/)那么紧张了。\n\n# 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/boentang1.jpg)\n<!--more-->\n![](http://7q5c2h.com1.z0.glb.clouddn.com/boentang2.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/boentang3.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/boentang4.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/boentang5.jpg)\n\n# 应用介绍 \n传播农业智慧，提升生命品质。播恩堂具备养猪行业最新动态及全方位的综合支持服务，包括：农业新闻、价格行情、饲养技术、播恩营养、产品资讯、专家论坛等，具有真实性、专业性、技术性、互动性的资讯，并具有查询当地当日价格，行情趋势分析，专家论坛及在线问答，猪病大全等应用功能，不管你身在何处，拿出手机，轻松一点，便能实现您的需求！\n\n# 下载地址\n[安智市场](http://www.anzhi.com/soft_2014610.html)\n\n`温馨提示：`由于时间过久，某些机型未适配，或某些手机已经打不开此APP啦。\n","source":"_posts/boentang.md","raw":"title: 播恩堂\ndate: 2013-10-15 22:34:14\ntags: boentang\ncategory: App\n---\n> 我的第二个独立完成的项目，已经很轻车熟路，没有第一个独立项目[购房车](http://wuxiaolong.me/2013/10/15/goufangche/)那么紧张了。\n\n# 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/boentang1.jpg)\n<!--more-->\n![](http://7q5c2h.com1.z0.glb.clouddn.com/boentang2.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/boentang3.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/boentang4.jpg)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/boentang5.jpg)\n\n# 应用介绍 \n传播农业智慧，提升生命品质。播恩堂具备养猪行业最新动态及全方位的综合支持服务，包括：农业新闻、价格行情、饲养技术、播恩营养、产品资讯、专家论坛等，具有真实性、专业性、技术性、互动性的资讯，并具有查询当地当日价格，行情趋势分析，专家论坛及在线问答，猪病大全等应用功能，不管你身在何处，拿出手机，轻松一点，便能实现您的需求！\n\n# 下载地址\n[安智市场](http://www.anzhi.com/soft_2014610.html)\n\n`温馨提示：`由于时间过久，某些机型未适配，或某些手机已经打不开此APP啦。\n","slug":"boentang","published":1,"updated":"2016-03-17T00:44:06.353Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge1z0079o4pkzwcn4b6u"},{"title":"Android词汇","date":"2014-10-29T06:55:47.000Z","_content":">关于Android一些只言片语……\n\n## Activity生命周期\n* onCreate()\n* onStart()\n* onResume()\n* onPause()\n* onStop()\n* onDestroy()\n* onRestart()\n* onSaveInstanceState()\n通常来说，跳转到其他的activity或者是点击Home都会导致当前的activity执行onSaveInstanceState\n* onRestoreInstanceState()\n在 onStart() 方法之后执行. 系统仅仅会在存在需要恢复的状态信息时才会调用 onRestoreInstanceState() \n<!--more-->\n## Fragment\n为了执行fragment的增加或者移除操作，必须通过调用 getSupportFragmentManager()方法获取FragmentManager，\n然后调用 beginTransaction() 方法创建一个FragmentTransaction对象, \nFragmentTransaction提供了用来增加、移除、替换以及其它一些操作。\n\n## File\n* internal 内存\n* external SD card\n* Environment.getExternalStorageState()\n\n## \n* explicit 显式\n* implicit 隐式\n* startActivityForResult() \n\n## AsyncTask \n* doInBackground()\n* onPostExecute()\n\n## 网络操作\n* HttpURLConnection\n* Apache HttpClient\n* InputStream\n* Bitmap bitmap = BitmapFactory.decodeStream(inputStream);\n* InputStreamReader\n* ConnectivityManager \n* NetworkInfo \n* NetworkReceiver \n\n## 解析 XML 数据\n* XmlPullParser\n\n\n","source":"_posts/androidwords.md","raw":"title: Android词汇\ndate: 2014-10-29 14:55:47\ntags: Android\ncategory: Android\n---\n>关于Android一些只言片语……\n\n## Activity生命周期\n* onCreate()\n* onStart()\n* onResume()\n* onPause()\n* onStop()\n* onDestroy()\n* onRestart()\n* onSaveInstanceState()\n通常来说，跳转到其他的activity或者是点击Home都会导致当前的activity执行onSaveInstanceState\n* onRestoreInstanceState()\n在 onStart() 方法之后执行. 系统仅仅会在存在需要恢复的状态信息时才会调用 onRestoreInstanceState() \n<!--more-->\n## Fragment\n为了执行fragment的增加或者移除操作，必须通过调用 getSupportFragmentManager()方法获取FragmentManager，\n然后调用 beginTransaction() 方法创建一个FragmentTransaction对象, \nFragmentTransaction提供了用来增加、移除、替换以及其它一些操作。\n\n## File\n* internal 内存\n* external SD card\n* Environment.getExternalStorageState()\n\n## \n* explicit 显式\n* implicit 隐式\n* startActivityForResult() \n\n## AsyncTask \n* doInBackground()\n* onPostExecute()\n\n## 网络操作\n* HttpURLConnection\n* Apache HttpClient\n* InputStream\n* Bitmap bitmap = BitmapFactory.decodeStream(inputStream);\n* InputStreamReader\n* ConnectivityManager \n* NetworkInfo \n* NetworkReceiver \n\n## 解析 XML 数据\n* XmlPullParser\n\n\n","slug":"androidwords","published":1,"updated":"2016-03-17T00:44:06.353Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge21007do4pkf8f6sblo"},{"title":"【译】Android Studio、Android SDK在线更新","date":"2016-04-08T12:23:25.000Z","_content":"> 重点介绍网站http://www.androiddevtools.cn/，收集整理Android开发所需的Android SDK、开发中用到的工具、Android开发教程、Android设计规范，免费的设计素材等。感谢脉脉不得语，分享这么棒的AndroidTools！\n\n# 号外\n![](http://7q5c2h.com1.z0.glb.clouddn.com/as2.0.png)\n就在今天，Android Studio终于迎来了2.0正式版更新（此版本最重要的两个更新是：即时运行和 GPU Profiler。同时还有全新的 Android 开发套件，速度强行提升 50 倍），之前Android Studio Preview和Beta版本还存在很多bug，因此不建议更新。\n\n升级注意问题\n1、点击Check for Update不能出现上面的`增量升级`提示，多点击几次Check for Update\n2、升级完成，默认配置gradle1.5，进入后会报错，会有提示，做相应gradle同步\n<!--more-->\n# 前言\n> 原文地址:[http://android-mirror.bugly.qq.com:8080/include/usage.html](http://android-mirror.bugly.qq.com:8080/include/usage.html)\n\n`新手必知技能`：您去更新升级Android Studio时却提示 Connection failed. Please check your network connection and try again，shit，由于墙内，您也无法更新Android SDK，这里分享一篇教程帮您解决此烦恼，原文是英文，我适当做了翻译（本身我英文是渣渣，基本是意译）。\n\n# Android Studio在线更新\n\n1、打开Android Studio安装的bin目录，如'D:\\Android Studio\\bin' \n![](http://7q5c2h.com1.z0.glb.clouddn.com/asd1.png)\n\n2、用文本编辑器（Notepad++），64位，打开 'studio64.exe.vmoptions'，32位，则打开studio.exe.vmoptions' \n![](http://7q5c2h.com1.z0.glb.clouddn.com/asd2.png)\n\n3、在studio64.exe.vmoptions文件添加如下：\n-Djava.net.preferIPv4Stack=true\n-Didea.updates.url=http://android-mirror.bugly.qq.com:8080/AndroidStudio/patches/updates.xml\n-Didea.patches.url=http://android-mirror.bugly.qq.com:8080/AndroidStudio/patches/ \n\n4、点击检测升级Android Studio\n![](http://7q5c2h.com1.z0.glb.clouddn.com/asd3.png)\n\n点击 'Update and Restart'. \n![](http://7q5c2h.com1.z0.glb.clouddn.com/asd4.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/incremental.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/restart.png)\n\n笔者：到此，Android Studio更新版本完成。\n\n# Android SDK在线更新镜像服务器\n\n1、 打开 Android SDK Manager  \n![](http://7q5c2h.com1.z0.glb.clouddn.com/sdk_manager.png)\n2、配置用户自定义网站\n点击 \"User Defined Sites\"，新建，添加http://android-mirror.bugly.qq.com:8080/android/repository/addon.xml  \n![](http://7q5c2h.com1.z0.glb.clouddn.com/site.png)\n3、配置端口\n勾上 Force https://... sources to be fetched using http://... \n ![](http://7q5c2h.com1.z0.glb.clouddn.com/proxy.png)\n\n笔者：重新打开Android SDK Manager，发现居然能在线更新 \n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n","source":"_posts/androidSdkStudioUpdate.md","raw":"title: 【译】Android Studio、Android SDK在线更新\ndate: 2016-04-08 20:23:25\ntags: [SDK,Android Studio]\ncategory: Android\n---\n> 重点介绍网站http://www.androiddevtools.cn/，收集整理Android开发所需的Android SDK、开发中用到的工具、Android开发教程、Android设计规范，免费的设计素材等。感谢脉脉不得语，分享这么棒的AndroidTools！\n\n# 号外\n![](http://7q5c2h.com1.z0.glb.clouddn.com/as2.0.png)\n就在今天，Android Studio终于迎来了2.0正式版更新（此版本最重要的两个更新是：即时运行和 GPU Profiler。同时还有全新的 Android 开发套件，速度强行提升 50 倍），之前Android Studio Preview和Beta版本还存在很多bug，因此不建议更新。\n\n升级注意问题\n1、点击Check for Update不能出现上面的`增量升级`提示，多点击几次Check for Update\n2、升级完成，默认配置gradle1.5，进入后会报错，会有提示，做相应gradle同步\n<!--more-->\n# 前言\n> 原文地址:[http://android-mirror.bugly.qq.com:8080/include/usage.html](http://android-mirror.bugly.qq.com:8080/include/usage.html)\n\n`新手必知技能`：您去更新升级Android Studio时却提示 Connection failed. Please check your network connection and try again，shit，由于墙内，您也无法更新Android SDK，这里分享一篇教程帮您解决此烦恼，原文是英文，我适当做了翻译（本身我英文是渣渣，基本是意译）。\n\n# Android Studio在线更新\n\n1、打开Android Studio安装的bin目录，如'D:\\Android Studio\\bin' \n![](http://7q5c2h.com1.z0.glb.clouddn.com/asd1.png)\n\n2、用文本编辑器（Notepad++），64位，打开 'studio64.exe.vmoptions'，32位，则打开studio.exe.vmoptions' \n![](http://7q5c2h.com1.z0.glb.clouddn.com/asd2.png)\n\n3、在studio64.exe.vmoptions文件添加如下：\n-Djava.net.preferIPv4Stack=true\n-Didea.updates.url=http://android-mirror.bugly.qq.com:8080/AndroidStudio/patches/updates.xml\n-Didea.patches.url=http://android-mirror.bugly.qq.com:8080/AndroidStudio/patches/ \n\n4、点击检测升级Android Studio\n![](http://7q5c2h.com1.z0.glb.clouddn.com/asd3.png)\n\n点击 'Update and Restart'. \n![](http://7q5c2h.com1.z0.glb.clouddn.com/asd4.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/incremental.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/restart.png)\n\n笔者：到此，Android Studio更新版本完成。\n\n# Android SDK在线更新镜像服务器\n\n1、 打开 Android SDK Manager  \n![](http://7q5c2h.com1.z0.glb.clouddn.com/sdk_manager.png)\n2、配置用户自定义网站\n点击 \"User Defined Sites\"，新建，添加http://android-mirror.bugly.qq.com:8080/android/repository/addon.xml  \n![](http://7q5c2h.com1.z0.glb.clouddn.com/site.png)\n3、配置端口\n勾上 Force https://... sources to be fetched using http://... \n ![](http://7q5c2h.com1.z0.glb.clouddn.com/proxy.png)\n\n笔者：重新打开Android SDK Manager，发现居然能在线更新 \n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n","slug":"androidSdkStudioUpdate","published":1,"updated":"2016-04-12T03:23:12.339Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge23007go4pkt5x1m878"},{"title":"Android studio share项目到svn仓库","date":"2015-05-24T16:00:00.000Z","_content":"\n##import into SVN\n\n![](http://wuxiaolong.qiniudn.com/2015-05-25-android-studio-share-to-svn-1.png)\n\n##忽略文件\n\nAndroid Studio 中建议过滤的文件：<br>\n.idea 文件夹<br>\n.gradle 文件夹<br>\n所有的 build 文件夹<br>\n所有的 .iml 文件<br>\nlocal.properties 文件<br>\n\nAndroid studio已经自动生成了git的忽略文件，如图：\n<!-- more -->\n![](http://wuxiaolong.qiniudn.com/2015-05-25-android-studio-share-to-svn-4.png)\n\n但是SVN如下设置不知道为什么没有效果\n\n![](http://wuxiaolong.qiniudn.com/2015-05-25-android-studio-share-to-svn-3.png)\n\n目前有两种解决方案：\n\n1、通过TortoiseSVN设置\n\n![](http://wuxiaolong.qiniudn.com/2015-05-25-android-studio-share-to-svn-6.png)\n\n2、上传代码忽略以上提及的文件\n\n##update和commit\n\n![](http://wuxiaolong.qiniudn.com/2015-05-25-android-studio-share-to-svn-5.png)\n\n如果没有这两个按钮，通过下面的设置\n\n![](http://wuxiaolong.qiniudn.com/2015-05-25-android-studio-share-to-svn-2.png)\n\n附：\n\n[【AndroidStudio】关于SVN的相关配置简介](http://blog.csdn.net/zhouzme/article/details/22790395)\n\n[Android studio share项目到svn仓库](http://blog.csdn.net/hymking/article/details/45199077)\n\n\n\n","source":"_posts/android-studio-share-to-svn.md","raw":"title: Android studio share项目到svn仓库\ndate: 2015-05-25 \ncategories: [Android Studio]\ntags: [Android Studio]\n---\n\n##import into SVN\n\n![](http://wuxiaolong.qiniudn.com/2015-05-25-android-studio-share-to-svn-1.png)\n\n##忽略文件\n\nAndroid Studio 中建议过滤的文件：<br>\n.idea 文件夹<br>\n.gradle 文件夹<br>\n所有的 build 文件夹<br>\n所有的 .iml 文件<br>\nlocal.properties 文件<br>\n\nAndroid studio已经自动生成了git的忽略文件，如图：\n<!-- more -->\n![](http://wuxiaolong.qiniudn.com/2015-05-25-android-studio-share-to-svn-4.png)\n\n但是SVN如下设置不知道为什么没有效果\n\n![](http://wuxiaolong.qiniudn.com/2015-05-25-android-studio-share-to-svn-3.png)\n\n目前有两种解决方案：\n\n1、通过TortoiseSVN设置\n\n![](http://wuxiaolong.qiniudn.com/2015-05-25-android-studio-share-to-svn-6.png)\n\n2、上传代码忽略以上提及的文件\n\n##update和commit\n\n![](http://wuxiaolong.qiniudn.com/2015-05-25-android-studio-share-to-svn-5.png)\n\n如果没有这两个按钮，通过下面的设置\n\n![](http://wuxiaolong.qiniudn.com/2015-05-25-android-studio-share-to-svn-2.png)\n\n附：\n\n[【AndroidStudio】关于SVN的相关配置简介](http://blog.csdn.net/zhouzme/article/details/22790395)\n\n[Android studio share项目到svn仓库](http://blog.csdn.net/hymking/article/details/45199077)\n\n\n\n","slug":"android-studio-share-to-svn","published":1,"updated":"2016-03-17T00:44:06.353Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge25007lo4pkv45hfd9p"},{"title":"Android小知识库","date":"2015-08-10T06:32:49.000Z","_content":"> 这份是我工作以来，总结的小知识库，有些知识点现在看来太LOW了，把还觉得有用的分享出来！\n\n\n<!--more-->\n# The APK file does not exist on disk.Error while Installing APK\n解决方案：\n![](http://i.stack.imgur.com/2KSyU.png)\n\n\n# Android Studio获取SHA1\n1、全局配置jdk1.8.0_45\\bin（或cd进入bin目录）\n2、keytool -v -list -keystore 你的keystore路径\n3、输入秘钥库口令：如果没设置，这里就是空，直接回车就进去了。\n\n# Genymotion下载虚拟镜像Connection timeout\nAdd new device出现的问题：\n> Failed to deploy virtual device.\n> Unable to create virtual device.Connection timeout occurred.\n\n解决方案：\n1. 当选择Google Nexus 5 - 6.0.0 - API 23 - 1080x1920下载device失败后，到C:\\Users\\用户主目录\\AppData\\Local\\Genymobile\\Genymotion\\ova下看到genymotion_vbox86p_6.0_160114_090449.ova，大小却是0KB，在C:\\Users\\用户主目录\\AppData\\Local\\Genymobile\\genymotion.log，打开该文件，找到类似“http://files2.genymotion.com/dists/6.0.0/ova/genymotion_vbox86p_6.0_160114_090449.ova”路径，即您想要下载的镜像文件URL；\n2. 用迅雷去下载，下载完成后放到C:\\Users\\用户主目录\\AppData\\Local\\Genymobile\\Genymotion\\ova；\n3. 重新点击Google Nexus 5 - 6.0.0 - API 23 - 1080x1920去下载，验证安装后即会显示在设备列表中。\n\n# Android Studio 如何Debug\n单击F5(Step Over)，单行一个个方法执行\n单击F6(Step Into)，单行执行\n单击F7(Step Out)，不往下执行，回到上一行\n单击F8(Resume Program)，跳出当前断点\n\n# Android Studio设置默认的签名文件\n新浪微博SSO登录，微信分享这些都需要签名打包，才能看到效果，设置默认签名文件为自己的签名jks，这样就不需要打包了。\n在app目录下添加你的.jks，然后app的build.gradle文件中的增加以下内容：\n第一种：\n```java\nandroid {  \n    signingConfigs {  \n        debug {  \n            storeFile file(\"你的.jks\")\n            storePassword 'android'\n            keyAlias 'android'\n            keyPassword 'android'\n        }          \n    }  \t\n}\n```\n第二种：\n```java\nandroid {  \n    signingConfigs {  \n        release {  \n            storeFile file(\"你的.jks\")\n            storePassword 'android'\n            keyAlias 'android'\n            keyPassword 'android'\n        }          \n    }  \n\tbuildTypes {\n        debug {\n            signingConfig signingConfigs.release\n        }        \n    }\n}\n```\n这样编译出来的debug版本直接用的是你的正式签名\n\n# Fragment懒加载\n```java\n protected boolean isVisible;\n\n    @Override\n    public void setUserVisibleHint(boolean isVisibleToUser) {\n        super.setUserVisibleHint(isVisibleToUser);\n        if (getUserVisibleHint()) {\n            isVisible = true;\n            onVisible();\n        } else {\n            isVisible = false;\n            onInvisible();\n        }\n    }\n\n    protected void onVisible() {\n       lazyLoad();\n    }\n\t\n    protected void lazyLoad() {\n        if (!isVisible) {\n            return;\n        }\n        getData();\n    }\n\n    protected void onInvisible() {\n    }\n```\n# Android studio头注释和方法注释\nFile | Settings | Editor|File and Code Templates|Includes|File Header\n```java\n/**\n * Created by ${USER} on ${DATE}.\n */\n```\n输入我们想要设置的注释模板\n\n# adapter.getPositionForSelection()和getSectionForPosition()\ngetPositionForSection()根据分类列的索引号获得该序列的首个位置\ngetSectionForPosition()通过该项的位置，获得所在分类组的索引号\n\n# getResources().getColor(R.color.color_name) is deprecated和drawableTop\n```java\n textView.setTextColor(Color.parseColor(\"#FFFFFF\"));\n //或者\n ContextCompat.getColor(context, R.color.color_name)\n```\n\n# showPopupWindow\n```java\n    private void showPopupMenu(View v) {\n        final View bgView = View.inflate(DemoApplication.getContext(), R.layout.demo_popup_window_bg, null);\n        bgView.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                hidePopupWindow();\n            }\n        });\n        if (mPopupBackground == null) {\n            mPopupBackground = new PopupWindow(bgView, ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);\n        }\n        mPopupBackground.showAtLocation(v, Gravity.BOTTOM, 0, 0);\n    }\n```\nv：父布局\ndemo_popup_window_bg.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/aliwx_common_alpha_black\">\n\n</LinearLayout>\n\n```\n\n# onFinishInflate()\nview的onFinishInflate()何时调用的？\n当View中所有的子控件均被映射成xml后触发；\nMyView mv = (MyView)View.inflate (context,R.layout.my_view,null);\n当加载完成xml后，就会执行那个方法；\n我们一般使用View的流程是在onCreate中使用setContentView来设置要显示Layout文件或直接创建一个View，在当设置了ContentView之后系统会对这个View进行解析，然后回调当前视图View中的onFinishInflate方法。只有解析了这个View我们才能在这个View容器中获取到拥有Id的组件，同样因为系统解析完View之后才会调用onFinishInflate方法，所以我们自定义组件时可以onFinishInflate方法中获取指定子View的引用。\n\n# Fragment设置隐藏或显示某个Fragment\nMainFragment点击\n```java\npublic void onItemClick(AdapterView<?> adapterView, View view,\n                            int position, long id) {\n       \n        ((MainActivity) getActivity()).showImageFragment(true, mData.get(position).get(\"title\").toString(), mData.get(position).get(\"imgUrl\").toString());\n        \n    }\n```\nMainActivity\n```java\npublic void showImageFragment(boolean show, String imgTxt, String imgUrl) {\n        // showActionbarWithTabs(!show);\n        if (show) {\n            getSupportFragmentManager().beginTransaction()\n                    .show(imageDetailFragment).commit();\n            imageDetailFragment.setImgData(imgTxt, imgUrl);\n        } else {\n            getSupportFragmentManager().beginTransaction()\n                    .hide(imageDetailFragment).commit();\n        }\n\n    }\n```\n\n# 获取arrt的值\n不同主题下需要把颜色，数值写成attr属性\nxml里，我们可以简单的引用attr属性值\n```js\nandroid:background=\"?attr/colorPrimary\"\n```\n\n代码获取\n```java\nTypedValue typedValue = new TypedValue();\nmContext.getTheme().resolveAttribute(R.attr.colorPrimary, typedValue, true);\nint colorPrimary = typedValue.data;//value.data里面存储着的就是获取到的colorPrimary的值\n```\n\n# 拨号盘拨打电话\n```java\nIntent intent = new Intent(Intent.ACTION_CALL,\nUri.parse(\"tel:\" + \"400-036-1977\"));\n// intent.setAction(Intent.ACTION_CALL);// 直接拨号\nintent.setAction(Intent.ACTION_DIAL);// 拨号盘\nstartActivity(intent);\n```\n\n# Drawable /Bitmap、String/InputStream、Bitmap/byte[]互转\n[http://wuxiaolong.me/2015/08/10/Drawable-to-Bitmap/](http://wuxiaolong.me/2015/08/10/Drawable-to-Bitmap/)\n\n# ProgressDialog\n```java\nfinal ProgressDialog progress = new ProgressDialog(LoginActivity.this);\n\t\tprogress.setMessage(\"请稍等...\");\n\t\tprogress.setCanceledOnTouchOutside(false);\n\t\tprogress.show();\nprogress.dismiss();\n```\n\n# 毫秒\n毫秒Calendar.getInstance().getTimeInMillis()和System.currentTimeMillis()\n\n# Fragment  setUserVisibleHint(boolean isVisibleToUser)\n```java\n @Override\n    public void setUserVisibleHint(boolean isVisibleToUser) {\n        super.setUserVisibleHint(isVisibleToUser);\n        if (isVisibleToUser) {\n            //相当于Fragment的onResume\n        } else {\n            //相当于Fragment的onPause\n        }\n    }\n```\n\n# Fragment  onActivityResult\n```java\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\n\t\tsuper.onActivityResult(requestCode, resultCode, data);\n\t\tgetActivity();\n\t\tif (resultCode == Activity.RESULT_OK\n\t\t\t\t&& requestCode == AppUtils.REQUEST_CODE_ISLOGIN) {\n\t\t\t// 检查是否完善资料\n\n\t\t\tif (AppUtils.getSharedPreferences(getActivity()).getBoolean(\n\t\t\t\t\t\"hasPersonalData\", false)) {\n\t\t\t\t// 取本地存取是否完善资料,完善直接提示咨询对话框\n\t\t\t\tconsultationDialog();\n\t\t\t} else {\n\t\t\t\tgetCheckPersonalData();\n\t\t\t}\n\n\t\t}\n\t} \n\nstartActivityForResult(intent,\n\t\t\t\t\t\t\tAppConfig.REQUEST_CODE_DIALOGUE);// 不是调用 getActivity().startActivityForResult()。\n```\n\t\t\t\t\t\t\t\n# dimen代码取值\ngetDimension方法获取到资源文件中定义的dimension值。\n```js\nResources res = getResources();\nfloat fontSize = res.getDimension(R.dimen.font_size);\n```\n\n\n# 数组初始化赋值\n1、创建数组后，通过循环对数组赋值。\n例如代码：\nint [] nums = new int [100];\nfor(int i=0;i<10;i++){\nnums[i] = i;\n}\n2、例如代码：\nint [] nums = {0,1,2,3,4,5,6,7,8,9};\n3、int [] nums = new int[]{0,1,2,3,4,5,6,7,8,9};\n\n4、数组增加元素\n//增加ruby\nList list = new ArrayList();\nfor (int i=0; i\nlist.add(str[i]);\n}\nlist.add(2, \"ruby\"); //list.add(\"ruby\")\nSystem.out.println();\nString[] newStr = list.toArray(new String[1]); //返回一个包含所有对象的指定类型的数组\n\n# Fragment.isAdded()\n```java\nFragment mBeforeFragment = new Fragment();\npublic void switchFragment(Fragment currentFragment) {\nif (currentFragment.isAdded()) {\ngetSupportFragmentManager().beginTransaction().hide(mBeforeFragment).show(currentFragment).commit();\n} else {\ngetSupportFragmentManager().beginTransaction().hide(mBeforeFragment).add(R.id.container, currentFragment).commit();\n}\nmBeforeFragment = currentFragment;\n}\n```\n调用：\n```java\nswitchFragment(HomeFragment.newInstance()); \n```\nHomeFragment\n```java\npublic static HomeFragment homeFragment = null;\n\npublic static HomeFragment newInstance() {\nif (homeFragment == null) {\nhomeFragment = new HomeFragment();\n}\nreturn homeFragment;\n} \n```\n\n# android之inputType属性\n```js\n<EditText android:layout_width=\"fill_parent\" \nandroid:layout_height=\"wrap_content\" \nandroid:inputType=\"phone\" />\n//文本类型，多为大写、小写和数字符号。\n    android:inputType=\"none\"\n    android:inputType=\"text\"\n    android:inputType=\"textCapCharacters\" 字母大写\n    android:inputType=\"textCapWords\" 首字母大写\n    android:inputType=\"textCapSentences\" 仅第一个字母大写\n    android:inputType=\"textAutoCorrect\" 自动完成\n    android:inputType=\"textAutoComplete\" 自动完成\n    android:inputType=\"textMultiLine\" 多行输入\n    android:inputType=\"textImeMultiLine\" 输入法多行（如果支持）\n    android:inputType=\"textNoSuggestions\" 不提示\n    android:inputType=\"textUri\" 网址\n    android:inputType=\"textEmailAddress\" 电子邮件地址\n    android:inputType=\"textEmailSubject\" 邮件主题\n    android:inputType=\"textShortMessage\" 短讯\n    android:inputType=\"textLongMessage\" 长信息\n    android:inputType=\"textPersonName\" 人名\n    android:inputType=\"textPostalAddress\" 地址\n    android:inputType=\"textPassword\" 密码\n    android:inputType=\"textVisiblePassword\" 可见密码\n    android:inputType=\"textWebEditText\" 作为网页表单的文本\n    android:inputType=\"textFilter\" 文本筛选过滤\n    android:inputType=\"textPhonetic\" 拼音输入\n//数值类型\n    android:inputType=\"number\" 数字\n    android:inputType=\"numberSigned\" 带符号数字格式\n    android:inputType=\"numberDecimal\" 带小数点的浮点格式\n    android:inputType=\"phone\" 拨号键盘\n    android:inputType=\"datetime\" 时间日期\n    android:inputType=\"date\" 日期键盘\nandroid:inputType=\"time\" 时间键盘\n```\n\n# ImageView.ScaleType\n（1）ImageView.ScaleType.center:图片位于视图中间，但不执行缩放。\n（2）ImageView.ScaleType.CENTER_CROP 按统一比例缩放图片（保持图片的尺寸比例）便于图片的两维（宽度和高度）等于或者大于相应的视图的维度\n（3）ImageView.ScaleType.CENTER_INSIDE按统一比例缩放图片（保持图片的尺寸比例）便于图片的两维（宽度和高度）等于或者小于相应的视图的维度\n（4）ImageView.ScaleType.FIT_CENTER缩放图片使用center\n（5）ImageView.ScaleType.FIT_END缩放图片使用END\n（6）ImageView.ScaleType.FIT_START缩放图片使用START\n（7）ImageView.ScaleType.FIT_XY缩放图片使用XY\n（8）ImageView.ScaleType.MATRIX当绘制时使用图片矩阵缩放\n\n\n# 调用系统发送短信界面\n```java\n/**\n* 发送短信\n* @param smsBody\n*/\nprivate void sendSMS(String smsBody)\n{\n//Uri smsToUri = Uri.parse(\"smsto:10000\"); //如果想指定发送人\nUri smsToUri = Uri.parse(\"smsto:\");\nIntent intent = new Intent(Intent.ACTION_SENDTO, smsToUri);\nintent.putExtra(\"sms_body\", smsBody);\nstartActivity(intent);\n}\n```\n\n# 跳转市场搜索某款软件\n```java\nIntent intent = new Intent(\n\t\t\t\t\"android.intent.action.VIEW\");\n\t\tintent.setData(Uri\n\t\t\t\t.parse(\"market://details?id=com.adobe.flashplayer\"));\n\t\tstartActivity(intent);\n```\n\n# 检测系统中是否安装某款软件\n```java\n//检测系统中是否已经安装了adobe flash player插件，插件的packageName是com.adobe.flashplayer：\nprivate boolean check() {\n\t\tPackageManager pm = getPackageManager();\n\t\tList<PackageInfo> infoList = pm\n\t\t\t\t.getInstalledPackages(PackageManager.GET_SERVICES);\n\t\tfor (PackageInfo info : infoList) {\n\t\t\tif (\"com.adobe.flashplayer\".equals(info.packageName)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n}\n\nprivate void isAvilible(String packageName) {\n\n\t\tPackageInfo packageInfo;\n\t\ttry {\n\t\t\tpackageInfo = this.getPackageManager().getPackageInfo(packageName,\n\t\t\t\t\t0);\n\n\t\t} catch (NameNotFoundException e) {\n\t\t\tpackageInfo = null;\n\t\t\te.printStackTrace();\n\t\t}\n\t\tif (packageInfo != null) {\n//1、通过包名\n\t\t\tIntent intent = new Intent();\n\t\t\tintent = getPackageManager().getLaunchIntentForPackage(packageName);\n\t\t\tstartActivity(intent);\n//2、通过类名： \nIntent intent=new Intent();  \nintent.setComponent(new ComponentName(packageName, \"com.joe.internet.Main\"));  \nstartActivity(intent);  \n\t\t} \n\n\t}\n```\n\n# 对话框菜单\n```java\nnew AlertDialog.Builder(this)\n\t\t\t\t\t\t.setTitle(\"choice\")\n\t\t\t\t\t\t.setItems(new String[] { \"选择1\", \"选择2\", \"选择3\", \"选择4\" },\n\t\t\t\t\t\t\t\tnew DialogInterface.OnClickListener() {\n\n\t\t\t\t\t\t\t\t\t@Override\n\t\t\t\t\t\t\t\t\tpublic void onClick(DialogInterface dialog,\n\t\t\t\t\t\t\t\t\t\t\tint which) {\n\t\t\t\t\t\t\t\t\t\tToast.makeText(MyContentActivity.this,\n\t\t\t\t\t\t\t\t\t\t\t\twhich + \"\", Toast.LENGTH_SHORT)\n\t\t\t\t\t\t\t\t\t\t\t\t.show();\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}).show();\n```\n\n# 定义ProgressBar \n```js\n<ProgressBar\n        android:id=\"@+id/mProgress\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"          android:indeterminateDrawable=\"@drawable/progress_rotate\" />\n```\nprogress_rotate：\n```js\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\" >\n    <item>\n        <rotate\n            android:drawable=\"@drawable/progressbar\"\n            android:duration=\"300\"\n            android:fromDegrees=\"0.0\"\n            android:pivotX=\"50.0%\"\n            android:pivotY=\"50.0%\"\n            android:toDegrees=\"360.0\" />\n    </item>\n</layer-list>\n```\n\n# 幻灯片效果\nxml\n```js\n<ProgressBar\n        android:id=\"@+id/ProgressBar01\"\n        style=\"@style/animStyle\"\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"fill_parent\"\n        android:layout_centerInParent=\"true\" />\n```\nstyle\n```js\n<style name=\"animStyle\" parent=\"@android:style/Widget.ProgressBar.Large\">\n        <item name=\"android:indeterminateDrawable\">@anim/test</item>\n</style>\n```\nanim\n```js\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<animation-list xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:oneshot=\"false\" >\n\n    <item\n        android:drawable=\"@drawable/t1\"\n        android:duration=\"500\"/>\n    <item\n        android:drawable=\"@drawable/t2\"\n        android:duration=\"500\"/>\n    <item\n        android:drawable=\"@drawable/t3\"\n        android:duration=\"500\"/>\n    <item\n        android:drawable=\"@drawable/t4\"\n        android:duration=\"500\"/>\n    <item\n        android:drawable=\"@drawable/t5\"\n        android:duration=\"500\"/>\n\n</animation-list>\n```\n\n# MD5加密\n```java\npublic String Md5(String plainText) {\n\t\tString result = \"\";\n\t\ttry {\n\t\t\tMessageDigest md = MessageDigest.getInstance(\"MD5\");\n\t\t\tmd.update(plainText.getBytes());\n\t\t\tbyte b[] = md.digest();\n\n\t\t\tint i;\n\n\t\t\tStringBuffer buf = new StringBuffer(\"\");\n\t\t\tfor (int offset = 0; offset < b.length; offset++) {\n\t\t\t\ti = b[offset];\n\t\t\t\tif (i < 0)\n\t\t\t\t\ti += 256;\n\t\t\t\tif (i < 16)\n\t\t\t\t\tbuf.append(\"0\");\n\t\t\t\tbuf.append(Integer.toHexString(i));\n\t\t\t}\n\t\t\tresult = buf.toString().toUpperCase();// 32位的加密（转成大写）\n\n\t\t\tbuf.toString().substring(8, 24);// 16位的加密\n\n\t\t} catch (NoSuchAlgorithmException e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t\treturn result;\n\t}\n```\n\n# 设置自动跳转页面\n## Timer\n```java\nTimer timer = new Timer();\n\t\ttimer.schedule(new TimerTask() {\n\t\t\t@Override\n\t\t\tpublic void run() {\n\t\t\t\t// TODO Auto-generated method stub\n\t\t\t\tIntent goIntent = new Intent();\n\t\t\t\tgoIntent.setClass(LauncherActivity.this, DemoActivity.class);\n\t\t\t\tstartActivity(goIntent);\n\t\t\t}\n\t\t}, 3 * 1000);\n\t}\n```\n\n## Handler\n```java\nnew Handler().postDelayed(new Runnable() {\n\t\t\t@Override\n\t\t\tpublic void run() {\n\t\t\t\tstartActivity(new Intent(SplashScreen.this,\n\t\t\t\t\t\tDomobSampleActivity.class));\n\t\t\t\tfinish();\n\t\t\t}\n\t\t}, 1000);\n```\n\n# 随机取数\n```java\nList<Integer> list = new ArrayList<Integer>();\n\t\tfor (int i = 0; i < 10; i++) {\n\t\t\tlist.add(i);\n\t\t}\n\t\tCollections.shuffle(list);\n\t\tfor (int v : list) {\n\t\t\tLog.d(\"wxl\", \"V===\" + v);\n\t\t}\n```\n或：\n```java\nRandom random = new Random();\nint ran = random.nextInt(keywordsList.size());\n\t\t\tString tmp = keywordsList.get(ran).get(\"keyword\").toString();\n```\n\n# selector下的属性值\n\nandroid:state_pressed\n如果是true，当被点击时显示该图片，如果是false没被按下时显示默认。\nandroid:state_focused\ntrue，获得焦点时显示；false，没获得焦点显示默认。\nandroid:state_selected\ntrue，当被选择时显示该图片；false，当未被选择时显示该图片。\nandroid:state_checkable\ntrue，当\t能使用时显示该图片；false，当CheckBox不能使用时显示该图片。\nandroid:state_checked\ntrue，当CheckBox选中时显示该图片；false，当CheckBox为选中时显示该图片。\nandroid:state_enabled\ntrue，当该组件能使用时显示该图片；false，当该组件不能使用时显示该图片。\nandroid:state_window_focused\ntrue，当此activity获得焦点在最前面时显示该图片；false，当没在最前面时显示该图片。\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<selector xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <item android:state_pressed=\"true\"\n          android:drawable=\"@drawable/button_pressed\"/><!-- pressed -->\n    <item android:state_focused=\"true\"\n          android:drawable=\"@drawable/button_focused\"/><!-- focused -->\n    <item android:drawable=\"@drawable/button_normal\"/><!-- default -->\n</selector>\n```\n\n# 带下划线的EditText\n```java\npublic class LinedEditText extends EditText {\n\tprivate Paint linePaint;\n\tprivate float margin;\n\tprivate int paperColor;\n\n\tpublic LinedEditText(Context paramContext, AttributeSet paramAttributeSet) {\n\t\tsuper(paramContext, paramAttributeSet);\n\t\tthis.linePaint = new Paint();\n\t}\n\t@Override\n\tprotected void onDraw(Canvas paramCanvas) {\n\t\tparamCanvas.drawColor(this.paperColor);\n\t\tint i = getLineCount();// 得到总的行數\n\t\tint j = getHeight();// 获得TextView的高度\n\t\tint k = getLineHeight();// 获得TextView的行高\n\t\tint m = j / k + 1;// 总的线数\n\t\tif (i < m)\n\t\t\ti = m;\n\t\tint n = getCompoundPaddingTop();\n\t\tLog.d(\"wxl\", \"n----\" + n);\n\t\tparamCanvas.drawLine(0.0F, n, getRight(), n, this.linePaint);\n\t\tfor (int i2 = 0;; i2++) {\n\t\t\tif (i2 >= i) {\n\t\t\t\tsetPadding(10 + (int) this.margin, 0, 0, 0);\n\t\t\t\tsuper.onDraw(paramCanvas);\n\t\t\t\tparamCanvas.restore();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tn += k;\n\t\t\tparamCanvas.drawLine(0.0F, n, getRight(), n, this.linePaint);\n\t\t\tparamCanvas.save();\n\t\t}\n\t}\n}\n```\n主要工作就是重载onDraw方法，利用从TextView继承下来的getLineCount函数获取文本所占的行数，以及getLineBounds来获取特定行的基准高度值，而且这个函数第二个参数会返回此行的“外包装”值。再利用这些值绘制这一行的线条。为了让界面的View使用自定义的EditText类，必须在配置文件中进行设置\n\n\n\n# 关闭键盘\n```java\npublic static void hideSoftInput(Activity activity) {\n        if (activity.getCurrentFocus() != null)\n            ((InputMethodManager) activity\n                    .getSystemService(Context.INPUT_METHOD_SERVICE))\n                    .hideSoftInputFromWindow(activity.getCurrentFocus()\n                            .getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);\n    }\n```\n\n# 界面不被弹出的键盘盖住\n一进入activity就弹出键盘\n```js\nandroid:windowSoftInputMode=\"adjustResize\" \nandroid:windowSoftInputMode=\"adjustPan|stateAlwaysVisible\"\n```\n第一个软键盘和输入框会完全分离，而第二个输入框还是会被软键盘盖住一点点\n而且第二个要把两个属性叠加起来，为什么要叠加起来呢，因为如果只用adjustPan 的话需要点击输入框才会弹出软键盘\n\n在 AndroidMainfest.xml中选择哪个activity，设置windowSoftInputMode属性为 \n```js\nadjustUnspecified|stateHidden\nandroid:windowSoftInputMode=\"adjustUnspecified|stateHidden\"\n```\nwindowSoftInputMode各值的含义：\n\nstateUnspecified：软键盘的状态并没有指定，系统将选择一个合适的状态或依赖于主题的设置\n\nstateUnchanged：当这个activity出现时，软键盘将一直保持在上一个activity里的状态，无论是隐藏还是显示\n\nstateHidden：用户选择activity时，软键盘总是被隐藏\n\nstateAlwaysHidden：当该Activity主窗口获取焦点时，软键盘也总是被隐藏的\n\nstateVisible：软键盘通常是可见的\n\nstateAlwaysVisible：用户选择activity时，软键盘总是显示的状态\n\nadjustUnspecified：默认设置，通常由系统自行决定是隐藏还是显示\n\nadjustResize：该Activity总是调整屏幕的大小以便留出软键盘的空间\n\nadjustPan：当前窗口的内容将自动移动以便当前焦点从不被键盘覆盖和用户能总是看到输入内容的部分\n\n# 控件美化Shape\n[http://wuxiaolong.me/2013/07/09/shape/](http://wuxiaolong.me/2013/07/09/shape/)\n\n# 获取版本名称 VersionName\n```java\npublic String getVersionName(Context context) {\n\t\tPackageManager manager = context.getPackageManager();\n\t\tString packageName = context.getPackageName();\n\t\ttry {\n\t\t\tPackageInfo info = manager.getPackageInfo(packageName, 0);\n\t\t\treturn info.versionName;\n\t\t} catch (NameNotFoundException e) {\n\t\t\treturn \"1.0\";\n\t\t}\n\t}\n```\n\n# 获取Android手机设备的IMSI / IMEI 信息\n```java\nTelephonyManager mTelephonyMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);\nString imsi = mTelephonyMgr.getSubscriberId(); \nString imei = mTelephonyMgr.getDeviceId(); \nLog.i(\"wxl\", \"imsi=\"+imsi);为null\nLog.i(\"wxl\", \"imei=\"+imei); \n另外不要忘了在AndroidManifest.xml中加上读取手机状态的权限\n<uses-permission android:name=\"android.permission.READ_PHONE_STATE\"/>\n```\n\n# 自定义Log是否显示\n```java\n public class Log {\n        private static final String TAG = \"wxl\";\n        private static final boolean LOG = true;\n        public static void i(String msg) {\n            if (LOG)\n                android.util.Log.i(TAG , msg);\n        }\n        public static void d(String msg) {\n            if (LOG)\n                android.util.Log.d(TAG , msg);\n        }\n        public static void w(String msg) {\n            if (LOG)\n                android.util.Log.w(TAG , msg);\n        }\n        public static void w(String msg, Throwable throwable) {\n            if (LOG)\n                android.util.Log.w(TAG , msg, throwable);\n        }\n        public static void v(String msg) {\n            if (LOG)\n                android.util.Log.v(TAG , msg);\n        }\n        public static void e(String msg) {\n            android.util.Log.e(TAG , msg);\n        }\n        public static void e(String msg, Throwable throwable) {\n            android.util.Log.e(TAG , msg, throwable);\n        }\n    }\n```\n\n# 异步操作AsyncTask \n```java\n参数1：向后台任务的执行方法传递参数的类型 ； \n参数2：在后台任务执行过程中，要求主UI线程处理中间状态，通常是一些UI处理中传递的参数类型；\n参数3：后台任务执行完返回时的参数类型。\n private class MyAsyncTask extends AsyncTask<Integer, String, Void> {\n\n\t\t// 实现抽象方法doInBackground()，代码将在后台线程中执行，由execute()触发\n\t\tprotected Void doInBackground(Integer... params) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// 任务启动，可以在这里显示一个对话框，这里简单处理\n\t\tprotected void onPreExecute() {\n\t\t\tsuper.onPreExecute();\n\t\t}\n\n\t\t// 取消\n\t\tprotected void onCancelled() {\n\t\t\tsuper.onCancelled();\n\t\t}\n\n\t\t// 定义后台进程执行完后的处理\n\t\tprotected void onPostExecute(Void result) {\n\t\t\tsuper.onPostExecute(result);\n\t\t\tToast.makeText(MainActivity.this, \"OK\", Toast.LENGTH_SHORT).show();\n\t\t}\n\n\t\t// 更新进度,在UI主线程执行的内容，将item加入list中。方法中的参数为范式方式，实质为数组，由于我们只传递了item一个String，要获取，为values[0]\n\t\tprotected void onProgressUpdate(String... values) {\n\t\t\tsuper.onProgressUpdate(values);\n\t\t}\n\n\t}\n```\n调用：\n```java\nnew MyAsyncTask().execute(参数1);// 创建后台任务的对象\n```\n\n# 检查网络状态\n```java\npublic boolean checkNetworkInfo() {\n\t\tConnectivityManager conMan = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n\t\t// mobile 3G Data Network\n\t\tState mobile = conMan.getNetworkInfo(ConnectivityManager.TYPE_MOBILE)\n\t\t\t\t.getState();\n\t\t// wifi\n\t\tState wifi = conMan.getNetworkInfo(ConnectivityManager.TYPE_WIFI)\n\t\t\t\t.getState();\n\t\t// 如果3G网络和wifi网络都未连接，且不是处于正在连接状态 则进入Network Setting界面 由用户配置网络连接\n\t\tif (mobile == State.CONNECTED || mobile == State.CONNECTING)\n\t\t\treturn true;\n\t\tif (wifi == State.CONNECTED || wifi == State.CONNECTING)\n\t\t\treturn true;\n\t\tAlertDialog.Builder builder = new AlertDialog.Builder(this);\n\t\tbuilder.setMessage(getResources().getString(R.string.no_network))\n\t\t\t\t.setCancelable(false)\n\t\t\t\t.setPositiveButton(\n\t\t\t\t\t\tgetResources().getString(R.string.configuration),\n\t\t\t\t\t\tnew DialogInterface.OnClickListener() {\n\t\t\t\t\t\t\tpublic void onClick(DialogInterface dialog, int id) {\n\n\t\t\t\t\t\t\t\t// 进入无线网络配置界面\n\t\t\t\t\t\t\t\tstartActivity(new Intent(\n\t\t\t\t\t\t\t\t\t\tSettings.ACTION_WIRELESS_SETTINGS));\n\t\t\t\t\t\t\t\tMainActivity.this.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t.setNegativeButton(getResources().getString(R.string.quit),\n\t\t\t\t\t\tnew DialogInterface.OnClickListener() {\n\t\t\t\t\t\t\tpublic void onClick(DialogInterface dialog, int id) {\n\t\t\t\t\t\t\t\tMainActivity.this.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\tbuilder.show();\n\t\treturn false;\n\t}\n```\n代码判断调用：\n```java\n// 检查网络状态\n\t\tif (!checkNetworkInfo()) {\n\t\t\treturn;\n\t\t}\n```\n\n# Html.fromHtml（）\n让数据接受网页的格式\n```java\nURLEncoder.encode(String s); 网址请求中文解析\n&#8230;代表省略号\n```\n# URLEncoder.encode\n网址请求带中文\n```java\nURLEncoder.encode(content, \"utf-8\")\n```\n\n# Android中字体加粗\n* 在xml文件中使用\n```js\nandroid:textStyle=”bold”\n```\n* Java 代码\n\n（网上查XML不能将中文设置成粗体，只能通过Java code。Android 2.2 可以通过XML将中文设置成粗体）\n\n```java\n  TextView tv = (TextView)findViewById(R.id.TextView01); \n  TextPaint tp = tv.getPaint();\n  tp.setFakeBoldText(true);\n```\n* Html.fromHtml(\"\\<\\b>\")\n\n```java\n(1)viewHolder.title.setText(Html.fromHtml(\"<b>\"\n\t\t\t\t+ listTitle.get(position).get(\"title\") + \"</b>\"));\n(2)TextView.setText(Html.fromHtml(\"<font color=#FF0000>hello</font>\"));\n```\n\n# 代码设置背景图setImageResource/setBackgroundResource\n```java\ntextView.setBackgroundResource(R.drawable.bg_menu_1);设置背景图片\ntextView.setBackgroundColor(0xffffffff);\nsetImageResource與xml中的src的屬性才是相匹配的，而setBackgroundResource是與xml中的background屬性相匹配\n的\nholder.chat_sound_iv_right.setBackgroundResource(0);//没有图片\n```\n\n# android中的ellipsize\n```java\n用法如下：\n在xml中\nandroid:ellipsize = \"end\"　　  省略号在结尾\nandroid:ellipsize = \"start\" 　　省略号在开头\nandroid:ellipsize = \"middle\"     省略号在中间\nandroid:ellipsize = \"marquee\"  跑马灯\n最好加一个约束android:singleline = \"true\"\n跑马灯\nandroid:singleLine=\"true\"\nandroid:ellipsize=\"marquee\"\nandroid:focusableInTouchMode=\"true\"\nandroid:focusable=\"true\"\nandroid:marqueeRepeatLimit=\"marquee_forever\"\nandroid:singleLine=true 表示使用单行文字，多行文字也就无所谓使用Marquee效果了。\nandroid:marqueeRepeatLimit，设置走马灯滚动的次数。\nandroid:ellipsize，设置了文字过长时如何切断文字，可以有none, start,middle, end, 如果使用走马灯效果则设为marquee.\nandroid:focusable，Android的缺省行为是在控件获得Focus时才会显示走马灯效果\n```\n\n# 控件点击效果\n```js\n<selector xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <item android:state_focused=\"true\" android:state_pressed=\"false\" android:drawable=\"@drawable/professional_1\"/>\n    <item android:state_focused=\"false\" android:state_pressed=\"true\" android:drawable=\"@drawable/professional_1\"/>\n    <item android:drawable=\"@drawable/professional\"/>\n</selector>\n```\n\n# 保留小数点\n方法一：\n```java\nprivate DecimalFormat df;\ndf = new DecimalFormat(\"0.0\");\nfloat data;\ndf.format(data);//返回值\n```\n方法二：\n```java\ndouble juli = 1569;\nString result = String.format(\"%.1f\", juli/1000);\n```\n\n# RadioGroup\n```js\n<RadioGroup\n      android:layout_width=\"wrap_content\"\n      android:layout_height=\"wrap_content\"\n      android:orientation=\"vertical\" >\n\n       <RadioButton\n           android:id=\"@+id/open\"\n           android:layout_width=\"wrap_content\"\n           android:layout_height=\"wrap_content\"\n           android:layout_marginLeft=\"10dip\"\n           android:layout_marginTop=\"10dip\"\n           android:button=\"@drawable/radiobutton\"\n           android:checked=\"true\"\n           android:text=\"@string/open_album\"\n           android:textColor=\"#000000\"\n           android:textSize=\"16dip\" />\n\n       <RadioButton\n           android:id=\"@+id/secrecy\"\n           android:layout_width=\"wrap_content\"\n           android:layout_height=\"wrap_content\"\n           android:layout_marginLeft=\"10dip\"\n           android:button=\"@drawable/radiobutton\"\n           android:text=\"@string/secrecy_album\"\n           android:textColor=\"#000000\"\n           android:textSize=\"16dip\" />\n   </RadioGroup>\n\n```\nandroid:button=\"@null\"  去除RadioButton前面的圆点\nandroid:background=\"@drawable/radio\" 使用定义的样式\n\n# 占位符%s替换\n%d   （表示整数）\n%f    （表示浮点数）\n%s   （表示字符串）\ntxt.setText(String.format (“被替换%1$s”,”替换内容”));\n\n# TextView中嵌套图片Drawable\n```java\nDrawable drawable = getResources().getDrawable(R.drawable.ji_dot_nor);\ndrawable.setBounds(0, 0, drawable.getIntrinsicWidth(),drawable.getIntrinsicHeight());\ntextView.setCompoundDrawablesWithIntrinsicBounds(null, drawable, null, null);  \n说明：setCompoundDrawablesWithIntrinsicBounds(left, top, right, bottom)\n意思是设置Drawable显示在text的左、上、右、下位置。(Textview、Button都可以)\n```\n\n# TextView做成分割线\n```js\n<TextView\n     android:id=\"@id/textView2\"\n     android:layout_width=\"fill_parent\"\n     android:layout_height=\"2.0px\"\nandroid:background=\"@color/orange\" />\n```\n\n# SpannableString单击文字链接\n```java\nSpannableString spannableString = new SpannableString(str);\n\t\tspannableString.setSpan(new ClickableSpan() {\n\t\t\tpublic void onClick(View view) {\n\t\t\t\t// Intent intent = new Intent(ApkTest.this, Apk.class);\n\t\t\t\tIntent intent = new Intent(Intent.ACTION_CALL, Uri.parse(\"tel:\"\n\t\t\t\t\t\t+ \"15261589767\"));\n\t\t\t\tstartActivity(intent);\n\t\t\t}\n\t\t}, 0, str.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n\t\tTextView.setText(spannableString);\n\t\tTextView.setMovementMethod(LinkMovementMethod.getInstance());\n```\n\n# TextView中文字通过SpannableString\n来设置超链接、颜色、字体等属性\n```java\nString  title =”123456”;\nSpannableString titleStr = new SpannableString(title);\ntitleStr.setSpan(new ForegroundColorSpan(Color.RED), 0,\n\t\t\t\t\t\ttitleStr.length(), 0);\ntextView.setText(titleStr);\n```\n\n# android:drawableTop属性\n写在TextView里，实现图片+文字\n\n# 获取分辨率\n```java\nDisplayMetrics displayMetrics = new DisplayMetrics();\ngetWindowManager().getDefaultDisplay().getMetrics(displayMetrics);\n\ndisplayMetrics.widthPixels + \"x\"\n\t\t\t\t+ displayMetrics.heightPixels;\n```\n# 代码完成控件\n\nButton\n```java\nlinearLayout = (LinearLayout) findViewById(R.id.linearLayout2);\nLayoutParams layoutParams = new LinearLayout.LayoutParams(0,\n\t\t\t\tLinearLayout.LayoutParams.WRAP_CONTENT, 1);//1均分属性\nlayoutParams.setMargins(10, 10, 10, 10);\n\nButton button = new Button(MainActivity.this);\nbutton.setLayoutParams(layoutParams);\nlinearLayout.addView(button);\n```\nTextView\n```java\nprivate TextView overlay;\nprivate void initOverlay() {\n\t\tLayoutInflater inflater = LayoutInflater.from(this);\n\t\toverlay = (TextView) inflater.inflate(R.layout.overlay, null);\n\t\toverlay.setVisibility(View.INVISIBLE);\n\t\tWindowManager.LayoutParams lp = new WindowManager.LayoutParams(\n\t\t\t\tLayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,\n\t\t\t\tWindowManager.LayoutParams.TYPE_APPLICATION,\n\t\t\t\tWindowManager.LayoutParams.FLAG_NOT_FOCUSABLE\n\t\t\t\t\t\t| WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE,\n\t\t\t\tPixelFormat.TRANSLUCENT);\n\t\tWindowManager windowManager = (WindowManager) this\n\t\t\t\t.getSystemService(Context.WINDOW_SERVICE);\n\t\twindowManager.addView(overlay, lp);\n\t}\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<TextView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:background=\"#ffffff\"\n    android:gravity=\"center\"\n    android:maxWidth=\"80dip\"\n    android:minWidth=\"80dip\"\n    android:padding=\"5dip\"\n    android:textColor=\"#3399ff\"\n    android:textSize=\"70sp\" />\n\n\nprivate LinearLayout.LayoutParams layoutParams = null;\n\t\tprivate LinearLayout.LayoutParams btnParmas;\n\nlayoutParams = new LinearLayout.LayoutParams(\n\t\t\t\t\t\t\tLinearLayout.LayoutParams.WRAP_CONTENT,\n\t\t\t\t\t\t\tLinearLayout.LayoutParams.WRAP_CONTENT);\n\t\t\t\t\tlayoutParams.setMargins(\n\t\t\t\t\t\t\t(int) getResources().getDimension(\n\t\t\t\t\t\t\t\t\tR.dimen.lable_left), 0, 0, 0);\n\t\t\t\t\tbtnParmas = new LinearLayout.LayoutParams(\n\t\t\t\t\t\t\tLinearLayout.LayoutParams.WRAP_CONTENT,\n\t\t\t\t\t\t\t(int) getResources().getDimension(\n\t\t\t\t\t\t\t\t\tR.dimen.lable_height));\n\n\t\t\t\t\tfor (int i = 0; i < lables.length; i++) {\n\t\t\t\t\t\tLinearLayout linearLayout = new LinearLayout(activity);\n\t\t\t\t\t\tlableColor = random.nextInt(lableColors.length);\n\t\t\t\t\t\tButton lable = new Button(activity);\n\t\t\t\t\t\tlable.setText(lables[i]);\n\t\t\t\t\t\tlable.setGravity(Gravity.CENTER_HORIZONTAL\n\t\t\t\t\t\t\t\t| Gravity.CENTER_VERTICAL);\n\t\t\t\t\t\tlable.setTextSize(getResources().getDimension(\n\t\t\t\t\t\t\t\tR.dimen.lable));\n\t\t\t\t\t\tlable.setTextColor(getResources().getColor(\n\t\t\t\t\t\t\t\tR.color.white));\n\t\t\t\t\t\tlable.setBackgroundResource(lableColors[i]);\n\t\t\t\t\t\tlinearLayout.addView(lable, btnParmas);\n\t\t\t\t\t\tholder.play_lables.addView(linearLayout, layoutParams);\n\t\t\t\t\t}\n```\n# TextWatcher\n```java\neditText1.addTextChangedListener(watcher);\nTextWatcher watcher = new TextWatcher() {\n\t\tpublic void onTextChanged(CharSequence arg0, int arg1, int arg2,\n\t\t\t\tint arg3) {\n\t\t}\n\t\tpublic void beforeTextChanged(CharSequence arg0, int arg1, int arg2,\n\t\t\t\tint arg3) {\n\t\t}\n\t\tpublic void afterTextChanged(Editable arg0) {\t\t\t\n\t\t}\n\t};\n```\n# 屏幕旋转时不销毁\n```js\nAndroidManifest加入\nandroid:configChanges=\"orientation|keyboardHidden\"\n```\n获取屏幕方向\n```java\nConfiguration newConfig = getResources().getConfiguration();    \n        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE){    \n            //横屏    \n         }else if(newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){    \n            //竖屏    \n         }else if(newConfig.hardKeyboardHidden == Configuration.KEYBOARDHIDDEN_NO){    \n            //键盘没关闭。屏幕方向为横屏    \n         }else if(newConfig.hardKeyboardHidden == Configuration.KEYBOARDHIDDEN_YES){    \n            //键盘关闭。屏幕方向为竖屏    \n         } \n```\n\n# List增加数据\n## 简单\n```java\nprivate List<String> getData() {\n\t\tList<String> data = new ArrayList<String>();\n\t\tdata.add(\"123\");\n\t\tdata.add(\"345\");\n\t\tdata.add(\"456\");\n\t\tdata.add(\"567\");\n\t\treturn data;\n\t}\n```\n## 键值对\n```java\nprivate List<Map<String, Object>> getData() {\n        List<Map<String, Object>> list = new ArrayList<Map<String, Object>>();\n \n        Map<String, Object> map = new HashMap<String, Object>();\n        map.put(\"title\", \"G1\");\n        map.put(\"info\", \"google 1\");\n        map.put(\"img\", R.drawable.i1);\n        list.add(map);\n \n        map = new HashMap<String, Object>();\n        map.put(\"title\", \"G2\");\n        map.put(\"info\", \"google 2\");\n        map.put(\"img\", R.drawable.i2);\n        list.add(map);\n \n        map = new HashMap<String, Object>();\n        map.put(\"title\", \"G3\");\n        map.put(\"info\", \"google 3\");\n        map.put(\"img\", R.drawable.i3);\n        list.add(map);\n         \n        return list;\n    }\n```\n清除数据：\n```java\ndata.clear();\nlistView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_expandable_list_item_1,getData()));\n```\n## LinkedList\n```java\nLinkedList<String> list = new LinkedList<String>();\nlist.addFirst(\"000\");\n```\n\n# 验证是否手机号码\n```java\npublic boolean isMobileNO(String mobiles) {\n\t\tString expression = \"((^(13|15|18)[0-9]{9}$)|(^0[1,2]{1}\\\\d{1}-?\\\\d{8}$)|(^0[3-9] {1}\\\\d{2}-?\\\\d{7,8}$)|(^0[1,2]{1}\\\\d{1}-?\\\\d{8}-(\\\\d{1,4})$)|(^0[3-9]{1}\\\\d{2}-? \\\\d{7,8}-(\\\\d{1,4})$))\";\n\t\tPattern pattern = Pattern.compile(expression);\n\t\tMatcher matcher = pattern.matcher(mobiles);\n\t\tLog.d(\"wxl\", matcher.matches() + \"\");\n\t\treturn matcher.matches();\n\t}\n```\n\n# 正则表达式数字验证\n```java\npublic boolean isNumber(String str)\n    {\n        java.util.regex.Pattern pattern=java.util.regex.Pattern.compile(\"[0-9]*\");\n        java.util.regex.Matcher match=pattern.matcher(str);\n        if(match.matches()==false)\n        {\n             return false;\n        }\n        else\n        {\n             return true;\n        }\n    }\n```\n\n# SharedPreferences\n## SharedPreferences存数据\n```java\nSharedPreferences sharedPreferences = getSharedPreferences(\"test\", Context.MODE_PRIVATE);\nEditor editor = sharedPreferences.edit();//获取编辑器\neditor.putString(\"name\", \"张三\");\neditor.putInt(\"age\", 24);\neditor.putBoolean(\"AutoLogin\", false);\n\neditor.commit();//提交修改\n```\n## SharedPreferences取数据\n```java\nSharedPreferences sharedPreferences = getSharedPreferences(\"test\", Context.MODE_PRIVATE);\n//getString()第二个参数为缺省值,如果preference中不存在该key,将返回缺省值\nString name = sharedPreferences.getString(\"name\", \"\");\nint age = sharedPreferences.getInt(\"age\", 1);\nboolean autoLogin= sharedPreferences. getBoolean(\"AutoLogin\", false);\n```\n# Intent 传值\n\n## 简单传值\nActivityPage\n```java\nIntent intent = new Intent(ActivityPage.this, Player.class);\n\t\t\t//保存信息\n\t\t\tBundle mBundle = new Bundle();\n\t\t\tmBundle.putString(\"realname \", realname);\n\t\t\tintent.putExtras(mBundle);\n```\nPlayer接受\n```java\nrealname = this.getIntent().getStringExtra(\"realname\");\nIntent intent = new Intent();\nintent.setClass(HomeActivity.this, CompanyActivity.class);\nintent.putExtra(\"mCompanySupply\", mCompanySupply);\n\t\t\t\tstartActivity(intent);\nCompanyActivity.class:\nArrayList<ClassifySub3Bean>  mCompanySupply = (ArrayList<ClassifySub3Bean>) getIntent()\n\t\t\t\t.getSerializableExtra(\"mCompanySupply\");\n```\n# 复杂传值\nA页面：\n```java\nprivate static final int REQUEST_CODE_A = 0;\nprivate static final int RESULT_CODE_B = 0;\nIntent intent = new Intent();\n\t\t\t\tBundle bundle = new Bundle();\n\t\t\t\tintent.setClass(MainActivity.this, TestBActivity.class);\n\t\t\t\tbundle.putString(\"msg\", textView.getText().toString());\n\t\t\t\tintent.putExtras(bundle);\n\t\t\t\tstartActivityForResult(intent, REQUEST_CODE_A);\n\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n\t\tsuper.onActivityResult(requestCode, resultCode, data);\n\t\tif (requestCode == REQUEST_CODE_A && resultCode == RESULT_OK) {\n\t\t\tString str=data.getExtras().getString(\"result\");\n\t\t}\n\t}\n```\nB页面\n```java\nprivate static final int RESULT_CODE_B = 0;\nIntent intent = new Intent();\n\t\t\t\tintent.putExtra(\"result\", textView.getText().toString());\n\t\t\t\tsetResult(RESULT_OK, intent);\n\t\t\t\tfinish();\n\npublic boolean onKeyDown(int keyCode, KeyEvent event) {\n\t\tif (keyCode == KeyEvent.KEYCODE_BACK) {\n\t\t\tIntent intent = new Intent();\n\t\t\tintent.putExtra(\"result\", \"直接返回\");\n\t\t\tsetResult(RESULT_OK, intent);\n\t\t\tthis.finish();\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn super.onKeyDown(keyCode, event);\n\t\t}\n\t}\n```\n## List\n```java\nIntent intent = new Intent();\n\t\t\t\t\tintent.putStringArrayListExtra(\"mSelectedPhotos\",\n\t\t\t\t\t\t\tmSelectedPhotos);\n\t\t\t\t\tsetResult(RESULT_OK, intent);\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tArrayList<String> mSelectedPhotos = (ArrayList<String>) intent\n\t\t\t\t\t\t.getStringArrayListExtra(\"mSelectedPhotos\");\n```\n# xml文件中导入另一个xml文件的方法include\n```js\n<include \nandroid:id=\"@+id/included1\"\nlayout=\"@layout/anotherlayout\" />\n```\n# 单击返回键两次退出\n```java\nprivate static Boolean isExit = false;\n        @Override\n        public boolean onKeyDown(int keyCode, KeyEvent event) {\n                if (keyCode == KeyEvent.KEYCODE_BACK) {\n                        if (isExit == false) {\n                                isExit = true;\n                                Toast.makeText(this, \"再按一次退出程序\", Toast.LENGTH_SHORT).show();\n                                new Timer().schedule(new TimerTask() {\n                                        @Override\n                                        public void run() {\n                                                isExit = false;\n                                        }\n                                }, 2000);\n                        } else {\n                                finish();\n                                System.exit(0);\n                        }\n                }\n                return false;\n        }\n```\n或者\n```java\n@Override \n    public boolean onKeyUp(int keyCode, KeyEvent event) { \n        if (keyCode == KeyEvent.KEYCODE_BACK) { \n            long secondTime = System.currentTimeMillis(); \n            if (secondTime - firstTime > 800) {//如果两次按键时间间隔大于800毫秒，则不退出 \n                Toast.makeText(MainActivity.this, \"再按一次退出程序...\", \n                        Toast.LENGTH_SHORT).show(); \n                firstTime = secondTime;//更新firstTime \n                return true; \n            } else { \n                System.exit(0);//否则退出程序 \n            } \n        } \n        return super.onKeyUp(keyCode, event); \n    }\n```\n\n# 图片左右循环移动\n```java\nTranslateAnimation left, right;\nright = new TranslateAnimation(Animation.RELATIVE_TO_PARENT, -1f,\n\t\t\t\tAnimation.RELATIVE_TO_PARENT, -2f,\n\t\t\t\tAnimation.RELATIVE_TO_PARENT, 0f, Animation.RELATIVE_TO_PARENT,\n\t\t\t\t0f);\n\t\tleft = new TranslateAnimation(Animation.RELATIVE_TO_PARENT, -2f,\n\t\t\t\tAnimation.RELATIVE_TO_PARENT, -1f,\n\t\t\t\tAnimation.RELATIVE_TO_PARENT, 0f, Animation.RELATIVE_TO_PARENT,\n\t\t\t\t0f);\n\t\tright.setDuration(25000);\n\t\tleft.setDuration(25000);\n\t\tright.setFillAfter(true);\n\t\tleft.setFillAfter(true);\n\n\t\tright.setAnimationListener(new Animation.AnimationListener() {\n\t\t\t@Override\n\t\t\tpublic void onAnimationStart(Animation animation) {\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onAnimationRepeat(Animation animation) {\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onAnimationEnd(Animation animation) {\n\t\t\t\trunImage.startAnimation(left);\n\t\t\t}\n\t\t});\n\t\tleft.setAnimationListener(new Animation.AnimationListener() {\n\t\t\t@Override\n\t\t\tpublic void onAnimationStart(Animation animation) {\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onAnimationRepeat(Animation animation) {\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onAnimationEnd(Animation animation) {\n\t\t\t\trunImage.startAnimation(right);\n\t\t\t}\n\t\t});\n\t\trunImage.startAnimation(right);\n```\n\n\n# 控件左右抖动\nres下anim\nanimlayout.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<translate xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:duration=\"1000\"\n    android:fromXDelta=\"0\"\n    android:interpolator=\"@anim/cycle_7\"\n    android:toXDelta=\"10\" />\n```\ncycle_7.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<cycleInterpolator xmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:cycles=\"7\" />\n```\n(2)java代码\n```java\nAnimation shake = AnimationUtils.loadAnimation(\n\t\t\t\t\t\tMainActivity.this, R.anim.animlayout);\n\t\t\t\tbtn.setAnimation(shake);\n```\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","source":"_posts/android-small-knowledge-base.md","raw":"title: Android小知识库\ndate: 2015-08-10 14:32:49\ntags: Android\ncategory: [Android]\n---\n> 这份是我工作以来，总结的小知识库，有些知识点现在看来太LOW了，把还觉得有用的分享出来！\n\n\n<!--more-->\n# The APK file does not exist on disk.Error while Installing APK\n解决方案：\n![](http://i.stack.imgur.com/2KSyU.png)\n\n\n# Android Studio获取SHA1\n1、全局配置jdk1.8.0_45\\bin（或cd进入bin目录）\n2、keytool -v -list -keystore 你的keystore路径\n3、输入秘钥库口令：如果没设置，这里就是空，直接回车就进去了。\n\n# Genymotion下载虚拟镜像Connection timeout\nAdd new device出现的问题：\n> Failed to deploy virtual device.\n> Unable to create virtual device.Connection timeout occurred.\n\n解决方案：\n1. 当选择Google Nexus 5 - 6.0.0 - API 23 - 1080x1920下载device失败后，到C:\\Users\\用户主目录\\AppData\\Local\\Genymobile\\Genymotion\\ova下看到genymotion_vbox86p_6.0_160114_090449.ova，大小却是0KB，在C:\\Users\\用户主目录\\AppData\\Local\\Genymobile\\genymotion.log，打开该文件，找到类似“http://files2.genymotion.com/dists/6.0.0/ova/genymotion_vbox86p_6.0_160114_090449.ova”路径，即您想要下载的镜像文件URL；\n2. 用迅雷去下载，下载完成后放到C:\\Users\\用户主目录\\AppData\\Local\\Genymobile\\Genymotion\\ova；\n3. 重新点击Google Nexus 5 - 6.0.0 - API 23 - 1080x1920去下载，验证安装后即会显示在设备列表中。\n\n# Android Studio 如何Debug\n单击F5(Step Over)，单行一个个方法执行\n单击F6(Step Into)，单行执行\n单击F7(Step Out)，不往下执行，回到上一行\n单击F8(Resume Program)，跳出当前断点\n\n# Android Studio设置默认的签名文件\n新浪微博SSO登录，微信分享这些都需要签名打包，才能看到效果，设置默认签名文件为自己的签名jks，这样就不需要打包了。\n在app目录下添加你的.jks，然后app的build.gradle文件中的增加以下内容：\n第一种：\n```java\nandroid {  \n    signingConfigs {  \n        debug {  \n            storeFile file(\"你的.jks\")\n            storePassword 'android'\n            keyAlias 'android'\n            keyPassword 'android'\n        }          \n    }  \t\n}\n```\n第二种：\n```java\nandroid {  \n    signingConfigs {  \n        release {  \n            storeFile file(\"你的.jks\")\n            storePassword 'android'\n            keyAlias 'android'\n            keyPassword 'android'\n        }          \n    }  \n\tbuildTypes {\n        debug {\n            signingConfig signingConfigs.release\n        }        \n    }\n}\n```\n这样编译出来的debug版本直接用的是你的正式签名\n\n# Fragment懒加载\n```java\n protected boolean isVisible;\n\n    @Override\n    public void setUserVisibleHint(boolean isVisibleToUser) {\n        super.setUserVisibleHint(isVisibleToUser);\n        if (getUserVisibleHint()) {\n            isVisible = true;\n            onVisible();\n        } else {\n            isVisible = false;\n            onInvisible();\n        }\n    }\n\n    protected void onVisible() {\n       lazyLoad();\n    }\n\t\n    protected void lazyLoad() {\n        if (!isVisible) {\n            return;\n        }\n        getData();\n    }\n\n    protected void onInvisible() {\n    }\n```\n# Android studio头注释和方法注释\nFile | Settings | Editor|File and Code Templates|Includes|File Header\n```java\n/**\n * Created by ${USER} on ${DATE}.\n */\n```\n输入我们想要设置的注释模板\n\n# adapter.getPositionForSelection()和getSectionForPosition()\ngetPositionForSection()根据分类列的索引号获得该序列的首个位置\ngetSectionForPosition()通过该项的位置，获得所在分类组的索引号\n\n# getResources().getColor(R.color.color_name) is deprecated和drawableTop\n```java\n textView.setTextColor(Color.parseColor(\"#FFFFFF\"));\n //或者\n ContextCompat.getColor(context, R.color.color_name)\n```\n\n# showPopupWindow\n```java\n    private void showPopupMenu(View v) {\n        final View bgView = View.inflate(DemoApplication.getContext(), R.layout.demo_popup_window_bg, null);\n        bgView.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                hidePopupWindow();\n            }\n        });\n        if (mPopupBackground == null) {\n            mPopupBackground = new PopupWindow(bgView, ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);\n        }\n        mPopupBackground.showAtLocation(v, Gravity.BOTTOM, 0, 0);\n    }\n```\nv：父布局\ndemo_popup_window_bg.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/aliwx_common_alpha_black\">\n\n</LinearLayout>\n\n```\n\n# onFinishInflate()\nview的onFinishInflate()何时调用的？\n当View中所有的子控件均被映射成xml后触发；\nMyView mv = (MyView)View.inflate (context,R.layout.my_view,null);\n当加载完成xml后，就会执行那个方法；\n我们一般使用View的流程是在onCreate中使用setContentView来设置要显示Layout文件或直接创建一个View，在当设置了ContentView之后系统会对这个View进行解析，然后回调当前视图View中的onFinishInflate方法。只有解析了这个View我们才能在这个View容器中获取到拥有Id的组件，同样因为系统解析完View之后才会调用onFinishInflate方法，所以我们自定义组件时可以onFinishInflate方法中获取指定子View的引用。\n\n# Fragment设置隐藏或显示某个Fragment\nMainFragment点击\n```java\npublic void onItemClick(AdapterView<?> adapterView, View view,\n                            int position, long id) {\n       \n        ((MainActivity) getActivity()).showImageFragment(true, mData.get(position).get(\"title\").toString(), mData.get(position).get(\"imgUrl\").toString());\n        \n    }\n```\nMainActivity\n```java\npublic void showImageFragment(boolean show, String imgTxt, String imgUrl) {\n        // showActionbarWithTabs(!show);\n        if (show) {\n            getSupportFragmentManager().beginTransaction()\n                    .show(imageDetailFragment).commit();\n            imageDetailFragment.setImgData(imgTxt, imgUrl);\n        } else {\n            getSupportFragmentManager().beginTransaction()\n                    .hide(imageDetailFragment).commit();\n        }\n\n    }\n```\n\n# 获取arrt的值\n不同主题下需要把颜色，数值写成attr属性\nxml里，我们可以简单的引用attr属性值\n```js\nandroid:background=\"?attr/colorPrimary\"\n```\n\n代码获取\n```java\nTypedValue typedValue = new TypedValue();\nmContext.getTheme().resolveAttribute(R.attr.colorPrimary, typedValue, true);\nint colorPrimary = typedValue.data;//value.data里面存储着的就是获取到的colorPrimary的值\n```\n\n# 拨号盘拨打电话\n```java\nIntent intent = new Intent(Intent.ACTION_CALL,\nUri.parse(\"tel:\" + \"400-036-1977\"));\n// intent.setAction(Intent.ACTION_CALL);// 直接拨号\nintent.setAction(Intent.ACTION_DIAL);// 拨号盘\nstartActivity(intent);\n```\n\n# Drawable /Bitmap、String/InputStream、Bitmap/byte[]互转\n[http://wuxiaolong.me/2015/08/10/Drawable-to-Bitmap/](http://wuxiaolong.me/2015/08/10/Drawable-to-Bitmap/)\n\n# ProgressDialog\n```java\nfinal ProgressDialog progress = new ProgressDialog(LoginActivity.this);\n\t\tprogress.setMessage(\"请稍等...\");\n\t\tprogress.setCanceledOnTouchOutside(false);\n\t\tprogress.show();\nprogress.dismiss();\n```\n\n# 毫秒\n毫秒Calendar.getInstance().getTimeInMillis()和System.currentTimeMillis()\n\n# Fragment  setUserVisibleHint(boolean isVisibleToUser)\n```java\n @Override\n    public void setUserVisibleHint(boolean isVisibleToUser) {\n        super.setUserVisibleHint(isVisibleToUser);\n        if (isVisibleToUser) {\n            //相当于Fragment的onResume\n        } else {\n            //相当于Fragment的onPause\n        }\n    }\n```\n\n# Fragment  onActivityResult\n```java\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\n\t\tsuper.onActivityResult(requestCode, resultCode, data);\n\t\tgetActivity();\n\t\tif (resultCode == Activity.RESULT_OK\n\t\t\t\t&& requestCode == AppUtils.REQUEST_CODE_ISLOGIN) {\n\t\t\t// 检查是否完善资料\n\n\t\t\tif (AppUtils.getSharedPreferences(getActivity()).getBoolean(\n\t\t\t\t\t\"hasPersonalData\", false)) {\n\t\t\t\t// 取本地存取是否完善资料,完善直接提示咨询对话框\n\t\t\t\tconsultationDialog();\n\t\t\t} else {\n\t\t\t\tgetCheckPersonalData();\n\t\t\t}\n\n\t\t}\n\t} \n\nstartActivityForResult(intent,\n\t\t\t\t\t\t\tAppConfig.REQUEST_CODE_DIALOGUE);// 不是调用 getActivity().startActivityForResult()。\n```\n\t\t\t\t\t\t\t\n# dimen代码取值\ngetDimension方法获取到资源文件中定义的dimension值。\n```js\nResources res = getResources();\nfloat fontSize = res.getDimension(R.dimen.font_size);\n```\n\n\n# 数组初始化赋值\n1、创建数组后，通过循环对数组赋值。\n例如代码：\nint [] nums = new int [100];\nfor(int i=0;i<10;i++){\nnums[i] = i;\n}\n2、例如代码：\nint [] nums = {0,1,2,3,4,5,6,7,8,9};\n3、int [] nums = new int[]{0,1,2,3,4,5,6,7,8,9};\n\n4、数组增加元素\n//增加ruby\nList list = new ArrayList();\nfor (int i=0; i\nlist.add(str[i]);\n}\nlist.add(2, \"ruby\"); //list.add(\"ruby\")\nSystem.out.println();\nString[] newStr = list.toArray(new String[1]); //返回一个包含所有对象的指定类型的数组\n\n# Fragment.isAdded()\n```java\nFragment mBeforeFragment = new Fragment();\npublic void switchFragment(Fragment currentFragment) {\nif (currentFragment.isAdded()) {\ngetSupportFragmentManager().beginTransaction().hide(mBeforeFragment).show(currentFragment).commit();\n} else {\ngetSupportFragmentManager().beginTransaction().hide(mBeforeFragment).add(R.id.container, currentFragment).commit();\n}\nmBeforeFragment = currentFragment;\n}\n```\n调用：\n```java\nswitchFragment(HomeFragment.newInstance()); \n```\nHomeFragment\n```java\npublic static HomeFragment homeFragment = null;\n\npublic static HomeFragment newInstance() {\nif (homeFragment == null) {\nhomeFragment = new HomeFragment();\n}\nreturn homeFragment;\n} \n```\n\n# android之inputType属性\n```js\n<EditText android:layout_width=\"fill_parent\" \nandroid:layout_height=\"wrap_content\" \nandroid:inputType=\"phone\" />\n//文本类型，多为大写、小写和数字符号。\n    android:inputType=\"none\"\n    android:inputType=\"text\"\n    android:inputType=\"textCapCharacters\" 字母大写\n    android:inputType=\"textCapWords\" 首字母大写\n    android:inputType=\"textCapSentences\" 仅第一个字母大写\n    android:inputType=\"textAutoCorrect\" 自动完成\n    android:inputType=\"textAutoComplete\" 自动完成\n    android:inputType=\"textMultiLine\" 多行输入\n    android:inputType=\"textImeMultiLine\" 输入法多行（如果支持）\n    android:inputType=\"textNoSuggestions\" 不提示\n    android:inputType=\"textUri\" 网址\n    android:inputType=\"textEmailAddress\" 电子邮件地址\n    android:inputType=\"textEmailSubject\" 邮件主题\n    android:inputType=\"textShortMessage\" 短讯\n    android:inputType=\"textLongMessage\" 长信息\n    android:inputType=\"textPersonName\" 人名\n    android:inputType=\"textPostalAddress\" 地址\n    android:inputType=\"textPassword\" 密码\n    android:inputType=\"textVisiblePassword\" 可见密码\n    android:inputType=\"textWebEditText\" 作为网页表单的文本\n    android:inputType=\"textFilter\" 文本筛选过滤\n    android:inputType=\"textPhonetic\" 拼音输入\n//数值类型\n    android:inputType=\"number\" 数字\n    android:inputType=\"numberSigned\" 带符号数字格式\n    android:inputType=\"numberDecimal\" 带小数点的浮点格式\n    android:inputType=\"phone\" 拨号键盘\n    android:inputType=\"datetime\" 时间日期\n    android:inputType=\"date\" 日期键盘\nandroid:inputType=\"time\" 时间键盘\n```\n\n# ImageView.ScaleType\n（1）ImageView.ScaleType.center:图片位于视图中间，但不执行缩放。\n（2）ImageView.ScaleType.CENTER_CROP 按统一比例缩放图片（保持图片的尺寸比例）便于图片的两维（宽度和高度）等于或者大于相应的视图的维度\n（3）ImageView.ScaleType.CENTER_INSIDE按统一比例缩放图片（保持图片的尺寸比例）便于图片的两维（宽度和高度）等于或者小于相应的视图的维度\n（4）ImageView.ScaleType.FIT_CENTER缩放图片使用center\n（5）ImageView.ScaleType.FIT_END缩放图片使用END\n（6）ImageView.ScaleType.FIT_START缩放图片使用START\n（7）ImageView.ScaleType.FIT_XY缩放图片使用XY\n（8）ImageView.ScaleType.MATRIX当绘制时使用图片矩阵缩放\n\n\n# 调用系统发送短信界面\n```java\n/**\n* 发送短信\n* @param smsBody\n*/\nprivate void sendSMS(String smsBody)\n{\n//Uri smsToUri = Uri.parse(\"smsto:10000\"); //如果想指定发送人\nUri smsToUri = Uri.parse(\"smsto:\");\nIntent intent = new Intent(Intent.ACTION_SENDTO, smsToUri);\nintent.putExtra(\"sms_body\", smsBody);\nstartActivity(intent);\n}\n```\n\n# 跳转市场搜索某款软件\n```java\nIntent intent = new Intent(\n\t\t\t\t\"android.intent.action.VIEW\");\n\t\tintent.setData(Uri\n\t\t\t\t.parse(\"market://details?id=com.adobe.flashplayer\"));\n\t\tstartActivity(intent);\n```\n\n# 检测系统中是否安装某款软件\n```java\n//检测系统中是否已经安装了adobe flash player插件，插件的packageName是com.adobe.flashplayer：\nprivate boolean check() {\n\t\tPackageManager pm = getPackageManager();\n\t\tList<PackageInfo> infoList = pm\n\t\t\t\t.getInstalledPackages(PackageManager.GET_SERVICES);\n\t\tfor (PackageInfo info : infoList) {\n\t\t\tif (\"com.adobe.flashplayer\".equals(info.packageName)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n}\n\nprivate void isAvilible(String packageName) {\n\n\t\tPackageInfo packageInfo;\n\t\ttry {\n\t\t\tpackageInfo = this.getPackageManager().getPackageInfo(packageName,\n\t\t\t\t\t0);\n\n\t\t} catch (NameNotFoundException e) {\n\t\t\tpackageInfo = null;\n\t\t\te.printStackTrace();\n\t\t}\n\t\tif (packageInfo != null) {\n//1、通过包名\n\t\t\tIntent intent = new Intent();\n\t\t\tintent = getPackageManager().getLaunchIntentForPackage(packageName);\n\t\t\tstartActivity(intent);\n//2、通过类名： \nIntent intent=new Intent();  \nintent.setComponent(new ComponentName(packageName, \"com.joe.internet.Main\"));  \nstartActivity(intent);  \n\t\t} \n\n\t}\n```\n\n# 对话框菜单\n```java\nnew AlertDialog.Builder(this)\n\t\t\t\t\t\t.setTitle(\"choice\")\n\t\t\t\t\t\t.setItems(new String[] { \"选择1\", \"选择2\", \"选择3\", \"选择4\" },\n\t\t\t\t\t\t\t\tnew DialogInterface.OnClickListener() {\n\n\t\t\t\t\t\t\t\t\t@Override\n\t\t\t\t\t\t\t\t\tpublic void onClick(DialogInterface dialog,\n\t\t\t\t\t\t\t\t\t\t\tint which) {\n\t\t\t\t\t\t\t\t\t\tToast.makeText(MyContentActivity.this,\n\t\t\t\t\t\t\t\t\t\t\t\twhich + \"\", Toast.LENGTH_SHORT)\n\t\t\t\t\t\t\t\t\t\t\t\t.show();\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}).show();\n```\n\n# 定义ProgressBar \n```js\n<ProgressBar\n        android:id=\"@+id/mProgress\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"          android:indeterminateDrawable=\"@drawable/progress_rotate\" />\n```\nprogress_rotate：\n```js\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\" >\n    <item>\n        <rotate\n            android:drawable=\"@drawable/progressbar\"\n            android:duration=\"300\"\n            android:fromDegrees=\"0.0\"\n            android:pivotX=\"50.0%\"\n            android:pivotY=\"50.0%\"\n            android:toDegrees=\"360.0\" />\n    </item>\n</layer-list>\n```\n\n# 幻灯片效果\nxml\n```js\n<ProgressBar\n        android:id=\"@+id/ProgressBar01\"\n        style=\"@style/animStyle\"\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"fill_parent\"\n        android:layout_centerInParent=\"true\" />\n```\nstyle\n```js\n<style name=\"animStyle\" parent=\"@android:style/Widget.ProgressBar.Large\">\n        <item name=\"android:indeterminateDrawable\">@anim/test</item>\n</style>\n```\nanim\n```js\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<animation-list xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:oneshot=\"false\" >\n\n    <item\n        android:drawable=\"@drawable/t1\"\n        android:duration=\"500\"/>\n    <item\n        android:drawable=\"@drawable/t2\"\n        android:duration=\"500\"/>\n    <item\n        android:drawable=\"@drawable/t3\"\n        android:duration=\"500\"/>\n    <item\n        android:drawable=\"@drawable/t4\"\n        android:duration=\"500\"/>\n    <item\n        android:drawable=\"@drawable/t5\"\n        android:duration=\"500\"/>\n\n</animation-list>\n```\n\n# MD5加密\n```java\npublic String Md5(String plainText) {\n\t\tString result = \"\";\n\t\ttry {\n\t\t\tMessageDigest md = MessageDigest.getInstance(\"MD5\");\n\t\t\tmd.update(plainText.getBytes());\n\t\t\tbyte b[] = md.digest();\n\n\t\t\tint i;\n\n\t\t\tStringBuffer buf = new StringBuffer(\"\");\n\t\t\tfor (int offset = 0; offset < b.length; offset++) {\n\t\t\t\ti = b[offset];\n\t\t\t\tif (i < 0)\n\t\t\t\t\ti += 256;\n\t\t\t\tif (i < 16)\n\t\t\t\t\tbuf.append(\"0\");\n\t\t\t\tbuf.append(Integer.toHexString(i));\n\t\t\t}\n\t\t\tresult = buf.toString().toUpperCase();// 32位的加密（转成大写）\n\n\t\t\tbuf.toString().substring(8, 24);// 16位的加密\n\n\t\t} catch (NoSuchAlgorithmException e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t\treturn result;\n\t}\n```\n\n# 设置自动跳转页面\n## Timer\n```java\nTimer timer = new Timer();\n\t\ttimer.schedule(new TimerTask() {\n\t\t\t@Override\n\t\t\tpublic void run() {\n\t\t\t\t// TODO Auto-generated method stub\n\t\t\t\tIntent goIntent = new Intent();\n\t\t\t\tgoIntent.setClass(LauncherActivity.this, DemoActivity.class);\n\t\t\t\tstartActivity(goIntent);\n\t\t\t}\n\t\t}, 3 * 1000);\n\t}\n```\n\n## Handler\n```java\nnew Handler().postDelayed(new Runnable() {\n\t\t\t@Override\n\t\t\tpublic void run() {\n\t\t\t\tstartActivity(new Intent(SplashScreen.this,\n\t\t\t\t\t\tDomobSampleActivity.class));\n\t\t\t\tfinish();\n\t\t\t}\n\t\t}, 1000);\n```\n\n# 随机取数\n```java\nList<Integer> list = new ArrayList<Integer>();\n\t\tfor (int i = 0; i < 10; i++) {\n\t\t\tlist.add(i);\n\t\t}\n\t\tCollections.shuffle(list);\n\t\tfor (int v : list) {\n\t\t\tLog.d(\"wxl\", \"V===\" + v);\n\t\t}\n```\n或：\n```java\nRandom random = new Random();\nint ran = random.nextInt(keywordsList.size());\n\t\t\tString tmp = keywordsList.get(ran).get(\"keyword\").toString();\n```\n\n# selector下的属性值\n\nandroid:state_pressed\n如果是true，当被点击时显示该图片，如果是false没被按下时显示默认。\nandroid:state_focused\ntrue，获得焦点时显示；false，没获得焦点显示默认。\nandroid:state_selected\ntrue，当被选择时显示该图片；false，当未被选择时显示该图片。\nandroid:state_checkable\ntrue，当\t能使用时显示该图片；false，当CheckBox不能使用时显示该图片。\nandroid:state_checked\ntrue，当CheckBox选中时显示该图片；false，当CheckBox为选中时显示该图片。\nandroid:state_enabled\ntrue，当该组件能使用时显示该图片；false，当该组件不能使用时显示该图片。\nandroid:state_window_focused\ntrue，当此activity获得焦点在最前面时显示该图片；false，当没在最前面时显示该图片。\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<selector xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <item android:state_pressed=\"true\"\n          android:drawable=\"@drawable/button_pressed\"/><!-- pressed -->\n    <item android:state_focused=\"true\"\n          android:drawable=\"@drawable/button_focused\"/><!-- focused -->\n    <item android:drawable=\"@drawable/button_normal\"/><!-- default -->\n</selector>\n```\n\n# 带下划线的EditText\n```java\npublic class LinedEditText extends EditText {\n\tprivate Paint linePaint;\n\tprivate float margin;\n\tprivate int paperColor;\n\n\tpublic LinedEditText(Context paramContext, AttributeSet paramAttributeSet) {\n\t\tsuper(paramContext, paramAttributeSet);\n\t\tthis.linePaint = new Paint();\n\t}\n\t@Override\n\tprotected void onDraw(Canvas paramCanvas) {\n\t\tparamCanvas.drawColor(this.paperColor);\n\t\tint i = getLineCount();// 得到总的行數\n\t\tint j = getHeight();// 获得TextView的高度\n\t\tint k = getLineHeight();// 获得TextView的行高\n\t\tint m = j / k + 1;// 总的线数\n\t\tif (i < m)\n\t\t\ti = m;\n\t\tint n = getCompoundPaddingTop();\n\t\tLog.d(\"wxl\", \"n----\" + n);\n\t\tparamCanvas.drawLine(0.0F, n, getRight(), n, this.linePaint);\n\t\tfor (int i2 = 0;; i2++) {\n\t\t\tif (i2 >= i) {\n\t\t\t\tsetPadding(10 + (int) this.margin, 0, 0, 0);\n\t\t\t\tsuper.onDraw(paramCanvas);\n\t\t\t\tparamCanvas.restore();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tn += k;\n\t\t\tparamCanvas.drawLine(0.0F, n, getRight(), n, this.linePaint);\n\t\t\tparamCanvas.save();\n\t\t}\n\t}\n}\n```\n主要工作就是重载onDraw方法，利用从TextView继承下来的getLineCount函数获取文本所占的行数，以及getLineBounds来获取特定行的基准高度值，而且这个函数第二个参数会返回此行的“外包装”值。再利用这些值绘制这一行的线条。为了让界面的View使用自定义的EditText类，必须在配置文件中进行设置\n\n\n\n# 关闭键盘\n```java\npublic static void hideSoftInput(Activity activity) {\n        if (activity.getCurrentFocus() != null)\n            ((InputMethodManager) activity\n                    .getSystemService(Context.INPUT_METHOD_SERVICE))\n                    .hideSoftInputFromWindow(activity.getCurrentFocus()\n                            .getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);\n    }\n```\n\n# 界面不被弹出的键盘盖住\n一进入activity就弹出键盘\n```js\nandroid:windowSoftInputMode=\"adjustResize\" \nandroid:windowSoftInputMode=\"adjustPan|stateAlwaysVisible\"\n```\n第一个软键盘和输入框会完全分离，而第二个输入框还是会被软键盘盖住一点点\n而且第二个要把两个属性叠加起来，为什么要叠加起来呢，因为如果只用adjustPan 的话需要点击输入框才会弹出软键盘\n\n在 AndroidMainfest.xml中选择哪个activity，设置windowSoftInputMode属性为 \n```js\nadjustUnspecified|stateHidden\nandroid:windowSoftInputMode=\"adjustUnspecified|stateHidden\"\n```\nwindowSoftInputMode各值的含义：\n\nstateUnspecified：软键盘的状态并没有指定，系统将选择一个合适的状态或依赖于主题的设置\n\nstateUnchanged：当这个activity出现时，软键盘将一直保持在上一个activity里的状态，无论是隐藏还是显示\n\nstateHidden：用户选择activity时，软键盘总是被隐藏\n\nstateAlwaysHidden：当该Activity主窗口获取焦点时，软键盘也总是被隐藏的\n\nstateVisible：软键盘通常是可见的\n\nstateAlwaysVisible：用户选择activity时，软键盘总是显示的状态\n\nadjustUnspecified：默认设置，通常由系统自行决定是隐藏还是显示\n\nadjustResize：该Activity总是调整屏幕的大小以便留出软键盘的空间\n\nadjustPan：当前窗口的内容将自动移动以便当前焦点从不被键盘覆盖和用户能总是看到输入内容的部分\n\n# 控件美化Shape\n[http://wuxiaolong.me/2013/07/09/shape/](http://wuxiaolong.me/2013/07/09/shape/)\n\n# 获取版本名称 VersionName\n```java\npublic String getVersionName(Context context) {\n\t\tPackageManager manager = context.getPackageManager();\n\t\tString packageName = context.getPackageName();\n\t\ttry {\n\t\t\tPackageInfo info = manager.getPackageInfo(packageName, 0);\n\t\t\treturn info.versionName;\n\t\t} catch (NameNotFoundException e) {\n\t\t\treturn \"1.0\";\n\t\t}\n\t}\n```\n\n# 获取Android手机设备的IMSI / IMEI 信息\n```java\nTelephonyManager mTelephonyMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);\nString imsi = mTelephonyMgr.getSubscriberId(); \nString imei = mTelephonyMgr.getDeviceId(); \nLog.i(\"wxl\", \"imsi=\"+imsi);为null\nLog.i(\"wxl\", \"imei=\"+imei); \n另外不要忘了在AndroidManifest.xml中加上读取手机状态的权限\n<uses-permission android:name=\"android.permission.READ_PHONE_STATE\"/>\n```\n\n# 自定义Log是否显示\n```java\n public class Log {\n        private static final String TAG = \"wxl\";\n        private static final boolean LOG = true;\n        public static void i(String msg) {\n            if (LOG)\n                android.util.Log.i(TAG , msg);\n        }\n        public static void d(String msg) {\n            if (LOG)\n                android.util.Log.d(TAG , msg);\n        }\n        public static void w(String msg) {\n            if (LOG)\n                android.util.Log.w(TAG , msg);\n        }\n        public static void w(String msg, Throwable throwable) {\n            if (LOG)\n                android.util.Log.w(TAG , msg, throwable);\n        }\n        public static void v(String msg) {\n            if (LOG)\n                android.util.Log.v(TAG , msg);\n        }\n        public static void e(String msg) {\n            android.util.Log.e(TAG , msg);\n        }\n        public static void e(String msg, Throwable throwable) {\n            android.util.Log.e(TAG , msg, throwable);\n        }\n    }\n```\n\n# 异步操作AsyncTask \n```java\n参数1：向后台任务的执行方法传递参数的类型 ； \n参数2：在后台任务执行过程中，要求主UI线程处理中间状态，通常是一些UI处理中传递的参数类型；\n参数3：后台任务执行完返回时的参数类型。\n private class MyAsyncTask extends AsyncTask<Integer, String, Void> {\n\n\t\t// 实现抽象方法doInBackground()，代码将在后台线程中执行，由execute()触发\n\t\tprotected Void doInBackground(Integer... params) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// 任务启动，可以在这里显示一个对话框，这里简单处理\n\t\tprotected void onPreExecute() {\n\t\t\tsuper.onPreExecute();\n\t\t}\n\n\t\t// 取消\n\t\tprotected void onCancelled() {\n\t\t\tsuper.onCancelled();\n\t\t}\n\n\t\t// 定义后台进程执行完后的处理\n\t\tprotected void onPostExecute(Void result) {\n\t\t\tsuper.onPostExecute(result);\n\t\t\tToast.makeText(MainActivity.this, \"OK\", Toast.LENGTH_SHORT).show();\n\t\t}\n\n\t\t// 更新进度,在UI主线程执行的内容，将item加入list中。方法中的参数为范式方式，实质为数组，由于我们只传递了item一个String，要获取，为values[0]\n\t\tprotected void onProgressUpdate(String... values) {\n\t\t\tsuper.onProgressUpdate(values);\n\t\t}\n\n\t}\n```\n调用：\n```java\nnew MyAsyncTask().execute(参数1);// 创建后台任务的对象\n```\n\n# 检查网络状态\n```java\npublic boolean checkNetworkInfo() {\n\t\tConnectivityManager conMan = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n\t\t// mobile 3G Data Network\n\t\tState mobile = conMan.getNetworkInfo(ConnectivityManager.TYPE_MOBILE)\n\t\t\t\t.getState();\n\t\t// wifi\n\t\tState wifi = conMan.getNetworkInfo(ConnectivityManager.TYPE_WIFI)\n\t\t\t\t.getState();\n\t\t// 如果3G网络和wifi网络都未连接，且不是处于正在连接状态 则进入Network Setting界面 由用户配置网络连接\n\t\tif (mobile == State.CONNECTED || mobile == State.CONNECTING)\n\t\t\treturn true;\n\t\tif (wifi == State.CONNECTED || wifi == State.CONNECTING)\n\t\t\treturn true;\n\t\tAlertDialog.Builder builder = new AlertDialog.Builder(this);\n\t\tbuilder.setMessage(getResources().getString(R.string.no_network))\n\t\t\t\t.setCancelable(false)\n\t\t\t\t.setPositiveButton(\n\t\t\t\t\t\tgetResources().getString(R.string.configuration),\n\t\t\t\t\t\tnew DialogInterface.OnClickListener() {\n\t\t\t\t\t\t\tpublic void onClick(DialogInterface dialog, int id) {\n\n\t\t\t\t\t\t\t\t// 进入无线网络配置界面\n\t\t\t\t\t\t\t\tstartActivity(new Intent(\n\t\t\t\t\t\t\t\t\t\tSettings.ACTION_WIRELESS_SETTINGS));\n\t\t\t\t\t\t\t\tMainActivity.this.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t.setNegativeButton(getResources().getString(R.string.quit),\n\t\t\t\t\t\tnew DialogInterface.OnClickListener() {\n\t\t\t\t\t\t\tpublic void onClick(DialogInterface dialog, int id) {\n\t\t\t\t\t\t\t\tMainActivity.this.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\tbuilder.show();\n\t\treturn false;\n\t}\n```\n代码判断调用：\n```java\n// 检查网络状态\n\t\tif (!checkNetworkInfo()) {\n\t\t\treturn;\n\t\t}\n```\n\n# Html.fromHtml（）\n让数据接受网页的格式\n```java\nURLEncoder.encode(String s); 网址请求中文解析\n&#8230;代表省略号\n```\n# URLEncoder.encode\n网址请求带中文\n```java\nURLEncoder.encode(content, \"utf-8\")\n```\n\n# Android中字体加粗\n* 在xml文件中使用\n```js\nandroid:textStyle=”bold”\n```\n* Java 代码\n\n（网上查XML不能将中文设置成粗体，只能通过Java code。Android 2.2 可以通过XML将中文设置成粗体）\n\n```java\n  TextView tv = (TextView)findViewById(R.id.TextView01); \n  TextPaint tp = tv.getPaint();\n  tp.setFakeBoldText(true);\n```\n* Html.fromHtml(\"\\<\\b>\")\n\n```java\n(1)viewHolder.title.setText(Html.fromHtml(\"<b>\"\n\t\t\t\t+ listTitle.get(position).get(\"title\") + \"</b>\"));\n(2)TextView.setText(Html.fromHtml(\"<font color=#FF0000>hello</font>\"));\n```\n\n# 代码设置背景图setImageResource/setBackgroundResource\n```java\ntextView.setBackgroundResource(R.drawable.bg_menu_1);设置背景图片\ntextView.setBackgroundColor(0xffffffff);\nsetImageResource與xml中的src的屬性才是相匹配的，而setBackgroundResource是與xml中的background屬性相匹配\n的\nholder.chat_sound_iv_right.setBackgroundResource(0);//没有图片\n```\n\n# android中的ellipsize\n```java\n用法如下：\n在xml中\nandroid:ellipsize = \"end\"　　  省略号在结尾\nandroid:ellipsize = \"start\" 　　省略号在开头\nandroid:ellipsize = \"middle\"     省略号在中间\nandroid:ellipsize = \"marquee\"  跑马灯\n最好加一个约束android:singleline = \"true\"\n跑马灯\nandroid:singleLine=\"true\"\nandroid:ellipsize=\"marquee\"\nandroid:focusableInTouchMode=\"true\"\nandroid:focusable=\"true\"\nandroid:marqueeRepeatLimit=\"marquee_forever\"\nandroid:singleLine=true 表示使用单行文字，多行文字也就无所谓使用Marquee效果了。\nandroid:marqueeRepeatLimit，设置走马灯滚动的次数。\nandroid:ellipsize，设置了文字过长时如何切断文字，可以有none, start,middle, end, 如果使用走马灯效果则设为marquee.\nandroid:focusable，Android的缺省行为是在控件获得Focus时才会显示走马灯效果\n```\n\n# 控件点击效果\n```js\n<selector xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <item android:state_focused=\"true\" android:state_pressed=\"false\" android:drawable=\"@drawable/professional_1\"/>\n    <item android:state_focused=\"false\" android:state_pressed=\"true\" android:drawable=\"@drawable/professional_1\"/>\n    <item android:drawable=\"@drawable/professional\"/>\n</selector>\n```\n\n# 保留小数点\n方法一：\n```java\nprivate DecimalFormat df;\ndf = new DecimalFormat(\"0.0\");\nfloat data;\ndf.format(data);//返回值\n```\n方法二：\n```java\ndouble juli = 1569;\nString result = String.format(\"%.1f\", juli/1000);\n```\n\n# RadioGroup\n```js\n<RadioGroup\n      android:layout_width=\"wrap_content\"\n      android:layout_height=\"wrap_content\"\n      android:orientation=\"vertical\" >\n\n       <RadioButton\n           android:id=\"@+id/open\"\n           android:layout_width=\"wrap_content\"\n           android:layout_height=\"wrap_content\"\n           android:layout_marginLeft=\"10dip\"\n           android:layout_marginTop=\"10dip\"\n           android:button=\"@drawable/radiobutton\"\n           android:checked=\"true\"\n           android:text=\"@string/open_album\"\n           android:textColor=\"#000000\"\n           android:textSize=\"16dip\" />\n\n       <RadioButton\n           android:id=\"@+id/secrecy\"\n           android:layout_width=\"wrap_content\"\n           android:layout_height=\"wrap_content\"\n           android:layout_marginLeft=\"10dip\"\n           android:button=\"@drawable/radiobutton\"\n           android:text=\"@string/secrecy_album\"\n           android:textColor=\"#000000\"\n           android:textSize=\"16dip\" />\n   </RadioGroup>\n\n```\nandroid:button=\"@null\"  去除RadioButton前面的圆点\nandroid:background=\"@drawable/radio\" 使用定义的样式\n\n# 占位符%s替换\n%d   （表示整数）\n%f    （表示浮点数）\n%s   （表示字符串）\ntxt.setText(String.format (“被替换%1$s”,”替换内容”));\n\n# TextView中嵌套图片Drawable\n```java\nDrawable drawable = getResources().getDrawable(R.drawable.ji_dot_nor);\ndrawable.setBounds(0, 0, drawable.getIntrinsicWidth(),drawable.getIntrinsicHeight());\ntextView.setCompoundDrawablesWithIntrinsicBounds(null, drawable, null, null);  \n说明：setCompoundDrawablesWithIntrinsicBounds(left, top, right, bottom)\n意思是设置Drawable显示在text的左、上、右、下位置。(Textview、Button都可以)\n```\n\n# TextView做成分割线\n```js\n<TextView\n     android:id=\"@id/textView2\"\n     android:layout_width=\"fill_parent\"\n     android:layout_height=\"2.0px\"\nandroid:background=\"@color/orange\" />\n```\n\n# SpannableString单击文字链接\n```java\nSpannableString spannableString = new SpannableString(str);\n\t\tspannableString.setSpan(new ClickableSpan() {\n\t\t\tpublic void onClick(View view) {\n\t\t\t\t// Intent intent = new Intent(ApkTest.this, Apk.class);\n\t\t\t\tIntent intent = new Intent(Intent.ACTION_CALL, Uri.parse(\"tel:\"\n\t\t\t\t\t\t+ \"15261589767\"));\n\t\t\t\tstartActivity(intent);\n\t\t\t}\n\t\t}, 0, str.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n\t\tTextView.setText(spannableString);\n\t\tTextView.setMovementMethod(LinkMovementMethod.getInstance());\n```\n\n# TextView中文字通过SpannableString\n来设置超链接、颜色、字体等属性\n```java\nString  title =”123456”;\nSpannableString titleStr = new SpannableString(title);\ntitleStr.setSpan(new ForegroundColorSpan(Color.RED), 0,\n\t\t\t\t\t\ttitleStr.length(), 0);\ntextView.setText(titleStr);\n```\n\n# android:drawableTop属性\n写在TextView里，实现图片+文字\n\n# 获取分辨率\n```java\nDisplayMetrics displayMetrics = new DisplayMetrics();\ngetWindowManager().getDefaultDisplay().getMetrics(displayMetrics);\n\ndisplayMetrics.widthPixels + \"x\"\n\t\t\t\t+ displayMetrics.heightPixels;\n```\n# 代码完成控件\n\nButton\n```java\nlinearLayout = (LinearLayout) findViewById(R.id.linearLayout2);\nLayoutParams layoutParams = new LinearLayout.LayoutParams(0,\n\t\t\t\tLinearLayout.LayoutParams.WRAP_CONTENT, 1);//1均分属性\nlayoutParams.setMargins(10, 10, 10, 10);\n\nButton button = new Button(MainActivity.this);\nbutton.setLayoutParams(layoutParams);\nlinearLayout.addView(button);\n```\nTextView\n```java\nprivate TextView overlay;\nprivate void initOverlay() {\n\t\tLayoutInflater inflater = LayoutInflater.from(this);\n\t\toverlay = (TextView) inflater.inflate(R.layout.overlay, null);\n\t\toverlay.setVisibility(View.INVISIBLE);\n\t\tWindowManager.LayoutParams lp = new WindowManager.LayoutParams(\n\t\t\t\tLayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,\n\t\t\t\tWindowManager.LayoutParams.TYPE_APPLICATION,\n\t\t\t\tWindowManager.LayoutParams.FLAG_NOT_FOCUSABLE\n\t\t\t\t\t\t| WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE,\n\t\t\t\tPixelFormat.TRANSLUCENT);\n\t\tWindowManager windowManager = (WindowManager) this\n\t\t\t\t.getSystemService(Context.WINDOW_SERVICE);\n\t\twindowManager.addView(overlay, lp);\n\t}\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<TextView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:background=\"#ffffff\"\n    android:gravity=\"center\"\n    android:maxWidth=\"80dip\"\n    android:minWidth=\"80dip\"\n    android:padding=\"5dip\"\n    android:textColor=\"#3399ff\"\n    android:textSize=\"70sp\" />\n\n\nprivate LinearLayout.LayoutParams layoutParams = null;\n\t\tprivate LinearLayout.LayoutParams btnParmas;\n\nlayoutParams = new LinearLayout.LayoutParams(\n\t\t\t\t\t\t\tLinearLayout.LayoutParams.WRAP_CONTENT,\n\t\t\t\t\t\t\tLinearLayout.LayoutParams.WRAP_CONTENT);\n\t\t\t\t\tlayoutParams.setMargins(\n\t\t\t\t\t\t\t(int) getResources().getDimension(\n\t\t\t\t\t\t\t\t\tR.dimen.lable_left), 0, 0, 0);\n\t\t\t\t\tbtnParmas = new LinearLayout.LayoutParams(\n\t\t\t\t\t\t\tLinearLayout.LayoutParams.WRAP_CONTENT,\n\t\t\t\t\t\t\t(int) getResources().getDimension(\n\t\t\t\t\t\t\t\t\tR.dimen.lable_height));\n\n\t\t\t\t\tfor (int i = 0; i < lables.length; i++) {\n\t\t\t\t\t\tLinearLayout linearLayout = new LinearLayout(activity);\n\t\t\t\t\t\tlableColor = random.nextInt(lableColors.length);\n\t\t\t\t\t\tButton lable = new Button(activity);\n\t\t\t\t\t\tlable.setText(lables[i]);\n\t\t\t\t\t\tlable.setGravity(Gravity.CENTER_HORIZONTAL\n\t\t\t\t\t\t\t\t| Gravity.CENTER_VERTICAL);\n\t\t\t\t\t\tlable.setTextSize(getResources().getDimension(\n\t\t\t\t\t\t\t\tR.dimen.lable));\n\t\t\t\t\t\tlable.setTextColor(getResources().getColor(\n\t\t\t\t\t\t\t\tR.color.white));\n\t\t\t\t\t\tlable.setBackgroundResource(lableColors[i]);\n\t\t\t\t\t\tlinearLayout.addView(lable, btnParmas);\n\t\t\t\t\t\tholder.play_lables.addView(linearLayout, layoutParams);\n\t\t\t\t\t}\n```\n# TextWatcher\n```java\neditText1.addTextChangedListener(watcher);\nTextWatcher watcher = new TextWatcher() {\n\t\tpublic void onTextChanged(CharSequence arg0, int arg1, int arg2,\n\t\t\t\tint arg3) {\n\t\t}\n\t\tpublic void beforeTextChanged(CharSequence arg0, int arg1, int arg2,\n\t\t\t\tint arg3) {\n\t\t}\n\t\tpublic void afterTextChanged(Editable arg0) {\t\t\t\n\t\t}\n\t};\n```\n# 屏幕旋转时不销毁\n```js\nAndroidManifest加入\nandroid:configChanges=\"orientation|keyboardHidden\"\n```\n获取屏幕方向\n```java\nConfiguration newConfig = getResources().getConfiguration();    \n        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE){    \n            //横屏    \n         }else if(newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){    \n            //竖屏    \n         }else if(newConfig.hardKeyboardHidden == Configuration.KEYBOARDHIDDEN_NO){    \n            //键盘没关闭。屏幕方向为横屏    \n         }else if(newConfig.hardKeyboardHidden == Configuration.KEYBOARDHIDDEN_YES){    \n            //键盘关闭。屏幕方向为竖屏    \n         } \n```\n\n# List增加数据\n## 简单\n```java\nprivate List<String> getData() {\n\t\tList<String> data = new ArrayList<String>();\n\t\tdata.add(\"123\");\n\t\tdata.add(\"345\");\n\t\tdata.add(\"456\");\n\t\tdata.add(\"567\");\n\t\treturn data;\n\t}\n```\n## 键值对\n```java\nprivate List<Map<String, Object>> getData() {\n        List<Map<String, Object>> list = new ArrayList<Map<String, Object>>();\n \n        Map<String, Object> map = new HashMap<String, Object>();\n        map.put(\"title\", \"G1\");\n        map.put(\"info\", \"google 1\");\n        map.put(\"img\", R.drawable.i1);\n        list.add(map);\n \n        map = new HashMap<String, Object>();\n        map.put(\"title\", \"G2\");\n        map.put(\"info\", \"google 2\");\n        map.put(\"img\", R.drawable.i2);\n        list.add(map);\n \n        map = new HashMap<String, Object>();\n        map.put(\"title\", \"G3\");\n        map.put(\"info\", \"google 3\");\n        map.put(\"img\", R.drawable.i3);\n        list.add(map);\n         \n        return list;\n    }\n```\n清除数据：\n```java\ndata.clear();\nlistView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_expandable_list_item_1,getData()));\n```\n## LinkedList\n```java\nLinkedList<String> list = new LinkedList<String>();\nlist.addFirst(\"000\");\n```\n\n# 验证是否手机号码\n```java\npublic boolean isMobileNO(String mobiles) {\n\t\tString expression = \"((^(13|15|18)[0-9]{9}$)|(^0[1,2]{1}\\\\d{1}-?\\\\d{8}$)|(^0[3-9] {1}\\\\d{2}-?\\\\d{7,8}$)|(^0[1,2]{1}\\\\d{1}-?\\\\d{8}-(\\\\d{1,4})$)|(^0[3-9]{1}\\\\d{2}-? \\\\d{7,8}-(\\\\d{1,4})$))\";\n\t\tPattern pattern = Pattern.compile(expression);\n\t\tMatcher matcher = pattern.matcher(mobiles);\n\t\tLog.d(\"wxl\", matcher.matches() + \"\");\n\t\treturn matcher.matches();\n\t}\n```\n\n# 正则表达式数字验证\n```java\npublic boolean isNumber(String str)\n    {\n        java.util.regex.Pattern pattern=java.util.regex.Pattern.compile(\"[0-9]*\");\n        java.util.regex.Matcher match=pattern.matcher(str);\n        if(match.matches()==false)\n        {\n             return false;\n        }\n        else\n        {\n             return true;\n        }\n    }\n```\n\n# SharedPreferences\n## SharedPreferences存数据\n```java\nSharedPreferences sharedPreferences = getSharedPreferences(\"test\", Context.MODE_PRIVATE);\nEditor editor = sharedPreferences.edit();//获取编辑器\neditor.putString(\"name\", \"张三\");\neditor.putInt(\"age\", 24);\neditor.putBoolean(\"AutoLogin\", false);\n\neditor.commit();//提交修改\n```\n## SharedPreferences取数据\n```java\nSharedPreferences sharedPreferences = getSharedPreferences(\"test\", Context.MODE_PRIVATE);\n//getString()第二个参数为缺省值,如果preference中不存在该key,将返回缺省值\nString name = sharedPreferences.getString(\"name\", \"\");\nint age = sharedPreferences.getInt(\"age\", 1);\nboolean autoLogin= sharedPreferences. getBoolean(\"AutoLogin\", false);\n```\n# Intent 传值\n\n## 简单传值\nActivityPage\n```java\nIntent intent = new Intent(ActivityPage.this, Player.class);\n\t\t\t//保存信息\n\t\t\tBundle mBundle = new Bundle();\n\t\t\tmBundle.putString(\"realname \", realname);\n\t\t\tintent.putExtras(mBundle);\n```\nPlayer接受\n```java\nrealname = this.getIntent().getStringExtra(\"realname\");\nIntent intent = new Intent();\nintent.setClass(HomeActivity.this, CompanyActivity.class);\nintent.putExtra(\"mCompanySupply\", mCompanySupply);\n\t\t\t\tstartActivity(intent);\nCompanyActivity.class:\nArrayList<ClassifySub3Bean>  mCompanySupply = (ArrayList<ClassifySub3Bean>) getIntent()\n\t\t\t\t.getSerializableExtra(\"mCompanySupply\");\n```\n# 复杂传值\nA页面：\n```java\nprivate static final int REQUEST_CODE_A = 0;\nprivate static final int RESULT_CODE_B = 0;\nIntent intent = new Intent();\n\t\t\t\tBundle bundle = new Bundle();\n\t\t\t\tintent.setClass(MainActivity.this, TestBActivity.class);\n\t\t\t\tbundle.putString(\"msg\", textView.getText().toString());\n\t\t\t\tintent.putExtras(bundle);\n\t\t\t\tstartActivityForResult(intent, REQUEST_CODE_A);\n\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n\t\tsuper.onActivityResult(requestCode, resultCode, data);\n\t\tif (requestCode == REQUEST_CODE_A && resultCode == RESULT_OK) {\n\t\t\tString str=data.getExtras().getString(\"result\");\n\t\t}\n\t}\n```\nB页面\n```java\nprivate static final int RESULT_CODE_B = 0;\nIntent intent = new Intent();\n\t\t\t\tintent.putExtra(\"result\", textView.getText().toString());\n\t\t\t\tsetResult(RESULT_OK, intent);\n\t\t\t\tfinish();\n\npublic boolean onKeyDown(int keyCode, KeyEvent event) {\n\t\tif (keyCode == KeyEvent.KEYCODE_BACK) {\n\t\t\tIntent intent = new Intent();\n\t\t\tintent.putExtra(\"result\", \"直接返回\");\n\t\t\tsetResult(RESULT_OK, intent);\n\t\t\tthis.finish();\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn super.onKeyDown(keyCode, event);\n\t\t}\n\t}\n```\n## List\n```java\nIntent intent = new Intent();\n\t\t\t\t\tintent.putStringArrayListExtra(\"mSelectedPhotos\",\n\t\t\t\t\t\t\tmSelectedPhotos);\n\t\t\t\t\tsetResult(RESULT_OK, intent);\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tArrayList<String> mSelectedPhotos = (ArrayList<String>) intent\n\t\t\t\t\t\t.getStringArrayListExtra(\"mSelectedPhotos\");\n```\n# xml文件中导入另一个xml文件的方法include\n```js\n<include \nandroid:id=\"@+id/included1\"\nlayout=\"@layout/anotherlayout\" />\n```\n# 单击返回键两次退出\n```java\nprivate static Boolean isExit = false;\n        @Override\n        public boolean onKeyDown(int keyCode, KeyEvent event) {\n                if (keyCode == KeyEvent.KEYCODE_BACK) {\n                        if (isExit == false) {\n                                isExit = true;\n                                Toast.makeText(this, \"再按一次退出程序\", Toast.LENGTH_SHORT).show();\n                                new Timer().schedule(new TimerTask() {\n                                        @Override\n                                        public void run() {\n                                                isExit = false;\n                                        }\n                                }, 2000);\n                        } else {\n                                finish();\n                                System.exit(0);\n                        }\n                }\n                return false;\n        }\n```\n或者\n```java\n@Override \n    public boolean onKeyUp(int keyCode, KeyEvent event) { \n        if (keyCode == KeyEvent.KEYCODE_BACK) { \n            long secondTime = System.currentTimeMillis(); \n            if (secondTime - firstTime > 800) {//如果两次按键时间间隔大于800毫秒，则不退出 \n                Toast.makeText(MainActivity.this, \"再按一次退出程序...\", \n                        Toast.LENGTH_SHORT).show(); \n                firstTime = secondTime;//更新firstTime \n                return true; \n            } else { \n                System.exit(0);//否则退出程序 \n            } \n        } \n        return super.onKeyUp(keyCode, event); \n    }\n```\n\n# 图片左右循环移动\n```java\nTranslateAnimation left, right;\nright = new TranslateAnimation(Animation.RELATIVE_TO_PARENT, -1f,\n\t\t\t\tAnimation.RELATIVE_TO_PARENT, -2f,\n\t\t\t\tAnimation.RELATIVE_TO_PARENT, 0f, Animation.RELATIVE_TO_PARENT,\n\t\t\t\t0f);\n\t\tleft = new TranslateAnimation(Animation.RELATIVE_TO_PARENT, -2f,\n\t\t\t\tAnimation.RELATIVE_TO_PARENT, -1f,\n\t\t\t\tAnimation.RELATIVE_TO_PARENT, 0f, Animation.RELATIVE_TO_PARENT,\n\t\t\t\t0f);\n\t\tright.setDuration(25000);\n\t\tleft.setDuration(25000);\n\t\tright.setFillAfter(true);\n\t\tleft.setFillAfter(true);\n\n\t\tright.setAnimationListener(new Animation.AnimationListener() {\n\t\t\t@Override\n\t\t\tpublic void onAnimationStart(Animation animation) {\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onAnimationRepeat(Animation animation) {\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onAnimationEnd(Animation animation) {\n\t\t\t\trunImage.startAnimation(left);\n\t\t\t}\n\t\t});\n\t\tleft.setAnimationListener(new Animation.AnimationListener() {\n\t\t\t@Override\n\t\t\tpublic void onAnimationStart(Animation animation) {\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onAnimationRepeat(Animation animation) {\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onAnimationEnd(Animation animation) {\n\t\t\t\trunImage.startAnimation(right);\n\t\t\t}\n\t\t});\n\t\trunImage.startAnimation(right);\n```\n\n\n# 控件左右抖动\nres下anim\nanimlayout.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<translate xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:duration=\"1000\"\n    android:fromXDelta=\"0\"\n    android:interpolator=\"@anim/cycle_7\"\n    android:toXDelta=\"10\" />\n```\ncycle_7.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<cycleInterpolator xmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:cycles=\"7\" />\n```\n(2)java代码\n```java\nAnimation shake = AnimationUtils.loadAnimation(\n\t\t\t\t\t\tMainActivity.this, R.anim.animlayout);\n\t\t\t\tbtn.setAnimation(shake);\n```\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","slug":"android-small-knowledge-base","published":1,"updated":"2016-06-03T09:06:26.309Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge28007oo4pkz3hjn1sa"},{"title":"Android实战Samples之下载","date":"2015-01-20T16:00:00.000Z","_content":"本Samples演示了如何在通知栏里下载，分为默认和自定义的。\n\n###效果图：\n![](http://wuxiaolong.qiniudn.com/2014-11-21-android-samples-download.gif)\n\n<!-- more -->\n\n###源码\n[https://github.com/WuXiaolong/AndroidSamples](https://github.com/WuXiaolong/AndroidSamples)\n\n\n\n###拓展\n>[Android 通知栏Notification学习](http://blog.csdn.net/vipzjyno1/article/details/25248021)\n","source":"_posts/android-samples-download.md","raw":"title: Android实战Samples之下载\ndate: 2015-01-21 \ncategories: [Android]\ntags: [Android]\n---\n本Samples演示了如何在通知栏里下载，分为默认和自定义的。\n\n###效果图：\n![](http://wuxiaolong.qiniudn.com/2014-11-21-android-samples-download.gif)\n\n<!-- more -->\n\n###源码\n[https://github.com/WuXiaolong/AndroidSamples](https://github.com/WuXiaolong/AndroidSamples)\n\n\n\n###拓展\n>[Android 通知栏Notification学习](http://blog.csdn.net/vipzjyno1/article/details/25248021)\n","slug":"android-samples-download","published":1,"updated":"2016-03-17T00:44:06.352Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge2a007ro4pkyzse1rpg"},{"title":"Android开发者应该保持以下特质","date":"2013-06-13T16:00:00.000Z","_content":"1. 深读SDK文档\n2. 深读SDK的APIDemo和Samples\n3. 掌握GIT开源代码\n4. 多了解Android开源项目，学习别人的手法写程序\n","source":"_posts/android-developers-should-keep-the-following-characteristics.md","raw":"title: Android开发者应该保持以下特质\ncategories: [Android]\ntags: [Android]\ndate: 2013-06-14\n---\n1. 深读SDK文档\n2. 深读SDK的APIDemo和Samples\n3. 掌握GIT开源代码\n4. 多了解Android开源项目，学习别人的手法写程序\n","slug":"android-developers-should-keep-the-following-characteristics","published":1,"updated":"2016-03-17T00:44:06.352Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge2c007uo4pk9nor0kug"},{"title":"github之android-async-http使用","date":"2014-10-27T07:28:24.000Z","_content":"## 源码地址\n[https://github.com/loopj/android-async-http](https://github.com/loopj/android-async-http)\n\n## 官方博客\n[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)\n## Gradle\n\n","source":"_posts/android-async-http.md","raw":"title: github之android-async-http使用\ndate: 2014-10-27 15:28:24\ntags: async-http\ncategory: github\n---\n## 源码地址\n[https://github.com/loopj/android-async-http](https://github.com/loopj/android-async-http)\n\n## 官方博客\n[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)\n## Gradle\n\n","slug":"android-async-http","published":1,"updated":"2016-03-17T00:44:06.351Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge2e007xo4pkebyi0ayz"},{"title":"Android ListView addHeaderView","date":"2015-11-10T02:57:25.000Z","_content":"最近在调试我的个人[大湿说app](http://wuxiaolong.github.io/2015/11/09/dashishuo/)，发现在4.2系统下直接崩溃了，看log，原来是ListView addHeaderView和setAdapter方法调用顺利不同导致的错误，这里做下记录。\n<!--more-->\n## 正确调用\n```java\n mListView.addHeaderView(mHeadView);\n mListView.setAdapter(mListViewAdapter);\n```\n## 究其原因\nAndroid-18（4.3）的addHeaderView源码：\n```java\npublic void addHeaderView(View v, Object data, boolean isSelectable) {\n        final FixedViewInfo info = new FixedViewInfo();\n        info.view = v;\n        info.data = data;\n        info.isSelectable = isSelectable;\n        mHeaderViewInfos.add(info);\n \n        // Wrap the adapter if it wasn't already wrapped.\n        if (mAdapter != null) {\n            if (!(mAdapter instanceof HeaderViewListAdapter)) {\n                mAdapter = new HeaderViewListAdapter(mHeaderViewInfos, mFooterViewInfos, mAdapter);\n            }\n \n            // In the case of re-adding a header view, or adding one later on,\n            // we need to notify the observer.\n            if (mDataSetObserver != null) {\n                mDataSetObserver.onChanged();\n            }\n        }\n}\n```\nAndroid-17（4.2）的addHeaderView的源码：\n```java\npublic void addHeaderView(View v, Object data, boolean isSelectable) {\n \n        if (mAdapter != null && ! (mAdapter instanceof HeaderViewListAdapter)) {\n            throw new IllegalStateException(\n                    \"Cannot add header view to list -- setAdapter has already been called.\");\n        }\n \n        FixedViewInfo info = new FixedViewInfo();\n        info.view = v;\n        info.data = data;\n        info.isSelectable = isSelectable;\n        mHeaderViewInfos.add(info);\n \n        // in the case of re-adding a header view, or adding one later on,\n        // we need to notify the observer\n        if (mAdapter != null && mDataSetObserver != null) {\n            mDataSetObserver.onChanged();\n        }\n}\n```\n在17版本中，只要adapter不为空的话，那就直接会抛出异常，而这个异常恰好就是我们文章开头说到的异常。在18版本中，如果adapter不为空的话，则会新建一个adapter，这个adapter会包含了headerview和footerview以及我们传进来的原来的adapter。这是在18版本以后做的一个处理。\n以上源码分析来自:[从源码上分析ListView的addHeaderView和setAdapter的调用顺序](http://blog.csdn.net/wuzhipeng1991/article/details/39023883)\n\n## 大湿说\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuo_meizu.png)\n魅族应用市场累计下载`4.4万+`，我可没有做过什么推广哦，精品APP，值得下载！\n## 二维码下载\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuoDownload.png)\n\n## 应用市场\n[魅族应用市场](http://app.meizu.com/apps/public/detail?package_name=com.xiaomolong.ufosay)\n[小米应用市场](http://app.mi.com/detail/65621)","source":"_posts/addHeaderView.md","raw":"title: Android ListView addHeaderView\ndate: 2015-11-10 10:57:25\ntags: [ListView,addHeaderView]\ncategory: Android\n---\n最近在调试我的个人[大湿说app](http://wuxiaolong.github.io/2015/11/09/dashishuo/)，发现在4.2系统下直接崩溃了，看log，原来是ListView addHeaderView和setAdapter方法调用顺利不同导致的错误，这里做下记录。\n<!--more-->\n## 正确调用\n```java\n mListView.addHeaderView(mHeadView);\n mListView.setAdapter(mListViewAdapter);\n```\n## 究其原因\nAndroid-18（4.3）的addHeaderView源码：\n```java\npublic void addHeaderView(View v, Object data, boolean isSelectable) {\n        final FixedViewInfo info = new FixedViewInfo();\n        info.view = v;\n        info.data = data;\n        info.isSelectable = isSelectable;\n        mHeaderViewInfos.add(info);\n \n        // Wrap the adapter if it wasn't already wrapped.\n        if (mAdapter != null) {\n            if (!(mAdapter instanceof HeaderViewListAdapter)) {\n                mAdapter = new HeaderViewListAdapter(mHeaderViewInfos, mFooterViewInfos, mAdapter);\n            }\n \n            // In the case of re-adding a header view, or adding one later on,\n            // we need to notify the observer.\n            if (mDataSetObserver != null) {\n                mDataSetObserver.onChanged();\n            }\n        }\n}\n```\nAndroid-17（4.2）的addHeaderView的源码：\n```java\npublic void addHeaderView(View v, Object data, boolean isSelectable) {\n \n        if (mAdapter != null && ! (mAdapter instanceof HeaderViewListAdapter)) {\n            throw new IllegalStateException(\n                    \"Cannot add header view to list -- setAdapter has already been called.\");\n        }\n \n        FixedViewInfo info = new FixedViewInfo();\n        info.view = v;\n        info.data = data;\n        info.isSelectable = isSelectable;\n        mHeaderViewInfos.add(info);\n \n        // in the case of re-adding a header view, or adding one later on,\n        // we need to notify the observer\n        if (mAdapter != null && mDataSetObserver != null) {\n            mDataSetObserver.onChanged();\n        }\n}\n```\n在17版本中，只要adapter不为空的话，那就直接会抛出异常，而这个异常恰好就是我们文章开头说到的异常。在18版本中，如果adapter不为空的话，则会新建一个adapter，这个adapter会包含了headerview和footerview以及我们传进来的原来的adapter。这是在18版本以后做的一个处理。\n以上源码分析来自:[从源码上分析ListView的addHeaderView和setAdapter的调用顺序](http://blog.csdn.net/wuzhipeng1991/article/details/39023883)\n\n## 大湿说\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuo_meizu.png)\n魅族应用市场累计下载`4.4万+`，我可没有做过什么推广哦，精品APP，值得下载！\n## 二维码下载\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuoDownload.png)\n\n## 应用市场\n[魅族应用市场](http://app.meizu.com/apps/public/detail?package_name=com.xiaomolong.ufosay)\n[小米应用市场](http://app.mi.com/detail/65621)","slug":"addHeaderView","published":1,"updated":"2016-03-17T00:44:06.351Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge2g0081o4pk0crxwwuz"},{"title":"剩者为王","date":"2015-11-25T06:57:37.000Z","_content":"> 此项目当初为了练手Android studio beta版，项目开源。现进行重构和优化，采用MVP模式。\n\n## 效果预览\n![](https://github.com/WuXiaolong/WeWin/raw/master/screenshots/screenshots.gif)\n<!--more-->\n## APK演示\n\n项目apk文件夹下附带安装包\n\n[点击下载](https://github.com/WuXiaolong/WeWin/raw/master/apk/app-debug.apk)\n\n## 应用市场\n[魅族应用商店](http://app.meizu.com/apps/public/detail?package_name=com.xiaomolongstudio.wewin)\n\n[小米应用商店](http://app.mi.com/detail/67787)\n\n## 源码地址\n[https://github.com/WuXiaolong/WeWin](https://github.com/WuXiaolong/WeWin)\n\n## 用到的开源库\n目前用到的一些开源库，感谢作者无私开源和服务。\n\n* [PullLoadMoreRecyclerView](https://github.com/WuXiaolong/PullLoadMoreRecyclerView)，实现RecyclerView下拉刷新和上拉加载更多以及瀑布流效果\n* [Titanic](https://github.com/RomainPiel/Titanic)，TextView一闪一闪动画效果\n* [ButterKnife](https://github.com/JakeWharton/butterknife)，轻量级View注入框架，省去各种findViewById\n* [PhotoView](https://github.com/chrisbanes/PhotoView)，点击放大缩小\n* [picasso](https://github.com/square/picasso)，图片缓存机制\n* [android-async-http](https://github.com/loopj/android-async-http)，网络请求框架\n* 整体框架，侧滑菜单，类QQ效果。\n* [CustomShapeImageView](https://github.com/MostafaGazar/CustomShapeImageView)，各种圆角\n* [NineOldAndroids](https://github.com/JakeWharton/NineOldAndroids)，3.0以下兼容动画\n* [AndroidMVPSample](https://github.com/WuXiaolong/AndroidMVPSample)，Android MVP 实例\n* 友盟，包括友盟的统计、升级、意见反馈、推送\n* 数据来源：[http://www.juzimi.com/meitumeiju](http://www.juzimi.com/meitumeiju)\n\n\n## 更多交流\n### Android技术交流群\n<!---\n②群：376526418<a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=5017aa79b1bc2726134ce1d6bc3060306022d1a2155f303709b02824d47a8e59\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王②群\" title=\"剩者为王②群\"></a><br><br>\n-->\n③群：370527306<a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n### 作者博客\n[http://wuxiaolong.me/](http://wuxiaolong.me/)\n\n### 微博\n[吴小龙同學](http://weibo.com/u/2175011601)\n\n\n\n\n","source":"_posts/WeWin.md","raw":"title: 剩者为王\ndate: 2015-11-25 14:57:37\ntags: [Life,WeWin]\ncategory: App\n---\n> 此项目当初为了练手Android studio beta版，项目开源。现进行重构和优化，采用MVP模式。\n\n## 效果预览\n![](https://github.com/WuXiaolong/WeWin/raw/master/screenshots/screenshots.gif)\n<!--more-->\n## APK演示\n\n项目apk文件夹下附带安装包\n\n[点击下载](https://github.com/WuXiaolong/WeWin/raw/master/apk/app-debug.apk)\n\n## 应用市场\n[魅族应用商店](http://app.meizu.com/apps/public/detail?package_name=com.xiaomolongstudio.wewin)\n\n[小米应用商店](http://app.mi.com/detail/67787)\n\n## 源码地址\n[https://github.com/WuXiaolong/WeWin](https://github.com/WuXiaolong/WeWin)\n\n## 用到的开源库\n目前用到的一些开源库，感谢作者无私开源和服务。\n\n* [PullLoadMoreRecyclerView](https://github.com/WuXiaolong/PullLoadMoreRecyclerView)，实现RecyclerView下拉刷新和上拉加载更多以及瀑布流效果\n* [Titanic](https://github.com/RomainPiel/Titanic)，TextView一闪一闪动画效果\n* [ButterKnife](https://github.com/JakeWharton/butterknife)，轻量级View注入框架，省去各种findViewById\n* [PhotoView](https://github.com/chrisbanes/PhotoView)，点击放大缩小\n* [picasso](https://github.com/square/picasso)，图片缓存机制\n* [android-async-http](https://github.com/loopj/android-async-http)，网络请求框架\n* 整体框架，侧滑菜单，类QQ效果。\n* [CustomShapeImageView](https://github.com/MostafaGazar/CustomShapeImageView)，各种圆角\n* [NineOldAndroids](https://github.com/JakeWharton/NineOldAndroids)，3.0以下兼容动画\n* [AndroidMVPSample](https://github.com/WuXiaolong/AndroidMVPSample)，Android MVP 实例\n* 友盟，包括友盟的统计、升级、意见反馈、推送\n* 数据来源：[http://www.juzimi.com/meitumeiju](http://www.juzimi.com/meitumeiju)\n\n\n## 更多交流\n### Android技术交流群\n<!---\n②群：376526418<a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=5017aa79b1bc2726134ce1d6bc3060306022d1a2155f303709b02824d47a8e59\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王②群\" title=\"剩者为王②群\"></a><br><br>\n-->\n③群：370527306<a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n### 作者博客\n[http://wuxiaolong.me/](http://wuxiaolong.me/)\n\n### 微博\n[吴小龙同學](http://weibo.com/u/2175011601)\n\n\n\n\n","slug":"WeWin","published":1,"updated":"2016-03-17T00:44:06.351Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge2j0086o4pkb0ftdnha"},{"title":"Android Volley使用","date":"2015-10-16T08:46:49.000Z","_content":"## 导入Volley\nVolley貌似没有官方的Maven repository，你必须依赖官方的源代码。从它的repository 下载Volley源码。使用Git命令：\n\n```java\ngit clone https://android.googlesource.com/platform/frameworks/volley\n```\n不过还有第三种方法，你可以在build.gradle 文件的依赖部分添加这行代码：\n\n```java\ncompile 'com.mcxiaoke.volley:library-aar:1.0.15'\n```\n<!--more-->\n\n## 准备工作\n* 权限\n```js\n<uses-permission android:name=\"android.permission.INTERNET\" />\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/>\n```\n* 变量\n RequestQueue mRequestQueue = Volley.newRequestQueue(this);\n\n## 实践\nVolley实现了三种常见的请求类型：\nStringRequest\nJsonObjectRequest\nImageRequest\n\n### StringRequest\n```java\nprivate void stringRequest() {\n\n        showMsg.setText(\"\");\n        progressBar.setVisibility(View.VISIBLE);\n        String url = \"http://wuxiaolong.me/\";\n        StringRequest stringRequest = new StringRequest(Request.Method.GET, url, new Response.Listener<String>() {\n            @Override\n            public void onResponse(String response) {\n                showMsg.setText(\"stringRequest==\" + response);\n                progressBar.setVisibility(View.GONE);\n                Log.d(\"wxl\", \"stringRequest==\" + response);\n            }\n        }, new Response.ErrorListener() {\n            @Override\n            public void onErrorResponse(VolleyError error) {\n                Log.d(\"wxl\", \"StringRequest error==\" + error);\n                progressBar.setVisibility(View.GONE);\n            }\n        });\n        stringRequest.setTag(\"stringRequest\");\n        //如果要取消stringRequest请求，只需简单的添加下面的一行代码：\n        // mRequestQueue.cancelAll(\"stringRequest\");\n        mRequestQueue.add(stringRequest);\n    }\n```\n\n### JsonObjectRequest\n```java\n private void jsonObjectRequest() {\n        showMsg.setText(\"\");\n        progressBar.setVisibility(View.VISIBLE);\n        String url = \"http://httpbin.org/get?site=code&network=tutsplus\";\n        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(Request.Method.GET, url, null, new Response.Listener<JSONObject>() {\n            @Override\n            public void onResponse(JSONObject response) {\n                showMsg.setText(\"JsonObjectRequest==\" + response);\n                progressBar.setVisibility(View.GONE);\n            }\n        }, new Response.ErrorListener() {\n            @Override\n            public void onErrorResponse(VolleyError error) {\n                showMsg.setText(\"JsonObjectRequest error==\" + error);\n                progressBar.setVisibility(View.GONE);\n            }\n        });\n        mRequestQueue.add(jsonObjectRequest);\n    }\n```\n如果请求JSONArray ，只需用JsonArrayRequest 替代aJsonObjectRequest就可以了\n\n### ImageRequest\n有三种请求图片的方法。\n* ImageRequest\n```java\n/**\n     * 第一个参数是图片的url，\n     * 第二个是结果的listener，\n     * 第三、第四个参数是maxWidth（最大宽度） 和 maxHeight（最大高度），你可以设置为0来忽略他们。\n     * 第五个参数是用于计算图片所需大小的ScaleType，\n     * 第六个参数是用于指定图片压缩方式的参数，建议总是使用 Bitmap.Config.ARGB_8888\n     */\n    private void iamgeRequest() {\n\n        showMsg.setText(\"\");\n        progressBar.setVisibility(View.VISIBLE);\n        showImage.setImageBitmap(null);\n        String url = \"http://p3.so.qhimg.com/t012befc69d1b6d8f88.jpg\";\n        ImageRequest imageRequest = new ImageRequest(url, new Response.Listener<Bitmap>() {\n            @Override\n            public void onResponse(Bitmap response) {\n                showImage.setImageBitmap(response);\n                progressBar.setVisibility(View.GONE);\n            }\n        }, 0, 0, ImageView.ScaleType.FIT_XY, Bitmap.Config.ARGB_8888, new Response.ErrorListener() {\n            @Override\n            public void onErrorResponse(VolleyError error) {\n                progressBar.setVisibility(View.GONE);\n                showMsg.setText(\"ImageRequest error==\" + error);\n            }\n        });\n        mRequestQueue.add(imageRequest);\n    }\n```\n\n* imageLoader+NetworkImageView\nNetworkImageView xml\n```js\n <com.android.volley.toolbox.NetworkImageView\n                android:id=\"@+id/networkImageView\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginTop=\"10dp\"\n                android:layout_gravity=\"center_horizontal\"\n                android:src=\"@mipmap/ic_launcher\" />\n```\nNetworkImageView在加载图片的时候会自动获取自身控件的宽高，然后对比网络图片的宽度，再决定是否需要对图片进行压缩。也就是说，压缩过程是在内部完全自动化的，并不需要我们关心，NetworkImageView会始终呈现给我们一张大小刚刚好的网络图片，不会多占用任何一点内存。\n\n如果不想对图片进行压缩的话，只需要在布局文件中把NetworkImageView的layout_width和layout_height都设置成wrap_content就可以了，这样NetworkImageView就会将该图片的原始大小展示出来，不会进行任何压缩。\n```java\n  /**\n     * 数量庞大的ImageRequests，比如生成一个带有图片的ListView\n     */\n    private void imageLoader() {\n\n        showMsg.setText(\"\");\n        showImage.setImageBitmap(null);\n        progressBar.setVisibility(View.VISIBLE);\n        String url = \"http://p0.so.qhimg.com/t0191efbe9e784617e5.jpg\";\n        int maxSize = 10 * 1024 * 1024;//设置缓存图片的大小为10M\n        final LruCache<String, Bitmap> lruCache = new LruCache<String, Bitmap>(maxSize) {\n            @Override\n            protected int sizeOf(String key, Bitmap bitmap) {\n                return bitmap.getRowBytes() * bitmap.getHeight();\n            }\n        };\n        ImageLoader imageLoader = new ImageLoader(mRequestQueue, new ImageLoader.ImageCache() {\n            @Override\n            public Bitmap getBitmap(String url) {\n                return lruCache.get(url);\n            }\n\n            @Override\n            public void putBitmap(String url, Bitmap bitmap) {\n                lruCache.put(url, bitmap);\n            }\n        });\n        imageLoader.get(url, new ImageLoader.ImageListener() {\n            @Override\n            public void onResponse(ImageLoader.ImageContainer response, boolean isImmediate) {\n                showImage.setImageBitmap(response.getBitmap());\n                progressBar.setVisibility(View.GONE);\n            }\n\n            @Override\n            public void onErrorResponse(VolleyError error) {\n                progressBar.setVisibility(View.GONE);\n                showMsg.setText(\"ImageRequest error==\" + error);\n            }\n        }, 0, 0, ImageView.ScaleType.FIT_XY);\n\t\t//以下是NetworkImageView部分\n        networkImageView.setDefaultImageResId(R.mipmap.ic_launcher);\n        networkImageView.setErrorImageResId(R.mipmap.ic_launcher);\n        networkImageView.setImageUrl(\"http://p2.so.qhimg.com/t01ac4a335801991667.jpg\", imageLoader);\n    }\n\n```\n\n### postRequest\n```java\n private void postRequest() {\n        showMsg.setText(\"\");\n        progressBar.setVisibility(View.VISIBLE);\n        String url = \"http://httpbin.org/post\";\n\n        StringRequest postRequest = new StringRequest(Request.Method.POST, url,\n                new Response.Listener<String>() {\n                    @Override\n                    public void onResponse(String response) {\n                        try {\n                            JSONObject jsonResponse = new JSONObject(response).getJSONObject(\"form\");\n                            String site = jsonResponse.getString(\"site\"),\n                                    network = jsonResponse.getString(\"network\");\n                            System.out.println(\"Site: \" + site + \"\\nNetwork: \" + network);\n                            showMsg.setText(\"PostRequest==\" + \"Site: \" + site + \"\\nNetwork: \" + network);\n                            progressBar.setVisibility(View.GONE);\n                        } catch (JSONException e) {\n                            e.printStackTrace();\n                        }\n                    }\n                },\n                new Response.ErrorListener() {\n                    @Override\n                    public void onErrorResponse(VolleyError error) {\n                        error.printStackTrace();\n                        showMsg.setText(\"PostRequest error==\" + error);\n                        progressBar.setVisibility(View.GONE);\n                    }\n                }\n        ) {\n            @Override\n            protected Map<String, String> getParams() {\n                Map<String, String> params = new HashMap<>();\n                // the POST parameters:\n                params.put(\"site\", \"code\");\n                params.put(\"network\", \"tutsplus\");\n                return params;\n            }\n        };\n        mRequestQueue.add(postRequest);\n    }\n```\n\n## 取消Volley\n```java\n @Override\n    protected void onStop() {\n        super.onStop();\n        mRequestQueue.cancelAll(new RequestQueue.RequestFilter() {\n            @Override\n            public boolean apply(Request<?> request) {\n                // do I have to cancel this?\n                return true; // -> always yes\n            }\n        });\n    }\n```\n## 源码地址\n[https://github.com/WuXiaolong/VolleySample](https://github.com/WuXiaolong/VolleySample)\n\n## 附录\n[网络请求库Volley详解](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0526/2934.html)\n[Android开源：网络框架volley使用(一)](http://glblong.blog.51cto.com/3058613/1406758)","source":"_posts/Volley.md","raw":"title: Android Volley使用\ndate: 2015-10-16 16:46:49\ntags: [Android,Volley]\ncategory: Android\n---\n## 导入Volley\nVolley貌似没有官方的Maven repository，你必须依赖官方的源代码。从它的repository 下载Volley源码。使用Git命令：\n\n```java\ngit clone https://android.googlesource.com/platform/frameworks/volley\n```\n不过还有第三种方法，你可以在build.gradle 文件的依赖部分添加这行代码：\n\n```java\ncompile 'com.mcxiaoke.volley:library-aar:1.0.15'\n```\n<!--more-->\n\n## 准备工作\n* 权限\n```js\n<uses-permission android:name=\"android.permission.INTERNET\" />\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/>\n```\n* 变量\n RequestQueue mRequestQueue = Volley.newRequestQueue(this);\n\n## 实践\nVolley实现了三种常见的请求类型：\nStringRequest\nJsonObjectRequest\nImageRequest\n\n### StringRequest\n```java\nprivate void stringRequest() {\n\n        showMsg.setText(\"\");\n        progressBar.setVisibility(View.VISIBLE);\n        String url = \"http://wuxiaolong.me/\";\n        StringRequest stringRequest = new StringRequest(Request.Method.GET, url, new Response.Listener<String>() {\n            @Override\n            public void onResponse(String response) {\n                showMsg.setText(\"stringRequest==\" + response);\n                progressBar.setVisibility(View.GONE);\n                Log.d(\"wxl\", \"stringRequest==\" + response);\n            }\n        }, new Response.ErrorListener() {\n            @Override\n            public void onErrorResponse(VolleyError error) {\n                Log.d(\"wxl\", \"StringRequest error==\" + error);\n                progressBar.setVisibility(View.GONE);\n            }\n        });\n        stringRequest.setTag(\"stringRequest\");\n        //如果要取消stringRequest请求，只需简单的添加下面的一行代码：\n        // mRequestQueue.cancelAll(\"stringRequest\");\n        mRequestQueue.add(stringRequest);\n    }\n```\n\n### JsonObjectRequest\n```java\n private void jsonObjectRequest() {\n        showMsg.setText(\"\");\n        progressBar.setVisibility(View.VISIBLE);\n        String url = \"http://httpbin.org/get?site=code&network=tutsplus\";\n        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(Request.Method.GET, url, null, new Response.Listener<JSONObject>() {\n            @Override\n            public void onResponse(JSONObject response) {\n                showMsg.setText(\"JsonObjectRequest==\" + response);\n                progressBar.setVisibility(View.GONE);\n            }\n        }, new Response.ErrorListener() {\n            @Override\n            public void onErrorResponse(VolleyError error) {\n                showMsg.setText(\"JsonObjectRequest error==\" + error);\n                progressBar.setVisibility(View.GONE);\n            }\n        });\n        mRequestQueue.add(jsonObjectRequest);\n    }\n```\n如果请求JSONArray ，只需用JsonArrayRequest 替代aJsonObjectRequest就可以了\n\n### ImageRequest\n有三种请求图片的方法。\n* ImageRequest\n```java\n/**\n     * 第一个参数是图片的url，\n     * 第二个是结果的listener，\n     * 第三、第四个参数是maxWidth（最大宽度） 和 maxHeight（最大高度），你可以设置为0来忽略他们。\n     * 第五个参数是用于计算图片所需大小的ScaleType，\n     * 第六个参数是用于指定图片压缩方式的参数，建议总是使用 Bitmap.Config.ARGB_8888\n     */\n    private void iamgeRequest() {\n\n        showMsg.setText(\"\");\n        progressBar.setVisibility(View.VISIBLE);\n        showImage.setImageBitmap(null);\n        String url = \"http://p3.so.qhimg.com/t012befc69d1b6d8f88.jpg\";\n        ImageRequest imageRequest = new ImageRequest(url, new Response.Listener<Bitmap>() {\n            @Override\n            public void onResponse(Bitmap response) {\n                showImage.setImageBitmap(response);\n                progressBar.setVisibility(View.GONE);\n            }\n        }, 0, 0, ImageView.ScaleType.FIT_XY, Bitmap.Config.ARGB_8888, new Response.ErrorListener() {\n            @Override\n            public void onErrorResponse(VolleyError error) {\n                progressBar.setVisibility(View.GONE);\n                showMsg.setText(\"ImageRequest error==\" + error);\n            }\n        });\n        mRequestQueue.add(imageRequest);\n    }\n```\n\n* imageLoader+NetworkImageView\nNetworkImageView xml\n```js\n <com.android.volley.toolbox.NetworkImageView\n                android:id=\"@+id/networkImageView\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginTop=\"10dp\"\n                android:layout_gravity=\"center_horizontal\"\n                android:src=\"@mipmap/ic_launcher\" />\n```\nNetworkImageView在加载图片的时候会自动获取自身控件的宽高，然后对比网络图片的宽度，再决定是否需要对图片进行压缩。也就是说，压缩过程是在内部完全自动化的，并不需要我们关心，NetworkImageView会始终呈现给我们一张大小刚刚好的网络图片，不会多占用任何一点内存。\n\n如果不想对图片进行压缩的话，只需要在布局文件中把NetworkImageView的layout_width和layout_height都设置成wrap_content就可以了，这样NetworkImageView就会将该图片的原始大小展示出来，不会进行任何压缩。\n```java\n  /**\n     * 数量庞大的ImageRequests，比如生成一个带有图片的ListView\n     */\n    private void imageLoader() {\n\n        showMsg.setText(\"\");\n        showImage.setImageBitmap(null);\n        progressBar.setVisibility(View.VISIBLE);\n        String url = \"http://p0.so.qhimg.com/t0191efbe9e784617e5.jpg\";\n        int maxSize = 10 * 1024 * 1024;//设置缓存图片的大小为10M\n        final LruCache<String, Bitmap> lruCache = new LruCache<String, Bitmap>(maxSize) {\n            @Override\n            protected int sizeOf(String key, Bitmap bitmap) {\n                return bitmap.getRowBytes() * bitmap.getHeight();\n            }\n        };\n        ImageLoader imageLoader = new ImageLoader(mRequestQueue, new ImageLoader.ImageCache() {\n            @Override\n            public Bitmap getBitmap(String url) {\n                return lruCache.get(url);\n            }\n\n            @Override\n            public void putBitmap(String url, Bitmap bitmap) {\n                lruCache.put(url, bitmap);\n            }\n        });\n        imageLoader.get(url, new ImageLoader.ImageListener() {\n            @Override\n            public void onResponse(ImageLoader.ImageContainer response, boolean isImmediate) {\n                showImage.setImageBitmap(response.getBitmap());\n                progressBar.setVisibility(View.GONE);\n            }\n\n            @Override\n            public void onErrorResponse(VolleyError error) {\n                progressBar.setVisibility(View.GONE);\n                showMsg.setText(\"ImageRequest error==\" + error);\n            }\n        }, 0, 0, ImageView.ScaleType.FIT_XY);\n\t\t//以下是NetworkImageView部分\n        networkImageView.setDefaultImageResId(R.mipmap.ic_launcher);\n        networkImageView.setErrorImageResId(R.mipmap.ic_launcher);\n        networkImageView.setImageUrl(\"http://p2.so.qhimg.com/t01ac4a335801991667.jpg\", imageLoader);\n    }\n\n```\n\n### postRequest\n```java\n private void postRequest() {\n        showMsg.setText(\"\");\n        progressBar.setVisibility(View.VISIBLE);\n        String url = \"http://httpbin.org/post\";\n\n        StringRequest postRequest = new StringRequest(Request.Method.POST, url,\n                new Response.Listener<String>() {\n                    @Override\n                    public void onResponse(String response) {\n                        try {\n                            JSONObject jsonResponse = new JSONObject(response).getJSONObject(\"form\");\n                            String site = jsonResponse.getString(\"site\"),\n                                    network = jsonResponse.getString(\"network\");\n                            System.out.println(\"Site: \" + site + \"\\nNetwork: \" + network);\n                            showMsg.setText(\"PostRequest==\" + \"Site: \" + site + \"\\nNetwork: \" + network);\n                            progressBar.setVisibility(View.GONE);\n                        } catch (JSONException e) {\n                            e.printStackTrace();\n                        }\n                    }\n                },\n                new Response.ErrorListener() {\n                    @Override\n                    public void onErrorResponse(VolleyError error) {\n                        error.printStackTrace();\n                        showMsg.setText(\"PostRequest error==\" + error);\n                        progressBar.setVisibility(View.GONE);\n                    }\n                }\n        ) {\n            @Override\n            protected Map<String, String> getParams() {\n                Map<String, String> params = new HashMap<>();\n                // the POST parameters:\n                params.put(\"site\", \"code\");\n                params.put(\"network\", \"tutsplus\");\n                return params;\n            }\n        };\n        mRequestQueue.add(postRequest);\n    }\n```\n\n## 取消Volley\n```java\n @Override\n    protected void onStop() {\n        super.onStop();\n        mRequestQueue.cancelAll(new RequestQueue.RequestFilter() {\n            @Override\n            public boolean apply(Request<?> request) {\n                // do I have to cancel this?\n                return true; // -> always yes\n            }\n        });\n    }\n```\n## 源码地址\n[https://github.com/WuXiaolong/VolleySample](https://github.com/WuXiaolong/VolleySample)\n\n## 附录\n[网络请求库Volley详解](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0526/2934.html)\n[Android开源：网络框架volley使用(一)](http://glblong.blog.51cto.com/3058613/1406758)","slug":"Volley","published":1,"updated":"2016-03-17T00:44:06.351Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge2m008bo4pk024vkkel"},{"title":"Android ViewDragHelper实例","date":"2015-12-04T08:45:12.000Z","_content":"## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/ViewDragHelper.gif)\n\n## ViewDragHelper创建\n```java\n   //创建ViewDragHelper的实例，第一个参数是ViewGroup，传自己，\n   // 第二个参数就是滑动灵敏度的意思,可以随意设置，第三个是回调\n   mViewDragHelper = ViewDragHelper.create(this, 1.0f, new DragHelperCallback());\n```\n<!--more-->\n这里列举常用的ViewDragHelper.Callback方法\n```java\nclass DragHelperCallback extends ViewDragHelper.Callback {\n\n        /**\n         * 根据返回结果决定当前child是否可以拖拽\n         *\n         * @param child 当前被拖拽的view\n         * @param pointerId 区分多点触摸的id\n         * @return\n         */\n        @Override\n        public boolean tryCaptureView(View child, int pointerId) {\n             return false;\n        }\n\n        /**\n         * 返回拖拽的范围，不对拖拽进行真正的限制，仅仅决定了动画执行速度\n         * @param child\n         * @return\n         */\n        @Override\n        public int getViewHorizontalDragRange(View child) {\n            return super.getViewHorizontalDragRange(child);\n        }\n\n        /**\n         * @param child\n          * @param left  代表你将要移动到的位置的坐标,返回值就是最终确定的移动的位置,\n         *              判断如果这个坐标在layout之内,那我们就返回这个坐标值，\n         *              不能让他超出这个范围, 除此之外就是如果你的layout设置了padding的话，\n         *              让子view的活动范围在padding之内的\n         * @param dx\n         * @return\n         */\n        @Override\n        public int clampViewPositionHorizontal(View child, int left, int dx) {\n\t\t return super.clampViewPositionHorizontal(child, left, dx);\n        }\n\n\n        /**\n         * 位置改变时回调，常用于滑动是更改scale进行缩放等效果\n         *\n         * @param changedView\n         * @param left\n         * @param top\n         * @param dx 横向滑动的加速度\n         * @param dy\n         */\n        @Override\n        public void onViewPositionChanged(View changedView, int left, int top, int dx, int dy) {\n\t\t  super.onViewPositionChanged(changedView, left, top, dx, dy);\n        }\n\n        /**\n         * 拖动结束后调用\n         *\n         * @param releasedChild\n         * @param xvel 水平方向的速度  向右为正\n         * @param yvel 竖直方向的速度  向下为正\n         */\n        @Override\n        public void onViewReleased(View releasedChild, float xvel, float yvel) {\n            super.onViewReleased(releasedChild, xvel, yvel);\n        }\n    }\n```\n## 实例代码\n```java\npackage com.wuxiaolong.apksample;\n\nimport android.annotation.TargetApi;\nimport android.content.Context;\nimport android.os.Build;\nimport android.support.v4.view.GestureDetectorCompat;\nimport android.support.v4.view.ViewCompat;\nimport android.support.v4.widget.ViewDragHelper;\nimport android.util.AttributeSet;\nimport android.view.GestureDetector;\nimport android.view.MotionEvent;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.LinearLayout;\n\n/**\n * Created by WuXiaolong on 2015/12/4.\n */\npublic class ViewDragLayout extends LinearLayout {\n    /**\n     * 内容界面\n     */\n    private ViewGroup mContentLayout;\n\n    /**\n     * 遮盖界面\n     */\n    private ViewGroup mBehindLayout;\n\n    private ViewDragHelper mViewDragHelper;\n\n    /**\n     * 手势事件类\n     */\n    private GestureDetectorCompat mGestureDetectorCompat;\n\n    /**\n     * 滑动距离\n     */\n    private int mViewDragRange;\n\n    /**\n     * 左滑最大距离\n     */\n    private int mBehindLayoutWidth;\n    /**\n     * 宽度\n     */\n    private int mContentLayoutWidth;\n\n    private ViewDragListener mViewDragListener;\n\n    private boolean isOpen = false;\n\n    public ViewDragLayout(Context context) {\n        super(context);\n        init();\n    }\n\n    public ViewDragLayout(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        init();\n    }\n\n    public ViewDragLayout(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        init();\n    }\n\n    @TargetApi(Build.VERSION_CODES.LOLLIPOP)\n    public ViewDragLayout(Context context, AttributeSet attrs,\n                          int defStyleAttr, int defStyleRes) {\n        super(context, attrs, defStyleAttr, defStyleRes);\n        init();\n    }\n\n    /**\n     * View中所有的子控件均被映射成xml后触发\n     */\n    @Override\n    protected void onFinishInflate() {\n        mContentLayout = (ViewGroup) getChildAt(0);\n        mBehindLayout = (ViewGroup) getChildAt(1);\n        mBehindLayout.setClickable(true);\n        mContentLayout.setClickable(true);\n        super.onFinishInflate();\n    }\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n\n        mContentLayoutWidth = mContentLayout.getMeasuredWidth();\n        mBehindLayoutWidth = mBehindLayout.getMeasuredWidth();\n\n    }\n\n    /**\n     * 设置监听\n     */\n    public void setOnViewDragListener(ViewDragListener viewDragListener) {\n        this.mViewDragListener = viewDragListener;\n    }\n\n\n    public interface ViewDragListener {\n        void onOpen();\n\n        void onClose();\n\n        void onDrag(float percent);\n\n    }\n\n\n    /**\n     * 滑动时松手后以一定速率继续自动滑动下去并逐渐停止，\n     * 类似于扔东西或者松手后自动滑动到指定位置\n     */\n    @Override\n    public void computeScroll() {\n        if (mViewDragHelper.continueSettling(true)) {\n            ViewCompat.postInvalidateOnAnimation(this);\n        }\n    }\n\n    /**\n     * 初始化\n     */\n    private void init() {\n        //创建ViewDragHelper的实例，第一个参数是ViewGroup，传自己，\n        // 第二个参数就是滑动灵敏度的意思,可以随意设置，第三个是回调\n        mViewDragHelper = ViewDragHelper.create(this, 1.0f, new DragHelperCallback());\n        //手势操作，第二参数什么意思看下面\n        mGestureDetectorCompat = new GestureDetectorCompat(getContext(), new XScrollDetector());\n    }\n\n    class DragHelperCallback extends ViewDragHelper.Callback {\n\n        /**\n         * 根据返回结果决定当前child是否可以拖拽\n         *\n         * @param child     当前被拖拽的view\n         * @param pointerId 区分多点触摸的id\n         * @return\n         */\n        @Override\n        public boolean tryCaptureView(View child, int pointerId) {\n            return mContentLayout == child;\n        }\n\n        /**\n         * 返回拖拽的范围，不对拖拽进行真正的限制，仅仅决定了动画执行速度\n         *\n         * @param child\n         * @return\n         */\n        @Override\n        public int getViewHorizontalDragRange(View child) {\n            return mContentLayoutWidth;\n        }\n\n        /**\n         * @param child\n         * @param left  代表你将要移动到的位置的坐标,返回值就是最终确定的移动的位置,\n         *              判断如果这个坐标在layout之内,那我们就返回这个坐标值，\n         *              不能让他超出这个范围, 除此之外就是如果你的layout设置了padding的话，\n         *              让子view的活动范围在padding之内的\n         * @param dx\n         * @return\n         */\n        @Override\n        public int clampViewPositionHorizontal(View child, int left, int dx) {\n//            Log.d(\"wxl\", \"clampViewPositionHorizontal left=\" + left);\n            if (child == mContentLayout) {\n                int newLeft = Math.min(\n                        Math.max((-getPaddingLeft() - mBehindLayoutWidth), left), 0);\n                return newLeft;\n            } else {\n                int newLeft = Math.min(\n                        Math.max(left, getPaddingLeft() + mContentLayoutWidth - mBehindLayoutWidth),\n                        (getPaddingLeft() + mContentLayoutWidth + getPaddingRight()));\n                return newLeft;\n            }\n        }\n\n\n        /**\n         * 位置改变时回调，常用于滑动是更改scale进行缩放等效果\n         *\n         * @param changedView\n         * @param left\n         * @param top\n         * @param dx          横向滑动的加速度\n         * @param dy\n         */\n        @Override\n        public void onViewPositionChanged(\n                View changedView, int left, int top, int dx, int dy) {\n//            Log.d(\"wxl\", \"onViewPositionChanged left=\" + left);\n            mViewDragRange = left;\n            float percent = Math.abs((float) left / (float) mContentLayoutWidth);\n            if (null != mViewDragListener)\n                mViewDragListener.onDrag(percent);\n            if (changedView == mContentLayout) {\n                mBehindLayout.offsetLeftAndRight(dx);\n            } else {\n                mContentLayout.offsetLeftAndRight(dx);\n            }\n            invalidate();\n        }\n\n        /**\n         * 拖动结束后调用\n         *\n         * @param releasedChild\n         * @param xvel          水平方向的速度  向右为正\n         * @param yvel          竖直方向的速度  向下为正\n         */\n        @Override\n        public void onViewReleased(View releasedChild, float xvel, float yvel) {\n            if (releasedChild == mContentLayout) {\n                if (xvel <= 0) {//向左滑动\n                    if (-mViewDragRange >= mBehindLayoutWidth / 2\n                            && -mViewDragRange <= mBehindLayoutWidth) {\n                        open();\n                    } else {\n                        close();\n                    }\n                } else {//向右滑动\n                    if (-mViewDragRange >= 0\n                            && -mViewDragRange <= mBehindLayoutWidth) {\n                        close();\n                    } else {\n                        open();\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * 打开\n     */\n    public void open() {\n        if (mViewDragHelper.smoothSlideViewTo(\n                mContentLayout, -mBehindLayoutWidth, 0)) {\n            ViewCompat.postInvalidateOnAnimation(this);\n        }\n        if (null != mViewDragListener)\n            mViewDragListener.onOpen();\n        isOpen = true;\n    }\n\n    /**\n     * 关闭\n     */\n    public void close() {\n        if (mViewDragHelper.smoothSlideViewTo(mContentLayout, 0, 0)) {\n            ViewCompat.postInvalidateOnAnimation(this);\n        }\n        if (null != mViewDragListener)\n            mViewDragListener.onClose();\n        isOpen = false;\n    }\n\n    public boolean isOpen() {\n        return isOpen;\n    }\n\n    /**\n     * 手势监听回调,\n     * SimpleOnGestureListener为了不用重写那么多监听的帮助类\n     */\n    private class XScrollDetector extends GestureDetector.SimpleOnGestureListener {\n\n        @Override\n        public boolean onScroll(MotionEvent e1, MotionEvent e2,\n                                float distanceX, float distanceY) {\n            //判断是否是滑动的x距离>y距离\n            return Math.abs(distanceY) <= Math.abs(distanceX);\n        }\n\n    }\n\n    /**\n     * 事件拦截下来,相当于把自定义控件的事件交给ViewDragHelper去处理\n     *\n     * @param ev\n     * @return\n     */\n    @Override\n    public boolean onInterceptTouchEvent(MotionEvent ev) {\n        return mViewDragHelper.shouldInterceptTouchEvent(ev)\n                && mGestureDetectorCompat.onTouchEvent(ev);\n    }\n\n    /**\n     * 事件监听，交给ViewDragHelper处理\n     *\n     * @param e\n     * @return\n     */\n    @Override\n    public boolean onTouchEvent(MotionEvent e) {\n        try {\n            mViewDragHelper.processTouchEvent(e);\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n        return false;\n    }\n}\n\n\n```\nxml引用\n```js\n<com.wuxiaolong.apksample.ViewDragLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"200dp\"\n        android:background=\"#ffff00\">\n\n        <LinearLayout\n            android:id=\"@+id/mContentLayout\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"80dp\"\n            android:gravity=\"center\"\n            android:orientation=\"vertical\">\n\n             <TextView\n                android:id=\"@+id/text\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\"\n                android:layout_gravity=\"center\"\n                android:gravity=\"center_vertical\"\n                android:paddingLeft=\"5dp\"\n                android:text=\"小尛龙\n                \\ngithub地址：https://github.com/WuXiaolong\n                \\n新浪微博：吴小龙同學\"\n                android:textColor=\"#202020\"\n                android:textSize=\"16sp\" />\n\n        </LinearLayout>\n\n        <LinearLayout\n            android:id=\"@+id/mBehindLayout\"\n            android:layout_width=\"140dp\"\n            android:layout_height=\"80dp\">\n\n            <ImageView\n                android:id=\"@+id/add\"\n                android:layout_width=\"70dp\"\n                android:layout_height=\"match_parent\"\n                android:background=\"#4cd964\"\n                android:paddingLeft=\"25dp\"\n                android:paddingRight=\"25dp\"\n                android:src=\"@android:drawable/ic_menu_add\" />\n\n            <ImageView\n                android:id=\"@+id/delete\"\n                android:layout_width=\"70dp\"\n                android:layout_height=\"match_parent\"\n                android:background=\"#ff2020\"\n                android:paddingLeft=\"25dp\"\n                android:paddingRight=\"25dp\"\n                android:src=\"@android:drawable/ic_menu_delete\" />\n        </LinearLayout>\n\n    </com.wuxiaolong.apksample.ViewDragLayout>\n```\n## WeWin\n如果想了解更多，可参考WeWin项目，其中仿QQ侧滑效果就是ViewDragHelper做的。项目地址：[https://github.com/WuXiaolong/WeWin](https://github.com/WuXiaolong/WeWin)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","source":"_posts/ViewDragHelper.md","raw":"title: Android ViewDragHelper实例\ndate: 2015-12-04 16:45:12\ntags: ViewDragHelper\ncategory: Android\n---\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/ViewDragHelper.gif)\n\n## ViewDragHelper创建\n```java\n   //创建ViewDragHelper的实例，第一个参数是ViewGroup，传自己，\n   // 第二个参数就是滑动灵敏度的意思,可以随意设置，第三个是回调\n   mViewDragHelper = ViewDragHelper.create(this, 1.0f, new DragHelperCallback());\n```\n<!--more-->\n这里列举常用的ViewDragHelper.Callback方法\n```java\nclass DragHelperCallback extends ViewDragHelper.Callback {\n\n        /**\n         * 根据返回结果决定当前child是否可以拖拽\n         *\n         * @param child 当前被拖拽的view\n         * @param pointerId 区分多点触摸的id\n         * @return\n         */\n        @Override\n        public boolean tryCaptureView(View child, int pointerId) {\n             return false;\n        }\n\n        /**\n         * 返回拖拽的范围，不对拖拽进行真正的限制，仅仅决定了动画执行速度\n         * @param child\n         * @return\n         */\n        @Override\n        public int getViewHorizontalDragRange(View child) {\n            return super.getViewHorizontalDragRange(child);\n        }\n\n        /**\n         * @param child\n          * @param left  代表你将要移动到的位置的坐标,返回值就是最终确定的移动的位置,\n         *              判断如果这个坐标在layout之内,那我们就返回这个坐标值，\n         *              不能让他超出这个范围, 除此之外就是如果你的layout设置了padding的话，\n         *              让子view的活动范围在padding之内的\n         * @param dx\n         * @return\n         */\n        @Override\n        public int clampViewPositionHorizontal(View child, int left, int dx) {\n\t\t return super.clampViewPositionHorizontal(child, left, dx);\n        }\n\n\n        /**\n         * 位置改变时回调，常用于滑动是更改scale进行缩放等效果\n         *\n         * @param changedView\n         * @param left\n         * @param top\n         * @param dx 横向滑动的加速度\n         * @param dy\n         */\n        @Override\n        public void onViewPositionChanged(View changedView, int left, int top, int dx, int dy) {\n\t\t  super.onViewPositionChanged(changedView, left, top, dx, dy);\n        }\n\n        /**\n         * 拖动结束后调用\n         *\n         * @param releasedChild\n         * @param xvel 水平方向的速度  向右为正\n         * @param yvel 竖直方向的速度  向下为正\n         */\n        @Override\n        public void onViewReleased(View releasedChild, float xvel, float yvel) {\n            super.onViewReleased(releasedChild, xvel, yvel);\n        }\n    }\n```\n## 实例代码\n```java\npackage com.wuxiaolong.apksample;\n\nimport android.annotation.TargetApi;\nimport android.content.Context;\nimport android.os.Build;\nimport android.support.v4.view.GestureDetectorCompat;\nimport android.support.v4.view.ViewCompat;\nimport android.support.v4.widget.ViewDragHelper;\nimport android.util.AttributeSet;\nimport android.view.GestureDetector;\nimport android.view.MotionEvent;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.LinearLayout;\n\n/**\n * Created by WuXiaolong on 2015/12/4.\n */\npublic class ViewDragLayout extends LinearLayout {\n    /**\n     * 内容界面\n     */\n    private ViewGroup mContentLayout;\n\n    /**\n     * 遮盖界面\n     */\n    private ViewGroup mBehindLayout;\n\n    private ViewDragHelper mViewDragHelper;\n\n    /**\n     * 手势事件类\n     */\n    private GestureDetectorCompat mGestureDetectorCompat;\n\n    /**\n     * 滑动距离\n     */\n    private int mViewDragRange;\n\n    /**\n     * 左滑最大距离\n     */\n    private int mBehindLayoutWidth;\n    /**\n     * 宽度\n     */\n    private int mContentLayoutWidth;\n\n    private ViewDragListener mViewDragListener;\n\n    private boolean isOpen = false;\n\n    public ViewDragLayout(Context context) {\n        super(context);\n        init();\n    }\n\n    public ViewDragLayout(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        init();\n    }\n\n    public ViewDragLayout(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        init();\n    }\n\n    @TargetApi(Build.VERSION_CODES.LOLLIPOP)\n    public ViewDragLayout(Context context, AttributeSet attrs,\n                          int defStyleAttr, int defStyleRes) {\n        super(context, attrs, defStyleAttr, defStyleRes);\n        init();\n    }\n\n    /**\n     * View中所有的子控件均被映射成xml后触发\n     */\n    @Override\n    protected void onFinishInflate() {\n        mContentLayout = (ViewGroup) getChildAt(0);\n        mBehindLayout = (ViewGroup) getChildAt(1);\n        mBehindLayout.setClickable(true);\n        mContentLayout.setClickable(true);\n        super.onFinishInflate();\n    }\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n\n        mContentLayoutWidth = mContentLayout.getMeasuredWidth();\n        mBehindLayoutWidth = mBehindLayout.getMeasuredWidth();\n\n    }\n\n    /**\n     * 设置监听\n     */\n    public void setOnViewDragListener(ViewDragListener viewDragListener) {\n        this.mViewDragListener = viewDragListener;\n    }\n\n\n    public interface ViewDragListener {\n        void onOpen();\n\n        void onClose();\n\n        void onDrag(float percent);\n\n    }\n\n\n    /**\n     * 滑动时松手后以一定速率继续自动滑动下去并逐渐停止，\n     * 类似于扔东西或者松手后自动滑动到指定位置\n     */\n    @Override\n    public void computeScroll() {\n        if (mViewDragHelper.continueSettling(true)) {\n            ViewCompat.postInvalidateOnAnimation(this);\n        }\n    }\n\n    /**\n     * 初始化\n     */\n    private void init() {\n        //创建ViewDragHelper的实例，第一个参数是ViewGroup，传自己，\n        // 第二个参数就是滑动灵敏度的意思,可以随意设置，第三个是回调\n        mViewDragHelper = ViewDragHelper.create(this, 1.0f, new DragHelperCallback());\n        //手势操作，第二参数什么意思看下面\n        mGestureDetectorCompat = new GestureDetectorCompat(getContext(), new XScrollDetector());\n    }\n\n    class DragHelperCallback extends ViewDragHelper.Callback {\n\n        /**\n         * 根据返回结果决定当前child是否可以拖拽\n         *\n         * @param child     当前被拖拽的view\n         * @param pointerId 区分多点触摸的id\n         * @return\n         */\n        @Override\n        public boolean tryCaptureView(View child, int pointerId) {\n            return mContentLayout == child;\n        }\n\n        /**\n         * 返回拖拽的范围，不对拖拽进行真正的限制，仅仅决定了动画执行速度\n         *\n         * @param child\n         * @return\n         */\n        @Override\n        public int getViewHorizontalDragRange(View child) {\n            return mContentLayoutWidth;\n        }\n\n        /**\n         * @param child\n         * @param left  代表你将要移动到的位置的坐标,返回值就是最终确定的移动的位置,\n         *              判断如果这个坐标在layout之内,那我们就返回这个坐标值，\n         *              不能让他超出这个范围, 除此之外就是如果你的layout设置了padding的话，\n         *              让子view的活动范围在padding之内的\n         * @param dx\n         * @return\n         */\n        @Override\n        public int clampViewPositionHorizontal(View child, int left, int dx) {\n//            Log.d(\"wxl\", \"clampViewPositionHorizontal left=\" + left);\n            if (child == mContentLayout) {\n                int newLeft = Math.min(\n                        Math.max((-getPaddingLeft() - mBehindLayoutWidth), left), 0);\n                return newLeft;\n            } else {\n                int newLeft = Math.min(\n                        Math.max(left, getPaddingLeft() + mContentLayoutWidth - mBehindLayoutWidth),\n                        (getPaddingLeft() + mContentLayoutWidth + getPaddingRight()));\n                return newLeft;\n            }\n        }\n\n\n        /**\n         * 位置改变时回调，常用于滑动是更改scale进行缩放等效果\n         *\n         * @param changedView\n         * @param left\n         * @param top\n         * @param dx          横向滑动的加速度\n         * @param dy\n         */\n        @Override\n        public void onViewPositionChanged(\n                View changedView, int left, int top, int dx, int dy) {\n//            Log.d(\"wxl\", \"onViewPositionChanged left=\" + left);\n            mViewDragRange = left;\n            float percent = Math.abs((float) left / (float) mContentLayoutWidth);\n            if (null != mViewDragListener)\n                mViewDragListener.onDrag(percent);\n            if (changedView == mContentLayout) {\n                mBehindLayout.offsetLeftAndRight(dx);\n            } else {\n                mContentLayout.offsetLeftAndRight(dx);\n            }\n            invalidate();\n        }\n\n        /**\n         * 拖动结束后调用\n         *\n         * @param releasedChild\n         * @param xvel          水平方向的速度  向右为正\n         * @param yvel          竖直方向的速度  向下为正\n         */\n        @Override\n        public void onViewReleased(View releasedChild, float xvel, float yvel) {\n            if (releasedChild == mContentLayout) {\n                if (xvel <= 0) {//向左滑动\n                    if (-mViewDragRange >= mBehindLayoutWidth / 2\n                            && -mViewDragRange <= mBehindLayoutWidth) {\n                        open();\n                    } else {\n                        close();\n                    }\n                } else {//向右滑动\n                    if (-mViewDragRange >= 0\n                            && -mViewDragRange <= mBehindLayoutWidth) {\n                        close();\n                    } else {\n                        open();\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * 打开\n     */\n    public void open() {\n        if (mViewDragHelper.smoothSlideViewTo(\n                mContentLayout, -mBehindLayoutWidth, 0)) {\n            ViewCompat.postInvalidateOnAnimation(this);\n        }\n        if (null != mViewDragListener)\n            mViewDragListener.onOpen();\n        isOpen = true;\n    }\n\n    /**\n     * 关闭\n     */\n    public void close() {\n        if (mViewDragHelper.smoothSlideViewTo(mContentLayout, 0, 0)) {\n            ViewCompat.postInvalidateOnAnimation(this);\n        }\n        if (null != mViewDragListener)\n            mViewDragListener.onClose();\n        isOpen = false;\n    }\n\n    public boolean isOpen() {\n        return isOpen;\n    }\n\n    /**\n     * 手势监听回调,\n     * SimpleOnGestureListener为了不用重写那么多监听的帮助类\n     */\n    private class XScrollDetector extends GestureDetector.SimpleOnGestureListener {\n\n        @Override\n        public boolean onScroll(MotionEvent e1, MotionEvent e2,\n                                float distanceX, float distanceY) {\n            //判断是否是滑动的x距离>y距离\n            return Math.abs(distanceY) <= Math.abs(distanceX);\n        }\n\n    }\n\n    /**\n     * 事件拦截下来,相当于把自定义控件的事件交给ViewDragHelper去处理\n     *\n     * @param ev\n     * @return\n     */\n    @Override\n    public boolean onInterceptTouchEvent(MotionEvent ev) {\n        return mViewDragHelper.shouldInterceptTouchEvent(ev)\n                && mGestureDetectorCompat.onTouchEvent(ev);\n    }\n\n    /**\n     * 事件监听，交给ViewDragHelper处理\n     *\n     * @param e\n     * @return\n     */\n    @Override\n    public boolean onTouchEvent(MotionEvent e) {\n        try {\n            mViewDragHelper.processTouchEvent(e);\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n        return false;\n    }\n}\n\n\n```\nxml引用\n```js\n<com.wuxiaolong.apksample.ViewDragLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"200dp\"\n        android:background=\"#ffff00\">\n\n        <LinearLayout\n            android:id=\"@+id/mContentLayout\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"80dp\"\n            android:gravity=\"center\"\n            android:orientation=\"vertical\">\n\n             <TextView\n                android:id=\"@+id/text\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\"\n                android:layout_gravity=\"center\"\n                android:gravity=\"center_vertical\"\n                android:paddingLeft=\"5dp\"\n                android:text=\"小尛龙\n                \\ngithub地址：https://github.com/WuXiaolong\n                \\n新浪微博：吴小龙同學\"\n                android:textColor=\"#202020\"\n                android:textSize=\"16sp\" />\n\n        </LinearLayout>\n\n        <LinearLayout\n            android:id=\"@+id/mBehindLayout\"\n            android:layout_width=\"140dp\"\n            android:layout_height=\"80dp\">\n\n            <ImageView\n                android:id=\"@+id/add\"\n                android:layout_width=\"70dp\"\n                android:layout_height=\"match_parent\"\n                android:background=\"#4cd964\"\n                android:paddingLeft=\"25dp\"\n                android:paddingRight=\"25dp\"\n                android:src=\"@android:drawable/ic_menu_add\" />\n\n            <ImageView\n                android:id=\"@+id/delete\"\n                android:layout_width=\"70dp\"\n                android:layout_height=\"match_parent\"\n                android:background=\"#ff2020\"\n                android:paddingLeft=\"25dp\"\n                android:paddingRight=\"25dp\"\n                android:src=\"@android:drawable/ic_menu_delete\" />\n        </LinearLayout>\n\n    </com.wuxiaolong.apksample.ViewDragLayout>\n```\n## WeWin\n如果想了解更多，可参考WeWin项目，其中仿QQ侧滑效果就是ViewDragHelper做的。项目地址：[https://github.com/WuXiaolong/WeWin](https://github.com/WuXiaolong/WeWin)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","slug":"ViewDragHelper","published":1,"updated":"2016-03-17T00:44:06.350Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge2p008go4pkv8ywmo8w"},{"title":"Android之视图动画Animation","date":"2015-09-08T06:14:05.000Z","_content":"官网说明见：[http://developer.android.com/intl/zh-cn/guide/topics/graphics/view-animation.html](http://developer.android.com/intl/zh-cn/guide/topics/graphics/view-animation.html)\nView Animation主要有两种动画模式：\n一种是tweened animation(渐变动画):\nXML中：alpha\nJavaCode：AlphaAnimation\n\nXML中：scale\nJavaCode：ScaleAnimation\n\n一种是frame by frame(画面转换动画)\nXML中：translate\nJavaCode：TranslateAnimation\n\nXML中：rotate\nJavaCode：RotateAnimation\n<!--more-->\n##  alpha透明度控制动画效果\n文件名:my_alpha_action.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<alpha xmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:fromAlpha=\"0.1\"\nandroid:toAlpha=\"1.0\"\nandroid:duration=\"3000\"\n/> \n```\n透明度控制动画效果 alpha\n浮点型值：\n        fromAlpha 属性为动画起始时透明度\n        toAlpha   属性为动画结束时透明度\n        说明: \n        0.0表示完全透明\n        1.0表示完全不透明\n       以上值取0.0-1.0之间的float数据类型的数字\n        长整型值：\n        duration  属性为动画持续时间\n        说明:   \n        时间以毫秒为单位\n\n\n在程序中引用XML资源核心代码如下：\n```java\n\tAnimation mAnimation ;\n\tmAnimation = AnimationUtils.loadAnimation(this, R.anim.anim);\n\tTextView text = (TextView)findViewById(R.id.textview00);\n\ttext.setAnimation(mAnimation);\n```\n①private AlphaAnimation myAnimation_Alpha;\n//AlphaAnimation类对象构造\n②AlphaAnimation(float fromAlpha, float toAlpha) \n//第一个参数fromAlpha为 动画开始时候透明度\n//第二个参数toAlpha为 动画结束时候透明度\nmyAnimation_Alpha=new AlphaAnimation(0.1f, 1.0f);\n//说明: \n// 0.0表示完全透明\n// 1.0表示完全不透明\n设置动画持续时间\nmyAnimation_Alpha.setDuration(5000);\n//设置时间持续时间为 5000毫秒\n\n如何使用Java代码中的动画效果\npublic void startAnimation (Animation animation)\n\n## rotate旋转动画效果\n文件名: my_rotate_action.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n  <rotate  xmlns:android=\"http://schemas.android.com/apk/res/android\"    \n          android:interpolator=\"@android:anim/accelerate_decelerate_interpolator\"  \n        android:fromDegrees=\"0\" \n        android:toDegrees=\"+350\"             \n        android:pivotX=\"50%\" \n        android:pivotY=\"50%\"            \n        android:duration=\"3000\" />\n```\n   rotate 旋转动画效果\n       属性：interpolator 指定一个动画的插入器\n                在我试验过程中，使用android.res.anim中的资源时候发现有三种动画插入器\n        accelerate_decelerate_interpolator  加速-减速 动画插入器\n        accelerate_interpolator        加速-动画插入器\n        decelerate_interpolator        减速- 动画插入器\n        \n   其他的属于特定的动画效果    \n        浮点数型值:\n        fromDegrees 属性为动画起始时物件的角度    \n        toDegrees   属性为动画结束时物件旋转的角度 可以大于360度      \n        说明:\n         当角度为负数——表示逆时针旋转\n         当角度为正数——表示顺时针旋转                      \n        (负数from——to正数:顺时针旋转)   \n        (负数from——to负数:逆时针旋转) \n        (正数from——to正数:顺时针旋转) \n        (正数from——to负数:逆时针旋转)       \n        pivotX     属性为动画相对于物件的X坐标的开始位置\n        pivotY     属性为动画相对于物件的Y坐标的开始位置\n        说明:\n        以上两个属性值 从0%-100%中取值\n        50%为物件的X或Y方向坐标上的中点位置\n    \n   长整型值：\n        duration  属性为动画持续时间\n        说明:     \n        时间以毫秒为单位\n\n\n①RotateAnimation类对象定义\nprivate AlphaAnimation myAnimation_Alpha;\n②RotateAnimation类对象构造\nRotateAnimation(float fromDegrees, float toDegrees, \n            int pivotXType, float pivotXValue, int pivotYType, float pivotYValue)\n//第一个参数fromDegrees为动画起始时的旋转角度    \n//第二个参数toDegrees为动画旋转到的角度   \n//第三个参数pivotXType为动画在X轴相对于物件位置类型  \n//第四个参数pivotXValue为动画相对于物件的X坐标的开始位置\n//第五个参数pivotXType为动画在Y轴相对于物件位置类型   \n//第六个参数pivotYValue为动画相对于物件的Y坐标的开始位置\nmyAnimation_Rotate=new RotateAnimation(0.0f, +350.0f,\n               Animation.RELATIVE_TO_SELF,0.5f,Animation.RELATIVE_TO_SELF, 0.5f);\n③设置动画持续时间\nmyAnimation_Rotate.setDuration(3000);\n//设置时间持续时间为 3000毫秒\n如何使用Java代码中的动画效果\npublic void startAnimation (Animation animation)\n\n## scale尺寸伸缩动画效果 \n文件名: my_scale_action.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n   <scale xmlns:android=\"http://schemas.android.com/apk/res/android\">\nandroid:interpolator=\"@android:anim/accelerate_decelerate_interpolator\"         \n          android:fromXScale=\"0.0\"\n          android:toXScale=\"1.4\"\n          \n          android:fromYScale=\"0.0\"\n          android:toYScale=\"1.4\"\n          \n          android:pivotX=\"50%\"\n          android:pivotY=\"50%\"\n          \n          android:fillAfter=\"false\"\n          android:duration=\"700\" />\n```\n 尺寸伸缩动画效果 scale\n       属性：interpolator 指定一个动画的插入器\n       在我试验过程中，使用android.res.anim中的资源时候发现有三种动画插入器\n        \n   accelerate_decelerate_interpolator  加速-减速 动画插入器\n        accelerate_interpolator        加速-动画插入器\n        decelerate_interpolator        减速- 动画插入器\n        \n   其他的属于特定的动画效果 \n  浮点型值：         \n        fromXScale 属性为动画起始时 X坐标上的伸缩尺寸    \n        toXScale   属性为动画结束时 X坐标上的伸缩尺寸     \n        \n   fromYScale 属性为动画起始时Y坐标上的伸缩尺寸    \n       toYScale   属性为动画结束时Y坐标上的伸缩尺寸    \n        \n   说明:\n        以上四种属性值  \n        \n   0.0表示收缩到没有 \n        1.0表示正常无伸缩     \n        值小于1.0表示收缩  \n        值大于1.0表示放大\n        pivotX     属性为动画相对于物件的X坐标的开始位置\n        pivotY     属性为动画相对于物件的Y坐标的开始位置\n        \n   说明:\n        以上两个属性值 从0%-100%中取值\n        50%为物件的X或Y方向坐标上的中点位置\n        \n   长整型值：\n        duration  属性为动画持续时间\n        说明:     \n        时间以毫秒为单位\n  \n   布尔型值:\n        fillAfter 属性 当设置为true ，该动画转化在动画结束后被应用\n\n①ScaleAnimation类对象定义\nprivate AlphaAnimation myAnimation_Alpha;\n②ScaleAnimation类对象构造\nScaleAnimation(float fromX, float toX, float fromY, float toY,\n           int pivotXType, float pivotXValue, int pivotYType, float pivotYValue) \n//第一个参数fromX为动画起始时 X坐标上的伸缩尺寸    \n//第二个参数toX为动画结束时 X坐标上的伸缩尺寸     \n//第三个参数fromY为动画起始时Y坐标上的伸缩尺寸    \n//第四个参数toY为动画结束时Y坐标上的伸缩尺寸  \n/*说明:\n以上四种属性值    \n0.0表示收缩到没有 \n1.0表示正常无伸缩     \n值小于1.0表示收缩  \n值大于1.0表示放大\n*/\n//第五个参数pivotXType为动画在X轴相对于物件位置类型  \n//第六个参数pivotXValue为动画相对于物件的X坐标的开始位置\n//第七个参数pivotXType为动画在Y轴相对于物件位置类型   \n//第八个参数pivotYValue为动画相对于物件的Y坐标的开始位置\nmyAnimation_Scale =new ScaleAnimation(0.0f, 1.4f, 0.0f, 1.4f,\n             Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);\n③　设置动画持续时间\nmyAnimation_Scale.setDuration(700);\n//设置时间持续时间为 700毫秒\n如何使用Java代码中的动画效果\npublic void startAnimation (Animation animation)\n\n## translate位置转移动画效果 \n文件名: my_translate_action.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<translate xmlns:android=\"http://schemas.android.com/apk/res/android\">\n<translate\nandroid:fromXDelta=\"30\"\nandroid:toXDelta=\"-80\"\nandroid:fromYDelta=\"30\"\nandroid:toYDelta=\"300\"\nandroid:duration=\"800\"\n/>\n```\n translate 位置转移动画效果\n        整型值:\n        fromXDelta 属性为动画起始时 X坐标上的位置    \n        toXDelta   属性为动画结束时 X坐标上的位置\n        \n   fromYDelta 属性为动画起始时 Y坐标上的位置\n        toYDelta   属性为动画结束时 Y坐标上的位置\n        注意:\n        没有指定fromXType toXType fromYType toYType 时候，默认是以自己为相对参照物 \n         长整型值：\n        duration  属性为动画持续时间\n        说明:     \n        时间以毫秒为单位\n\n①TranslateAnimation类对象定义\nprivate TranslateAnimation myAnimation_Translate;\n②TranslateAnimation类对象构造\nTranslateAnimation(float fromXDelta, float toXDelta,\n                       float fromYDelta, float toYDelta) \n//第一个参数fromXDelta为动画起始时 X坐标上的移动位置    \n//第二个参数toXDelta为动画结束时 X坐标上的移动位置      \n//第三个参数fromYDelta为动画起始时Y坐标上的移动位置     \n//第四个参数toYDelta为动画结束时Y坐标上的移动位置\n③　设置动画持续时间\nmyAnimation_Translate.setDuration(2000);\n//设置时间持续时间为 2000毫秒\n如何使用Java代码中的动画效果\npublic void startAnimation (Animation animation)\n\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n","source":"_posts/ViewAnimation.md","raw":"title: Android之视图动画Animation\ndate: 2015-09-08 14:14:05\ntags: Animation\ncategory: Android\n---\n官网说明见：[http://developer.android.com/intl/zh-cn/guide/topics/graphics/view-animation.html](http://developer.android.com/intl/zh-cn/guide/topics/graphics/view-animation.html)\nView Animation主要有两种动画模式：\n一种是tweened animation(渐变动画):\nXML中：alpha\nJavaCode：AlphaAnimation\n\nXML中：scale\nJavaCode：ScaleAnimation\n\n一种是frame by frame(画面转换动画)\nXML中：translate\nJavaCode：TranslateAnimation\n\nXML中：rotate\nJavaCode：RotateAnimation\n<!--more-->\n##  alpha透明度控制动画效果\n文件名:my_alpha_action.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<alpha xmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:fromAlpha=\"0.1\"\nandroid:toAlpha=\"1.0\"\nandroid:duration=\"3000\"\n/> \n```\n透明度控制动画效果 alpha\n浮点型值：\n        fromAlpha 属性为动画起始时透明度\n        toAlpha   属性为动画结束时透明度\n        说明: \n        0.0表示完全透明\n        1.0表示完全不透明\n       以上值取0.0-1.0之间的float数据类型的数字\n        长整型值：\n        duration  属性为动画持续时间\n        说明:   \n        时间以毫秒为单位\n\n\n在程序中引用XML资源核心代码如下：\n```java\n\tAnimation mAnimation ;\n\tmAnimation = AnimationUtils.loadAnimation(this, R.anim.anim);\n\tTextView text = (TextView)findViewById(R.id.textview00);\n\ttext.setAnimation(mAnimation);\n```\n①private AlphaAnimation myAnimation_Alpha;\n//AlphaAnimation类对象构造\n②AlphaAnimation(float fromAlpha, float toAlpha) \n//第一个参数fromAlpha为 动画开始时候透明度\n//第二个参数toAlpha为 动画结束时候透明度\nmyAnimation_Alpha=new AlphaAnimation(0.1f, 1.0f);\n//说明: \n// 0.0表示完全透明\n// 1.0表示完全不透明\n设置动画持续时间\nmyAnimation_Alpha.setDuration(5000);\n//设置时间持续时间为 5000毫秒\n\n如何使用Java代码中的动画效果\npublic void startAnimation (Animation animation)\n\n## rotate旋转动画效果\n文件名: my_rotate_action.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n  <rotate  xmlns:android=\"http://schemas.android.com/apk/res/android\"    \n          android:interpolator=\"@android:anim/accelerate_decelerate_interpolator\"  \n        android:fromDegrees=\"0\" \n        android:toDegrees=\"+350\"             \n        android:pivotX=\"50%\" \n        android:pivotY=\"50%\"            \n        android:duration=\"3000\" />\n```\n   rotate 旋转动画效果\n       属性：interpolator 指定一个动画的插入器\n                在我试验过程中，使用android.res.anim中的资源时候发现有三种动画插入器\n        accelerate_decelerate_interpolator  加速-减速 动画插入器\n        accelerate_interpolator        加速-动画插入器\n        decelerate_interpolator        减速- 动画插入器\n        \n   其他的属于特定的动画效果    \n        浮点数型值:\n        fromDegrees 属性为动画起始时物件的角度    \n        toDegrees   属性为动画结束时物件旋转的角度 可以大于360度      \n        说明:\n         当角度为负数——表示逆时针旋转\n         当角度为正数——表示顺时针旋转                      \n        (负数from——to正数:顺时针旋转)   \n        (负数from——to负数:逆时针旋转) \n        (正数from——to正数:顺时针旋转) \n        (正数from——to负数:逆时针旋转)       \n        pivotX     属性为动画相对于物件的X坐标的开始位置\n        pivotY     属性为动画相对于物件的Y坐标的开始位置\n        说明:\n        以上两个属性值 从0%-100%中取值\n        50%为物件的X或Y方向坐标上的中点位置\n    \n   长整型值：\n        duration  属性为动画持续时间\n        说明:     \n        时间以毫秒为单位\n\n\n①RotateAnimation类对象定义\nprivate AlphaAnimation myAnimation_Alpha;\n②RotateAnimation类对象构造\nRotateAnimation(float fromDegrees, float toDegrees, \n            int pivotXType, float pivotXValue, int pivotYType, float pivotYValue)\n//第一个参数fromDegrees为动画起始时的旋转角度    \n//第二个参数toDegrees为动画旋转到的角度   \n//第三个参数pivotXType为动画在X轴相对于物件位置类型  \n//第四个参数pivotXValue为动画相对于物件的X坐标的开始位置\n//第五个参数pivotXType为动画在Y轴相对于物件位置类型   \n//第六个参数pivotYValue为动画相对于物件的Y坐标的开始位置\nmyAnimation_Rotate=new RotateAnimation(0.0f, +350.0f,\n               Animation.RELATIVE_TO_SELF,0.5f,Animation.RELATIVE_TO_SELF, 0.5f);\n③设置动画持续时间\nmyAnimation_Rotate.setDuration(3000);\n//设置时间持续时间为 3000毫秒\n如何使用Java代码中的动画效果\npublic void startAnimation (Animation animation)\n\n## scale尺寸伸缩动画效果 \n文件名: my_scale_action.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n   <scale xmlns:android=\"http://schemas.android.com/apk/res/android\">\nandroid:interpolator=\"@android:anim/accelerate_decelerate_interpolator\"         \n          android:fromXScale=\"0.0\"\n          android:toXScale=\"1.4\"\n          \n          android:fromYScale=\"0.0\"\n          android:toYScale=\"1.4\"\n          \n          android:pivotX=\"50%\"\n          android:pivotY=\"50%\"\n          \n          android:fillAfter=\"false\"\n          android:duration=\"700\" />\n```\n 尺寸伸缩动画效果 scale\n       属性：interpolator 指定一个动画的插入器\n       在我试验过程中，使用android.res.anim中的资源时候发现有三种动画插入器\n        \n   accelerate_decelerate_interpolator  加速-减速 动画插入器\n        accelerate_interpolator        加速-动画插入器\n        decelerate_interpolator        减速- 动画插入器\n        \n   其他的属于特定的动画效果 \n  浮点型值：         \n        fromXScale 属性为动画起始时 X坐标上的伸缩尺寸    \n        toXScale   属性为动画结束时 X坐标上的伸缩尺寸     \n        \n   fromYScale 属性为动画起始时Y坐标上的伸缩尺寸    \n       toYScale   属性为动画结束时Y坐标上的伸缩尺寸    \n        \n   说明:\n        以上四种属性值  \n        \n   0.0表示收缩到没有 \n        1.0表示正常无伸缩     \n        值小于1.0表示收缩  \n        值大于1.0表示放大\n        pivotX     属性为动画相对于物件的X坐标的开始位置\n        pivotY     属性为动画相对于物件的Y坐标的开始位置\n        \n   说明:\n        以上两个属性值 从0%-100%中取值\n        50%为物件的X或Y方向坐标上的中点位置\n        \n   长整型值：\n        duration  属性为动画持续时间\n        说明:     \n        时间以毫秒为单位\n  \n   布尔型值:\n        fillAfter 属性 当设置为true ，该动画转化在动画结束后被应用\n\n①ScaleAnimation类对象定义\nprivate AlphaAnimation myAnimation_Alpha;\n②ScaleAnimation类对象构造\nScaleAnimation(float fromX, float toX, float fromY, float toY,\n           int pivotXType, float pivotXValue, int pivotYType, float pivotYValue) \n//第一个参数fromX为动画起始时 X坐标上的伸缩尺寸    \n//第二个参数toX为动画结束时 X坐标上的伸缩尺寸     \n//第三个参数fromY为动画起始时Y坐标上的伸缩尺寸    \n//第四个参数toY为动画结束时Y坐标上的伸缩尺寸  \n/*说明:\n以上四种属性值    \n0.0表示收缩到没有 \n1.0表示正常无伸缩     \n值小于1.0表示收缩  \n值大于1.0表示放大\n*/\n//第五个参数pivotXType为动画在X轴相对于物件位置类型  \n//第六个参数pivotXValue为动画相对于物件的X坐标的开始位置\n//第七个参数pivotXType为动画在Y轴相对于物件位置类型   \n//第八个参数pivotYValue为动画相对于物件的Y坐标的开始位置\nmyAnimation_Scale =new ScaleAnimation(0.0f, 1.4f, 0.0f, 1.4f,\n             Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);\n③　设置动画持续时间\nmyAnimation_Scale.setDuration(700);\n//设置时间持续时间为 700毫秒\n如何使用Java代码中的动画效果\npublic void startAnimation (Animation animation)\n\n## translate位置转移动画效果 \n文件名: my_translate_action.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<translate xmlns:android=\"http://schemas.android.com/apk/res/android\">\n<translate\nandroid:fromXDelta=\"30\"\nandroid:toXDelta=\"-80\"\nandroid:fromYDelta=\"30\"\nandroid:toYDelta=\"300\"\nandroid:duration=\"800\"\n/>\n```\n translate 位置转移动画效果\n        整型值:\n        fromXDelta 属性为动画起始时 X坐标上的位置    \n        toXDelta   属性为动画结束时 X坐标上的位置\n        \n   fromYDelta 属性为动画起始时 Y坐标上的位置\n        toYDelta   属性为动画结束时 Y坐标上的位置\n        注意:\n        没有指定fromXType toXType fromYType toYType 时候，默认是以自己为相对参照物 \n         长整型值：\n        duration  属性为动画持续时间\n        说明:     \n        时间以毫秒为单位\n\n①TranslateAnimation类对象定义\nprivate TranslateAnimation myAnimation_Translate;\n②TranslateAnimation类对象构造\nTranslateAnimation(float fromXDelta, float toXDelta,\n                       float fromYDelta, float toYDelta) \n//第一个参数fromXDelta为动画起始时 X坐标上的移动位置    \n//第二个参数toXDelta为动画结束时 X坐标上的移动位置      \n//第三个参数fromYDelta为动画起始时Y坐标上的移动位置     \n//第四个参数toYDelta为动画结束时Y坐标上的移动位置\n③　设置动画持续时间\nmyAnimation_Translate.setDuration(2000);\n//设置时间持续时间为 2000毫秒\n如何使用Java代码中的动画效果\npublic void startAnimation (Animation animation)\n\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n","slug":"ViewAnimation","published":1,"updated":"2016-03-17T00:44:06.350Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge2r008ko4pkql600ppy"},{"title":"今日情感","date":"2015-08-04T08:27:21.000Z","_content":"\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/todayEmotionAppScreenshots.gif)\n\n<!--more-->\n\n## 应用介绍\n【今日情感】专注于分享情感故事、情感美文、情感语录；情感是人适应生存的心理工具，也是人际通信交流的重要手段。 \n★ 内容 \n情感文章栏目主要内容有情感美文、情侣恋爱技巧与爱情知识、爱情文章故事、朋友间的友情，家庭亲情中夫妻关系、子女关系、父母关系相处技巧。 \n★寄语 \n偶遇今日情感，希望您在这里找到共鸣。\n\n## 二维码下载\n![](http://7q5c2h.com1.z0.glb.clouddn.com/TodayEmotionAppDownload.png)\n\n## 应用市场\n[魅族应用市场](http://app.meizu.com/apps/public/detail?package_name=com.android.xiaomolongstudio.danhuaer)\n[小米应用市场](http://app.mi.com/detail/30499)\n\n## 更新日志\n* v3.8\n1、新增职场指南和经典语录模块\n2、新增美图美句图片长按保存\n3、美图美句详情图片放大缩小优化\n\n* v3.7\n1、新增美图美句模块，享受小清新文字\n2、新增阅读量，记录每天阅读\n\n* v3.6\n1、新增微信、QQ、微博等分享\n2、全新Material Design风格\n\n* v3.5\n1、新增 情感圈，交流、分享、学习\n2、新增 我的下载\n3、文章列表 新增发布时间\n4、布局优化\n\n* v3.4\n1、新增夜间/白天模式切换，夜晚阅读不伤眼\n2、文章详情 新增下载功能，喜欢文章一键下载\n\n\n* v3.3\n1、文章详情 新增 发表评论\n2、设置 新增 用户中心\n3、欢迎页 优化 “一语倾心”\n\n* v3.1\n1、欢迎页 新增 “一语倾心”\n2、文章详情 新增 收藏功能\n3、文章详情 长按 复制功能\n4、设置 新增 我的收藏\n5、我的收藏 长按 删除收藏\n\n","source":"_posts/TodayEmotion.md","raw":"title: 今日情感\ndate: 2015-08-04 16:27:21\ntags: [Android,Life,App]\ncategory: App\n---\n\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/todayEmotionAppScreenshots.gif)\n\n<!--more-->\n\n## 应用介绍\n【今日情感】专注于分享情感故事、情感美文、情感语录；情感是人适应生存的心理工具，也是人际通信交流的重要手段。 \n★ 内容 \n情感文章栏目主要内容有情感美文、情侣恋爱技巧与爱情知识、爱情文章故事、朋友间的友情，家庭亲情中夫妻关系、子女关系、父母关系相处技巧。 \n★寄语 \n偶遇今日情感，希望您在这里找到共鸣。\n\n## 二维码下载\n![](http://7q5c2h.com1.z0.glb.clouddn.com/TodayEmotionAppDownload.png)\n\n## 应用市场\n[魅族应用市场](http://app.meizu.com/apps/public/detail?package_name=com.android.xiaomolongstudio.danhuaer)\n[小米应用市场](http://app.mi.com/detail/30499)\n\n## 更新日志\n* v3.8\n1、新增职场指南和经典语录模块\n2、新增美图美句图片长按保存\n3、美图美句详情图片放大缩小优化\n\n* v3.7\n1、新增美图美句模块，享受小清新文字\n2、新增阅读量，记录每天阅读\n\n* v3.6\n1、新增微信、QQ、微博等分享\n2、全新Material Design风格\n\n* v3.5\n1、新增 情感圈，交流、分享、学习\n2、新增 我的下载\n3、文章列表 新增发布时间\n4、布局优化\n\n* v3.4\n1、新增夜间/白天模式切换，夜晚阅读不伤眼\n2、文章详情 新增下载功能，喜欢文章一键下载\n\n\n* v3.3\n1、文章详情 新增 发表评论\n2、设置 新增 用户中心\n3、欢迎页 优化 “一语倾心”\n\n* v3.1\n1、欢迎页 新增 “一语倾心”\n2、文章详情 新增 收藏功能\n3、文章详情 长按 复制功能\n4、设置 新增 我的收藏\n5、我的收藏 长按 删除收藏\n\n","slug":"TodayEmotion","published":1,"updated":"2016-03-17T00:44:06.350Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge2u008oo4pkdxiwh12e"},{"title":"时间工具类TimeUtil","date":"2015-07-07T16:00:00.000Z","_content":"\n```java\npublic class TimeUtil {\n\n\n    /**\n     * 获取当前时间\n     *\n     * @param format \"yyyy-MM-dd HH:mm:ss\"\n     */\n    public static String getCurrentTime(String format) {\n        Date date = new Date();\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(format, Locale.getDefault());\n        return simpleDateFormat.format(date);\n    }\n\n    /**\n     * 获取当前时间为本月的第几周\n     */\n    public static int getWeekOfMonth() {\n        Calendar calendar = Calendar.getInstance();\n        int week = calendar.get(Calendar.WEEK_OF_MONTH);\n        return week - 1;\n    }\n\n    /**\n     * 获取当前时间为本周的第几天\n     */\n    public static int getDayOfWeek() {\n        Calendar calendar = Calendar.getInstance();\n        int day = calendar.get(Calendar.DAY_OF_WEEK);\n        if (day == 1) {\n            day = 7;\n        } else {\n            day = day - 1;\n        }\n        return day;\n    }\n\n    /**\n     * 获取当前时间的年份\n     */\n    public static int getYear() {\n        Calendar calendar = GregorianCalendar.getInstance();\n        return calendar.get(Calendar.YEAR);\n    }\n\n    /**\n     * 获取当前时间的月份\n     */\n    public static int getMonth() {\n        Calendar calendar = GregorianCalendar.getInstance();\n        return calendar.get(Calendar.MONTH);\n    }\n\n    /**\n     * 获取当前时间是哪天\n     */\n    public static int getDay() {\n        Calendar calendar = GregorianCalendar.getInstance();\n        return calendar.get(Calendar.DATE);\n    }\n\n    /**\n     * @param date1\n     * @param date2\n     * @return 1:date1大于date2；\n     * -1:date1小于date2\n     */\n    public static int compareDate(String date1, String date2, String format) {\n        DateFormat df = new SimpleDateFormat(format, Locale.getDefault());\n        try {\n            Date dt1 = df.parse(date1);\n            Date dt2 = df.parse(date2);\n            if (dt1.getTime() > dt2.getTime()) {\n                return 1;\n            } else if (dt1.getTime() < dt2.getTime()) {\n                return -1;\n            } else {\n                return 0;\n            }\n        } catch (Exception exception) {\n            exception.printStackTrace();\n        }\n        return 0;\n    }\n\t /**\n     * 时间加减\n     *\n     * @param day       如\"2015-09-22\"\n     * @param dayAddNum 加减值\n     * @return\n     */\n    public static String timeAddSubtract(String day, int dayAddNum) {\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"yyyy-MM-dd\", Locale.getDefault());\n        try {\n            Date newDate = new Date(simpleDateFormat.parse(day).getTime() + dayAddNum * 24 * 60 * 60 * 1000);\n            return simpleDateFormat.format(newDate);\n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n        return null;\n\n    }\n\t /**\n     * 毫秒格式化\n     *\n     * @param millisecond 如\"1449455517602\"\n     * @param format 如\"yyyy-MM-dd HH:mm:ss\"\n     * @return\n     */\n\t public static String millisecond2String(long millisecond, String format) {\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(format, Locale.getDefault());\n        return simpleDateFormat.format(millisecond);\n    }\n}\n```\n","source":"_posts/TimeUtil.md","raw":"title: 时间工具类TimeUtil\ndate: 2015-07-08\ncategories: [Android]\ntags: [Android]\n---\n\n```java\npublic class TimeUtil {\n\n\n    /**\n     * 获取当前时间\n     *\n     * @param format \"yyyy-MM-dd HH:mm:ss\"\n     */\n    public static String getCurrentTime(String format) {\n        Date date = new Date();\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(format, Locale.getDefault());\n        return simpleDateFormat.format(date);\n    }\n\n    /**\n     * 获取当前时间为本月的第几周\n     */\n    public static int getWeekOfMonth() {\n        Calendar calendar = Calendar.getInstance();\n        int week = calendar.get(Calendar.WEEK_OF_MONTH);\n        return week - 1;\n    }\n\n    /**\n     * 获取当前时间为本周的第几天\n     */\n    public static int getDayOfWeek() {\n        Calendar calendar = Calendar.getInstance();\n        int day = calendar.get(Calendar.DAY_OF_WEEK);\n        if (day == 1) {\n            day = 7;\n        } else {\n            day = day - 1;\n        }\n        return day;\n    }\n\n    /**\n     * 获取当前时间的年份\n     */\n    public static int getYear() {\n        Calendar calendar = GregorianCalendar.getInstance();\n        return calendar.get(Calendar.YEAR);\n    }\n\n    /**\n     * 获取当前时间的月份\n     */\n    public static int getMonth() {\n        Calendar calendar = GregorianCalendar.getInstance();\n        return calendar.get(Calendar.MONTH);\n    }\n\n    /**\n     * 获取当前时间是哪天\n     */\n    public static int getDay() {\n        Calendar calendar = GregorianCalendar.getInstance();\n        return calendar.get(Calendar.DATE);\n    }\n\n    /**\n     * @param date1\n     * @param date2\n     * @return 1:date1大于date2；\n     * -1:date1小于date2\n     */\n    public static int compareDate(String date1, String date2, String format) {\n        DateFormat df = new SimpleDateFormat(format, Locale.getDefault());\n        try {\n            Date dt1 = df.parse(date1);\n            Date dt2 = df.parse(date2);\n            if (dt1.getTime() > dt2.getTime()) {\n                return 1;\n            } else if (dt1.getTime() < dt2.getTime()) {\n                return -1;\n            } else {\n                return 0;\n            }\n        } catch (Exception exception) {\n            exception.printStackTrace();\n        }\n        return 0;\n    }\n\t /**\n     * 时间加减\n     *\n     * @param day       如\"2015-09-22\"\n     * @param dayAddNum 加减值\n     * @return\n     */\n    public static String timeAddSubtract(String day, int dayAddNum) {\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"yyyy-MM-dd\", Locale.getDefault());\n        try {\n            Date newDate = new Date(simpleDateFormat.parse(day).getTime() + dayAddNum * 24 * 60 * 60 * 1000);\n            return simpleDateFormat.format(newDate);\n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n        return null;\n\n    }\n\t /**\n     * 毫秒格式化\n     *\n     * @param millisecond 如\"1449455517602\"\n     * @param format 如\"yyyy-MM-dd HH:mm:ss\"\n     * @return\n     */\n\t public static String millisecond2String(long millisecond, String format) {\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(format, Locale.getDefault());\n        return simpleDateFormat.format(millisecond);\n    }\n}\n```\n","slug":"TimeUtil","published":1,"updated":"2016-03-17T00:44:06.349Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge2w008to4pkbhfjub99"},{"title":"生命不息，折腾不止","date":"2016-03-04T12:28:43.000Z","_content":" 本来我可以选择安逸的生活，过着朝九晚六的国企生活，为什么我还要出去？\n1、生于忧患，死于安乐\n<!-- more -->\n![](http://7q5c2h.com1.z0.glb.clouddn.com/TheSecondResignation1.jpeg)\n\n2、比你成功的、比你有钱的、比你聪明的人，往往都比你努力啊…\n![](http://7q5c2h.com1.z0.glb.clouddn.com/TheSecondResignation2.jpg)\n3、每天做点有意义的事，每天进步一点点！\n![](http://7q5c2h.com1.z0.glb.clouddn.com/TheSecondResignation3.jpg)\n4、内心深处一直埋藏着一颗创业的躁动的心\n\nNooooooooooooooooooooo！\n![](http://7q5c2h.com1.z0.glb.clouddn.com/TheSecondResignation4.gif)\n追根究底：\n\n![](http://7q5c2h.com1.z0.glb.clouddn.com/TheSecondResignation5.jpg)\n\n<center><embed src=\"http://player.youku.com/player.php/sid/XMjEzNjU2NTI0/v.swf\" allowFullScreen=\"true\" quality=\"high\" width=\"480\" height=\"400\" align=\"middle\" allowScriptAccess=\"always\" type=\"application/x-shockwave-flash\"></embed></center>\n","source":"_posts/TheSecondResignation.md","raw":"title: 生命不息，折腾不止\ndate: 2016-03-04 20:28:43\ntags: Life\ncategory: Life\n---\n 本来我可以选择安逸的生活，过着朝九晚六的国企生活，为什么我还要出去？\n1、生于忧患，死于安乐\n<!-- more -->\n![](http://7q5c2h.com1.z0.glb.clouddn.com/TheSecondResignation1.jpeg)\n\n2、比你成功的、比你有钱的、比你聪明的人，往往都比你努力啊…\n![](http://7q5c2h.com1.z0.glb.clouddn.com/TheSecondResignation2.jpg)\n3、每天做点有意义的事，每天进步一点点！\n![](http://7q5c2h.com1.z0.glb.clouddn.com/TheSecondResignation3.jpg)\n4、内心深处一直埋藏着一颗创业的躁动的心\n\nNooooooooooooooooooooo！\n![](http://7q5c2h.com1.z0.glb.clouddn.com/TheSecondResignation4.gif)\n追根究底：\n\n![](http://7q5c2h.com1.z0.glb.clouddn.com/TheSecondResignation5.jpg)\n\n<center><embed src=\"http://player.youku.com/player.php/sid/XMjEzNjU2NTI0/v.swf\" allowFullScreen=\"true\" quality=\"high\" width=\"480\" height=\"400\" align=\"middle\" allowScriptAccess=\"always\" type=\"application/x-shockwave-flash\"></embed></center>\n","slug":"TheSecondResignation","published":1,"updated":"2016-03-17T00:44:06.349Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge2y008wo4pkrg8fd2ya"},{"title":"Android Design Support Library之TabLayout","date":"2015-08-03T01:26:54.000Z","_content":"## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/TabLayout1.gif)\n<!--more-->\n## 实例APK\n[fir.im](https://fir.im/jinriqinggan)\n[小米应用商店](http://app.mi.com/detail/30499)\n[魅族应用中心](http://app.meizu.com/apps/public/detail?package_name=com.android.xiaomolongstudio.danhuaer)\n\n\n## 使用方法\nGradle 中添加下面依赖\n```js\n compile 'com.android.support:design:22.2.0'\n```\n\n## 使用style\n```js\n <style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\">\n        <item name=\"colorPrimary\">@color/primary</item>\n        <item name=\"colorPrimaryDark\">@color/primary_dark</item>\n</style>\n```\n## xml布局\n```js\n<LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"vertical\">\n\n        <android.support.design.widget.TabLayout\n            android:id=\"@+id/tabs\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            app:layout_scrollFlags=\"scroll|enterAlways\"\n            app:tabBackground=\"?attr/colorPrimary\"\n            app:tabSelectedTextColor=\"@color/white\"\n\t\t\tapp:tabTextColor=\"?attr/cursorTextColor\" />\n\n   \n    <android.support.v4.view.ViewPager\n        android:id=\"@+id/viewPager\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:background=\"?attr/backgroundColor\"\n       />\n\n</LinearLayout>\n```\n## ViewPager的适配器\n```java\nclass ViewPagerAdapter extends FragmentPagerAdapter {\n        private final List<Fragment> mFragmentList = new ArrayList<>();\n        private final List<String> mFragmentTitleList = new ArrayList<>();\n\n        public ViewPagerAdapter(FragmentManager manager) {\n            super(manager);\n        }\n\n        @Override\n        public Fragment getItem(int position) {\n            return mFragmentList.get(position);\n        }\n\n        @Override\n        public int getCount() {\n            return mFragmentList.size();\n        }\n\n        public void addFrag(Fragment fragment, String title) {\n            mFragmentList.add(fragment);\n            mFragmentTitleList.add(title);\n        }\n\n        @Override\n        public CharSequence getPageTitle(int position) {\n            return mFragmentTitleList.get(position);\n        }\n    }\n    \n  private void setupViewPager(ViewPager viewPager) {\n        ViewPagerAdapter adapter = new ViewPagerAdapter(getActivity().getSupportFragmentManager());\n\n\n        Fragment newfragment = new TodayEmotionFragment();\n        Bundle data = new Bundle();\n        data.putInt(\"id\", 0);\n        newfragment.setArguments(data);\n        adapter.addFrag(newfragment, getString(R.string.classical_article));\n\n        newfragment = new TodayEmotionFragment();\n        data = new Bundle();\n        data.putInt(\"id\", 3);\n        newfragment.setArguments(data);\n        adapter.addFrag(newfragment, \"职场指南\");\n\n\n        newfragment = new TodayEmotionFragment();\n        data = new Bundle();\n        data.putInt(\"id\", 1);\n        newfragment.setArguments(data);\n        adapter.addFrag(newfragment, getString(R.string.emotion_daily));\n\n        newfragment = new TodayEmotionFragment();\n        data = new Bundle();\n        data.putInt(\"id\", 2);\n        newfragment.setArguments(data);\n        adapter.addFrag(newfragment, getString(R.string.love_marriage));\n\n        newfragment = new TodayEmotionFragment();\n        data = new Bundle();\n        data.putInt(\"id\", 4);\n        newfragment.setArguments(data);\n        adapter.addFrag(newfragment, \"经典语录\");\n\n        viewPager.setAdapter(adapter);\n\n        viewPager.setOffscreenPageLimit(5);\n    }\n```\n## 设置TabLayout\n```java\n    @Override\n    public void onViewCreated(View view, Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n        TabLayout tabLayout = (TabLayout) view.findViewById(R.id.tabs);\n\n        ViewPager viewPager = (ViewPager) view.findViewById(R.id.viewPager);\n        setupViewPager(viewPager);\n        // 设置ViewPager的数据等\n        tabLayout.setupWithViewPager(viewPager);\n        tabLayout.setTabMode(TabLayout.MODE_SCROLLABLE);//适合很多tab\n        //tabLayout.setTabMode(TabLayout.MODE_FIXED);//tab均分,适合少的tab\n\t\t//tabLayout.setTabGravity(TabLayout.GRAVITY_FILL);//tab均分,适合少的tab,TabLayout.GRAVITY_CENTER\n    }\n```\n## 定义TabLayout的样式\n[参考博客](http://chenfuduo.me/2015/07/30/TabLayout-of-design-support-library/)\n\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n## 源码地址\n[https://github.com/WuXiaolong/DesignSupportLibrarySample](https://github.com/WuXiaolong/DesignSupportLibrarySample)","source":"_posts/TabLayout.md","raw":"title: Android Design Support Library之TabLayout \ndate: 2015-08-03 09:26:54\ntags: [DesignSupportLibrary,TabLayout]\ncategory: DesignSupportLibrary\n---\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/TabLayout1.gif)\n<!--more-->\n## 实例APK\n[fir.im](https://fir.im/jinriqinggan)\n[小米应用商店](http://app.mi.com/detail/30499)\n[魅族应用中心](http://app.meizu.com/apps/public/detail?package_name=com.android.xiaomolongstudio.danhuaer)\n\n\n## 使用方法\nGradle 中添加下面依赖\n```js\n compile 'com.android.support:design:22.2.0'\n```\n\n## 使用style\n```js\n <style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\">\n        <item name=\"colorPrimary\">@color/primary</item>\n        <item name=\"colorPrimaryDark\">@color/primary_dark</item>\n</style>\n```\n## xml布局\n```js\n<LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"vertical\">\n\n        <android.support.design.widget.TabLayout\n            android:id=\"@+id/tabs\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            app:layout_scrollFlags=\"scroll|enterAlways\"\n            app:tabBackground=\"?attr/colorPrimary\"\n            app:tabSelectedTextColor=\"@color/white\"\n\t\t\tapp:tabTextColor=\"?attr/cursorTextColor\" />\n\n   \n    <android.support.v4.view.ViewPager\n        android:id=\"@+id/viewPager\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:background=\"?attr/backgroundColor\"\n       />\n\n</LinearLayout>\n```\n## ViewPager的适配器\n```java\nclass ViewPagerAdapter extends FragmentPagerAdapter {\n        private final List<Fragment> mFragmentList = new ArrayList<>();\n        private final List<String> mFragmentTitleList = new ArrayList<>();\n\n        public ViewPagerAdapter(FragmentManager manager) {\n            super(manager);\n        }\n\n        @Override\n        public Fragment getItem(int position) {\n            return mFragmentList.get(position);\n        }\n\n        @Override\n        public int getCount() {\n            return mFragmentList.size();\n        }\n\n        public void addFrag(Fragment fragment, String title) {\n            mFragmentList.add(fragment);\n            mFragmentTitleList.add(title);\n        }\n\n        @Override\n        public CharSequence getPageTitle(int position) {\n            return mFragmentTitleList.get(position);\n        }\n    }\n    \n  private void setupViewPager(ViewPager viewPager) {\n        ViewPagerAdapter adapter = new ViewPagerAdapter(getActivity().getSupportFragmentManager());\n\n\n        Fragment newfragment = new TodayEmotionFragment();\n        Bundle data = new Bundle();\n        data.putInt(\"id\", 0);\n        newfragment.setArguments(data);\n        adapter.addFrag(newfragment, getString(R.string.classical_article));\n\n        newfragment = new TodayEmotionFragment();\n        data = new Bundle();\n        data.putInt(\"id\", 3);\n        newfragment.setArguments(data);\n        adapter.addFrag(newfragment, \"职场指南\");\n\n\n        newfragment = new TodayEmotionFragment();\n        data = new Bundle();\n        data.putInt(\"id\", 1);\n        newfragment.setArguments(data);\n        adapter.addFrag(newfragment, getString(R.string.emotion_daily));\n\n        newfragment = new TodayEmotionFragment();\n        data = new Bundle();\n        data.putInt(\"id\", 2);\n        newfragment.setArguments(data);\n        adapter.addFrag(newfragment, getString(R.string.love_marriage));\n\n        newfragment = new TodayEmotionFragment();\n        data = new Bundle();\n        data.putInt(\"id\", 4);\n        newfragment.setArguments(data);\n        adapter.addFrag(newfragment, \"经典语录\");\n\n        viewPager.setAdapter(adapter);\n\n        viewPager.setOffscreenPageLimit(5);\n    }\n```\n## 设置TabLayout\n```java\n    @Override\n    public void onViewCreated(View view, Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n        TabLayout tabLayout = (TabLayout) view.findViewById(R.id.tabs);\n\n        ViewPager viewPager = (ViewPager) view.findViewById(R.id.viewPager);\n        setupViewPager(viewPager);\n        // 设置ViewPager的数据等\n        tabLayout.setupWithViewPager(viewPager);\n        tabLayout.setTabMode(TabLayout.MODE_SCROLLABLE);//适合很多tab\n        //tabLayout.setTabMode(TabLayout.MODE_FIXED);//tab均分,适合少的tab\n\t\t//tabLayout.setTabGravity(TabLayout.GRAVITY_FILL);//tab均分,适合少的tab,TabLayout.GRAVITY_CENTER\n    }\n```\n## 定义TabLayout的样式\n[参考博客](http://chenfuduo.me/2015/07/30/TabLayout-of-design-support-library/)\n\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n## 源码地址\n[https://github.com/WuXiaolong/DesignSupportLibrarySample](https://github.com/WuXiaolong/DesignSupportLibrarySample)","slug":"TabLayout","published":1,"updated":"2016-03-22T05:44:35.985Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge31008zo4pka1dlhcmp"},{"title":"Android之SqliteSample","date":"2015-04-20T16:00:00.000Z","_content":"原文：[https://developer.android.com/training/basics/data-storage/databases.html](https://developer.android.com/training/basics/data-storage/databases.html)\n\n* Define a Schema and Contract\n\n```java\npackage com.xiaomolong.sqlitesample;\n\nimport android.provider.BaseColumns;\n\npublic final class FeedReaderContract {\n\tpublic FeedReaderContract() {\n\t}\n\n\tpublic static abstract class FeedEntry implements BaseColumns {\n\t\tpublic static final String TABLE_NAME = \"entry\";\n\t\tpublic static final String COLUMN_NAME_ENTRY_ID = \"entryid\";\n\t\tpublic static final String COLUMN_NAME_TITLE = \"title\";\n\t\tpublic static final String COLUMN_NAME_SUBTITLE = \"subtitle\";\n\n\t}\n}\n\n```\n<!-- more -->\n* FeedEntryDb\n\n```java\npackage com.xiaomolong.sqlitesample;\n\npublic class FeedEntryDb {\n\tpublic String entryid;\n\tpublic String title;\n\tpublic String subtitle;\n\n\tpublic String getEntryid() {\n\t\treturn entryid;\n\t}\n\n\tpublic void setEntryid(String entryid) {\n\t\tthis.entryid = entryid;\n\t}\n\n\tpublic String getTitle() {\n\t\treturn title;\n\t}\n\n\tpublic void setTitle(String title) {\n\t\tthis.title = title;\n\t}\n\n\tpublic String getSubtitle() {\n\t\treturn subtitle;\n\t}\n\n\tpublic void setSubtitle(String subtitle) {\n\t\tthis.subtitle = subtitle;\n\t}\n}\n\n```\n\n\n* Create a Database Using a SQL Helper\n\n```java\npackage com.xiaomolong.sqlitesample;\n\nimport android.content.Context;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteDatabase.CursorFactory;\nimport android.database.sqlite.SQLiteOpenHelper;\n\nimport com.xiaomolong.sqlitesample.FeedReaderContract.FeedEntry;\n\npublic class FeedReaderDbHelper extends SQLiteOpenHelper {\n\tpublic static final int DATABASE_VERSION = 1;\n\tpublic static final String DATABASE_NAME = \"FeedReader.db\";\n\tprivate static final String TEXT_TYPE = \" TEXT\";\n\tprivate static final String COMMA_SEP = \",\";\n\tprivate static final String SQL_CREATE_ENTRIES = \"CREATE TABLE \"\n\t\t\t+ FeedEntry.TABLE_NAME + \" (\" + FeedEntry._ID\n\t\t\t+ \" INTEGER PRIMARY KEY,\" + FeedEntry.COLUMN_NAME_ENTRY_ID\n\t\t\t+ TEXT_TYPE + COMMA_SEP + FeedEntry.COLUMN_NAME_TITLE + TEXT_TYPE\n\t\t\t+ COMMA_SEP + FeedEntry.COLUMN_NAME_SUBTITLE + TEXT_TYPE +\n\t\t\t// Any other options for the CREATE command\n\t\t\t\" )\";\n\n\tprivate static final String SQL_DELETE_ENTRIES = \"DROP TABLE IF EXISTS \"\n\t\t\t+ FeedEntry.TABLE_NAME;\n\n\tpublic FeedReaderDbHelper(Context context) {\n\t\tsuper(context, DATABASE_NAME, null, DATABASE_VERSION);\n\t}\n\n\tpublic FeedReaderDbHelper(Context context, String name,\n\t\t\tCursorFactory factory, int version) {\n\t\tsuper(context, name, factory, version);\n\t}\n\n\t@Override\n\tpublic void onCreate(SQLiteDatabase db) {\n\t\tdb.execSQL(SQL_CREATE_ENTRIES);\n\t}\n\n\t@Override\n\tpublic void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n\t\tdb.execSQL(SQL_DELETE_ENTRIES);\n\t\tonCreate(db);\n\t}\n\n}\n\n```\n\n * DatabaseManger，包括增删改查\n \n ```java\n package com.xiaomolong.sqlitesample;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport android.content.ContentValues;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\n\nimport com.xiaomolong.sqlitesample.FeedReaderContract.FeedEntry;\n\npublic class DatabaseManger {\n\n\tprivate static FeedReaderDbHelper mFeedReaderDbHelper = null;\n\n\tDatabaseManger(Context context) {\n\t\tgetInstance(context);\n\t}\n\n\tpublic static void getInstance(Context context) {\n\t\tif (mFeedReaderDbHelper == null) {\n\t\t\tmFeedReaderDbHelper = new FeedReaderDbHelper(context);\n\t\t}\n\t}\n\n\t/**\n\t * 插入\n\t * \n\t * @return the row ID of the newly inserted row, or -1 if an error occurred\n\t */\n\tpublic long insert(FeedEntryDb feedEntry) {\n\n\t\t// Gets the data repository in write mode\n\t\tSQLiteDatabase db = mFeedReaderDbHelper.getWritableDatabase();\n\n\t\t// Create a new map of values, where column names are the keys\n\t\tContentValues values = new ContentValues();\n\t\tvalues.put(FeedEntry.COLUMN_NAME_ENTRY_ID, feedEntry.getEntryid());\n\t\tvalues.put(FeedEntry.COLUMN_NAME_TITLE, feedEntry.getTitle());\n\t\tvalues.put(FeedEntry.COLUMN_NAME_SUBTITLE, feedEntry.getSubtitle());\n\n\t\t// Insert the new row, returning the primary key value of the new row\n\t\tlong newRowId;\n\t\tnewRowId = db.insert(FeedEntry.TABLE_NAME, null, values);\n\t\tdb.close();\n\t\treturn newRowId;\n\n\t}\n\n\t/**\n\t * 查询或通过条件查询\n\t * \n\t * @param rowId\n\t * @return\n\t */\n\tpublic List<FeedEntryDb> query(int rowId) {\n\t\tSQLiteDatabase db = mFeedReaderDbHelper.getReadableDatabase();\n\n\t\t// Define a projection that specifies which columns from the database\n\t\t// you will actually use after this query.\n\t\tString[] projection = { FeedEntry._ID, FeedEntry.COLUMN_NAME_ENTRY_ID,\n\t\t\t\tFeedEntry.COLUMN_NAME_TITLE, FeedEntry.COLUMN_NAME_SUBTITLE };\n\t\tString selection = null;\n\t\tString[] selectionArgs = { String.valueOf(rowId) };\n\t\tif (rowId != -1) {// 通过条件查询\n\t\t\tselection = FeedEntry._ID + \" = ?\";\n\t\t} else {\n\t\t\tselectionArgs = null;\n\t\t}\n\t\t// How you want the results sorted in the resulting Cursor\n\t\tString sortOrder = FeedEntry.COLUMN_NAME_TITLE + \" DESC\";\n\n\t\tCursor cursor = db.query(FeedEntry.TABLE_NAME, // The table to query\n\t\t\t\tprojection, // The columns to return\n\t\t\t\tselection, // The columns for the WHERE clause\n\t\t\t\tselectionArgs, // The values for the WHERE clause\n\t\t\t\tnull, // don't group the rows\n\t\t\t\tnull, // don't filter by row groups\n\t\t\t\tsortOrder // The sort order\n\t\t\t\t);\n\t\tList<FeedEntryDb> feedEntryDbList = new ArrayList<FeedEntryDb>();\n\t\twhile (cursor.moveToNext()) {\n\t\t\tFeedEntryDb feedEntryDb = new FeedEntryDb();\n\t\t\tlong itemId = cursor.getLong(cursor\n\t\t\t\t\t.getColumnIndexOrThrow(FeedEntry._ID));\n\t\t\tfeedEntryDb.setEntryid(cursor.getString(cursor\n\t\t\t\t\t.getColumnIndexOrThrow(FeedEntry.COLUMN_NAME_ENTRY_ID)));\n\t\t\tfeedEntryDb.setTitle(cursor.getString(cursor\n\t\t\t\t\t.getColumnIndexOrThrow(FeedEntry.COLUMN_NAME_TITLE)));\n\t\t\tfeedEntryDb.setSubtitle(cursor.getString(cursor\n\t\t\t\t\t.getColumnIndexOrThrow(FeedEntry.COLUMN_NAME_SUBTITLE)));\n\t\t\tfeedEntryDbList.add(feedEntryDb);\n\t\t}\n\t\tcursor.close();\n\t\tdb.close();\n\t\treturn feedEntryDbList;\n\n\t}\n\n\t/**\n\t * 更新\n\t * \n\t * @param feedEntry\n\t * @param rowId\n\t * @return\n\t */\n\tpublic int update(FeedEntryDb feedEntryDb, int rowId) {\n\t\tSQLiteDatabase db = mFeedReaderDbHelper.getReadableDatabase();\n\t\t// New value for one column\n\t\tContentValues values = new ContentValues();\n\t\tvalues.put(FeedEntry.COLUMN_NAME_TITLE, feedEntryDb.getTitle()\n\t\t\t\t.toString());\n\n\t\t// Which row to update, based on the ID\n\t\tString selection = FeedEntry._ID + \" = ?\";\n\t\tString[] selectionArgs = { String.valueOf(rowId) };\n\n\t\tint count = db.update(FeedEntry.TABLE_NAME, values, selection,\n\t\t\t\tselectionArgs);\n\t\tdb.close();\n\t\treturn count;\n\t}\n\n\t/**\n\t * 删除\n\t * \n\t * @param rowId\n\t * @return\n\t */\n\tpublic int delete(int rowId) {\n\t\tSQLiteDatabase db = mFeedReaderDbHelper.getReadableDatabase();\n\t\t// Define 'where' part of query.\n\t\tString selection = FeedEntry._ID + \" = ?\";\n\t\t// Specify arguments in placeholder order.\n\t\tString[] selectionArgs = { String.valueOf(rowId) };\n\t\t// Issue SQL statement.\n\t\tint count = db.delete(FeedEntry.TABLE_NAME, selection, selectionArgs);\n\t\tdb.close();\n\t\treturn count;\n\t}\n}\n\n ```\n \n * 方法调用\n \n ```java\n package com.xiaomolong.sqlitesample;\n\nimport java.util.List;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.view.View;\nimport android.view.View.OnClickListener;\nimport android.widget.TextView;\n\npublic class MainActivity extends Activity implements OnClickListener {\n\tDatabaseManger mDatabaseManger;\n\tTextView textView;\n\n\t@Override\n\tprotected void onCreate(Bundle savedInstanceState) {\n\t\tsuper.onCreate(savedInstanceState);\n\t\tsetContentView(R.layout.activity_main);\n\t\ttextView = (TextView) findViewById(R.id.textView);\n\t\tfindViewById(R.id.btnAdd).setOnClickListener(this);\n\t\tfindViewById(R.id.btnQuery).setOnClickListener(this);\n\t\tfindViewById(R.id.btnUpdate).setOnClickListener(this);\n\t\tfindViewById(R.id.btnDelete).setOnClickListener(this);\n\t\tmDatabaseManger = new DatabaseManger(this);\n\t}\n\n\t@Override\n\tpublic void onClick(View v) {\n\t\tswitch (v.getId()) {\n\t\tcase R.id.btnAdd:\n\t\t\tfor (int i = 0; i < 5; i++) {\n\t\t\t\tFeedEntryDb feedEntryDb = new FeedEntryDb();\n\t\t\t\tfeedEntryDb.setEntryid(i + \"\");\n\t\t\t\tfeedEntryDb.setTitle(\"title\" + i + \"\");\n\t\t\t\tfeedEntryDb.setSubtitle(\"subtitle\" + i + \"\");\n\t\t\t\tmDatabaseManger.insert(feedEntryDb);\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase R.id.btnQuery:\n\t\t\tList<FeedEntryDb> feedEntryDbList = mDatabaseManger.query(-1);\n\t\t\tString t = \"\";\n\t\t\tfor (int i = 0; i < feedEntryDbList.size(); i++) {\n\n\t\t\t\tt = t + feedEntryDbList.get(i).getTitle() + \"\\n\"\n\t\t\t\t\t\t+ feedEntryDbList.get(i).getSubtitle() + \"\\n\\n\";\n\t\t\t}\n\t\t\ttextView.setText(t);\n\t\t\tbreak;\n\t\tcase R.id.btnUpdate:\n\n\t\t\tFeedEntryDb feedEntryDb = new FeedEntryDb();\n\t\t\tfeedEntryDb.setTitle(\"修改\");\n\t\t\tLog.d(\"wxl\", \"count=\" + mDatabaseManger.update(feedEntryDb, 1));\n\n\t\t\tbreak;\n\t\tcase R.id.btnDelete:\n\t\t\tLog.d(\"wxl\", \"count=\" + mDatabaseManger.delete(1));\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\n\t}\n\n\t@Override\n\tpublic boolean onCreateOptionsMenu(Menu menu) {\n\t\t// Inflate the menu; this adds items to the action bar if it is present.\n\t\tgetMenuInflater().inflate(R.menu.main, menu);\n\t\treturn true;\n\t}\n\n\t@Override\n\tpublic boolean onOptionsItemSelected(MenuItem item) {\n\t\t// Handle action bar item clicks here. The action bar will\n\t\t// automatically handle clicks on the Home/Up button, so long\n\t\t// as you specify a parent activity in AndroidManifest.xml.\n\t\tint id = item.getItemId();\n\t\tif (id == R.id.action_settings) {\n\t\t\treturn true;\n\t\t}\n\t\treturn super.onOptionsItemSelected(item);\n\t}\n\n}\n\n ```\n","source":"_posts/SqliteSample.md","raw":"title: Android之SqliteSample\ndate: 2015-04-21\ncategories: [Android]\ntags: [Android,Sqlite]\n---\n原文：[https://developer.android.com/training/basics/data-storage/databases.html](https://developer.android.com/training/basics/data-storage/databases.html)\n\n* Define a Schema and Contract\n\n```java\npackage com.xiaomolong.sqlitesample;\n\nimport android.provider.BaseColumns;\n\npublic final class FeedReaderContract {\n\tpublic FeedReaderContract() {\n\t}\n\n\tpublic static abstract class FeedEntry implements BaseColumns {\n\t\tpublic static final String TABLE_NAME = \"entry\";\n\t\tpublic static final String COLUMN_NAME_ENTRY_ID = \"entryid\";\n\t\tpublic static final String COLUMN_NAME_TITLE = \"title\";\n\t\tpublic static final String COLUMN_NAME_SUBTITLE = \"subtitle\";\n\n\t}\n}\n\n```\n<!-- more -->\n* FeedEntryDb\n\n```java\npackage com.xiaomolong.sqlitesample;\n\npublic class FeedEntryDb {\n\tpublic String entryid;\n\tpublic String title;\n\tpublic String subtitle;\n\n\tpublic String getEntryid() {\n\t\treturn entryid;\n\t}\n\n\tpublic void setEntryid(String entryid) {\n\t\tthis.entryid = entryid;\n\t}\n\n\tpublic String getTitle() {\n\t\treturn title;\n\t}\n\n\tpublic void setTitle(String title) {\n\t\tthis.title = title;\n\t}\n\n\tpublic String getSubtitle() {\n\t\treturn subtitle;\n\t}\n\n\tpublic void setSubtitle(String subtitle) {\n\t\tthis.subtitle = subtitle;\n\t}\n}\n\n```\n\n\n* Create a Database Using a SQL Helper\n\n```java\npackage com.xiaomolong.sqlitesample;\n\nimport android.content.Context;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteDatabase.CursorFactory;\nimport android.database.sqlite.SQLiteOpenHelper;\n\nimport com.xiaomolong.sqlitesample.FeedReaderContract.FeedEntry;\n\npublic class FeedReaderDbHelper extends SQLiteOpenHelper {\n\tpublic static final int DATABASE_VERSION = 1;\n\tpublic static final String DATABASE_NAME = \"FeedReader.db\";\n\tprivate static final String TEXT_TYPE = \" TEXT\";\n\tprivate static final String COMMA_SEP = \",\";\n\tprivate static final String SQL_CREATE_ENTRIES = \"CREATE TABLE \"\n\t\t\t+ FeedEntry.TABLE_NAME + \" (\" + FeedEntry._ID\n\t\t\t+ \" INTEGER PRIMARY KEY,\" + FeedEntry.COLUMN_NAME_ENTRY_ID\n\t\t\t+ TEXT_TYPE + COMMA_SEP + FeedEntry.COLUMN_NAME_TITLE + TEXT_TYPE\n\t\t\t+ COMMA_SEP + FeedEntry.COLUMN_NAME_SUBTITLE + TEXT_TYPE +\n\t\t\t// Any other options for the CREATE command\n\t\t\t\" )\";\n\n\tprivate static final String SQL_DELETE_ENTRIES = \"DROP TABLE IF EXISTS \"\n\t\t\t+ FeedEntry.TABLE_NAME;\n\n\tpublic FeedReaderDbHelper(Context context) {\n\t\tsuper(context, DATABASE_NAME, null, DATABASE_VERSION);\n\t}\n\n\tpublic FeedReaderDbHelper(Context context, String name,\n\t\t\tCursorFactory factory, int version) {\n\t\tsuper(context, name, factory, version);\n\t}\n\n\t@Override\n\tpublic void onCreate(SQLiteDatabase db) {\n\t\tdb.execSQL(SQL_CREATE_ENTRIES);\n\t}\n\n\t@Override\n\tpublic void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n\t\tdb.execSQL(SQL_DELETE_ENTRIES);\n\t\tonCreate(db);\n\t}\n\n}\n\n```\n\n * DatabaseManger，包括增删改查\n \n ```java\n package com.xiaomolong.sqlitesample;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport android.content.ContentValues;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\n\nimport com.xiaomolong.sqlitesample.FeedReaderContract.FeedEntry;\n\npublic class DatabaseManger {\n\n\tprivate static FeedReaderDbHelper mFeedReaderDbHelper = null;\n\n\tDatabaseManger(Context context) {\n\t\tgetInstance(context);\n\t}\n\n\tpublic static void getInstance(Context context) {\n\t\tif (mFeedReaderDbHelper == null) {\n\t\t\tmFeedReaderDbHelper = new FeedReaderDbHelper(context);\n\t\t}\n\t}\n\n\t/**\n\t * 插入\n\t * \n\t * @return the row ID of the newly inserted row, or -1 if an error occurred\n\t */\n\tpublic long insert(FeedEntryDb feedEntry) {\n\n\t\t// Gets the data repository in write mode\n\t\tSQLiteDatabase db = mFeedReaderDbHelper.getWritableDatabase();\n\n\t\t// Create a new map of values, where column names are the keys\n\t\tContentValues values = new ContentValues();\n\t\tvalues.put(FeedEntry.COLUMN_NAME_ENTRY_ID, feedEntry.getEntryid());\n\t\tvalues.put(FeedEntry.COLUMN_NAME_TITLE, feedEntry.getTitle());\n\t\tvalues.put(FeedEntry.COLUMN_NAME_SUBTITLE, feedEntry.getSubtitle());\n\n\t\t// Insert the new row, returning the primary key value of the new row\n\t\tlong newRowId;\n\t\tnewRowId = db.insert(FeedEntry.TABLE_NAME, null, values);\n\t\tdb.close();\n\t\treturn newRowId;\n\n\t}\n\n\t/**\n\t * 查询或通过条件查询\n\t * \n\t * @param rowId\n\t * @return\n\t */\n\tpublic List<FeedEntryDb> query(int rowId) {\n\t\tSQLiteDatabase db = mFeedReaderDbHelper.getReadableDatabase();\n\n\t\t// Define a projection that specifies which columns from the database\n\t\t// you will actually use after this query.\n\t\tString[] projection = { FeedEntry._ID, FeedEntry.COLUMN_NAME_ENTRY_ID,\n\t\t\t\tFeedEntry.COLUMN_NAME_TITLE, FeedEntry.COLUMN_NAME_SUBTITLE };\n\t\tString selection = null;\n\t\tString[] selectionArgs = { String.valueOf(rowId) };\n\t\tif (rowId != -1) {// 通过条件查询\n\t\t\tselection = FeedEntry._ID + \" = ?\";\n\t\t} else {\n\t\t\tselectionArgs = null;\n\t\t}\n\t\t// How you want the results sorted in the resulting Cursor\n\t\tString sortOrder = FeedEntry.COLUMN_NAME_TITLE + \" DESC\";\n\n\t\tCursor cursor = db.query(FeedEntry.TABLE_NAME, // The table to query\n\t\t\t\tprojection, // The columns to return\n\t\t\t\tselection, // The columns for the WHERE clause\n\t\t\t\tselectionArgs, // The values for the WHERE clause\n\t\t\t\tnull, // don't group the rows\n\t\t\t\tnull, // don't filter by row groups\n\t\t\t\tsortOrder // The sort order\n\t\t\t\t);\n\t\tList<FeedEntryDb> feedEntryDbList = new ArrayList<FeedEntryDb>();\n\t\twhile (cursor.moveToNext()) {\n\t\t\tFeedEntryDb feedEntryDb = new FeedEntryDb();\n\t\t\tlong itemId = cursor.getLong(cursor\n\t\t\t\t\t.getColumnIndexOrThrow(FeedEntry._ID));\n\t\t\tfeedEntryDb.setEntryid(cursor.getString(cursor\n\t\t\t\t\t.getColumnIndexOrThrow(FeedEntry.COLUMN_NAME_ENTRY_ID)));\n\t\t\tfeedEntryDb.setTitle(cursor.getString(cursor\n\t\t\t\t\t.getColumnIndexOrThrow(FeedEntry.COLUMN_NAME_TITLE)));\n\t\t\tfeedEntryDb.setSubtitle(cursor.getString(cursor\n\t\t\t\t\t.getColumnIndexOrThrow(FeedEntry.COLUMN_NAME_SUBTITLE)));\n\t\t\tfeedEntryDbList.add(feedEntryDb);\n\t\t}\n\t\tcursor.close();\n\t\tdb.close();\n\t\treturn feedEntryDbList;\n\n\t}\n\n\t/**\n\t * 更新\n\t * \n\t * @param feedEntry\n\t * @param rowId\n\t * @return\n\t */\n\tpublic int update(FeedEntryDb feedEntryDb, int rowId) {\n\t\tSQLiteDatabase db = mFeedReaderDbHelper.getReadableDatabase();\n\t\t// New value for one column\n\t\tContentValues values = new ContentValues();\n\t\tvalues.put(FeedEntry.COLUMN_NAME_TITLE, feedEntryDb.getTitle()\n\t\t\t\t.toString());\n\n\t\t// Which row to update, based on the ID\n\t\tString selection = FeedEntry._ID + \" = ?\";\n\t\tString[] selectionArgs = { String.valueOf(rowId) };\n\n\t\tint count = db.update(FeedEntry.TABLE_NAME, values, selection,\n\t\t\t\tselectionArgs);\n\t\tdb.close();\n\t\treturn count;\n\t}\n\n\t/**\n\t * 删除\n\t * \n\t * @param rowId\n\t * @return\n\t */\n\tpublic int delete(int rowId) {\n\t\tSQLiteDatabase db = mFeedReaderDbHelper.getReadableDatabase();\n\t\t// Define 'where' part of query.\n\t\tString selection = FeedEntry._ID + \" = ?\";\n\t\t// Specify arguments in placeholder order.\n\t\tString[] selectionArgs = { String.valueOf(rowId) };\n\t\t// Issue SQL statement.\n\t\tint count = db.delete(FeedEntry.TABLE_NAME, selection, selectionArgs);\n\t\tdb.close();\n\t\treturn count;\n\t}\n}\n\n ```\n \n * 方法调用\n \n ```java\n package com.xiaomolong.sqlitesample;\n\nimport java.util.List;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.view.View;\nimport android.view.View.OnClickListener;\nimport android.widget.TextView;\n\npublic class MainActivity extends Activity implements OnClickListener {\n\tDatabaseManger mDatabaseManger;\n\tTextView textView;\n\n\t@Override\n\tprotected void onCreate(Bundle savedInstanceState) {\n\t\tsuper.onCreate(savedInstanceState);\n\t\tsetContentView(R.layout.activity_main);\n\t\ttextView = (TextView) findViewById(R.id.textView);\n\t\tfindViewById(R.id.btnAdd).setOnClickListener(this);\n\t\tfindViewById(R.id.btnQuery).setOnClickListener(this);\n\t\tfindViewById(R.id.btnUpdate).setOnClickListener(this);\n\t\tfindViewById(R.id.btnDelete).setOnClickListener(this);\n\t\tmDatabaseManger = new DatabaseManger(this);\n\t}\n\n\t@Override\n\tpublic void onClick(View v) {\n\t\tswitch (v.getId()) {\n\t\tcase R.id.btnAdd:\n\t\t\tfor (int i = 0; i < 5; i++) {\n\t\t\t\tFeedEntryDb feedEntryDb = new FeedEntryDb();\n\t\t\t\tfeedEntryDb.setEntryid(i + \"\");\n\t\t\t\tfeedEntryDb.setTitle(\"title\" + i + \"\");\n\t\t\t\tfeedEntryDb.setSubtitle(\"subtitle\" + i + \"\");\n\t\t\t\tmDatabaseManger.insert(feedEntryDb);\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase R.id.btnQuery:\n\t\t\tList<FeedEntryDb> feedEntryDbList = mDatabaseManger.query(-1);\n\t\t\tString t = \"\";\n\t\t\tfor (int i = 0; i < feedEntryDbList.size(); i++) {\n\n\t\t\t\tt = t + feedEntryDbList.get(i).getTitle() + \"\\n\"\n\t\t\t\t\t\t+ feedEntryDbList.get(i).getSubtitle() + \"\\n\\n\";\n\t\t\t}\n\t\t\ttextView.setText(t);\n\t\t\tbreak;\n\t\tcase R.id.btnUpdate:\n\n\t\t\tFeedEntryDb feedEntryDb = new FeedEntryDb();\n\t\t\tfeedEntryDb.setTitle(\"修改\");\n\t\t\tLog.d(\"wxl\", \"count=\" + mDatabaseManger.update(feedEntryDb, 1));\n\n\t\t\tbreak;\n\t\tcase R.id.btnDelete:\n\t\t\tLog.d(\"wxl\", \"count=\" + mDatabaseManger.delete(1));\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\n\t}\n\n\t@Override\n\tpublic boolean onCreateOptionsMenu(Menu menu) {\n\t\t// Inflate the menu; this adds items to the action bar if it is present.\n\t\tgetMenuInflater().inflate(R.menu.main, menu);\n\t\treturn true;\n\t}\n\n\t@Override\n\tpublic boolean onOptionsItemSelected(MenuItem item) {\n\t\t// Handle action bar item clicks here. The action bar will\n\t\t// automatically handle clicks on the Home/Up button, so long\n\t\t// as you specify a parent activity in AndroidManifest.xml.\n\t\tint id = item.getItemId();\n\t\tif (id == R.id.action_settings) {\n\t\t\treturn true;\n\t\t}\n\t\treturn super.onOptionsItemSelected(item);\n\t}\n\n}\n\n ```\n","slug":"SqliteSample","published":1,"updated":"2016-03-17T00:44:06.349Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge340096o4pk2jsb013w"},{"title":"Android字符串分割","date":"2015-04-26T16:00:00.000Z","_content":"\n```java\nsplit(\"|\")实现字符串分割\n```\n\n下面同样的效果\n\n```java\nString chartest = \"abcdefghijk\";\n\t\tchar[] chs = chartest.toCharArray();// 注：这里一定要用char来定义。\n\t\tfor (int i = 0; i < chs.length; i++) {\n\t\t\t// Log.d(\"wxl\", \"chs=========\" + chs[i]);\n\t\t}\n\t\t// 输出: a b c d e f g h i j k\n```\n\nString[] strs = str.split(\"\\\\|\\\\|\");\n\n就可以了。|在正则表达式里表示或者的意思，转一下就好了。\n","source":"_posts/Split.md","raw":"title: Android字符串分割\ndate: 2015-04-27 \ncategories: [Android]\ntags: [Android,Canvas]\n---\n\n```java\nsplit(\"|\")实现字符串分割\n```\n\n下面同样的效果\n\n```java\nString chartest = \"abcdefghijk\";\n\t\tchar[] chs = chartest.toCharArray();// 注：这里一定要用char来定义。\n\t\tfor (int i = 0; i < chs.length; i++) {\n\t\t\t// Log.d(\"wxl\", \"chs=========\" + chs[i]);\n\t\t}\n\t\t// 输出: a b c d e f g h i j k\n```\n\nString[] strs = str.split(\"\\\\|\\\\|\");\n\n就可以了。|在正则表达式里表示或者的意思，转一下就好了。\n","slug":"Split","published":1,"updated":"2016-03-17T00:44:06.348Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge37009bo4pkzkml0qi0"},{"title":"微言之自定义分享PopupWindow","date":"2015-09-02T01:54:41.000Z","_content":"\n>自定义分享PopupWindow，有需要的直接拿走。\n\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanSharePopupWindowScreenshots.gif)\n\n<!--more-->\n\n## 应用实例\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanAppDownload.png)\n\n## 核心代码\n### SharePopupWindow代码\n```java\npublic class SharePopupWindow extends PopupWindow {\n    private View mMenuView;\n    private Activity mActivity;\n    private String mShareContent;\n    private View mParent;\n    private Bitmap mGetSaveBitmap;\n\n    public SharePopupWindow(Activity activity, String shareContent, View parent) {\n        super(activity);\n        this.mActivity = activity;\n        this.mShareContent = shareContent;\n        this.mParent = parent;\n        initView();\n    }\n\n    private void initView() {\n        mMenuView = View.inflate(mActivity, R.layout.share_popup, null);\n        // 设置按钮监听\n        mMenuView.findViewById(R.id.btn_friend).setOnClickListener(shareItemsOnClick);\n        mMenuView.findViewById(R.id.btn_quan).setOnClickListener(shareItemsOnClick);\n        mMenuView.findViewById(R.id.btn_collection).setOnClickListener(shareItemsOnClick);\n        mMenuView.findViewById(R.id.btn_qq).setOnClickListener(shareItemsOnClick);\n        mMenuView.findViewById(R.id.btn_qzone).setOnClickListener(shareItemsOnClick);\n        mMenuView.findViewById(R.id.btn_sina).setOnClickListener(shareItemsOnClick);\n        mMenuView.findViewById(R.id.btn_tx).setOnClickListener(shareItemsOnClick);\n        mMenuView.findViewById(R.id.btn_cancel).setOnClickListener(\n                new View.OnClickListener() {\n\n                    @Override\n                    public void onClick(View v) {\n                        dismiss();\n\n                    }\n                });\n\n        // 设置SelectPicPopupWindow的View\n        this.setContentView(mMenuView);\n        // 设置SelectPicPopupWindow弹出窗体的宽\n        this.setWidth(LayoutParams.MATCH_PARENT);\n        // 设置SelectPicPopupWindow弹出窗体的高\n        this.setHeight(LayoutParams.WRAP_CONTENT);\n        // 设置SelectPicPopupWindow弹出窗体可点击\n        this.setFocusable(true);\n        // 设置SelectPicPopupWindow弹出窗体动画效果\n        // this.setAnimationStyle(R.style.AnimBottom);\n        // 实例化一个ColorDrawable颜色为半透明\n        ColorDrawable dw = new ColorDrawable(00000000);\n        // 设置SelectPicPopupWindow弹出窗体的背景\n        this.setBackgroundDrawable(dw);\n        this.showAtLocation(mParent, Gravity.BOTTOM | Gravity.CENTER_HORIZONTAL, 0, 0);\n        // mMenuView添加OnTouchListener监听判断获取触屏位置如果在选择框外面则销毁弹出框\n        mMenuView.setOnTouchListener(new OnTouchListener() {\n\n            public boolean onTouch(View v, MotionEvent event) {\n\n                int height = mMenuView.findViewById(R.id.pop_layout).getTop();\n                int y = (int) event.getY();\n                if (event.getAction() == MotionEvent.ACTION_UP) {\n                    if (y < height) {\n                        dismiss();\n                    }\n                }\n                return true;\n            }\n        });\n\n    }\n\n\n    /**\n     * 为弹出窗口实现监听类\n     */\n    private View.OnClickListener shareItemsOnClick = new View.OnClickListener() {\n\n        public void onClick(View v) {\n\n\n            switch (v.getId()) {\n                case R.id.btn_friend:\n                   //具体分享需要自己写\n                    break;\n                case R.id.btn_quan:\n                   \n                    break;\n                case R.id.btn_collection:\n                   \n                    break;\n                case R.id.btn_qq:\n                  \n                    break;\n                case R.id.btn_qzone:\n                  \n                    break;\n                case R.id.btn_sina:\n                  \n                    break;\n                case R.id.btn_tx:\n               \n                    break;\n                default:\n                    break;\n            }\n\n        }\n\n    };\n}\n```\n\n### share_popup.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"fill_parent\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"#50000000\"\n    android:gravity=\"center_horizontal\"\n    android:orientation=\"vertical\">\n\n    <LinearLayout\n        android:id=\"@+id/pop_layout\"\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentBottom=\"true\"\n        android:background=\"@android:color/white\"\n        android:orientation=\"vertical\">\n\n        <LinearLayout\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"center_horizontal\"\n            android:layout_marginLeft=\"22dp\"\n            android:layout_marginRight=\"22dp\"\n            android:layout_marginTop=\"10dp\"\n            android:background=\"@android:color/white\"\n            android:orientation=\"horizontal\">\n\n            <TextView\n                android:id=\"@+id/btn_friend\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_weight=\"1\"\n                android:drawableTop=\"@drawable/umeng_socialize_wechat\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"微信好友\"\n                android:textColor=\"@color/txt_black\" />\n\n            <TextView\n                android:id=\"@+id/btn_quan\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"10dp\"\n                android:layout_weight=\"1\"\n                android:drawableTop=\"@drawable/umeng_socialize_wxcircle\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"朋友圈\"\n                android:textColor=\"@color/txt_black\" />\n\n            <TextView\n                android:id=\"@+id/btn_collection\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"10dp\"\n                android:layout_weight=\"1\"\n                android:drawableTop=\"@drawable/wx_collect\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"微信收藏\"\n                android:textColor=\"@color/txt_black\" />\n\n            <TextView\n                android:id=\"@+id/btn_qq\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"10dp\"\n                android:layout_weight=\"1\"\n                android:drawableTop=\"@drawable/umeng_socialize_qq_on\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"QQ\"\n                android:textColor=\"@color/txt_black\" />\n        </LinearLayout>\n\n        <LinearLayout\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"center_horizontal\"\n            android:layout_marginLeft=\"22dp\"\n            android:layout_marginRight=\"22dp\"\n            android:layout_marginTop=\"10dp\"\n            android:background=\"@android:color/white\"\n            android:orientation=\"horizontal\">\n\n            <TextView\n                android:id=\"@+id/btn_sina\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_weight=\"1\"\n                android:drawableTop=\"@drawable/umeng_socialize_sina_on\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"新浪微博\"\n                android:textColor=\"@color/txt_black\" />\n\n            <TextView\n                android:id=\"@+id/btn_qzone\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"10dp\"\n                android:layout_weight=\"1\"\n                android:drawableTop=\"@drawable/umeng_socialize_qzone_on\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"QQ空间\"\n                android:textColor=\"@color/txt_black\" />\n\n\n            <TextView\n                android:id=\"@+id/btn_tx\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"10dp\"\n                android:layout_weight=\"1\"\n                android:drawableTop=\"@drawable/umeng_socialize_tx_on\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"腾讯微博\"\n                android:textColor=\"@color/txt_black\"\n                android:visibility=\"invisible\" />\n\n            <TextView\n                android:id=\"@+id/btn_more\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"10dp\"\n                android:layout_weight=\"1\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"更多分享\"\n                android:textColor=\"@color/txt_black\"\n                android:visibility=\"invisible\" />\n        </LinearLayout>\n\n        <Button\n            android:id=\"@+id/btn_cancel\"\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"45dp\"\n            android:layout_marginBottom=\"10dp\"\n            android:layout_marginLeft=\"22dp\"\n            android:layout_marginRight=\"22dp\"\n            android:layout_marginTop=\"10dp\"\n            android:background=\"@drawable/shape_round_gray\"\n            android:gravity=\"center_horizontal|center_vertical\"\n            android:onClick=\"shareItemsOnClick\"\n            android:text=\"@string/cancel\"\n            android:textColor=\"@android:color/white\" />\n    </LinearLayout>\n\n</RelativeLayout>\n```\n\n### SharePopupWindow调用\n```java\nnew SharePopupWindow(ContentActivity.this, shareContent, ContentActivity.this.findViewById(R.id.content_layout));            \n```\n第三个参数，是需要的分享页面的根ID，如：\n```js\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:fab=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/content_layout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/bg\"\n    tools:context=\"com.android.xiaomolongstudio.hua.activity.JokeTextDetailActivity\">\n</RelativeLayout>\n```\n","source":"_posts/SharePopupWindow.md","raw":"title: 微言之自定义分享PopupWindow\ndate: 2015-09-02 09:54:41\ntags: [Android,PopupWindow,WeiYan]\ncategory: Android\n---\n\n>自定义分享PopupWindow，有需要的直接拿走。\n\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanSharePopupWindowScreenshots.gif)\n\n<!--more-->\n\n## 应用实例\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanAppDownload.png)\n\n## 核心代码\n### SharePopupWindow代码\n```java\npublic class SharePopupWindow extends PopupWindow {\n    private View mMenuView;\n    private Activity mActivity;\n    private String mShareContent;\n    private View mParent;\n    private Bitmap mGetSaveBitmap;\n\n    public SharePopupWindow(Activity activity, String shareContent, View parent) {\n        super(activity);\n        this.mActivity = activity;\n        this.mShareContent = shareContent;\n        this.mParent = parent;\n        initView();\n    }\n\n    private void initView() {\n        mMenuView = View.inflate(mActivity, R.layout.share_popup, null);\n        // 设置按钮监听\n        mMenuView.findViewById(R.id.btn_friend).setOnClickListener(shareItemsOnClick);\n        mMenuView.findViewById(R.id.btn_quan).setOnClickListener(shareItemsOnClick);\n        mMenuView.findViewById(R.id.btn_collection).setOnClickListener(shareItemsOnClick);\n        mMenuView.findViewById(R.id.btn_qq).setOnClickListener(shareItemsOnClick);\n        mMenuView.findViewById(R.id.btn_qzone).setOnClickListener(shareItemsOnClick);\n        mMenuView.findViewById(R.id.btn_sina).setOnClickListener(shareItemsOnClick);\n        mMenuView.findViewById(R.id.btn_tx).setOnClickListener(shareItemsOnClick);\n        mMenuView.findViewById(R.id.btn_cancel).setOnClickListener(\n                new View.OnClickListener() {\n\n                    @Override\n                    public void onClick(View v) {\n                        dismiss();\n\n                    }\n                });\n\n        // 设置SelectPicPopupWindow的View\n        this.setContentView(mMenuView);\n        // 设置SelectPicPopupWindow弹出窗体的宽\n        this.setWidth(LayoutParams.MATCH_PARENT);\n        // 设置SelectPicPopupWindow弹出窗体的高\n        this.setHeight(LayoutParams.WRAP_CONTENT);\n        // 设置SelectPicPopupWindow弹出窗体可点击\n        this.setFocusable(true);\n        // 设置SelectPicPopupWindow弹出窗体动画效果\n        // this.setAnimationStyle(R.style.AnimBottom);\n        // 实例化一个ColorDrawable颜色为半透明\n        ColorDrawable dw = new ColorDrawable(00000000);\n        // 设置SelectPicPopupWindow弹出窗体的背景\n        this.setBackgroundDrawable(dw);\n        this.showAtLocation(mParent, Gravity.BOTTOM | Gravity.CENTER_HORIZONTAL, 0, 0);\n        // mMenuView添加OnTouchListener监听判断获取触屏位置如果在选择框外面则销毁弹出框\n        mMenuView.setOnTouchListener(new OnTouchListener() {\n\n            public boolean onTouch(View v, MotionEvent event) {\n\n                int height = mMenuView.findViewById(R.id.pop_layout).getTop();\n                int y = (int) event.getY();\n                if (event.getAction() == MotionEvent.ACTION_UP) {\n                    if (y < height) {\n                        dismiss();\n                    }\n                }\n                return true;\n            }\n        });\n\n    }\n\n\n    /**\n     * 为弹出窗口实现监听类\n     */\n    private View.OnClickListener shareItemsOnClick = new View.OnClickListener() {\n\n        public void onClick(View v) {\n\n\n            switch (v.getId()) {\n                case R.id.btn_friend:\n                   //具体分享需要自己写\n                    break;\n                case R.id.btn_quan:\n                   \n                    break;\n                case R.id.btn_collection:\n                   \n                    break;\n                case R.id.btn_qq:\n                  \n                    break;\n                case R.id.btn_qzone:\n                  \n                    break;\n                case R.id.btn_sina:\n                  \n                    break;\n                case R.id.btn_tx:\n               \n                    break;\n                default:\n                    break;\n            }\n\n        }\n\n    };\n}\n```\n\n### share_popup.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"fill_parent\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"#50000000\"\n    android:gravity=\"center_horizontal\"\n    android:orientation=\"vertical\">\n\n    <LinearLayout\n        android:id=\"@+id/pop_layout\"\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentBottom=\"true\"\n        android:background=\"@android:color/white\"\n        android:orientation=\"vertical\">\n\n        <LinearLayout\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"center_horizontal\"\n            android:layout_marginLeft=\"22dp\"\n            android:layout_marginRight=\"22dp\"\n            android:layout_marginTop=\"10dp\"\n            android:background=\"@android:color/white\"\n            android:orientation=\"horizontal\">\n\n            <TextView\n                android:id=\"@+id/btn_friend\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_weight=\"1\"\n                android:drawableTop=\"@drawable/umeng_socialize_wechat\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"微信好友\"\n                android:textColor=\"@color/txt_black\" />\n\n            <TextView\n                android:id=\"@+id/btn_quan\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"10dp\"\n                android:layout_weight=\"1\"\n                android:drawableTop=\"@drawable/umeng_socialize_wxcircle\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"朋友圈\"\n                android:textColor=\"@color/txt_black\" />\n\n            <TextView\n                android:id=\"@+id/btn_collection\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"10dp\"\n                android:layout_weight=\"1\"\n                android:drawableTop=\"@drawable/wx_collect\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"微信收藏\"\n                android:textColor=\"@color/txt_black\" />\n\n            <TextView\n                android:id=\"@+id/btn_qq\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"10dp\"\n                android:layout_weight=\"1\"\n                android:drawableTop=\"@drawable/umeng_socialize_qq_on\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"QQ\"\n                android:textColor=\"@color/txt_black\" />\n        </LinearLayout>\n\n        <LinearLayout\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"center_horizontal\"\n            android:layout_marginLeft=\"22dp\"\n            android:layout_marginRight=\"22dp\"\n            android:layout_marginTop=\"10dp\"\n            android:background=\"@android:color/white\"\n            android:orientation=\"horizontal\">\n\n            <TextView\n                android:id=\"@+id/btn_sina\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_weight=\"1\"\n                android:drawableTop=\"@drawable/umeng_socialize_sina_on\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"新浪微博\"\n                android:textColor=\"@color/txt_black\" />\n\n            <TextView\n                android:id=\"@+id/btn_qzone\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"10dp\"\n                android:layout_weight=\"1\"\n                android:drawableTop=\"@drawable/umeng_socialize_qzone_on\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"QQ空间\"\n                android:textColor=\"@color/txt_black\" />\n\n\n            <TextView\n                android:id=\"@+id/btn_tx\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"10dp\"\n                android:layout_weight=\"1\"\n                android:drawableTop=\"@drawable/umeng_socialize_tx_on\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"腾讯微博\"\n                android:textColor=\"@color/txt_black\"\n                android:visibility=\"invisible\" />\n\n            <TextView\n                android:id=\"@+id/btn_more\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginLeft=\"10dp\"\n                android:layout_weight=\"1\"\n                android:gravity=\"center_horizontal\"\n                android:onClick=\"shareItemsOnClick\"\n                android:text=\"更多分享\"\n                android:textColor=\"@color/txt_black\"\n                android:visibility=\"invisible\" />\n        </LinearLayout>\n\n        <Button\n            android:id=\"@+id/btn_cancel\"\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"45dp\"\n            android:layout_marginBottom=\"10dp\"\n            android:layout_marginLeft=\"22dp\"\n            android:layout_marginRight=\"22dp\"\n            android:layout_marginTop=\"10dp\"\n            android:background=\"@drawable/shape_round_gray\"\n            android:gravity=\"center_horizontal|center_vertical\"\n            android:onClick=\"shareItemsOnClick\"\n            android:text=\"@string/cancel\"\n            android:textColor=\"@android:color/white\" />\n    </LinearLayout>\n\n</RelativeLayout>\n```\n\n### SharePopupWindow调用\n```java\nnew SharePopupWindow(ContentActivity.this, shareContent, ContentActivity.this.findViewById(R.id.content_layout));            \n```\n第三个参数，是需要的分享页面的根ID，如：\n```js\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:fab=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/content_layout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/bg\"\n    tools:context=\"com.android.xiaomolongstudio.hua.activity.JokeTextDetailActivity\">\n</RelativeLayout>\n```\n","slug":"SharePopupWindow","published":1,"updated":"2016-03-17T00:44:06.348Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge39009go4pkm7jw7tgc"},{"title":"Actionbar之SearchView","date":"2014-12-10T16:00:00.000Z","_content":"\n```js\n <item\n        android:id=\"@+id/menu_search\"\n        android:actionLayout=\"@layout/searchview\"//自定义\n        android:icon=\"@drawable/ic_action_search\"\n        android:showAsAction=\"always|collapseActionView\"\n        android:title=\"Search\"/>\n        android:actionViewClass=\"android.widget.SearchView\"//系统的\n```\n我们设定 showAsAction这个属性的时候，加了collapseActionView这么一个参数，它的意思是说，将item引用的布局隐藏起来，当你点击该item的时候，再将其展现出来。通过这个属性，我们就可以将每个item复杂的布局隐藏起来，从而有效的节约了actionbar的布局空间。\n<!-- more -->\nsearchview.xml\n\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\" >\n\n    <EditText\n        android:id=\"@+id/search\"\n        style=\"@android:style/Widget.Holo.EditText\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:hint=\"搜索视频\"\n        android:imeOptions=\"actionSearch\"\n        android:singleLine=\"true\"\n        android:textColor=\"@android:color/black\"\n        android:textCursorDrawable=\"@null\" />\n\n</LinearLayout>\n```\n\n代码\n\n```java\n\t@Override\n\tpublic boolean onCreateOptionsMenu(Menu menu) {\n\n\t\t// Inflate the menu; this adds items to the action bar if it is present.\n\t\tgetMenuInflater().inflate(R.menu.activity_main, menu);\n\t\tinitSearch(menu);\n\t\treturn true;\n\t}\n\n\tprivate VideoFragment videoFragment;\n\n\t/**\n\t * 搜索动作\n\t * \n\t * @param menu\n\t */\n\tprivate void initSearch(Menu menu) {\n\t\tMenuItem item = menu.findItem(R.id.menu_search);\n\t\tView view = item.getActionView();\n\t\tfinal EditText search = (EditText) view.findViewById(R.id.search);\n\t\tMenuItemCompat.setOnActionExpandListener(item,\n\t\t\t\tnew OnActionExpandListener() {\n\t\t\t\t\t@Override\n\t\t\t\t\tpublic boolean onMenuItemActionCollapse(MenuItem item) {\n\t\t\t\t\t\t// Toast.makeText(MainDrawerActivity.this, \"啊哦，我隐藏起来了！\",\n\t\t\t\t\t\t// Toast.LENGTH_SHORT).show();\n\t\t\t\t\t\tsearch.clearFocus(); // 清除焦点\n\t\t\t\t\t\tAppUtil.hideSoftInput(MainDrawerActivity.this);\n\t\t\t\t\t\tif (search.getText().length() > 0) {// 重新恢复搜索之前的数据\n\t\t\t\t\t\t\tvideoFragment.searchVideoTable(false, \"\");//\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\t@Override\n\t\t\t\t\tpublic boolean onMenuItemActionExpand(MenuItem item) {\n\t\t\t\t\t\t// Toast.makeText(MainDrawerActivity.this, \"啦啦啦，我出现喽！\",\n\t\t\t\t\t\t// Toast.LENGTH_SHORT).show();\n\t\t\t\t\t\tsearch.requestFocus(); // 请求获取焦点\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * 调起软键盘\n\t\t\t\t\t\t */\n\t\t\t\t\t\tInputMethodManager m = (InputMethodManager)     getSystemService(Context.INPUT_METHOD_SERVICE);\n\t\t\t\t\t\tm.toggleSoftInput(0, InputMethodManager.HIDE_NOT_ALWAYS);\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\tsearch.setOnEditorActionListener(new OnEditorActionListener() {\n\n\t\t\t@Override\n\t\t\tpublic boolean onEditorAction(TextView v, int actionId,\n\t\t\t\t\tKeyEvent event) {\n\t\t\t\tif (actionId == EditorInfo.IME_ACTION_SEARCH) {\n\t\t\t\t\tif (search.getText().length() > 0) {// 搜索\n\t\t\t\t\t\tAppUtil.hideSoftInput(MainDrawerActivity.this);\n\t\t\t\t\t\tvideoFragment.searchVideoTable(true, search.getText()\n\t\t\t\t\t\t\t\t.toString());\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t}\n```\n\n* 参考\n\n[Android ActionBar 的其它用法（搜索、分享、隐藏复杂布局，模仿Google Play,微信）](http://blog.csdn.net/xy_nyle/article/details/18894755)\n\n[Android在EditText中开启软键盘的＂Done＂按钮](http://www.fengfly.com/plus/view-206564-1.html)\n\n[输入法软键盘显示/隐藏的监听和控制](http://glblong.blog.51cto.com/3058613/1543172)\n\n[修改Android EditText光标颜色](http://blog.csdn.net/cw2004100021124/article/details/12649671)\n\n[Android:自定义输入框光标颜色](http://my.oschina.net/xsjayz/blog/104344)\n","source":"_posts/SearchView.md","raw":"title: Actionbar之SearchView\ndate: 2014-12-11 \ncategories: [Android]\ntags: [Android,Actionbar,SearchView]\n---\n\n```js\n <item\n        android:id=\"@+id/menu_search\"\n        android:actionLayout=\"@layout/searchview\"//自定义\n        android:icon=\"@drawable/ic_action_search\"\n        android:showAsAction=\"always|collapseActionView\"\n        android:title=\"Search\"/>\n        android:actionViewClass=\"android.widget.SearchView\"//系统的\n```\n我们设定 showAsAction这个属性的时候，加了collapseActionView这么一个参数，它的意思是说，将item引用的布局隐藏起来，当你点击该item的时候，再将其展现出来。通过这个属性，我们就可以将每个item复杂的布局隐藏起来，从而有效的节约了actionbar的布局空间。\n<!-- more -->\nsearchview.xml\n\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\" >\n\n    <EditText\n        android:id=\"@+id/search\"\n        style=\"@android:style/Widget.Holo.EditText\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:hint=\"搜索视频\"\n        android:imeOptions=\"actionSearch\"\n        android:singleLine=\"true\"\n        android:textColor=\"@android:color/black\"\n        android:textCursorDrawable=\"@null\" />\n\n</LinearLayout>\n```\n\n代码\n\n```java\n\t@Override\n\tpublic boolean onCreateOptionsMenu(Menu menu) {\n\n\t\t// Inflate the menu; this adds items to the action bar if it is present.\n\t\tgetMenuInflater().inflate(R.menu.activity_main, menu);\n\t\tinitSearch(menu);\n\t\treturn true;\n\t}\n\n\tprivate VideoFragment videoFragment;\n\n\t/**\n\t * 搜索动作\n\t * \n\t * @param menu\n\t */\n\tprivate void initSearch(Menu menu) {\n\t\tMenuItem item = menu.findItem(R.id.menu_search);\n\t\tView view = item.getActionView();\n\t\tfinal EditText search = (EditText) view.findViewById(R.id.search);\n\t\tMenuItemCompat.setOnActionExpandListener(item,\n\t\t\t\tnew OnActionExpandListener() {\n\t\t\t\t\t@Override\n\t\t\t\t\tpublic boolean onMenuItemActionCollapse(MenuItem item) {\n\t\t\t\t\t\t// Toast.makeText(MainDrawerActivity.this, \"啊哦，我隐藏起来了！\",\n\t\t\t\t\t\t// Toast.LENGTH_SHORT).show();\n\t\t\t\t\t\tsearch.clearFocus(); // 清除焦点\n\t\t\t\t\t\tAppUtil.hideSoftInput(MainDrawerActivity.this);\n\t\t\t\t\t\tif (search.getText().length() > 0) {// 重新恢复搜索之前的数据\n\t\t\t\t\t\t\tvideoFragment.searchVideoTable(false, \"\");//\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\t@Override\n\t\t\t\t\tpublic boolean onMenuItemActionExpand(MenuItem item) {\n\t\t\t\t\t\t// Toast.makeText(MainDrawerActivity.this, \"啦啦啦，我出现喽！\",\n\t\t\t\t\t\t// Toast.LENGTH_SHORT).show();\n\t\t\t\t\t\tsearch.requestFocus(); // 请求获取焦点\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * 调起软键盘\n\t\t\t\t\t\t */\n\t\t\t\t\t\tInputMethodManager m = (InputMethodManager)     getSystemService(Context.INPUT_METHOD_SERVICE);\n\t\t\t\t\t\tm.toggleSoftInput(0, InputMethodManager.HIDE_NOT_ALWAYS);\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\tsearch.setOnEditorActionListener(new OnEditorActionListener() {\n\n\t\t\t@Override\n\t\t\tpublic boolean onEditorAction(TextView v, int actionId,\n\t\t\t\t\tKeyEvent event) {\n\t\t\t\tif (actionId == EditorInfo.IME_ACTION_SEARCH) {\n\t\t\t\t\tif (search.getText().length() > 0) {// 搜索\n\t\t\t\t\t\tAppUtil.hideSoftInput(MainDrawerActivity.this);\n\t\t\t\t\t\tvideoFragment.searchVideoTable(true, search.getText()\n\t\t\t\t\t\t\t\t.toString());\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t}\n```\n\n* 参考\n\n[Android ActionBar 的其它用法（搜索、分享、隐藏复杂布局，模仿Google Play,微信）](http://blog.csdn.net/xy_nyle/article/details/18894755)\n\n[Android在EditText中开启软键盘的＂Done＂按钮](http://www.fengfly.com/plus/view-206564-1.html)\n\n[输入法软键盘显示/隐藏的监听和控制](http://glblong.blog.51cto.com/3058613/1543172)\n\n[修改Android EditText光标颜色](http://blog.csdn.net/cw2004100021124/article/details/12649671)\n\n[Android:自定义输入框光标颜色](http://my.oschina.net/xsjayz/blog/104344)\n","slug":"SearchView","published":1,"updated":"2016-03-17T00:44:06.348Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge3b009mo4pknv5sj1p0"},{"title":"Saving Data-Saving Files","date":"2015-07-12T16:00:00.000Z","_content":">微言App中有个阅读量的功能，是直接将用户的阅读量保存在SD卡上，我封装成了工具类。\n\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanAppScreenshots.gif)\n\n<!--more-->\n\n## 实例APK\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanAppDownload.png)\n\n## 需要权限\n\n```js\n <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\n```\n\n## ReadUtil.java\n\n```java\n public class ReadUtil {\n    public static final File SDCardDir = Environment.getExternalStorageDirectory(); //获取SDCard目录\n    public static final String SD_ROOT_NAME = \"WeiYan/\";\n    public static final String SD_FILE_NAME = \"reading\";\n\n    public static void saveToFile(int readTotal) {\n        try {\n            // 判断SD卡是否存在，并且是否具有读写权限\n            if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {\n                File saveFile = new File(SDCardDir + File.separator + SD_ROOT_NAME, SD_FILE_NAME);\n                if (!saveFile.getParentFile().exists()) {\n                    saveFile.getParentFile().mkdirs();\n                }\n                int nowReadingTotal = getReadedTotal() + readTotal;\n                String readedTotal = nowReadingTotal + \"\";\n                FileOutputStream outStream = new FileOutputStream(saveFile);\n                outStream.write(readedTotal.getBytes());\n                outStream.close();\n            } else {\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static int getReadedTotal() {\n        int readedTotal = 0;\n        File file = new File(SDCardDir + File.separator + SD_ROOT_NAME, SD_FILE_NAME);\n        if (file.exists() && file.isFile()) {\n            StringBuffer stringBuffer = new StringBuffer();\n            try {\n                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(new FileInputStream(file), \"UTF-8\"));\n                int c;\n                while ((c = bufferedReader.read()) != -1) {\n                    stringBuffer.append((char) c);\n                }\n                bufferedReader.close();\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n            String result = stringBuffer.toString();\n            readedTotal = Integer.parseInt(result);\n        }\n        return readedTotal;\n    }\n}\n```\n\n## 如何调用\n### 读取数据\n```java\n ReadUtil.getReadedTotal()\n```\n\n### 保存阅读量\n```java\nReadUtil.saveToFile(readTotal);\n```","source":"_posts/SavingFiles.md","raw":"title: Saving Data-Saving Files\ndate: 2015-07-13\ncategories: [Android]\ntags: [Android,SQLite,WeiYan]\n---\n>微言App中有个阅读量的功能，是直接将用户的阅读量保存在SD卡上，我封装成了工具类。\n\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanAppScreenshots.gif)\n\n<!--more-->\n\n## 实例APK\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanAppDownload.png)\n\n## 需要权限\n\n```js\n <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\n```\n\n## ReadUtil.java\n\n```java\n public class ReadUtil {\n    public static final File SDCardDir = Environment.getExternalStorageDirectory(); //获取SDCard目录\n    public static final String SD_ROOT_NAME = \"WeiYan/\";\n    public static final String SD_FILE_NAME = \"reading\";\n\n    public static void saveToFile(int readTotal) {\n        try {\n            // 判断SD卡是否存在，并且是否具有读写权限\n            if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {\n                File saveFile = new File(SDCardDir + File.separator + SD_ROOT_NAME, SD_FILE_NAME);\n                if (!saveFile.getParentFile().exists()) {\n                    saveFile.getParentFile().mkdirs();\n                }\n                int nowReadingTotal = getReadedTotal() + readTotal;\n                String readedTotal = nowReadingTotal + \"\";\n                FileOutputStream outStream = new FileOutputStream(saveFile);\n                outStream.write(readedTotal.getBytes());\n                outStream.close();\n            } else {\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static int getReadedTotal() {\n        int readedTotal = 0;\n        File file = new File(SDCardDir + File.separator + SD_ROOT_NAME, SD_FILE_NAME);\n        if (file.exists() && file.isFile()) {\n            StringBuffer stringBuffer = new StringBuffer();\n            try {\n                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(new FileInputStream(file), \"UTF-8\"));\n                int c;\n                while ((c = bufferedReader.read()) != -1) {\n                    stringBuffer.append((char) c);\n                }\n                bufferedReader.close();\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n            String result = stringBuffer.toString();\n            readedTotal = Integer.parseInt(result);\n        }\n        return readedTotal;\n    }\n}\n```\n\n## 如何调用\n### 读取数据\n```java\n ReadUtil.getReadedTotal()\n```\n\n### 保存阅读量\n```java\nReadUtil.saveToFile(readTotal);\n```","slug":"SavingFiles","published":1,"updated":"2016-03-17T00:44:06.347Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge3e009to4pkxfcp3zji"},{"title":"Android保存图片并显示系统图库","date":"2015-07-26T16:00:00.000Z","_content":"```java\n  /**\n     * 0 保存失败；\n     * 1 保存成功；\n     * 2 已经存在\n     */\n\n    class SaveImageToGalleryTask extends AsyncTask<Objects, Objects, Integer> {\n        @Override\n        protected Integer doInBackground(Objects... params) {\n            Bitmap bitmap = null;\n          \n            try {\n              \n                bitmap = Picasso.with(GirlImageDetailActivity.this).load(\"图片URL\").get();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n            if (bitmap == null) {\n                return 0;\n            }\n            File appDir = new File(Environment.getExternalStorageDirectory(), \"hua\");\n            if (!appDir.exists()) {\n                appDir.mkdir();\n            }\n            final String fileName = \"图片名字\"+ \".png\";\n            File file = new File(appDir, fileName);\n            if (file.exists()) {\n                return 2;\n            } else {\n                try {\n                    FileOutputStream fileOutputStream = new FileOutputStream(file);\n                    bitmap.compress(Bitmap.CompressFormat.PNG, 100, fileOutputStream);\n                    fileOutputStream.flush();\n                    fileOutputStream.close();\n\n                    // 其次把文件插入到系统图库\n                    MediaStore.Images.Media.insertImage(GirlImageDetailActivity.this.getContentResolver(), file.getAbsolutePath(), fileName, null);\n\n                    // 最后通知图库更新\n                    Intent intent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.parse(\"file://\" + file.getAbsolutePath()));\n                    sendBroadcast(intent);\n                    return 1;\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    return 0;\n                }\n\n            }\n        }\n\n        @Override\n        protected void onPostExecute(Integer integer) {\n            super.onPostExecute(integer);\n            switch (integer) {\n                case 0:\n                    Snackbar.make(detailLayout, \"保存失败\", Snackbar.LENGTH_SHORT).show();\n                    break;\n                case 1:\n                    File appDir = new File(Environment.getExternalStorageDirectory(), \"hua\");\n                    Snackbar.make(detailLayout, \"成功保存至\" + appDir.getAbsolutePath(), Snackbar.LENGTH_SHORT).show();\n                    break;\n                case 2:\n                    Snackbar.make(detailLayout, \"图片已经存在\", Snackbar.LENGTH_SHORT).show();\n                    break;\n            }\n        }\n    }\n```\n","source":"_posts/SaveImageToGallery.md","raw":"title: Android保存图片并显示系统图库\ndate: 2015-07-27 #发表日期，一般不改动\ncategory: Android\ntags: [Android]\n---\n```java\n  /**\n     * 0 保存失败；\n     * 1 保存成功；\n     * 2 已经存在\n     */\n\n    class SaveImageToGalleryTask extends AsyncTask<Objects, Objects, Integer> {\n        @Override\n        protected Integer doInBackground(Objects... params) {\n            Bitmap bitmap = null;\n          \n            try {\n              \n                bitmap = Picasso.with(GirlImageDetailActivity.this).load(\"图片URL\").get();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n            if (bitmap == null) {\n                return 0;\n            }\n            File appDir = new File(Environment.getExternalStorageDirectory(), \"hua\");\n            if (!appDir.exists()) {\n                appDir.mkdir();\n            }\n            final String fileName = \"图片名字\"+ \".png\";\n            File file = new File(appDir, fileName);\n            if (file.exists()) {\n                return 2;\n            } else {\n                try {\n                    FileOutputStream fileOutputStream = new FileOutputStream(file);\n                    bitmap.compress(Bitmap.CompressFormat.PNG, 100, fileOutputStream);\n                    fileOutputStream.flush();\n                    fileOutputStream.close();\n\n                    // 其次把文件插入到系统图库\n                    MediaStore.Images.Media.insertImage(GirlImageDetailActivity.this.getContentResolver(), file.getAbsolutePath(), fileName, null);\n\n                    // 最后通知图库更新\n                    Intent intent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.parse(\"file://\" + file.getAbsolutePath()));\n                    sendBroadcast(intent);\n                    return 1;\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    return 0;\n                }\n\n            }\n        }\n\n        @Override\n        protected void onPostExecute(Integer integer) {\n            super.onPostExecute(integer);\n            switch (integer) {\n                case 0:\n                    Snackbar.make(detailLayout, \"保存失败\", Snackbar.LENGTH_SHORT).show();\n                    break;\n                case 1:\n                    File appDir = new File(Environment.getExternalStorageDirectory(), \"hua\");\n                    Snackbar.make(detailLayout, \"成功保存至\" + appDir.getAbsolutePath(), Snackbar.LENGTH_SHORT).show();\n                    break;\n                case 2:\n                    Snackbar.make(detailLayout, \"图片已经存在\", Snackbar.LENGTH_SHORT).show();\n                    break;\n            }\n        }\n    }\n```\n","slug":"SaveImageToGallery","published":1,"updated":"2016-03-17T00:44:06.347Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge3g009yo4pk23zwaw65"},{"title":"Android 6.0 RuntimePermission","date":"2016-02-04T03:40:57.000Z","_content":"> android6.0棉花糖，app将不会在安装的时候授予权限。取而代之的是，app不得不在运行时一个一个询问用户授予权限。\n\n```\nandroid {\n    compileSdkVersion 23\n    ...\n  \n    defaultConfig {\n        ...\n        targetSdkVersion 23\n        ...\n    }\n}\n```\n<!--more-->\n如何app/build.gradle是23的话，在6.0上运行一些权限，没有做处理，会直接崩溃：\n```xml\n...\nCaused by: java.lang.SecurityException: Permission Denial: \nopening provider com.android.providers.contacts.ContactsProvider2 from ProcessRecord\n{c3b3c66 16712:com.wuxiaolong.apksample/u0a62} (pid=16712, uid=10062)\nrequires android.permission.READ_CONTACTS or android.permission.WRITE_CONTACTS\n...\n```\n如果targetSdkVersion 22，就不会发生这样的错误，下面就来实践下这个6.0运行的权限。\n\n# 效果预览\n按照惯例，先上效果图:\n![](http://7q5c2h.com1.z0.glb.clouddn.com/RuntimePermission1.png)\n说明：第一次请求授权，是没有“不再询问”，拒绝后，再次请求授权，就会出现“不再询问”。\n\n# 实践\n## AndroidManifest.xml\n```xml\n<uses-permission android:name=\"android.permission.READ_CONTACTS\" />\n```\n## 代码调用\n在需要使用到权限之前调用以下代码：\n```java\nprivate void mayRequestContacts() {\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n            switch (checkSelfPermission(Manifest.permission.READ_CONTACTS)) {\n                case PackageManager.PERMISSION_GRANTED:\n                    // 已有授权\n                    Log.i(\"wxl\", \"已有授权\");\n                    break;\n                case PackageManager.PERMISSION_DENIED:\n                    // 没有权限：尚未请求过权限，\n                    // 或者请求授权被拒绝，\n                    // 或者曾经授权过，但被用户在设置中禁用权限\n                    Log.i(\"wxl\", \"没有权限：尚未请求过权限，或者请求授权被拒绝，\" +\n                            \"或者曾经授权过， 但被用户在设置中禁用权限\");\n                    /**\n                     * 如果用户勾上了“不再询问”，这时候就不应弹请求权限的对话框，\n                     * 可以在请求权限之前用\n\t\t\t\t\t * shouldShowRequestPermissionRationale判断用户是否拒绝过，\n                     * 如果返回true，表示用户拒绝过。\n                     */\n                    Log.i(\"wxl\", \"shouldShowRequestPermissionRationale==\" \n\t\t\t\t\t+ shouldShowRequestPermissionRationale(READ_CONTACTS));\n                    if (shouldShowRequestPermissionRationale(READ_CONTACTS)) {\n                        Snackbar.make(mEmailView, \n\t\t\t\t\t\tR.string.permission_rationale, Snackbar.LENGTH_INDEFINITE)\n                                .setAction(android.R.string.ok, new View.OnClickListener() {\n                                    @Override\n                                    @TargetApi(Build.VERSION_CODES.M)\n                                    public void onClick(View v) {\n                                        requestPermissions(new String[]{READ_CONTACTS}, \n\t\t\t\t\t\t\t\t\t\tREQUEST_READ_CONTACTS);\n                                    }\n                                }).show();\n                    } else {\n                        requestPermissions(new String[]{READ_CONTACTS}, \n\t\t\t\t\t\tREQUEST_READ_CONTACTS);\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n\n    }\n```\ncheckSelfPermission：检查权限\nrequestPermissions：请求权限\nshouldShowRequestPermissionRationale：判断用户是否拒绝过\n\n## 授权回调\n不管是允许或拒绝，都会回调：\n```java\n @Override\n    public void onRequestPermissionsResult(int requestCode,\n     @NonNull  String[] permissions,@NonNull  int[] grantResults) {\n        if (requestCode == REQUEST_READ_CONTACTS) {\n            if (grantResults.length == 1 &&\n                    grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                // 授权请求被通过，读取通讯录\n                Log.i(\"wxl\", \"授权请求被通过，读取通讯录\");\n            } else {\n                Log.i(\"wxl\", \"授权请求不被通过\");\n            }\n        }\n    }\n```\n# 多个权限\n```java\n @TargetApi(Build.VERSION_CODES.M)\n    private void checkPermissions() {\n        List<String> permissionsNeeded = new ArrayList<>();\n        final List<String> permissionsList = new ArrayList<>();\n        if (deniedPermission(permissionsList, Manifest.permission.ACCESS_FINE_LOCATION))\n            permissionsNeeded.add(\"GPS\");\n        if (deniedPermission(permissionsList, Manifest.permission.READ_CONTACTS))\n            permissionsNeeded.add(\"Read Contacts\");\n        if (permissionsList.size() > 0) {\n            if (permissionsNeeded.size() > 0) {\n                // Need Rationale\n                String message = \"You need to grant access to \" + permissionsNeeded.get(0);\n                for (int i = 1; i < permissionsNeeded.size(); i++)\n                    message = message + \", \" + permissionsNeeded.get(i);\n                requestPermissions(permissionsList.toArray(new String[permissionsList.size()]), REQUEST_PERMISSIONS);\n            }\n        }\n    }\n\n    @TargetApi(Build.VERSION_CODES.M)\n    private boolean deniedPermission(List<String> permissionsList, String permission) {\n        if (checkSelfPermission(permission) == PackageManager.PERMISSION_DENIED) {\n            permissionsList.add(permission);\n            // true，表示用户拒绝过\n            if (shouldShowRequestPermissionRationale(permission)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Callback received when a permissions request has been completed.\n     */\n    @Override\n    public void onRequestPermissionsResult(int requestCode,\n                                           String[] permissions, int[] grantResults) {       \n        if (requestCode == REQUEST_PERMISSIONS) {\n            Map<String, Integer> perms = new HashMap<String, Integer>();\n            // Initial\n            perms.put(Manifest.permission.ACCESS_FINE_LOCATION, PackageManager.PERMISSION_GRANTED);\n            perms.put(Manifest.permission.READ_CONTACTS, PackageManager.PERMISSION_GRANTED);\n            // Fill with results\n            for (int i = 0; i < permissions.length; i++)\n                perms.put(permissions[i], grantResults[i]);\n            // Check for ACCESS_FINE_LOCATION\n            if (perms.get(Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED\n                    && perms.get(Manifest.permission.READ_CONTACTS) == PackageManager.PERMISSION_GRANTED) {\n                // All Permissions Granted\n                Log.i(\"wxl\", \"授权请求被通过\");\n            } else {\n                // Permission Denied\n                Log.i(\"wxl\", \"授权请求不被通过\");\n            }\n        }\n    }\n```\n# 权限分组\n权限那么多，如果一个个判断，岂不是会疯掉，如图：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/RuntimePermission2.png)\n同一组的任何一个权限被授权了，其他权限也自动被授权。例如，一旦WRITE_CONTACTS被授权了，app也有READ_CONTACTS和GET_ACCOUNTS了。\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 附录\n[Android M 新的运行时权限开发者需要知道的一切](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0830/3387.html)\n[Android Runtime Permission测试](http://blog.piasy.com/Android-Runtime-Permission-Test/)\n\n","source":"_posts/RuntimePermission.md","raw":"title: Android 6.0 RuntimePermission\ndate: 2016-02-04 11:40:57\ntags: RuntimePermission\ncategory: Android \n---\n> android6.0棉花糖，app将不会在安装的时候授予权限。取而代之的是，app不得不在运行时一个一个询问用户授予权限。\n\n```\nandroid {\n    compileSdkVersion 23\n    ...\n  \n    defaultConfig {\n        ...\n        targetSdkVersion 23\n        ...\n    }\n}\n```\n<!--more-->\n如何app/build.gradle是23的话，在6.0上运行一些权限，没有做处理，会直接崩溃：\n```xml\n...\nCaused by: java.lang.SecurityException: Permission Denial: \nopening provider com.android.providers.contacts.ContactsProvider2 from ProcessRecord\n{c3b3c66 16712:com.wuxiaolong.apksample/u0a62} (pid=16712, uid=10062)\nrequires android.permission.READ_CONTACTS or android.permission.WRITE_CONTACTS\n...\n```\n如果targetSdkVersion 22，就不会发生这样的错误，下面就来实践下这个6.0运行的权限。\n\n# 效果预览\n按照惯例，先上效果图:\n![](http://7q5c2h.com1.z0.glb.clouddn.com/RuntimePermission1.png)\n说明：第一次请求授权，是没有“不再询问”，拒绝后，再次请求授权，就会出现“不再询问”。\n\n# 实践\n## AndroidManifest.xml\n```xml\n<uses-permission android:name=\"android.permission.READ_CONTACTS\" />\n```\n## 代码调用\n在需要使用到权限之前调用以下代码：\n```java\nprivate void mayRequestContacts() {\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n            switch (checkSelfPermission(Manifest.permission.READ_CONTACTS)) {\n                case PackageManager.PERMISSION_GRANTED:\n                    // 已有授权\n                    Log.i(\"wxl\", \"已有授权\");\n                    break;\n                case PackageManager.PERMISSION_DENIED:\n                    // 没有权限：尚未请求过权限，\n                    // 或者请求授权被拒绝，\n                    // 或者曾经授权过，但被用户在设置中禁用权限\n                    Log.i(\"wxl\", \"没有权限：尚未请求过权限，或者请求授权被拒绝，\" +\n                            \"或者曾经授权过， 但被用户在设置中禁用权限\");\n                    /**\n                     * 如果用户勾上了“不再询问”，这时候就不应弹请求权限的对话框，\n                     * 可以在请求权限之前用\n\t\t\t\t\t * shouldShowRequestPermissionRationale判断用户是否拒绝过，\n                     * 如果返回true，表示用户拒绝过。\n                     */\n                    Log.i(\"wxl\", \"shouldShowRequestPermissionRationale==\" \n\t\t\t\t\t+ shouldShowRequestPermissionRationale(READ_CONTACTS));\n                    if (shouldShowRequestPermissionRationale(READ_CONTACTS)) {\n                        Snackbar.make(mEmailView, \n\t\t\t\t\t\tR.string.permission_rationale, Snackbar.LENGTH_INDEFINITE)\n                                .setAction(android.R.string.ok, new View.OnClickListener() {\n                                    @Override\n                                    @TargetApi(Build.VERSION_CODES.M)\n                                    public void onClick(View v) {\n                                        requestPermissions(new String[]{READ_CONTACTS}, \n\t\t\t\t\t\t\t\t\t\tREQUEST_READ_CONTACTS);\n                                    }\n                                }).show();\n                    } else {\n                        requestPermissions(new String[]{READ_CONTACTS}, \n\t\t\t\t\t\tREQUEST_READ_CONTACTS);\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n\n    }\n```\ncheckSelfPermission：检查权限\nrequestPermissions：请求权限\nshouldShowRequestPermissionRationale：判断用户是否拒绝过\n\n## 授权回调\n不管是允许或拒绝，都会回调：\n```java\n @Override\n    public void onRequestPermissionsResult(int requestCode,\n     @NonNull  String[] permissions,@NonNull  int[] grantResults) {\n        if (requestCode == REQUEST_READ_CONTACTS) {\n            if (grantResults.length == 1 &&\n                    grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                // 授权请求被通过，读取通讯录\n                Log.i(\"wxl\", \"授权请求被通过，读取通讯录\");\n            } else {\n                Log.i(\"wxl\", \"授权请求不被通过\");\n            }\n        }\n    }\n```\n# 多个权限\n```java\n @TargetApi(Build.VERSION_CODES.M)\n    private void checkPermissions() {\n        List<String> permissionsNeeded = new ArrayList<>();\n        final List<String> permissionsList = new ArrayList<>();\n        if (deniedPermission(permissionsList, Manifest.permission.ACCESS_FINE_LOCATION))\n            permissionsNeeded.add(\"GPS\");\n        if (deniedPermission(permissionsList, Manifest.permission.READ_CONTACTS))\n            permissionsNeeded.add(\"Read Contacts\");\n        if (permissionsList.size() > 0) {\n            if (permissionsNeeded.size() > 0) {\n                // Need Rationale\n                String message = \"You need to grant access to \" + permissionsNeeded.get(0);\n                for (int i = 1; i < permissionsNeeded.size(); i++)\n                    message = message + \", \" + permissionsNeeded.get(i);\n                requestPermissions(permissionsList.toArray(new String[permissionsList.size()]), REQUEST_PERMISSIONS);\n            }\n        }\n    }\n\n    @TargetApi(Build.VERSION_CODES.M)\n    private boolean deniedPermission(List<String> permissionsList, String permission) {\n        if (checkSelfPermission(permission) == PackageManager.PERMISSION_DENIED) {\n            permissionsList.add(permission);\n            // true，表示用户拒绝过\n            if (shouldShowRequestPermissionRationale(permission)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Callback received when a permissions request has been completed.\n     */\n    @Override\n    public void onRequestPermissionsResult(int requestCode,\n                                           String[] permissions, int[] grantResults) {       \n        if (requestCode == REQUEST_PERMISSIONS) {\n            Map<String, Integer> perms = new HashMap<String, Integer>();\n            // Initial\n            perms.put(Manifest.permission.ACCESS_FINE_LOCATION, PackageManager.PERMISSION_GRANTED);\n            perms.put(Manifest.permission.READ_CONTACTS, PackageManager.PERMISSION_GRANTED);\n            // Fill with results\n            for (int i = 0; i < permissions.length; i++)\n                perms.put(permissions[i], grantResults[i]);\n            // Check for ACCESS_FINE_LOCATION\n            if (perms.get(Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED\n                    && perms.get(Manifest.permission.READ_CONTACTS) == PackageManager.PERMISSION_GRANTED) {\n                // All Permissions Granted\n                Log.i(\"wxl\", \"授权请求被通过\");\n            } else {\n                // Permission Denied\n                Log.i(\"wxl\", \"授权请求不被通过\");\n            }\n        }\n    }\n```\n# 权限分组\n权限那么多，如果一个个判断，岂不是会疯掉，如图：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/RuntimePermission2.png)\n同一组的任何一个权限被授权了，其他权限也自动被授权。例如，一旦WRITE_CONTACTS被授权了，app也有READ_CONTACTS和GET_ACCOUNTS了。\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n# 附录\n[Android M 新的运行时权限开发者需要知道的一切](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0830/3387.html)\n[Android Runtime Permission测试](http://blog.piasy.com/Android-Runtime-Permission-Test/)\n\n","slug":"RuntimePermission","published":1,"updated":"2016-03-17T00:44:06.347Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge3i00a1o4pkupvx7exj"},{"title":"android获取 res 中的资源","date":"2015-04-29T16:00:00.000Z","_content":"\n### 如何获取 res 中的资源\n\n数据包package：android.content.res\n\n### 主要类：Resources\n\n其主要接口按照功能，划分为以下三部分：\n\ngetXXXX()\n\n<!-- more -->\n\n例如：\n\nint getColor(int id)\n\nDrawable getDrawable(int id)\n\nString getString(int id)  直接获取res中存放的资源\n\nInputStream openRawResource(int id)  获取资源的数据流，读取资源数据\n\nvoid parseBundleExtras(XmlResourceParser parser, Bundle outBundle)  从XML文件中获取数据\n\nResource为每种资源提供了相应的接口来获取这种资源，除了可以直接获取资源外，还额外提供了以数据流的方式获取资源，这在以后的应用程序开发中会经常使用，那么如何获取Resources了，如下：Resources r = this.getContext().getResources();\n\nInputStream in = getResources().getAssets().open(\"wangfei.jpg\");//Assets下文件\n","source":"_posts/ResResources.md","raw":"title: android获取 res 中的资源\ndate: 2015-04-30 \ncategories: [Android]\ntags: [Android,Canvas]\n---\n\n### 如何获取 res 中的资源\n\n数据包package：android.content.res\n\n### 主要类：Resources\n\n其主要接口按照功能，划分为以下三部分：\n\ngetXXXX()\n\n<!-- more -->\n\n例如：\n\nint getColor(int id)\n\nDrawable getDrawable(int id)\n\nString getString(int id)  直接获取res中存放的资源\n\nInputStream openRawResource(int id)  获取资源的数据流，读取资源数据\n\nvoid parseBundleExtras(XmlResourceParser parser, Bundle outBundle)  从XML文件中获取数据\n\nResource为每种资源提供了相应的接口来获取这种资源，除了可以直接获取资源外，还额外提供了以数据流的方式获取资源，这在以后的应用程序开发中会经常使用，那么如何获取Resources了，如下：Resources r = this.getContext().getResources();\n\nInputStream in = getResources().getAssets().open(\"wangfei.jpg\");//Assets下文件\n","slug":"ResResources","published":1,"updated":"2016-03-17T00:44:06.346Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge3k00a5o4pkfu03sqar"},{"title":"RecyclerView+CardView使用","date":"2015-09-15T05:21:15.000Z","_content":"> RecyclerView和CardView使用\n\n## 实例App\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanScreenshots.gif)\n\n<!--more-->\n\n## gradle文件\n```js\n compile 'com.android.support:recyclerview-v7:22.2.0'\n compile 'com.android.support:cardview-v7:22.2.0'\n```\n## XML文件\n```js\n <android.support.v7.widget.RecyclerView\n  android:id=\"@+id/mRecyclerView\"\n  android:layout_width=\"match_parent\"\n  android:layout_height=\"match_parent\" />\n```\n## Activity中\n```java\n mRecyclerView = (RecyclerView) view.findViewById(R.id.mRecyclerView);\n  mRecyclerView.setLayoutManager(new LinearLayoutManager(this));//这里用线性显示 类似于listview\n//mRecyclerView.setLayoutManager(new GridLayoutManager(this, 2));//这里用线性宫格显示 类似于grid view\n//mRecyclerView.setLayoutManager(new StaggeredGridLayoutManager(2, OrientationHelper.VERTICAL));//这里用线性宫格显示 类似于瀑布流\n  mRecyclerView.setAdapter(new DayTextAdapter(getActivity(), parselist));\n```\n## DayTextAdapter\n```java\npublic class DayTextAdapter extends RecyclerView.Adapter<DayTextAdapter.ViewHolder> {\n    List<Map<String, String>> parselist;\n    private Activity activity;\n\n    public List<Map<String, String>> getParselist() {\n        return parselist;\n    }\n\n    public DayTextAdapter(Activity activity, List<Map<String, String>> parselist) {\n        this.activity = activity;\n        this.parselist = parselist;\n    }\n\n    @Override\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.day_text_item, parent, false);\n        return new ViewHolder(v);\n    }\n\n    @Override\n    public void onBindViewHolder(ViewHolder holder, int position) {\n        holder.title.setText(Html.fromHtml(\"<b>\" + parselist.get(position).get(\"title\") + \"</b>\"));\n        holder.content.setText(Html.fromHtml(\"发布时间：\"\n                + parselist.get(position).get(\"date\") + \"<br>\"\n                + parselist.get(position).get(\"postContent\")));\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return parselist.size();\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n        TextView title, content;\n\n        public ViewHolder(View itemView) {\n            super(itemView);\n            title = (TextView) itemView.findViewById(R.id.title);\n            content = (TextView) itemView.findViewById(R.id.content);\n\n\n            itemView.setOnClickListener(new View.OnClickListener() {\n\n                public void onClick(View v) {\n                   //点击事件\n                }\n            });\n        }\n    }\n}\n```\n## day_text_item.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:card_view=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n<android.support.v7.widget.CardView \n    android:id=\"@+id/card_view\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_gravity=\"center\"\n    android:layout_marginBottom=\"@dimen/card_view_margin_bottom\"\n    android:layout_marginLeft=\"10dp\"\n    android:layout_marginRight=\"10dp\"\n    android:layout_marginTop=\"10dp\"\n\tandroid:foreground=\"?attr/selectableItemBackground\"\n    card_view:cardBackgroundColor=\"?attr/itemBackgroundColor\"\n    card_view:cardCornerRadius=\"10dp\"\n    card_view:cardElevation=\"5dp\">\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        android:padding=\"15dip\">\n\n        <TextView\n            android:id=\"@+id/title\"\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\"\n            android:textColor=\"?attr/titleColor\"\n            android:textSize=\"@dimen/title\" />\n\n        <TextView\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"1dip\"\n            android:layout_marginTop=\"10dip\"\n            android:background=\"?attr/lineColor\" />\n\n        <TextView\n            android:id=\"@+id/content\"\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"10dip\"\n            android:ellipsize=\"end\"\n            android:lines=\"7\"\n            android:textColor=\"?attr/contentColor\"\n            android:textSize=\"@dimen/content\" />\n\n    </LinearLayout>\n</android.support.v7.widget.CardView>\n\n</LinearLayout>\n```\n说明：\nCardView中android:layout_marginBottom发现在5.0以上和以下效果不一样的。\nres文件下values文件dimens.xml\n```js\n<resources>\n    <dimen name=\"card_view_margin_bottom\">0dp</dimen>\n</resources>\n```\n再在res文件下建values-v21文件，并在dimens.xml\n```js\n<resources>\n    <dimen name=\"card_view_margin_bottom\">10dp</dimen>\n</resources>\n```\nCardView参数：\n```js\n<resources>\n    <declare-styleable name=\"CardView\">\n        <!-- Background color for CardView. -->\n        <!-- 背景色 -->\n        <attr name=\"cardBackgroundColor\" format=\"color\" />\n        <!-- Corner radius for CardView. -->\n        <!-- 边缘弧度数 -->\n        <attr name=\"cardCornerRadius\" format=\"dimension\" />\n        <!-- Elevation for CardView. -->\n        <!-- 高度 -->\n        <attr name=\"cardElevation\" format=\"dimension\" />\n        <!-- Maximum Elevation for CardView. -->\n        <!-- 最大高度 -->\n        <attr name=\"cardMaxElevation\" format=\"dimension\" />\n        <!-- Add padding in API v21+ as well to have the same measurements with previous versions. -->\n        <!-- 设置内边距，v21+的版本和之前的版本仍旧具有一样的计算方式 -->\n        <attr name=\"cardUseCompatPadding\" format=\"boolean\" />\n        <!-- Add padding to CardView on v20 and before to prevent intersections between the Card content and rounded corners. -->\n        <!-- 在v20和之前的版本中添加内边距，这个属性是为了防止卡片内容和边角的重叠 -->\n        <attr name=\"cardPreventCornerOverlap\" format=\"boolean\" />\n        <!-- 下面是卡片边界距离内部的距离-->\n        <!-- Inner padding between the edges of the Card and children of the CardView. -->\n        <attr name=\"contentPadding\" format=\"dimension\" />\n        <!-- Inner padding between the left edge of the Card and children of the CardView. -->\n        <attr name=\"contentPaddingLeft\" format=\"dimension\" />\n        <!-- Inner padding between the right edge of the Card and children of the CardView. -->\n        <attr name=\"contentPaddingRight\" format=\"dimension\" />\n        <!-- Inner padding between the top edge of the Card and children of the CardView. -->\n        <attr name=\"contentPaddingTop\" format=\"dimension\" />\n        <!-- Inner padding between the bottom edge of the Card and children of the CardView. -->\n        <attr name=\"contentPaddingBottom\" format=\"dimension\" />\n    </declare-styleable>\n</resources>\n```\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n","source":"_posts/RecyclerViewCardView.md","raw":"title: RecyclerView+CardView使用\ndate: 2015-09-15 13:21:15\ntags: [Android,RecyclerView,CardView]\ncategory: Android\n---\n> RecyclerView和CardView使用\n\n## 实例App\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanScreenshots.gif)\n\n<!--more-->\n\n## gradle文件\n```js\n compile 'com.android.support:recyclerview-v7:22.2.0'\n compile 'com.android.support:cardview-v7:22.2.0'\n```\n## XML文件\n```js\n <android.support.v7.widget.RecyclerView\n  android:id=\"@+id/mRecyclerView\"\n  android:layout_width=\"match_parent\"\n  android:layout_height=\"match_parent\" />\n```\n## Activity中\n```java\n mRecyclerView = (RecyclerView) view.findViewById(R.id.mRecyclerView);\n  mRecyclerView.setLayoutManager(new LinearLayoutManager(this));//这里用线性显示 类似于listview\n//mRecyclerView.setLayoutManager(new GridLayoutManager(this, 2));//这里用线性宫格显示 类似于grid view\n//mRecyclerView.setLayoutManager(new StaggeredGridLayoutManager(2, OrientationHelper.VERTICAL));//这里用线性宫格显示 类似于瀑布流\n  mRecyclerView.setAdapter(new DayTextAdapter(getActivity(), parselist));\n```\n## DayTextAdapter\n```java\npublic class DayTextAdapter extends RecyclerView.Adapter<DayTextAdapter.ViewHolder> {\n    List<Map<String, String>> parselist;\n    private Activity activity;\n\n    public List<Map<String, String>> getParselist() {\n        return parselist;\n    }\n\n    public DayTextAdapter(Activity activity, List<Map<String, String>> parselist) {\n        this.activity = activity;\n        this.parselist = parselist;\n    }\n\n    @Override\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.day_text_item, parent, false);\n        return new ViewHolder(v);\n    }\n\n    @Override\n    public void onBindViewHolder(ViewHolder holder, int position) {\n        holder.title.setText(Html.fromHtml(\"<b>\" + parselist.get(position).get(\"title\") + \"</b>\"));\n        holder.content.setText(Html.fromHtml(\"发布时间：\"\n                + parselist.get(position).get(\"date\") + \"<br>\"\n                + parselist.get(position).get(\"postContent\")));\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return parselist.size();\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n        TextView title, content;\n\n        public ViewHolder(View itemView) {\n            super(itemView);\n            title = (TextView) itemView.findViewById(R.id.title);\n            content = (TextView) itemView.findViewById(R.id.content);\n\n\n            itemView.setOnClickListener(new View.OnClickListener() {\n\n                public void onClick(View v) {\n                   //点击事件\n                }\n            });\n        }\n    }\n}\n```\n## day_text_item.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:card_view=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n<android.support.v7.widget.CardView \n    android:id=\"@+id/card_view\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_gravity=\"center\"\n    android:layout_marginBottom=\"@dimen/card_view_margin_bottom\"\n    android:layout_marginLeft=\"10dp\"\n    android:layout_marginRight=\"10dp\"\n    android:layout_marginTop=\"10dp\"\n\tandroid:foreground=\"?attr/selectableItemBackground\"\n    card_view:cardBackgroundColor=\"?attr/itemBackgroundColor\"\n    card_view:cardCornerRadius=\"10dp\"\n    card_view:cardElevation=\"5dp\">\n\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        android:padding=\"15dip\">\n\n        <TextView\n            android:id=\"@+id/title\"\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\"\n            android:textColor=\"?attr/titleColor\"\n            android:textSize=\"@dimen/title\" />\n\n        <TextView\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"1dip\"\n            android:layout_marginTop=\"10dip\"\n            android:background=\"?attr/lineColor\" />\n\n        <TextView\n            android:id=\"@+id/content\"\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"10dip\"\n            android:ellipsize=\"end\"\n            android:lines=\"7\"\n            android:textColor=\"?attr/contentColor\"\n            android:textSize=\"@dimen/content\" />\n\n    </LinearLayout>\n</android.support.v7.widget.CardView>\n\n</LinearLayout>\n```\n说明：\nCardView中android:layout_marginBottom发现在5.0以上和以下效果不一样的。\nres文件下values文件dimens.xml\n```js\n<resources>\n    <dimen name=\"card_view_margin_bottom\">0dp</dimen>\n</resources>\n```\n再在res文件下建values-v21文件，并在dimens.xml\n```js\n<resources>\n    <dimen name=\"card_view_margin_bottom\">10dp</dimen>\n</resources>\n```\nCardView参数：\n```js\n<resources>\n    <declare-styleable name=\"CardView\">\n        <!-- Background color for CardView. -->\n        <!-- 背景色 -->\n        <attr name=\"cardBackgroundColor\" format=\"color\" />\n        <!-- Corner radius for CardView. -->\n        <!-- 边缘弧度数 -->\n        <attr name=\"cardCornerRadius\" format=\"dimension\" />\n        <!-- Elevation for CardView. -->\n        <!-- 高度 -->\n        <attr name=\"cardElevation\" format=\"dimension\" />\n        <!-- Maximum Elevation for CardView. -->\n        <!-- 最大高度 -->\n        <attr name=\"cardMaxElevation\" format=\"dimension\" />\n        <!-- Add padding in API v21+ as well to have the same measurements with previous versions. -->\n        <!-- 设置内边距，v21+的版本和之前的版本仍旧具有一样的计算方式 -->\n        <attr name=\"cardUseCompatPadding\" format=\"boolean\" />\n        <!-- Add padding to CardView on v20 and before to prevent intersections between the Card content and rounded corners. -->\n        <!-- 在v20和之前的版本中添加内边距，这个属性是为了防止卡片内容和边角的重叠 -->\n        <attr name=\"cardPreventCornerOverlap\" format=\"boolean\" />\n        <!-- 下面是卡片边界距离内部的距离-->\n        <!-- Inner padding between the edges of the Card and children of the CardView. -->\n        <attr name=\"contentPadding\" format=\"dimension\" />\n        <!-- Inner padding between the left edge of the Card and children of the CardView. -->\n        <attr name=\"contentPaddingLeft\" format=\"dimension\" />\n        <!-- Inner padding between the right edge of the Card and children of the CardView. -->\n        <attr name=\"contentPaddingRight\" format=\"dimension\" />\n        <!-- Inner padding between the top edge of the Card and children of the CardView. -->\n        <attr name=\"contentPaddingTop\" format=\"dimension\" />\n        <!-- Inner padding between the bottom edge of the Card and children of the CardView. -->\n        <attr name=\"contentPaddingBottom\" format=\"dimension\" />\n    </declare-styleable>\n</resources>\n```\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n","slug":"RecyclerViewCardView","published":1,"updated":"2016-03-17T00:44:06.346Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge3m00a9o4pk4xru8d2k"},{"title":"PullLoadMoreRecyclerView","date":"2015-07-23T23:56:29.000Z","_content":"实现RecyclerView下拉刷新和上拉加载更多以及RecyclerView线性、网格、瀑布流效果演示\n\n# 效果预览\n![](https://github.com/WuXiaolong/PullLoadMoreRecyclerView/raw/master/screenshots/screenshots.gif)\n<!--more-->\n# 实例APP\n[魅族应用商店](http://app.meizu.com/apps/public/detail?package_name=com.xiaomolong.ufosay)\n\n# 使用方法\n## build.gradle文件\n```java\ndependencies {\n  compile 'com.wuxiaolong.pullloadmorerecyclerview:library:1.0.3'\n}\n```\n## xml引用\n```js\n <com.wuxiaolong.pullloadmorerecyclerview.PullLoadMoreRecyclerView\n        android:id=\"@+id/pullLoadMoreRecyclerView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_margin=\"10dp\" />\n```\n## 设置线性布局\n```java\n mPullLoadMoreRecyclerView = (PullLoadMoreRecyclerView) view.findViewById(R.id.pullLoadMoreRecyclerView);\n mPullLoadMoreRecyclerView.setLinearLayout();\n```\n## 设置网格布局\n```java\n mPullLoadMoreRecyclerView.setGridLayout(2);//参数为列数\n```\n## 设置交错网格布局，即瀑布流效果\n```java\n mPullLoadMoreRecyclerView.setStaggeredGridLayout(2);//参数为列数\n```\n## 绑定适配器\n```java\n  mRecyclerViewAdapter = new RecyclerViewAdapter();\n  mPullLoadMoreRecyclerView.setAdapter(mRecyclerViewAdapter);\n\npublic class RecyclerViewAdapter extends RecyclerView.Adapter<RecyclerViewAdapter.ViewHolder> {\n \n    public RecyclerViewAdapter() {\n       \n    }\n\n    @Override\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.recycler_view_item, parent, false);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(ViewHolder holder, int position) {\n      \n    }\n\n    @Override\n    public int getItemCount() {\n        return 0;\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {     \n\n        public ViewHolder(View itemView) {\n            super(itemView);\n           \n        }\n    }\n}\n```\n## 调用下拉刷新和加载更多\n```java\n mPullLoadMoreRecyclerView.setOnPullLoadMoreListener(new PullLoadMoreRecyclerView.PullLoadMoreListener() {\n            @Override\n            public void onRefresh() {\n                \n            }\n\n            @Override\n            public void onLoadMore() {               \n\n            }\n        });\n```\n## 刷新结束\n```java\nmPullLoadMoreRecyclerView.setPullLoadMoreCompleted();\n```\n## 其他方法\n### 不需要下拉刷新\n```java\nmPullLoadMoreRecyclerView.setPullRefreshEnable(false);\n```\n### 设置下拉刷新颜色\n```java\n mPullLoadMoreRecyclerView.setColorSchemeResources(android.R.color.holo_red_dark,android.R.color.holo_blue_dark);\n```\n### 快速Top\n```java\n  mPullLoadMoreRecyclerView.scrollToTop();\n```\n# 源码地址\n[PullLoadMoreRecyclerView](https://github.com/WuXiaolong/PullLoadMoreRecyclerView)\n\n# 更多交流\nAndroid技术交流群\n③群：370527306<a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n# 个人博客\n[http://wuxiaolong.me/](http://wuxiaolong.me/)\n\n# 作者微博\n[吴小龙同學](http://weibo.com/u/2175011601)\n\n# License\nApache 2.0\n\n\n\n\n","source":"_posts/PullLoadMoreRecyclerView.md","raw":"title: PullLoadMoreRecyclerView\ndate: 2015-07-24 07:56:29 #发表日期，一般不改动\ncategories: Android\ntags: [Android,RecyclerView]\n---\n实现RecyclerView下拉刷新和上拉加载更多以及RecyclerView线性、网格、瀑布流效果演示\n\n# 效果预览\n![](https://github.com/WuXiaolong/PullLoadMoreRecyclerView/raw/master/screenshots/screenshots.gif)\n<!--more-->\n# 实例APP\n[魅族应用商店](http://app.meizu.com/apps/public/detail?package_name=com.xiaomolong.ufosay)\n\n# 使用方法\n## build.gradle文件\n```java\ndependencies {\n  compile 'com.wuxiaolong.pullloadmorerecyclerview:library:1.0.3'\n}\n```\n## xml引用\n```js\n <com.wuxiaolong.pullloadmorerecyclerview.PullLoadMoreRecyclerView\n        android:id=\"@+id/pullLoadMoreRecyclerView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_margin=\"10dp\" />\n```\n## 设置线性布局\n```java\n mPullLoadMoreRecyclerView = (PullLoadMoreRecyclerView) view.findViewById(R.id.pullLoadMoreRecyclerView);\n mPullLoadMoreRecyclerView.setLinearLayout();\n```\n## 设置网格布局\n```java\n mPullLoadMoreRecyclerView.setGridLayout(2);//参数为列数\n```\n## 设置交错网格布局，即瀑布流效果\n```java\n mPullLoadMoreRecyclerView.setStaggeredGridLayout(2);//参数为列数\n```\n## 绑定适配器\n```java\n  mRecyclerViewAdapter = new RecyclerViewAdapter();\n  mPullLoadMoreRecyclerView.setAdapter(mRecyclerViewAdapter);\n\npublic class RecyclerViewAdapter extends RecyclerView.Adapter<RecyclerViewAdapter.ViewHolder> {\n \n    public RecyclerViewAdapter() {\n       \n    }\n\n    @Override\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.recycler_view_item, parent, false);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(ViewHolder holder, int position) {\n      \n    }\n\n    @Override\n    public int getItemCount() {\n        return 0;\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {     \n\n        public ViewHolder(View itemView) {\n            super(itemView);\n           \n        }\n    }\n}\n```\n## 调用下拉刷新和加载更多\n```java\n mPullLoadMoreRecyclerView.setOnPullLoadMoreListener(new PullLoadMoreRecyclerView.PullLoadMoreListener() {\n            @Override\n            public void onRefresh() {\n                \n            }\n\n            @Override\n            public void onLoadMore() {               \n\n            }\n        });\n```\n## 刷新结束\n```java\nmPullLoadMoreRecyclerView.setPullLoadMoreCompleted();\n```\n## 其他方法\n### 不需要下拉刷新\n```java\nmPullLoadMoreRecyclerView.setPullRefreshEnable(false);\n```\n### 设置下拉刷新颜色\n```java\n mPullLoadMoreRecyclerView.setColorSchemeResources(android.R.color.holo_red_dark,android.R.color.holo_blue_dark);\n```\n### 快速Top\n```java\n  mPullLoadMoreRecyclerView.scrollToTop();\n```\n# 源码地址\n[PullLoadMoreRecyclerView](https://github.com/WuXiaolong/PullLoadMoreRecyclerView)\n\n# 更多交流\nAndroid技术交流群\n③群：370527306<a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n# 个人博客\n[http://wuxiaolong.me/](http://wuxiaolong.me/)\n\n# 作者微博\n[吴小龙同學](http://weibo.com/u/2175011601)\n\n# License\nApache 2.0\n\n\n\n\n","slug":"PullLoadMoreRecyclerView","published":1,"updated":"2016-03-17T00:44:06.346Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge3q00afo4pk6jox1vz8"},{"title":"SharedPreferencesUtil","date":"2015-08-19T01:28:49.000Z","_content":"\n>封装了SharedPreferences ，方便调用。\n\n<!--more-->\n```java\npublic class SharedPreferencesUtil {\n    public static String getString(Context context, String key,\n                                             final String defaultValue) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        return settings.getString(key, defaultValue);\n    }\n\n    public static void setString(Context context, final String key,\n                                           final String value) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        settings.edit().putString(key, value).apply();\n    }\n\n    public static boolean getBoolean(Context context, final String key,\n                                               final boolean defaultValue) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        return settings.getBoolean(key, defaultValue);\n    }\n\n    public static boolean hasKey(Context context, final String key) {\n        return PreferenceManager.getDefaultSharedPreferences(context).contains(\n                key);\n    }\n\n    public static void setBoolean(Context context, final String key,\n                                            final boolean value) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        settings.edit().putBoolean(key, value).apply();\n    }\n\n    public static void setInt(Context context, final String key,\n                                        final int value) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        settings.edit().putInt(key, value).apply();\n    }\n\n    public static int getInt(Context context, final String key,\n                                       final int defaultValue) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        return settings.getInt(key, defaultValue);\n    }\n\n    public static void setFloat(Context context, final String key,\n                                          final float value) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        settings.edit().putFloat(key, value).apply();\n    }\n\n    public static float getFloat(Context context, final String key,\n                                           final float defaultValue) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        return settings.getFloat(key, defaultValue);\n    }\n\n    public static void setLong(Context context, final String key,\n                                         final long value) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        settings.edit().putLong(key, value).apply();\n    }\n\n    public static long getLong(Context context, final String key,\n                                         final long defaultValue) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        return settings.getLong(key, defaultValue);\n    }\n\n    public static void clear(Context context,\n                                       final SharedPreferences p) {\n        final SharedPreferences.Editor editor = p.edit();\n        editor.clear();\n        editor.apply();\n    }\n}\n\n```","source":"_posts/PreferenceUtils.md","raw":"title: SharedPreferencesUtil\ndate: 2015-08-19 09:28:49\ntags: SharedPreferences\ncategory: Android\n---\n\n>封装了SharedPreferences ，方便调用。\n\n<!--more-->\n```java\npublic class SharedPreferencesUtil {\n    public static String getString(Context context, String key,\n                                             final String defaultValue) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        return settings.getString(key, defaultValue);\n    }\n\n    public static void setString(Context context, final String key,\n                                           final String value) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        settings.edit().putString(key, value).apply();\n    }\n\n    public static boolean getBoolean(Context context, final String key,\n                                               final boolean defaultValue) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        return settings.getBoolean(key, defaultValue);\n    }\n\n    public static boolean hasKey(Context context, final String key) {\n        return PreferenceManager.getDefaultSharedPreferences(context).contains(\n                key);\n    }\n\n    public static void setBoolean(Context context, final String key,\n                                            final boolean value) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        settings.edit().putBoolean(key, value).apply();\n    }\n\n    public static void setInt(Context context, final String key,\n                                        final int value) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        settings.edit().putInt(key, value).apply();\n    }\n\n    public static int getInt(Context context, final String key,\n                                       final int defaultValue) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        return settings.getInt(key, defaultValue);\n    }\n\n    public static void setFloat(Context context, final String key,\n                                          final float value) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        settings.edit().putFloat(key, value).apply();\n    }\n\n    public static float getFloat(Context context, final String key,\n                                           final float defaultValue) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        return settings.getFloat(key, defaultValue);\n    }\n\n    public static void setLong(Context context, final String key,\n                                         final long value) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        settings.edit().putLong(key, value).apply();\n    }\n\n    public static long getLong(Context context, final String key,\n                                         final long defaultValue) {\n        final SharedPreferences settings = PreferenceManager\n                .getDefaultSharedPreferences(context);\n        return settings.getLong(key, defaultValue);\n    }\n\n    public static void clear(Context context,\n                                       final SharedPreferences p) {\n        final SharedPreferences.Editor editor = p.edit();\n        editor.clear();\n        editor.apply();\n    }\n}\n\n```","slug":"PreferenceUtils","published":1,"updated":"2016-03-17T00:44:06.346Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge3s00ajo4pkxpl4caal"},{"title":"PioneeringRoad","date":"2015-08-28T04:24:42.000Z","_content":"\n* 好的产品，必须是产品设计、技术、运营的完美结合。\n* 有些初级的没细致研究，有些资深的东西又懂，或许就是一个原因：不够系统。\n","source":"_posts/PioneeringRoad.md","raw":"title: PioneeringRoad\ndate: 2015-08-28 12:24:42\ntags: PioneeringRoad\ncategory: Life\n---\n\n* 好的产品，必须是产品设计、技术、运营的完美结合。\n* 有些初级的没细致研究，有些资深的东西又懂，或许就是一个原因：不够系统。\n","slug":"PioneeringRoad","published":1,"updated":"2016-03-17T00:44:06.345Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge3v00ano4pkvlli5i8a"},{"title":"github之Picasso使用","date":"2015-09-14T03:32:12.000Z","_content":">github地址：[https://github.com/square/picasso](https://github.com/square/picasso)\n\n## Gradle:\n```java\ncompile 'com.squareup.picasso:picasso:2.5.2'\n```\n## 加载网络图片\n```java\nPicasso.with(context).load(\"http://i.imgur.com/DvpvklR.png\").into(imageView);\n```\n<!--more-->\n## 加载图片，设置回调\n```java\nPicasso.with(context).load(imageUrl)\n                    .into(imageView, new Callback() {\n                        @Override\n                        public void onSuccess() {\n                           \n                        }\n\n                        @Override\n                        public void onError() {\n                            \n                        }\n                    });\n```\n## 设置图片尺寸\n```java\nPicasso.with(context)\n  .load(url)\n  .resize(50, 50)\n  .centerCrop()\n  .into(imageView)\n```\n\n## 设置预加载和错误图片\n```java\nPicasso.with(context)\n    .load(url)\n    .placeholder(R.drawable.user_placeholder)\n    .error(R.drawable.user_placeholder_error)\n    .into(imageView);\n```\n## 加载本地图片\n```java\nPicasso.with(context).load(R.drawable.landing_screen).into(imageView1);\nPicasso.with(context).load(\"file:///android_asset/DvpvklR.png\").into(imageView2);\nPicasso.with(context).load(new File(...)).into(imageView3);\n```","source":"_posts/Picasso.md","raw":"title: github之Picasso使用\ndate: 2015-09-14 11:32:12\ntags: [Android,Picasso,github]\ncategory: github\n---\n>github地址：[https://github.com/square/picasso](https://github.com/square/picasso)\n\n## Gradle:\n```java\ncompile 'com.squareup.picasso:picasso:2.5.2'\n```\n## 加载网络图片\n```java\nPicasso.with(context).load(\"http://i.imgur.com/DvpvklR.png\").into(imageView);\n```\n<!--more-->\n## 加载图片，设置回调\n```java\nPicasso.with(context).load(imageUrl)\n                    .into(imageView, new Callback() {\n                        @Override\n                        public void onSuccess() {\n                           \n                        }\n\n                        @Override\n                        public void onError() {\n                            \n                        }\n                    });\n```\n## 设置图片尺寸\n```java\nPicasso.with(context)\n  .load(url)\n  .resize(50, 50)\n  .centerCrop()\n  .into(imageView)\n```\n\n## 设置预加载和错误图片\n```java\nPicasso.with(context)\n    .load(url)\n    .placeholder(R.drawable.user_placeholder)\n    .error(R.drawable.user_placeholder_error)\n    .into(imageView);\n```\n## 加载本地图片\n```java\nPicasso.with(context).load(R.drawable.landing_screen).into(imageView1);\nPicasso.with(context).load(\"file:///android_asset/DvpvklR.png\").into(imageView2);\nPicasso.with(context).load(new File(...)).into(imageView3);\n```","slug":"Picasso","published":1,"updated":"2016-03-17T00:44:06.345Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge3x00aro4pk5mabccfu"},{"title":"github之PhotoView使用","date":"2015-09-14T03:12:47.000Z","_content":">PhotoView使用在ViewPager中,github地址：[https://github.com/chrisbanes/PhotoView](https://github.com/chrisbanes/PhotoView)\n```js\n <com.android.xiaomolongstudio.danhuaer.view.HackyViewPager\n        android:id=\"@+id/viewPager\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_above=\"@id/ad_layout\" />\n```\n<!--more-->\nHackyViewPager.java\n```java\npublic class HackyViewPager extends ViewPager {\n\n\tprivate boolean isLocked;\n\t\n    public HackyViewPager(Context context) {\n        super(context);\n        isLocked = false;\n    }\n\n    public HackyViewPager(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        isLocked = false;\n    }\n\n    @Override\n    public boolean onInterceptTouchEvent(MotionEvent ev) {\n    \tif (!isLocked) {\n\t        try {\n\t            return super.onInterceptTouchEvent(ev);\n\t        } catch (IllegalArgumentException e) {\n\t            e.printStackTrace();\n\t            return false;\n\t        }\n    \t}\n    \treturn false;\n    }\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        return !isLocked && super.onTouchEvent(event);\n    }\n    \n\tpublic void toggleLock() {\n\t\tisLocked = !isLocked;\n\t}\n\n\tpublic void setLocked(boolean isLocked) {\n\t\tthis.isLocked = isLocked;\n\t}\n\n\tpublic boolean isLocked() {\n\t\treturn isLocked;\n\t}\n\t\n}\n```\n```java\n ViewPager mViewPager;\n mViewPager.setPageTransformer(true, new CardTransformer(0.8f));\n        mViewPager.setOffscreenPageLimit(2);\n        mViewPager.setAdapter(new ImageAdapter());\n        mViewPager.setCurrentItem(position);\n  \n```\nCardTransformer\n```java\n  /**\n     * Awesome Launcher-inspired page transformer\n     */\n    private static class CardTransformer implements ViewPager.PageTransformer {\n\n        private final float scaleAmount;\n\n        public CardTransformer(float scalingStart) {\n            scaleAmount = 1 - scalingStart;\n        }\n\n        @Override\n        public void transformPage(View page, float position) {\n            if (position >= 0f) {\n                final int w = page.getWidth();\n                float scaleFactor = 1 - scaleAmount * position;\n\n                page.setAlpha(1f - position);\n                page.setScaleX(scaleFactor);\n                page.setScaleY(scaleFactor);\n                page.setTranslationX(w * (1 - position) - w);\n            }\n        }\n\n    }\n```\n ImageAdapter\n```java\n private class ImageAdapter extends PagerAdapter {\n\n        @Override\n        public Object instantiateItem(ViewGroup container, int position) {\n            final String imageUrl = mHrefData.get(position);\n\n            final View view = LayoutInflater.from(EmotionImageDetailActivity.this).inflate(R.layout.emotion_image_detail_item, container, false);\n\n            final ProgressBar progressBar = (ProgressBar) view.findViewById(R.id.progressBar);\n            final TextView introduction = (TextView) view.findViewById(R.id.introduction);\n            introduction.setText(mIntroductionDataData.get(position));\n            final PhotoView imageView = (PhotoView) view.findViewById(R.id.imageView);                \n            Picasso.with(EmotionImageDetailActivity.this).load(imageUrl)\n                    .into(imageView, new Callback() {\n                        @Override\n                        public void onSuccess() {\n                            progressBar.setVisibility(View.GONE);\n                        }\n\n                        @Override\n                        public void onError() {\n                            progressBar.setVisibility(View.GONE);\n                        }\n                    });\n\n            container.addView(view, ViewGroup.LayoutParams.MATCH_PARENT,\n                    ViewGroup.LayoutParams.MATCH_PARENT);\n\n            return view;\n        }\n\n        @Override\n        public void destroyItem(ViewGroup container, int position, Object object) {\n            container.removeView((View) object);\n        }\n\n        @Override\n        public int getCount() {\n            return mHrefData != null ? mHrefData.size() : 0;\n        }\n\n        @Override\n        public boolean isViewFromObject(View view, Object object) {\n            return view == object;\n        }\n    }\n```\nemotion_image_detail_item.xml\n```js\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@android:color/black\">\n\n\n    <uk.co.senab.photoview.PhotoView\n        android:id=\"@+id/imageView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_centerInParent=\"true\" />\n\n    <ScrollView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"60dp\"\n        android:layout_alignParentBottom=\"true\">\n\n        <TextView\n            android:id=\"@+id/introduction\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"top\"\n            android:padding=\"10dp\"\n            android:textColor=\"@color/white\"\n            android:textSize=\"@dimen/text_content\" />\n    </ScrollView>\n\n    <ProgressBar\n        android:id=\"@+id/progressBar\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerInParent=\"true\" />\n</RelativeLayout>\n\n```\n","source":"_posts/PhotoView.md","raw":"title: github之PhotoView使用\ndate: 2015-09-14 11:12:47\ntags: [Android,PhotoView,github]\ncategory: github\n---\n>PhotoView使用在ViewPager中,github地址：[https://github.com/chrisbanes/PhotoView](https://github.com/chrisbanes/PhotoView)\n```js\n <com.android.xiaomolongstudio.danhuaer.view.HackyViewPager\n        android:id=\"@+id/viewPager\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_above=\"@id/ad_layout\" />\n```\n<!--more-->\nHackyViewPager.java\n```java\npublic class HackyViewPager extends ViewPager {\n\n\tprivate boolean isLocked;\n\t\n    public HackyViewPager(Context context) {\n        super(context);\n        isLocked = false;\n    }\n\n    public HackyViewPager(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        isLocked = false;\n    }\n\n    @Override\n    public boolean onInterceptTouchEvent(MotionEvent ev) {\n    \tif (!isLocked) {\n\t        try {\n\t            return super.onInterceptTouchEvent(ev);\n\t        } catch (IllegalArgumentException e) {\n\t            e.printStackTrace();\n\t            return false;\n\t        }\n    \t}\n    \treturn false;\n    }\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        return !isLocked && super.onTouchEvent(event);\n    }\n    \n\tpublic void toggleLock() {\n\t\tisLocked = !isLocked;\n\t}\n\n\tpublic void setLocked(boolean isLocked) {\n\t\tthis.isLocked = isLocked;\n\t}\n\n\tpublic boolean isLocked() {\n\t\treturn isLocked;\n\t}\n\t\n}\n```\n```java\n ViewPager mViewPager;\n mViewPager.setPageTransformer(true, new CardTransformer(0.8f));\n        mViewPager.setOffscreenPageLimit(2);\n        mViewPager.setAdapter(new ImageAdapter());\n        mViewPager.setCurrentItem(position);\n  \n```\nCardTransformer\n```java\n  /**\n     * Awesome Launcher-inspired page transformer\n     */\n    private static class CardTransformer implements ViewPager.PageTransformer {\n\n        private final float scaleAmount;\n\n        public CardTransformer(float scalingStart) {\n            scaleAmount = 1 - scalingStart;\n        }\n\n        @Override\n        public void transformPage(View page, float position) {\n            if (position >= 0f) {\n                final int w = page.getWidth();\n                float scaleFactor = 1 - scaleAmount * position;\n\n                page.setAlpha(1f - position);\n                page.setScaleX(scaleFactor);\n                page.setScaleY(scaleFactor);\n                page.setTranslationX(w * (1 - position) - w);\n            }\n        }\n\n    }\n```\n ImageAdapter\n```java\n private class ImageAdapter extends PagerAdapter {\n\n        @Override\n        public Object instantiateItem(ViewGroup container, int position) {\n            final String imageUrl = mHrefData.get(position);\n\n            final View view = LayoutInflater.from(EmotionImageDetailActivity.this).inflate(R.layout.emotion_image_detail_item, container, false);\n\n            final ProgressBar progressBar = (ProgressBar) view.findViewById(R.id.progressBar);\n            final TextView introduction = (TextView) view.findViewById(R.id.introduction);\n            introduction.setText(mIntroductionDataData.get(position));\n            final PhotoView imageView = (PhotoView) view.findViewById(R.id.imageView);                \n            Picasso.with(EmotionImageDetailActivity.this).load(imageUrl)\n                    .into(imageView, new Callback() {\n                        @Override\n                        public void onSuccess() {\n                            progressBar.setVisibility(View.GONE);\n                        }\n\n                        @Override\n                        public void onError() {\n                            progressBar.setVisibility(View.GONE);\n                        }\n                    });\n\n            container.addView(view, ViewGroup.LayoutParams.MATCH_PARENT,\n                    ViewGroup.LayoutParams.MATCH_PARENT);\n\n            return view;\n        }\n\n        @Override\n        public void destroyItem(ViewGroup container, int position, Object object) {\n            container.removeView((View) object);\n        }\n\n        @Override\n        public int getCount() {\n            return mHrefData != null ? mHrefData.size() : 0;\n        }\n\n        @Override\n        public boolean isViewFromObject(View view, Object object) {\n            return view == object;\n        }\n    }\n```\nemotion_image_detail_item.xml\n```js\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@android:color/black\">\n\n\n    <uk.co.senab.photoview.PhotoView\n        android:id=\"@+id/imageView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_centerInParent=\"true\" />\n\n    <ScrollView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"60dp\"\n        android:layout_alignParentBottom=\"true\">\n\n        <TextView\n            android:id=\"@+id/introduction\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"top\"\n            android:padding=\"10dp\"\n            android:textColor=\"@color/white\"\n            android:textSize=\"@dimen/text_content\" />\n    </ScrollView>\n\n    <ProgressBar\n        android:id=\"@+id/progressBar\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerInParent=\"true\" />\n</RelativeLayout>\n\n```\n","slug":"PhotoView","published":1,"updated":"2016-03-17T00:44:06.345Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge4100axo4pk4k8g114t"},{"title":"Android Lollipop新特性-Palette","date":"2015-08-03T03:19:09.000Z","_content":"## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/paletteScreenshots.gif)\n<!-- more -->\n## 使用方法\nPalette可以提取的颜色如下\n* Vibrant （有活力的）\n* Vibrant dark（有活力的 暗色）\n* Vibrant light（有活力的 亮色）\n* Muted （柔和的）\n* Muted dark（柔和的 暗色）\n* Muted light（柔和的 亮色）\n\n我们要想使用Palette，需要导入Palette的兼容库，Gradle 中添加下面依赖。\n```js\ncompile 'com.android.support:palette-v7:21.0.+'\n```\n\n## 实例代码\nxml\n```js\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"\n    android:paddingBottom=\"@dimen/activity_vertical_margin\"\n    android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n    android:paddingRight=\"@dimen/activity_horizontal_margin\"\n    android:paddingTop=\"@dimen/activity_vertical_margin\"\n    tools:context=\".MainActivity\">\n\n    <ImageView\n        android:id=\"@+id/image\"\n        android:layout_width=\"72dp\"\n        android:layout_height=\"72dp\" />\n\n    <Button\n        android:id=\"@+id/vibrant\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"onClick\"\n        android:text=\"vibrant\" />\n\n    <Button\n        android:id=\"@+id/vibrantLight\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"onClick\"\n        android:text=\"vibrantLight\" />\n\n    <Button\n        android:id=\"@+id/vibrantDark\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"onClick\"\n        android:text=\"vibrantDark\" />\n\n    <Button\n        android:id=\"@+id/muted\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"onClick\"\n        android:text=\"muted\" />\n\n    <Button\n        android:id=\"@+id/mutedLight\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"onClick\"\n        android:text=\"mutedLight\" />\n\n    <Button\n        android:id=\"@+id/mutedDark\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"onClick\"\n        android:text=\"mutedDark\" />\n\n\n</LinearLayout>\n\n```\n\njava\n\n```java\npackage com.wuxiaolong.apksample;\n\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.graphics.Canvas;\nimport android.graphics.drawable.BitmapDrawable;\nimport android.graphics.drawable.ColorDrawable;\nimport android.graphics.drawable.Drawable;\nimport android.os.Bundle;\nimport android.support.v7.app.ActionBar;\nimport android.support.v7.app.AppCompatActivity;\nimport android.support.v7.graphics.Palette;\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.view.View;\nimport android.widget.ImageView;\n\n\npublic class MainActivity extends AppCompatActivity {\n    ImageView image;\n    ActionBar mActionBar;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        image = (ImageView) findViewById(R.id.image);\n        image.setImageResource(R.mipmap.dog);\n        final Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.mipmap.dog);\n        mActionBar = getSupportActionBar();\n\n\n    }\n\n    public void onClick(View view) {\n        Palette.from(drawableToBitmap(image.getDrawable())).generate(new LPaletteAsyncListener(view));\n    }\n\n    /**\n     * 参考博客https://www.bignerdranch.com/blog/extracting-colors-to-a-palette-with-android-lollipop/\n     */\n    class LPaletteAsyncListener implements Palette.PaletteAsyncListener {\n        View view;\n\n        LPaletteAsyncListener(View view) {\n            this.view = view;\n        }\n\n        @Override\n        public void onGenerated(Palette palette) {\n            int paletteColor = 0;\n            switch (view.getId()) {\n                case R.id.vibrant:\n                    Palette.Swatch swatch = palette.getVibrantSwatch();\n                    paletteColor = palette.getVibrantColor(0x000000);\n//                    paletteColor = swatch.getRgb();\n                    break;\n                case R.id.vibrantLight:\n                    paletteColor = palette.getLightVibrantColor(0x000000);\n                    break;\n                case R.id.vibrantDark:\n                    paletteColor = palette.getDarkVibrantColor(0x000000);\n                    break;\n                case R.id.muted:\n                    paletteColor = palette.getMutedColor(0x000000);\n                    break;\n                case R.id.mutedLight:\n                    paletteColor = palette.getLightMutedColor(0x000000);\n                    break;\n                case R.id.mutedDark:\n                    paletteColor = palette.getDarkMutedColor(0x000000);\n                    break;\n\n\n            }\n            if (mActionBar != null) {\n                mActionBar.setBackgroundDrawable(new ColorDrawable(paletteColor));\n            }\n\n        }\n    }\n\n    public static Bitmap drawableToBitmap(Drawable drawable) {\n        if (drawable instanceof BitmapDrawable) {\n            return ((BitmapDrawable) drawable).getBitmap();\n        }\n\n        int width = drawable.getIntrinsicWidth();\n        width = width > 0 ? width : 1;\n        int height = drawable.getIntrinsicHeight();\n        height = height > 0 ? height : 1;\n\n        Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);\n        Canvas canvas = new Canvas(bitmap);\n        drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());\n        drawable.draw(canvas);\n\n        return bitmap;\n    }\n\n}\n\n```\n\n或者\n```java\npublic static int getPaletteColor(Bitmap bitmap) {\n        int color = -12417291;\n        Palette palette = Palette.from(bitmap).generate();\n        Palette.Swatch vibrant = palette.getVibrantSwatch();\n        Palette.Swatch vibrantdark = palette.getDarkVibrantSwatch();\n        Palette.Swatch vibrantlight = palette.getLightVibrantSwatch();\n        Palette.Swatch Muted = palette.getMutedSwatch();\n        Palette.Swatch Muteddark = palette.getDarkMutedSwatch();\n        Palette.Swatch Mutedlight = palette.getLightMutedSwatch();\n\n        if (vibrant != null) {\n            color = vibrant.getRgb();\n        } else if (vibrantdark != null) {\n            color = vibrantdark.getRgb();\n        } else if (vibrantlight != null) {\n            color = vibrantlight.getRgb();\n        } else if (Muted != null) {\n            color = Muted.getRgb();\n        } else if (Muteddark != null) {\n            color = Muteddark.getRgb();\n        } else if (Mutedlight != null) {\n            color = Mutedlight.getRgb();\n        }\n        return color;\n    }\n```\n","source":"_posts/Palette.md","raw":"title: Android Lollipop新特性-Palette\ndate: 2015-08-03 11:19:09\ntags: [Android,Palette]\ncategory: Android\n---\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/paletteScreenshots.gif)\n<!-- more -->\n## 使用方法\nPalette可以提取的颜色如下\n* Vibrant （有活力的）\n* Vibrant dark（有活力的 暗色）\n* Vibrant light（有活力的 亮色）\n* Muted （柔和的）\n* Muted dark（柔和的 暗色）\n* Muted light（柔和的 亮色）\n\n我们要想使用Palette，需要导入Palette的兼容库，Gradle 中添加下面依赖。\n```js\ncompile 'com.android.support:palette-v7:21.0.+'\n```\n\n## 实例代码\nxml\n```js\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"\n    android:paddingBottom=\"@dimen/activity_vertical_margin\"\n    android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n    android:paddingRight=\"@dimen/activity_horizontal_margin\"\n    android:paddingTop=\"@dimen/activity_vertical_margin\"\n    tools:context=\".MainActivity\">\n\n    <ImageView\n        android:id=\"@+id/image\"\n        android:layout_width=\"72dp\"\n        android:layout_height=\"72dp\" />\n\n    <Button\n        android:id=\"@+id/vibrant\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"onClick\"\n        android:text=\"vibrant\" />\n\n    <Button\n        android:id=\"@+id/vibrantLight\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"onClick\"\n        android:text=\"vibrantLight\" />\n\n    <Button\n        android:id=\"@+id/vibrantDark\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"onClick\"\n        android:text=\"vibrantDark\" />\n\n    <Button\n        android:id=\"@+id/muted\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"onClick\"\n        android:text=\"muted\" />\n\n    <Button\n        android:id=\"@+id/mutedLight\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"onClick\"\n        android:text=\"mutedLight\" />\n\n    <Button\n        android:id=\"@+id/mutedDark\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"onClick\"\n        android:text=\"mutedDark\" />\n\n\n</LinearLayout>\n\n```\n\njava\n\n```java\npackage com.wuxiaolong.apksample;\n\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.graphics.Canvas;\nimport android.graphics.drawable.BitmapDrawable;\nimport android.graphics.drawable.ColorDrawable;\nimport android.graphics.drawable.Drawable;\nimport android.os.Bundle;\nimport android.support.v7.app.ActionBar;\nimport android.support.v7.app.AppCompatActivity;\nimport android.support.v7.graphics.Palette;\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.view.View;\nimport android.widget.ImageView;\n\n\npublic class MainActivity extends AppCompatActivity {\n    ImageView image;\n    ActionBar mActionBar;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        image = (ImageView) findViewById(R.id.image);\n        image.setImageResource(R.mipmap.dog);\n        final Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.mipmap.dog);\n        mActionBar = getSupportActionBar();\n\n\n    }\n\n    public void onClick(View view) {\n        Palette.from(drawableToBitmap(image.getDrawable())).generate(new LPaletteAsyncListener(view));\n    }\n\n    /**\n     * 参考博客https://www.bignerdranch.com/blog/extracting-colors-to-a-palette-with-android-lollipop/\n     */\n    class LPaletteAsyncListener implements Palette.PaletteAsyncListener {\n        View view;\n\n        LPaletteAsyncListener(View view) {\n            this.view = view;\n        }\n\n        @Override\n        public void onGenerated(Palette palette) {\n            int paletteColor = 0;\n            switch (view.getId()) {\n                case R.id.vibrant:\n                    Palette.Swatch swatch = palette.getVibrantSwatch();\n                    paletteColor = palette.getVibrantColor(0x000000);\n//                    paletteColor = swatch.getRgb();\n                    break;\n                case R.id.vibrantLight:\n                    paletteColor = palette.getLightVibrantColor(0x000000);\n                    break;\n                case R.id.vibrantDark:\n                    paletteColor = palette.getDarkVibrantColor(0x000000);\n                    break;\n                case R.id.muted:\n                    paletteColor = palette.getMutedColor(0x000000);\n                    break;\n                case R.id.mutedLight:\n                    paletteColor = palette.getLightMutedColor(0x000000);\n                    break;\n                case R.id.mutedDark:\n                    paletteColor = palette.getDarkMutedColor(0x000000);\n                    break;\n\n\n            }\n            if (mActionBar != null) {\n                mActionBar.setBackgroundDrawable(new ColorDrawable(paletteColor));\n            }\n\n        }\n    }\n\n    public static Bitmap drawableToBitmap(Drawable drawable) {\n        if (drawable instanceof BitmapDrawable) {\n            return ((BitmapDrawable) drawable).getBitmap();\n        }\n\n        int width = drawable.getIntrinsicWidth();\n        width = width > 0 ? width : 1;\n        int height = drawable.getIntrinsicHeight();\n        height = height > 0 ? height : 1;\n\n        Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);\n        Canvas canvas = new Canvas(bitmap);\n        drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());\n        drawable.draw(canvas);\n\n        return bitmap;\n    }\n\n}\n\n```\n\n或者\n```java\npublic static int getPaletteColor(Bitmap bitmap) {\n        int color = -12417291;\n        Palette palette = Palette.from(bitmap).generate();\n        Palette.Swatch vibrant = palette.getVibrantSwatch();\n        Palette.Swatch vibrantdark = palette.getDarkVibrantSwatch();\n        Palette.Swatch vibrantlight = palette.getLightVibrantSwatch();\n        Palette.Swatch Muted = palette.getMutedSwatch();\n        Palette.Swatch Muteddark = palette.getDarkMutedSwatch();\n        Palette.Swatch Mutedlight = palette.getLightMutedSwatch();\n\n        if (vibrant != null) {\n            color = vibrant.getRgb();\n        } else if (vibrantdark != null) {\n            color = vibrantdark.getRgb();\n        } else if (vibrantlight != null) {\n            color = vibrantlight.getRgb();\n        } else if (Muted != null) {\n            color = Muted.getRgb();\n        } else if (Muteddark != null) {\n            color = Muteddark.getRgb();\n        } else if (Mutedlight != null) {\n            color = Mutedlight.getRgb();\n        }\n        return color;\n    }\n```\n","slug":"Palette","published":1,"updated":"2016-03-17T00:44:06.345Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge4400b3o4pk32apjjan"},{"title":"Android之画笔Paint和画布Canvas及实例练习圆角、刮刮卡、圆形头像、倒影效果","date":"2015-12-06T02:45:38.000Z","_content":"> 先了解画笔Paint和画布Canvas一些基本方法，然后学习画笔特效处理的高级属性PorterDuffXfermode、Shader、PathEffect，并实现圆角、刮刮卡、圆形头像、倒影效果\n\n<!--more-->\n\n# Paint\n\n* void  setARGB(int a, int r, int g, int b)  \n设置Paint对象颜色，参数一为alpha透明通道\n\n* void  setAlpha(int a)  \n设置alpha不透明度，范围为0~255\n\n* void  setAntiAlias(boolean aa)  \n是否抗锯齿\n\n* void  setColor(int color)  \n设置颜色，这里Android内部定义的有Color类包含了一些常见颜色定义\n\n* void  setFakeBoldText(boolean fakeBoldText)  \n设置伪粗体文本\n\n* void  setLinearText(boolean linearText)  \n设置线性文本\n\n* PathEffect  setPathEffect(PathEffect effect)  \n设置路径效果\n\n* Rasterizer  setRasterizer(Rasterizer rasterizer) \n设置光栅化\n\n* Shader  setShader(Shader shader)  \n设置阴影\n\n* void  setTextAlign(Paint.Align align) \n设置文本对齐\n\n* void  setTextScaleX(float scaleX) \n设置文本缩放倍数，1.0f为原始\n\n* void  setTextSize(float textSize)\n设置字体大小\n\n* Typeface  setTypeface(Typeface typeface)\n设置字体，Typeface包含了字体的类型，粗细，还有倾斜、颜色等。\n\n* void  setUnderlineText(boolean underlineText)  \n设置下划线\n\n# Canvas\n\n* void drawRect(RectF rect, Paint paint) \n绘制矩形，参数一为RectF一个区域\n\n* void drawRoundRect(@NonNull RectF rect, float rx, float ry, @NonNull Paint paint)\n绘制圆角矩形\n\n* void drawPath(Path path, Paint paint) \n绘制一个路径，参数一为Path路径对象\n\n* void  drawBitmap(Bitmap bitmap, Rect src, Rect dst, Paint paint)  \n贴图，参数一就是我们常规的Bitmap对象，参数二是源区域(这里是bitmap)，参数三是目标区域(应该在 canvas的位置和大小)，参数四是Paint画刷对象，因为用到了缩放和拉伸的可能，当原始Rect不等于目标Rect时性能将会有大幅损失。\n\n* void  drawLine(float startX, float startY, float stopX, float stopY, Paint paint) \n画线，参数一起始点的x轴位置，参数二起始点的y轴位置，参数三终点的x轴水平位置，参数四y轴垂直位置，最后一个参数为Paint画刷对象。\n\n* void  drawPoint(float x, float y, Paint paint) \n画点，参数一水平x轴，参数二垂直y轴，第三个参数为Paint对象。\n\n* void drawText(String text, float x, float y, Paint paint)  \n渲染文本，Canvas类除了上面的还可以描绘文字，参数一是String类型的文本，参数二x轴，参数三y轴，参数四是Paint对象。\n\n* void  drawTextOnPath(String text, Path path, float hOffset, float vOffset, Paint paint) \n在路径上绘制文本，相对于上面第二个参数是Path路径对象\n\n* void drawOval(@NonNull RectF oval, @NonNull Paint paint) \n绘制椭圆\n\n* drawCircle(float cx, float cy, float radius, @NonNull Paint paint) \n绘制圆\n\n* void drawArc(@NonNull RectF oval, float startAngle, float sweepAngle, boolean useCenter,\n            @NonNull Paint paint)\n绘制弧形、扇形\n\n# 实例练习\n\n## PorterDuffXfermode\nPorterDuffXfermode设置的是两个图层交集区域的显示方式（如下图），dst是先画的图形，而src是后画的图形。 \n当然，这些模式也不是经常使用的，用的最多的是，使用一张图片作为另一张图片的遮罩层，通过控制遮罩层的图形，来控制下面被遮罩图形的显示效果。其中最常用的就是通过SRC_IN（两层混合，保留重合部分的上面一层）、DST_IN（两层混合，保留重合部分的下面一层）模式来实现。其他模式如下图：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/PaintCanvas1.png)\n\n### 圆角\n效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/PaintCanvas2.png)\n\n完整代码\n```java\npublic class PaintCanvas extends View {\n    public PaintCanvas(Context context) {\n        super(context);\n        initRoundRectImage();\n    }\n\n    public PaintCanvas(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        initRoundRectImage();\n    }\n\n    public PaintCanvas(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        initRoundRectImage();\n    }\n\n    @TargetApi(Build.VERSION_CODES.LOLLIPOP)\n    public PaintCanvas(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {\n        super(context, attrs, defStyleAttr, defStyleRes);\n        initRoundRectImage();\n    }\n\n    Bitmap mBitmap, mNewBitmap;\n\n    private void initRoundRectImage() {\n        mBitmap = BitmapFactory.decodeResource(getResources(), R.mipmap.dog);\n\n        mNewBitmap = Bitmap.createBitmap(mBitmap.getWidth(), mBitmap.getHeight(), Bitmap.Config.ARGB_8888);\n\n        Canvas canvas = new Canvas(mNewBitmap);\n        Paint paint = new Paint();\n        paint.setAntiAlias(true);\n        RectF rectF = new RectF(0, 0, mBitmap.getWidth(), mBitmap.getHeight());\n        canvas.drawRoundRect(rectF, 80, 80, paint);\n        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));\n        canvas.drawBitmap(mBitmap, 0, 0, paint);\n\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        canvas.drawBitmap(mNewBitmap, 0, 0, null);\n    }\n}\n```\n### 刮刮卡\n效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/PaintCanvas3.gif)\n\n完整代码\n```java\npublic class PaintCanvas extends View {\n    public PaintCanvas(Context context) {\n        super(context);\n        init();\n    }\n\n    public PaintCanvas(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        init();\n    }\n\n    public PaintCanvas(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        init();\n    }\n\n    @TargetApi(Build.VERSION_CODES.LOLLIPOP)\n    public PaintCanvas(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {\n        super(context, attrs, defStyleAttr, defStyleRes);\n        init();\n    }\n\n    private Bitmap mBgBitmap, mNewBitmap;\n    private Path mPath;\n    private Paint mPaint;\n    private Canvas mCanvas;\n\n    private void init() {\n        mPaint = new Paint();\n        mPaint.setAlpha(0);\n        mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));//设置混合模式为DST_IN\n        mPaint.setStyle(Paint.Style.STROKE);\n        mPaint.setStrokeWidth(50);\n        mPaint.setStrokeJoin(Paint.Join.ROUND);//Paint.Join.ROUND和Paint.Cap.ROUND设置Paint笔触和连接处更加圆滑一点\n        mPaint.setStrokeCap(Paint.Cap.ROUND);\n\n        mBgBitmap = BitmapFactory.decodeResource(getResources(), R.mipmap.dog);//设置背景图\n        mNewBitmap = Bitmap.createBitmap(mBgBitmap.getWidth(), mBgBitmap.getHeight(), Bitmap.Config.ARGB_8888); //设置遮罩图\n\n        mCanvas = new Canvas(mNewBitmap);\n        mCanvas.drawColor(Color.GRAY);\n\n        mPath = new Path();\n\n    }\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        switch (event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                mPath.reset();\n                mPath.moveTo(event.getX(), event.getY());\n                break;\n            case MotionEvent.ACTION_MOVE:\n                mPath.lineTo(event.getX(), event.getY());\n                break;\n        }\n        mCanvas.drawPath(mPath, mPaint);\n        invalidate();\n        return true;\n\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        canvas.drawBitmap(mBgBitmap, 0, 0, null); //画背景\n        canvas.drawBitmap(mNewBitmap, 0, 0, null);//画灰色\n    }\n}\n```\n\n## Shader\nShader又被称为着色器、渲染器，主要用来实现一些列的渐变、渲染效果。Android中的Shader包括以下几种： \nBitmapShader——位图 \nLinearGradient——线性 \nRadialGrdient——光束 \nSweepGradient——梯度 \nComposeShader——混合\n\n除了第一个shader意外，其他的Shader都比较正常。而与其他的Shader所产生的渐变不同，BitmapShader产生的是一个图像，这个有点像Photoshop中的图像填充渐变。他的作用就是通过Paint对画布进行指定的Bitmap的填充，填充有以下几个模式可以选择。 \nCLAMP 重复最后一个颜色至最后 \nMIRROR 重复着色的图像水平或垂直方向已镜像方式填充会有翻转效果 \nREPEAT 重复着色的图像水平或垂直方向\n\n### 圆形头像\n效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/PaintCanvas4.png)\n\n完整代码\n```java\n @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.mipmap.dog);\n        BitmapShader bitmapShader = new BitmapShader(bitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);\n        Paint paint = new Paint();\n        paint.setShader(bitmapShader);\n        canvas.drawCircle(300, 250, 200, paint);\n    }\n```\n\n### 倒影\n效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/PaintCanvas5.png)\n完整代码\n```java\npublic class PaintCanvas extends View {\n    private Bitmap mSrcBitmap, mRefBitmap;\n    private Paint mPaint;\n    private PorterDuffXfermode mXfermode;\n\n    public PaintCanvas(Context context) {\n        super(context);\n        initXfermodeShader();\n    }\n\n    public PaintCanvas(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        initXfermodeShader();\n    }\n\n    public PaintCanvas(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        initXfermodeShader();\n    }\n\n    @TargetApi(Build.VERSION_CODES.LOLLIPOP)\n    public PaintCanvas(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {\n        super(context, attrs, defStyleAttr, defStyleRes);\n        initXfermodeShader();\n    }\n\n     private void initXfermodeShader() {\n        mSrcBitmap = BitmapFactory.decodeResource(getResources(),\n                R.mipmap.dog);\n\n        Matrix matrix = new Matrix();\n        matrix.setScale(1F, -1F);//实现图片垂直翻转\n\n        mRefBitmap = Bitmap.createBitmap(mSrcBitmap, 0, 0,\n                mSrcBitmap.getWidth(), mSrcBitmap.getHeight(), matrix, true);\n\n        mPaint = new Paint();\n        mPaint.setShader(new LinearGradient(0, mSrcBitmap.getHeight(), 0,\n                mSrcBitmap.getHeight() + mSrcBitmap.getHeight() / 2,\n                0x70ffffff, 0x00ffffff, Shader.TileMode.CLAMP));\n\n        mXfermode = new PorterDuffXfermode(PorterDuff.Mode.DST_IN);\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n//        canvas.drawColor(Color.BLACK);\n        canvas.drawBitmap(mSrcBitmap, 0, 0, null);\n        canvas.drawBitmap(mRefBitmap, 0, mSrcBitmap.getHeight(), null);\n        mPaint.setXfermode(mXfermode);\n        // 绘制渐变效果矩形\n        canvas.drawRect(0, mSrcBitmap.getHeight(),\n                mRefBitmap.getWidth(), mSrcBitmap.getHeight() * 2, mPaint);\n        mPaint.setXfermode(null);\n    }\n}\n```\n### LinearGradient实现文字一闪一闪\n[http://wuxiaolong.me/2015/12/06/PaintCanvas/](http://wuxiaolong.me/2015/12/06/PaintCanvas/)\n\n# 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n","source":"_posts/PaintCanvas.md","raw":"title: Android之画笔Paint和画布Canvas及实例练习圆角、刮刮卡、圆形头像、倒影效果\ndate: 2015-12-06 10:45:38\ntags: [Paint,Canvas,PorterDuffXfermode,Shader]\ncategory: Android\n---\n> 先了解画笔Paint和画布Canvas一些基本方法，然后学习画笔特效处理的高级属性PorterDuffXfermode、Shader、PathEffect，并实现圆角、刮刮卡、圆形头像、倒影效果\n\n<!--more-->\n\n# Paint\n\n* void  setARGB(int a, int r, int g, int b)  \n设置Paint对象颜色，参数一为alpha透明通道\n\n* void  setAlpha(int a)  \n设置alpha不透明度，范围为0~255\n\n* void  setAntiAlias(boolean aa)  \n是否抗锯齿\n\n* void  setColor(int color)  \n设置颜色，这里Android内部定义的有Color类包含了一些常见颜色定义\n\n* void  setFakeBoldText(boolean fakeBoldText)  \n设置伪粗体文本\n\n* void  setLinearText(boolean linearText)  \n设置线性文本\n\n* PathEffect  setPathEffect(PathEffect effect)  \n设置路径效果\n\n* Rasterizer  setRasterizer(Rasterizer rasterizer) \n设置光栅化\n\n* Shader  setShader(Shader shader)  \n设置阴影\n\n* void  setTextAlign(Paint.Align align) \n设置文本对齐\n\n* void  setTextScaleX(float scaleX) \n设置文本缩放倍数，1.0f为原始\n\n* void  setTextSize(float textSize)\n设置字体大小\n\n* Typeface  setTypeface(Typeface typeface)\n设置字体，Typeface包含了字体的类型，粗细，还有倾斜、颜色等。\n\n* void  setUnderlineText(boolean underlineText)  \n设置下划线\n\n# Canvas\n\n* void drawRect(RectF rect, Paint paint) \n绘制矩形，参数一为RectF一个区域\n\n* void drawRoundRect(@NonNull RectF rect, float rx, float ry, @NonNull Paint paint)\n绘制圆角矩形\n\n* void drawPath(Path path, Paint paint) \n绘制一个路径，参数一为Path路径对象\n\n* void  drawBitmap(Bitmap bitmap, Rect src, Rect dst, Paint paint)  \n贴图，参数一就是我们常规的Bitmap对象，参数二是源区域(这里是bitmap)，参数三是目标区域(应该在 canvas的位置和大小)，参数四是Paint画刷对象，因为用到了缩放和拉伸的可能，当原始Rect不等于目标Rect时性能将会有大幅损失。\n\n* void  drawLine(float startX, float startY, float stopX, float stopY, Paint paint) \n画线，参数一起始点的x轴位置，参数二起始点的y轴位置，参数三终点的x轴水平位置，参数四y轴垂直位置，最后一个参数为Paint画刷对象。\n\n* void  drawPoint(float x, float y, Paint paint) \n画点，参数一水平x轴，参数二垂直y轴，第三个参数为Paint对象。\n\n* void drawText(String text, float x, float y, Paint paint)  \n渲染文本，Canvas类除了上面的还可以描绘文字，参数一是String类型的文本，参数二x轴，参数三y轴，参数四是Paint对象。\n\n* void  drawTextOnPath(String text, Path path, float hOffset, float vOffset, Paint paint) \n在路径上绘制文本，相对于上面第二个参数是Path路径对象\n\n* void drawOval(@NonNull RectF oval, @NonNull Paint paint) \n绘制椭圆\n\n* drawCircle(float cx, float cy, float radius, @NonNull Paint paint) \n绘制圆\n\n* void drawArc(@NonNull RectF oval, float startAngle, float sweepAngle, boolean useCenter,\n            @NonNull Paint paint)\n绘制弧形、扇形\n\n# 实例练习\n\n## PorterDuffXfermode\nPorterDuffXfermode设置的是两个图层交集区域的显示方式（如下图），dst是先画的图形，而src是后画的图形。 \n当然，这些模式也不是经常使用的，用的最多的是，使用一张图片作为另一张图片的遮罩层，通过控制遮罩层的图形，来控制下面被遮罩图形的显示效果。其中最常用的就是通过SRC_IN（两层混合，保留重合部分的上面一层）、DST_IN（两层混合，保留重合部分的下面一层）模式来实现。其他模式如下图：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/PaintCanvas1.png)\n\n### 圆角\n效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/PaintCanvas2.png)\n\n完整代码\n```java\npublic class PaintCanvas extends View {\n    public PaintCanvas(Context context) {\n        super(context);\n        initRoundRectImage();\n    }\n\n    public PaintCanvas(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        initRoundRectImage();\n    }\n\n    public PaintCanvas(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        initRoundRectImage();\n    }\n\n    @TargetApi(Build.VERSION_CODES.LOLLIPOP)\n    public PaintCanvas(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {\n        super(context, attrs, defStyleAttr, defStyleRes);\n        initRoundRectImage();\n    }\n\n    Bitmap mBitmap, mNewBitmap;\n\n    private void initRoundRectImage() {\n        mBitmap = BitmapFactory.decodeResource(getResources(), R.mipmap.dog);\n\n        mNewBitmap = Bitmap.createBitmap(mBitmap.getWidth(), mBitmap.getHeight(), Bitmap.Config.ARGB_8888);\n\n        Canvas canvas = new Canvas(mNewBitmap);\n        Paint paint = new Paint();\n        paint.setAntiAlias(true);\n        RectF rectF = new RectF(0, 0, mBitmap.getWidth(), mBitmap.getHeight());\n        canvas.drawRoundRect(rectF, 80, 80, paint);\n        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));\n        canvas.drawBitmap(mBitmap, 0, 0, paint);\n\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        canvas.drawBitmap(mNewBitmap, 0, 0, null);\n    }\n}\n```\n### 刮刮卡\n效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/PaintCanvas3.gif)\n\n完整代码\n```java\npublic class PaintCanvas extends View {\n    public PaintCanvas(Context context) {\n        super(context);\n        init();\n    }\n\n    public PaintCanvas(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        init();\n    }\n\n    public PaintCanvas(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        init();\n    }\n\n    @TargetApi(Build.VERSION_CODES.LOLLIPOP)\n    public PaintCanvas(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {\n        super(context, attrs, defStyleAttr, defStyleRes);\n        init();\n    }\n\n    private Bitmap mBgBitmap, mNewBitmap;\n    private Path mPath;\n    private Paint mPaint;\n    private Canvas mCanvas;\n\n    private void init() {\n        mPaint = new Paint();\n        mPaint.setAlpha(0);\n        mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));//设置混合模式为DST_IN\n        mPaint.setStyle(Paint.Style.STROKE);\n        mPaint.setStrokeWidth(50);\n        mPaint.setStrokeJoin(Paint.Join.ROUND);//Paint.Join.ROUND和Paint.Cap.ROUND设置Paint笔触和连接处更加圆滑一点\n        mPaint.setStrokeCap(Paint.Cap.ROUND);\n\n        mBgBitmap = BitmapFactory.decodeResource(getResources(), R.mipmap.dog);//设置背景图\n        mNewBitmap = Bitmap.createBitmap(mBgBitmap.getWidth(), mBgBitmap.getHeight(), Bitmap.Config.ARGB_8888); //设置遮罩图\n\n        mCanvas = new Canvas(mNewBitmap);\n        mCanvas.drawColor(Color.GRAY);\n\n        mPath = new Path();\n\n    }\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        switch (event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                mPath.reset();\n                mPath.moveTo(event.getX(), event.getY());\n                break;\n            case MotionEvent.ACTION_MOVE:\n                mPath.lineTo(event.getX(), event.getY());\n                break;\n        }\n        mCanvas.drawPath(mPath, mPaint);\n        invalidate();\n        return true;\n\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        canvas.drawBitmap(mBgBitmap, 0, 0, null); //画背景\n        canvas.drawBitmap(mNewBitmap, 0, 0, null);//画灰色\n    }\n}\n```\n\n## Shader\nShader又被称为着色器、渲染器，主要用来实现一些列的渐变、渲染效果。Android中的Shader包括以下几种： \nBitmapShader——位图 \nLinearGradient——线性 \nRadialGrdient——光束 \nSweepGradient——梯度 \nComposeShader——混合\n\n除了第一个shader意外，其他的Shader都比较正常。而与其他的Shader所产生的渐变不同，BitmapShader产生的是一个图像，这个有点像Photoshop中的图像填充渐变。他的作用就是通过Paint对画布进行指定的Bitmap的填充，填充有以下几个模式可以选择。 \nCLAMP 重复最后一个颜色至最后 \nMIRROR 重复着色的图像水平或垂直方向已镜像方式填充会有翻转效果 \nREPEAT 重复着色的图像水平或垂直方向\n\n### 圆形头像\n效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/PaintCanvas4.png)\n\n完整代码\n```java\n @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.mipmap.dog);\n        BitmapShader bitmapShader = new BitmapShader(bitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);\n        Paint paint = new Paint();\n        paint.setShader(bitmapShader);\n        canvas.drawCircle(300, 250, 200, paint);\n    }\n```\n\n### 倒影\n效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/PaintCanvas5.png)\n完整代码\n```java\npublic class PaintCanvas extends View {\n    private Bitmap mSrcBitmap, mRefBitmap;\n    private Paint mPaint;\n    private PorterDuffXfermode mXfermode;\n\n    public PaintCanvas(Context context) {\n        super(context);\n        initXfermodeShader();\n    }\n\n    public PaintCanvas(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        initXfermodeShader();\n    }\n\n    public PaintCanvas(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        initXfermodeShader();\n    }\n\n    @TargetApi(Build.VERSION_CODES.LOLLIPOP)\n    public PaintCanvas(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {\n        super(context, attrs, defStyleAttr, defStyleRes);\n        initXfermodeShader();\n    }\n\n     private void initXfermodeShader() {\n        mSrcBitmap = BitmapFactory.decodeResource(getResources(),\n                R.mipmap.dog);\n\n        Matrix matrix = new Matrix();\n        matrix.setScale(1F, -1F);//实现图片垂直翻转\n\n        mRefBitmap = Bitmap.createBitmap(mSrcBitmap, 0, 0,\n                mSrcBitmap.getWidth(), mSrcBitmap.getHeight(), matrix, true);\n\n        mPaint = new Paint();\n        mPaint.setShader(new LinearGradient(0, mSrcBitmap.getHeight(), 0,\n                mSrcBitmap.getHeight() + mSrcBitmap.getHeight() / 2,\n                0x70ffffff, 0x00ffffff, Shader.TileMode.CLAMP));\n\n        mXfermode = new PorterDuffXfermode(PorterDuff.Mode.DST_IN);\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n//        canvas.drawColor(Color.BLACK);\n        canvas.drawBitmap(mSrcBitmap, 0, 0, null);\n        canvas.drawBitmap(mRefBitmap, 0, mSrcBitmap.getHeight(), null);\n        mPaint.setXfermode(mXfermode);\n        // 绘制渐变效果矩形\n        canvas.drawRect(0, mSrcBitmap.getHeight(),\n                mRefBitmap.getWidth(), mSrcBitmap.getHeight() * 2, mPaint);\n        mPaint.setXfermode(null);\n    }\n}\n```\n### LinearGradient实现文字一闪一闪\n[http://wuxiaolong.me/2015/12/06/PaintCanvas/](http://wuxiaolong.me/2015/12/06/PaintCanvas/)\n\n# 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n","slug":"PaintCanvas","published":1,"updated":"2016-03-17T00:44:06.344Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge4600b8o4pketv3289c"},{"title":"Android Design Support Library之NavigationView","date":"2015-11-17T05:31:07.000Z","_content":"## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/designsupportlibrarysample.gif)\n\n<!--more-->\n\n## 实例App\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuoDownload.png)\n## 使用方法\nGradle 中添加下面依赖\n```js\n compile 'com.android.support:design:23.1.0'\n```\n\n## NavigationView\n之前Google也提出了使用DrawerLayout来实现导航抽屉。这次，在support library中，Google提供了NavigationView来实现导航菜单界面。\n```js\n<android.support.v4.widget.DrawerLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:id=\"@+id/drawer_layout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fitsSystemWindows=\"true\">\n\n    <!-- 你的内容布局-->\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\">\n\n        <android.support.v7.widget.Toolbar\n            android:id=\"@+id/toolbar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"?attr/actionBarSize\"\n            android:background=\"?attr/colorPrimary\"\n            app:layout_scrollFlags=\"scroll|enterAlways\" />\n\n        <FrameLayout\n            android:id=\"@+id/content\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\" />\n    </LinearLayout>\n\n    <android.support.design.widget.NavigationView\n        android:id=\"@+id/navigation\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"match_parent\"\n        android:layout_gravity=\"start\"\n        app:itemTextColor=\"?attr/colorPrimary\"\n        app:headerLayout=\"@layout/drawer_header\"\n        app:itemTextColor=\"@color/item_text_color\"\n        app:menu=\"@menu/drawer\">\n\n    </android.support.design.widget.NavigationView>\n\n</android.support.v4.widget.DrawerLayout>\n```\n@menu/drawer\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\">\n\n    <group android:checkableBehavior=\"single\">\n\n        <item\n            android:id=\"@+id/navigation_item_1\"\n            android:icon=\"@drawable/ic_fa_home\"\n            android:title=\"今日情感\" />\n    </group>\n\n    <item android:title=\"互动\">\n\n        <menu>\n            <item\n                android:id=\"@+id/ic_action_email\"\n                android:icon=\"@drawable/ic_action_email\"\n                android:title=\"意见反馈\" />\n            <item\n                android:id=\"@+id/ic_action_share\"\n                android:icon=\"@drawable/ic_action_share\"\n                android:title=\"推荐好友\" />\n            <item\n                android:id=\"@+id/ic_action_good\"\n                android:icon=\"@drawable/ic_action_good\"\n                android:title=\"好评鼓励\" />\n\n        </menu>\n    </item>\n    <item android:title=\"主题\">\n\n        <menu>\n            <item\n                android:id=\"@+id/ic_action_theme\"\n                android:icon=\"@drawable/ic_fa_eye\"\n                android:title=\"切换主题\" />\n\n        </menu>\n    </item>\n\n</menu>\n```\ndrawer_header.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"200dp\"\n    android:background=\"?attr/colorPrimaryDark\"\n    android:gravity=\"center\"\n    android:orientation=\"vertical\">\n\n    <ImageView\n        android:layout_width=\"100dp\"\n        android:layout_height=\"100dp\"\n        android:layout_marginTop=\"10dp\"\n        android:background=\"@mipmap/ic_launcher\" />\n\n    <TextView\n        android:id=\"@+id/userName\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"10dp\"\n        android:gravity=\"center\"\n        android:text=\"小尛龙\"\n        android:textColor=\"@color/white\"\n        android:textSize=\"20sp\" />\n\n</LinearLayout>\n```\n@color/ item_text_color\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<selector xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <item android:color=\"@color/primary\" android:state_checked=\"true\" />\n    <item android:color=\"@color/black\" />\n</selector>\n```\n其中最重要的就是这两个属性：\n\napp:headerLayout \napp:menu\n\n通过这两个属性，我们可以非常方便的指定导航界面的头布局和菜单布局。\n```java\nprivate NavigationView navigationView;\nprivate void initNavigationViewHeader() {\n        navigationView = (NavigationView) findViewById(R.id.navigation);       \n       View view = navigationView.inflateHeaderView(R.layout.drawer_header);\n\t   //navigationView.addHeaderView(view);hear的高度不好控制，推荐设置头像，布局app:headerLayout所指定的头布局\n\t   View header = navigationView.getHeaderView(0);\n        TextView userName = (TextView) header.findViewById(R.id.userName);\n        userName.setText(\"小尛龙\");\n\t  //菜单点击事件\n        navigationView.setNavigationItemSelectedListener(new NavigationItemSelected());\n    }\n```\n```java\nclass NavigationItemSelected implements NavigationView.OnNavigationItemSelectedListener {\n        @Override\n        public boolean onNavigationItemSelected(MenuItem menuItem) {\n            mToolbar.setTitle(menuItem.getTitle());\n            switch (menuItem.getItemId()) {\n                case R.id.navigation_item_1:\n                    selectItem(0);\n                    menuItem.setChecked(true);\n                    return true;               \n                default:\n                    return true;\n            }\n        }\n    }\n```\n设置Fragment\n```java\n  private void selectItem(int position) {\n        mDrawerLayout.closeDrawers();\n        Fragment fragment = null;\n        switch (position) {\n\n            case 0:\n                fragment = new HomeFragment().newInstance();\n                break;\n        }\n\n        FragmentManager fragmentManager = getSupportFragmentManager();\n        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();\n        if (fragment != null && fragment.isAdded()) {\n            fragmentTransaction.hide(mCurrentFragment).show(fragment);\n        } else {\n            fragmentTransaction.add(R.id.content, fragment);\n        }\n        mCurrentFragment = fragment;\n        fragmentTransaction.commit();\n    }\n```\n设置DrawerLayout\n```java\nprivate DrawerLayout mDrawerLayout;\nprivate void initDrawer() {\n        mDrawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);\n        mDrawerToggle = new ActionBarDrawerToggle(this, mDrawerLayout, mToolbar, R.string.open, R.string.close) {\n            @Override\n            public void onDrawerOpened(View drawerView) {\n                super.onDrawerOpened(drawerView);\n            }\n\n            @Override\n            public void onDrawerClosed(View drawerView) {\n                super.onDrawerClosed(drawerView);\n            }\n        };\n        mDrawerToggle.syncState();\n        mDrawerLayout.setDrawerListener(mDrawerToggle);\n    }\n```\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n## 源码地址\n[https://github.com/WuXiaolong/DesignSupportLibrarySample](https://github.com/WuXiaolong/DesignSupportLibrarySample)\n","source":"_posts/NavigationView.md","raw":"title: Android Design Support Library之NavigationView\ndate: 2015-11-17 13:31:07\ntags: [DesignSupportLibrary,NavigationView]\ncategory: DesignSupportLibrary\n---\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/designsupportlibrarysample.gif)\n\n<!--more-->\n\n## 实例App\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuoDownload.png)\n## 使用方法\nGradle 中添加下面依赖\n```js\n compile 'com.android.support:design:23.1.0'\n```\n\n## NavigationView\n之前Google也提出了使用DrawerLayout来实现导航抽屉。这次，在support library中，Google提供了NavigationView来实现导航菜单界面。\n```js\n<android.support.v4.widget.DrawerLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:id=\"@+id/drawer_layout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fitsSystemWindows=\"true\">\n\n    <!-- 你的内容布局-->\n    <LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\">\n\n        <android.support.v7.widget.Toolbar\n            android:id=\"@+id/toolbar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"?attr/actionBarSize\"\n            android:background=\"?attr/colorPrimary\"\n            app:layout_scrollFlags=\"scroll|enterAlways\" />\n\n        <FrameLayout\n            android:id=\"@+id/content\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\" />\n    </LinearLayout>\n\n    <android.support.design.widget.NavigationView\n        android:id=\"@+id/navigation\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"match_parent\"\n        android:layout_gravity=\"start\"\n        app:itemTextColor=\"?attr/colorPrimary\"\n        app:headerLayout=\"@layout/drawer_header\"\n        app:itemTextColor=\"@color/item_text_color\"\n        app:menu=\"@menu/drawer\">\n\n    </android.support.design.widget.NavigationView>\n\n</android.support.v4.widget.DrawerLayout>\n```\n@menu/drawer\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\">\n\n    <group android:checkableBehavior=\"single\">\n\n        <item\n            android:id=\"@+id/navigation_item_1\"\n            android:icon=\"@drawable/ic_fa_home\"\n            android:title=\"今日情感\" />\n    </group>\n\n    <item android:title=\"互动\">\n\n        <menu>\n            <item\n                android:id=\"@+id/ic_action_email\"\n                android:icon=\"@drawable/ic_action_email\"\n                android:title=\"意见反馈\" />\n            <item\n                android:id=\"@+id/ic_action_share\"\n                android:icon=\"@drawable/ic_action_share\"\n                android:title=\"推荐好友\" />\n            <item\n                android:id=\"@+id/ic_action_good\"\n                android:icon=\"@drawable/ic_action_good\"\n                android:title=\"好评鼓励\" />\n\n        </menu>\n    </item>\n    <item android:title=\"主题\">\n\n        <menu>\n            <item\n                android:id=\"@+id/ic_action_theme\"\n                android:icon=\"@drawable/ic_fa_eye\"\n                android:title=\"切换主题\" />\n\n        </menu>\n    </item>\n\n</menu>\n```\ndrawer_header.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"200dp\"\n    android:background=\"?attr/colorPrimaryDark\"\n    android:gravity=\"center\"\n    android:orientation=\"vertical\">\n\n    <ImageView\n        android:layout_width=\"100dp\"\n        android:layout_height=\"100dp\"\n        android:layout_marginTop=\"10dp\"\n        android:background=\"@mipmap/ic_launcher\" />\n\n    <TextView\n        android:id=\"@+id/userName\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"10dp\"\n        android:gravity=\"center\"\n        android:text=\"小尛龙\"\n        android:textColor=\"@color/white\"\n        android:textSize=\"20sp\" />\n\n</LinearLayout>\n```\n@color/ item_text_color\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<selector xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <item android:color=\"@color/primary\" android:state_checked=\"true\" />\n    <item android:color=\"@color/black\" />\n</selector>\n```\n其中最重要的就是这两个属性：\n\napp:headerLayout \napp:menu\n\n通过这两个属性，我们可以非常方便的指定导航界面的头布局和菜单布局。\n```java\nprivate NavigationView navigationView;\nprivate void initNavigationViewHeader() {\n        navigationView = (NavigationView) findViewById(R.id.navigation);       \n       View view = navigationView.inflateHeaderView(R.layout.drawer_header);\n\t   //navigationView.addHeaderView(view);hear的高度不好控制，推荐设置头像，布局app:headerLayout所指定的头布局\n\t   View header = navigationView.getHeaderView(0);\n        TextView userName = (TextView) header.findViewById(R.id.userName);\n        userName.setText(\"小尛龙\");\n\t  //菜单点击事件\n        navigationView.setNavigationItemSelectedListener(new NavigationItemSelected());\n    }\n```\n```java\nclass NavigationItemSelected implements NavigationView.OnNavigationItemSelectedListener {\n        @Override\n        public boolean onNavigationItemSelected(MenuItem menuItem) {\n            mToolbar.setTitle(menuItem.getTitle());\n            switch (menuItem.getItemId()) {\n                case R.id.navigation_item_1:\n                    selectItem(0);\n                    menuItem.setChecked(true);\n                    return true;               \n                default:\n                    return true;\n            }\n        }\n    }\n```\n设置Fragment\n```java\n  private void selectItem(int position) {\n        mDrawerLayout.closeDrawers();\n        Fragment fragment = null;\n        switch (position) {\n\n            case 0:\n                fragment = new HomeFragment().newInstance();\n                break;\n        }\n\n        FragmentManager fragmentManager = getSupportFragmentManager();\n        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();\n        if (fragment != null && fragment.isAdded()) {\n            fragmentTransaction.hide(mCurrentFragment).show(fragment);\n        } else {\n            fragmentTransaction.add(R.id.content, fragment);\n        }\n        mCurrentFragment = fragment;\n        fragmentTransaction.commit();\n    }\n```\n设置DrawerLayout\n```java\nprivate DrawerLayout mDrawerLayout;\nprivate void initDrawer() {\n        mDrawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);\n        mDrawerToggle = new ActionBarDrawerToggle(this, mDrawerLayout, mToolbar, R.string.open, R.string.close) {\n            @Override\n            public void onDrawerOpened(View drawerView) {\n                super.onDrawerOpened(drawerView);\n            }\n\n            @Override\n            public void onDrawerClosed(View drawerView) {\n                super.onDrawerClosed(drawerView);\n            }\n        };\n        mDrawerToggle.syncState();\n        mDrawerLayout.setDrawerListener(mDrawerToggle);\n    }\n```\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n## 源码地址\n[https://github.com/WuXiaolong/DesignSupportLibrarySample](https://github.com/WuXiaolong/DesignSupportLibrarySample)\n","slug":"NavigationView","published":1,"updated":"2016-03-22T05:43:49.626Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge4a00bho4pk3fmctkrw"},{"title":"我的编码嗜好","date":"2016-03-13T02:06:00.000Z","_content":"> 如果有个好的工具或习惯，会让你编码效率事半功倍。我的个人编码嗜好，内容包括Chrome插件、Android studio插件和快捷键使用、手机录屏软件等。\n\n# Chrome插件\n## AdBlock/广告终结者\n作用：当你浏览网页时，被满屏的广告所扰，这个插件让你的网页更干净更清爽。\n<!--more-->\n下载地址：\n[AdBlock](https://chrome.google.com/webstore/detail/adblock/gighmmpiobklfepjocnamgkkbiglidom?utm_source=chrome-app-launcher-info-dialog)\n[广告终结者](https://chrome.google.com/webstore/detail/%E5%B9%BF%E5%91%8A%E7%BB%88%E7%BB%93%E8%80%85/fpdnjdlbdmifoocedhkighhlbchbiikl?utm_source=chrome-app-launcher-info-dialog)\n\n## JSONView\n作用：调试接口，我一般会在浏览器打开看看数据，但是打开却是一堆密密麻麻的，那这个插件，你必不可少，支持get请求方式。\n下载地址：[JSONView](https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc?utm_source=chrome-app-launcher-info-dialog)\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby0.png)\n\n## Postman\n作用：你如果调试接口，这个插件，你必不可少，可以支持get、post、put等调试。\n下载地址：[Postman](https://chrome.google.com/webstore/detail/fhbjgbiflinjbdggehcddcbncdddomop?utm_source=chrome-app-launcher-info-dialog)\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby1.png)\n\n## Vysor \n作用：PC上直接同步你的手机，配合LICEcap（下文介绍）使用，效果更佳。\n下载地址：[Vysor](https://chrome.google.com/webstore/detail/gidgenkbbabolejbgbpnhbimgjbffefm?utm_source=chrome-app-launcher-info-dialog)\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby2.png)\n# Android studio插件\n## Genymotion\n作用：Android模拟器，运行速度堪比手机，Android自带的模拟器卡成翔。\n安装步骤：Android studio-Settings-Plugins-搜Genymotion-Install Plugin\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby3.png)\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby4.png)\n\n## ButterKnife\n作用：ButterKnife注解想必都用过，安装ButterKnife插件，快速生成findViewById。\n安装步骤：Android studio-Settings-Plugins-搜ButterKnife-Install Plugin\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby5.gif)\n\n## Gsonformat\n作用：一般接口返回数据后要建立自己的bean，Gsonformat帮助你快速生成，不用一条一条去写。\n安装步骤：Android studio-Settings-Plugins-搜Gsonformat-Install Plugin\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby6.gif)\n\n# Android studio快捷键使用\nAndroid studio出beta版，我就开始尝鲜，但快捷键还一时难以适应，于是就把Android studio的快捷键设置成eclipse（[Android Studio快捷键设置成跟Eclipse一样](http://wuxiaolong.me/2014/10/21/Android-Studio-shortcut-keys-arranged-like-Eclipse/)）。\n1. 注释\nComment with Line Comment =>Ctrl+斜杠，改成Ctrl+Shift+c\n2. Alt+insert\n快捷设置set和get方法或实现某个方法\n3. Ctrl+alt+方向键下\n快速复制一行\n4. alt+方向键下\n内容下移一行\n5. ctrl+shift+t \n找某个类\n6. alt+选择代码块进行复制\n7. ctrl+f\n可以选中代码块替换\n8. Ctrl+h\n全文搜索\n9. Shift+Alt+r\n更改变量名字\n10. Alt+Shift+M\n选择代码块，生成一个方法\n11. Editor标签-other选择勾选“show quick doc on mouse move”选项，像eclipse通过鼠标显示悬浮提示\n12. Editor标签下-Code Completion下-Case sensitive completion选择None，当输入代码，不区别大小写也能弹出代码提示\n13. Ctrl+G/Ctrl+鼠标\n查看某个方法或变量哪里使用到了，Ctrl+鼠标功能类似\n\n# 手机录屏软件\n## LICEcap\n作用：PC端动态截屏，小巧功能强大。\n下载地址：[LICEcap](http://www.cockos.com/licecap/)\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby7.png)\n\n# 其他\n## Notepad++\n文本编辑器，我很喜欢。\n\n## SourceTree\n版本控制器，如果不喜欢命令行，这个还是不错的选择。\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","source":"_posts/MyCodeHobby.md","raw":"title: 我的编码嗜好\ndate: 2016-03-13 10:06:00\ntags: code\ncategory: Life\n---\n> 如果有个好的工具或习惯，会让你编码效率事半功倍。我的个人编码嗜好，内容包括Chrome插件、Android studio插件和快捷键使用、手机录屏软件等。\n\n# Chrome插件\n## AdBlock/广告终结者\n作用：当你浏览网页时，被满屏的广告所扰，这个插件让你的网页更干净更清爽。\n<!--more-->\n下载地址：\n[AdBlock](https://chrome.google.com/webstore/detail/adblock/gighmmpiobklfepjocnamgkkbiglidom?utm_source=chrome-app-launcher-info-dialog)\n[广告终结者](https://chrome.google.com/webstore/detail/%E5%B9%BF%E5%91%8A%E7%BB%88%E7%BB%93%E8%80%85/fpdnjdlbdmifoocedhkighhlbchbiikl?utm_source=chrome-app-launcher-info-dialog)\n\n## JSONView\n作用：调试接口，我一般会在浏览器打开看看数据，但是打开却是一堆密密麻麻的，那这个插件，你必不可少，支持get请求方式。\n下载地址：[JSONView](https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc?utm_source=chrome-app-launcher-info-dialog)\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby0.png)\n\n## Postman\n作用：你如果调试接口，这个插件，你必不可少，可以支持get、post、put等调试。\n下载地址：[Postman](https://chrome.google.com/webstore/detail/fhbjgbiflinjbdggehcddcbncdddomop?utm_source=chrome-app-launcher-info-dialog)\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby1.png)\n\n## Vysor \n作用：PC上直接同步你的手机，配合LICEcap（下文介绍）使用，效果更佳。\n下载地址：[Vysor](https://chrome.google.com/webstore/detail/gidgenkbbabolejbgbpnhbimgjbffefm?utm_source=chrome-app-launcher-info-dialog)\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby2.png)\n# Android studio插件\n## Genymotion\n作用：Android模拟器，运行速度堪比手机，Android自带的模拟器卡成翔。\n安装步骤：Android studio-Settings-Plugins-搜Genymotion-Install Plugin\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby3.png)\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby4.png)\n\n## ButterKnife\n作用：ButterKnife注解想必都用过，安装ButterKnife插件，快速生成findViewById。\n安装步骤：Android studio-Settings-Plugins-搜ButterKnife-Install Plugin\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby5.gif)\n\n## Gsonformat\n作用：一般接口返回数据后要建立自己的bean，Gsonformat帮助你快速生成，不用一条一条去写。\n安装步骤：Android studio-Settings-Plugins-搜Gsonformat-Install Plugin\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby6.gif)\n\n# Android studio快捷键使用\nAndroid studio出beta版，我就开始尝鲜，但快捷键还一时难以适应，于是就把Android studio的快捷键设置成eclipse（[Android Studio快捷键设置成跟Eclipse一样](http://wuxiaolong.me/2014/10/21/Android-Studio-shortcut-keys-arranged-like-Eclipse/)）。\n1. 注释\nComment with Line Comment =>Ctrl+斜杠，改成Ctrl+Shift+c\n2. Alt+insert\n快捷设置set和get方法或实现某个方法\n3. Ctrl+alt+方向键下\n快速复制一行\n4. alt+方向键下\n内容下移一行\n5. ctrl+shift+t \n找某个类\n6. alt+选择代码块进行复制\n7. ctrl+f\n可以选中代码块替换\n8. Ctrl+h\n全文搜索\n9. Shift+Alt+r\n更改变量名字\n10. Alt+Shift+M\n选择代码块，生成一个方法\n11. Editor标签-other选择勾选“show quick doc on mouse move”选项，像eclipse通过鼠标显示悬浮提示\n12. Editor标签下-Code Completion下-Case sensitive completion选择None，当输入代码，不区别大小写也能弹出代码提示\n13. Ctrl+G/Ctrl+鼠标\n查看某个方法或变量哪里使用到了，Ctrl+鼠标功能类似\n\n# 手机录屏软件\n## LICEcap\n作用：PC端动态截屏，小巧功能强大。\n下载地址：[LICEcap](http://www.cockos.com/licecap/)\n效果预览：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MyCodeHobby7.png)\n\n# 其他\n## Notepad++\n文本编辑器，我很喜欢。\n\n## SourceTree\n版本控制器，如果不喜欢命令行，这个还是不错的选择。\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","slug":"MyCodeHobby","published":1,"updated":"2016-04-15T02:22:49.624Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge4c00bmo4pk0rfeezig"},{"title":"Android事件传递机制分析","date":"2015-12-19T08:17:02.000Z","_content":"# 准备阶段\n为了方便了解整个事件传递的机制，我们设计一个场景：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MotionEvent.png)\n角色：\n一个经理：MotionEventViewGroupA，最外层的ViewGroupA；\n一个组长：MotionEventViewGroupB，中间的ViewGroupB；\n一个你：MotionEventViewC，最底层的码农。\n模拟：\n经理分派任务，下属处理这个任务的过程。\n<!--more-->\nMotionEventViewGroupA\n```java\npublic class MotionEventViewGroupA extends LinearLayout {\n    public MotionEventViewGroupA(Context context) {\n        super(context);\n    }\n\n    public MotionEventViewGroupA(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public MotionEventViewGroupA(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n @Override\n    public boolean dispatchTouchEvent(MotionEvent ev) {\n        Log.e(\"wxl\", \"MotionEventViewGroupA dispatchTouchEventA\");\n        return super.dispatchTouchEvent(ev);\n    }\n    \n    @Override\n    public boolean onInterceptTouchEvent(MotionEvent ev) {\n        Log.e(\"wxl\", \"MotionEventViewGroupA onInterceptTouchEventA\");\n        return super.onInterceptTouchEvent(ev);\n    }   \n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        Log.e(\"wxl\", \"MotionEventViewGroupA onTouchEventA\");\n        return super.onTouchEvent(event);\n    }\n\n}\n```\nMotionEventViewGroupB \n```java\npublic class MotionEventViewGroupB extends LinearLayout {\n\n    public MotionEventViewGroupB(Context context) {\n        super(context);\n    }\n\n    public MotionEventViewGroupB(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public MotionEventViewGroupB(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n @Override\n    public boolean dispatchTouchEvent(MotionEvent ev) {\n        Log.e(\"wxl\", \"MotionEventViewGroupB dispatchTouchEventB\");\n        return super.dispatchTouchEvent(ev);\n    }\n    \n    @Override\n    public boolean onInterceptTouchEvent(MotionEvent ev) {\n        Log.e(\"wxl\", \"MotionEventViewGroupB onInterceptTouchEventB\");\n        return super.onInterceptTouchEvent(ev);\n    } \n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        Log.e(\"wxl\", \"MotionEventViewGroupB onTouchEventB\");\n        return super.onTouchEvent(event);\n    }\n}\n```\nMotionEventViewC \n```java\npublic class MotionEventViewC extends View {\n    public MotionEventViewC(Context context) {\n        super(context);\n    }\n\n    public MotionEventViewC(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public MotionEventViewC(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n    @Override\n    public boolean dispatchTouchEvent(MotionEvent ev) {\n        Log.e(\"wxl\", \"MotionEventViewC dispatchTouchEventC\");\n        return super.dispatchTouchEvent(ev);\n    }\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        Log.e(\"wxl\", \"MotionEventViewC onTouchEventC\");\n        return super.onTouchEvent(event);\n    }\n}\n\n```\nxml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"com.wuxiaolong.apksample.MotionEventActivity\">\n\n    <com.wuxiaolong.apksample.MotionEventViewGroupA\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_gravity=\"center\"\n        android:background=\"@android:color/holo_orange_dark\"\n        android:gravity=\"center\">\n\n        <com.wuxiaolong.apksample.MotionEventViewGroupB\n            android:layout_width=\"300dp\"\n            android:layout_height=\"300dp\"\n            android:background=\"@android:color/holo_purple\"\n            android:gravity=\"center\">\n\n            <com.wuxiaolong.apksample.MotionEventViewC\n                android:layout_width=\"200dp\"\n                android:layout_height=\"200dp\"\n                android:background=\"@android:color/holo_green_dark\"\n                android:gravity=\"center\" />\n        </com.wuxiaolong.apksample.MotionEventViewGroupB>\n    </com.wuxiaolong.apksample.MotionEventViewGroupA>\n</FrameLayout>\n\n```\nViewGroup级别比较高，比View多一个onInterceptTouchEvent（拦截）。\n\n# 情景分析\n## 不做任何修改，点击MotionEventViewC \n```js\n MotionEventViewGroupA dispatchTouchEventA\n MotionEventViewGroupA onInterceptTouchEventA\n MotionEventViewGroupB dispatchTouchEventB\n MotionEventViewGroupB onInterceptTouchEventB\n MotionEventViewC dispatchTouchEventC\n MotionEventViewC onTouchEventC\n MotionEventViewGroupB onTouchEventB\n MotionEventViewGroupA onTouchEventA\n```\nlog信息看出，正常情况，事件传递顺序：\n经理  -->  组长  -->  你，先执行dispatchTouchEvent（分发），再执行onInterceptTouchEvent（拦截）\n\n事件处理顺序：\n你  -->  组长  -->  经理，事件处理都是执行onTouchEvent（处理）。\n\n事件传递返回值：true，拦截，交给自己的onTouchEvent处理；false，不拦截，传给下属。\n\n事件处理返回值：true，自己搞定，不用上报上司；false，上报上司处理。\n\n初始返回都是false。\n\n事件传递，dispatchTouchEvent一般不太会改写，只关心onInterceptTouchEvent。\n\n## 经理觉得这个任务太简单，自己处理\n即MotionEventViewGroupA里onInterceptTouchEvent返回true，我们看下log信息：\n```js\n MotionEventViewGroupA dispatchTouchEventA\n MotionEventViewGroupA onInterceptTouchEventA\n MotionEventViewGroupA onTouchEventA\n```\n经理一个人干完了，没下面的人什么事了。\n\n## 组长觉得这个任务太简单，自己处理\n即MotionEventViewGroupB里onInterceptTouchEvent返回true，我们看下log信息：\n```js \n MotionEventViewGroupA dispatchTouchEventA\n MotionEventViewGroupA onInterceptTouchEventA\n MotionEventViewGroupB dispatchTouchEventB\n MotionEventViewGroupB onInterceptTouchEventB\n MotionEventViewGroupB onTouchEventB\n MotionEventViewGroupA onTouchEventA\n```\n组长干完了活，没你啥事了。以上对事件的分发、拦截的分析。\n\n## 你迫于压力，辞职不干了，任务闲置\n即MotionEventViewC里onTouchEvent返回true，我们看下log信息：\n```js\n MotionEventViewGroupA dispatchTouchEventA\n MotionEventViewGroupA onInterceptTouchEventA\n MotionEventViewGroupB dispatchTouchEventB\n MotionEventViewGroupB onInterceptTouchEventB\n MotionEventViewC dispatchTouchEventC\n MotionEventViewC onTouchEventC\n```\n事件处理到你这里就结束了。\n\n## 组长觉得你任务完成太烂，不敢上报\n即MotionEventViewB里onTouchEvent返回true，我们看下log信息：\n```js\nMotionEventViewGroupA dispatchTouchEventA\nMotionEventViewGroupA onInterceptTouchEventA\nMotionEventViewGroupB dispatchTouchEventB\nMotionEventViewGroupB onInterceptTouchEventB\nMotionEventViewC dispatchTouchEventC\nMotionEventViewC onTouchEventC\nMotionEventViewGroupB onTouchEventB\n```\n事件处理经过你和组长，到组长那里就结束了。\n\n`是不是这样的分析让你对事件的传递不再是一头雾水了，大赞医生《Android群英传》。`\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","source":"_posts/MotionEvent.md","raw":"title: Android事件传递机制分析\ndate: 2015-12-19 16:17:02\ntags: MotionEvent\ncategory: Android\n---\n# 准备阶段\n为了方便了解整个事件传递的机制，我们设计一个场景：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/MotionEvent.png)\n角色：\n一个经理：MotionEventViewGroupA，最外层的ViewGroupA；\n一个组长：MotionEventViewGroupB，中间的ViewGroupB；\n一个你：MotionEventViewC，最底层的码农。\n模拟：\n经理分派任务，下属处理这个任务的过程。\n<!--more-->\nMotionEventViewGroupA\n```java\npublic class MotionEventViewGroupA extends LinearLayout {\n    public MotionEventViewGroupA(Context context) {\n        super(context);\n    }\n\n    public MotionEventViewGroupA(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public MotionEventViewGroupA(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n @Override\n    public boolean dispatchTouchEvent(MotionEvent ev) {\n        Log.e(\"wxl\", \"MotionEventViewGroupA dispatchTouchEventA\");\n        return super.dispatchTouchEvent(ev);\n    }\n    \n    @Override\n    public boolean onInterceptTouchEvent(MotionEvent ev) {\n        Log.e(\"wxl\", \"MotionEventViewGroupA onInterceptTouchEventA\");\n        return super.onInterceptTouchEvent(ev);\n    }   \n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        Log.e(\"wxl\", \"MotionEventViewGroupA onTouchEventA\");\n        return super.onTouchEvent(event);\n    }\n\n}\n```\nMotionEventViewGroupB \n```java\npublic class MotionEventViewGroupB extends LinearLayout {\n\n    public MotionEventViewGroupB(Context context) {\n        super(context);\n    }\n\n    public MotionEventViewGroupB(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public MotionEventViewGroupB(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n @Override\n    public boolean dispatchTouchEvent(MotionEvent ev) {\n        Log.e(\"wxl\", \"MotionEventViewGroupB dispatchTouchEventB\");\n        return super.dispatchTouchEvent(ev);\n    }\n    \n    @Override\n    public boolean onInterceptTouchEvent(MotionEvent ev) {\n        Log.e(\"wxl\", \"MotionEventViewGroupB onInterceptTouchEventB\");\n        return super.onInterceptTouchEvent(ev);\n    } \n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        Log.e(\"wxl\", \"MotionEventViewGroupB onTouchEventB\");\n        return super.onTouchEvent(event);\n    }\n}\n```\nMotionEventViewC \n```java\npublic class MotionEventViewC extends View {\n    public MotionEventViewC(Context context) {\n        super(context);\n    }\n\n    public MotionEventViewC(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public MotionEventViewC(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n    @Override\n    public boolean dispatchTouchEvent(MotionEvent ev) {\n        Log.e(\"wxl\", \"MotionEventViewC dispatchTouchEventC\");\n        return super.dispatchTouchEvent(ev);\n    }\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        Log.e(\"wxl\", \"MotionEventViewC onTouchEventC\");\n        return super.onTouchEvent(event);\n    }\n}\n\n```\nxml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"com.wuxiaolong.apksample.MotionEventActivity\">\n\n    <com.wuxiaolong.apksample.MotionEventViewGroupA\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_gravity=\"center\"\n        android:background=\"@android:color/holo_orange_dark\"\n        android:gravity=\"center\">\n\n        <com.wuxiaolong.apksample.MotionEventViewGroupB\n            android:layout_width=\"300dp\"\n            android:layout_height=\"300dp\"\n            android:background=\"@android:color/holo_purple\"\n            android:gravity=\"center\">\n\n            <com.wuxiaolong.apksample.MotionEventViewC\n                android:layout_width=\"200dp\"\n                android:layout_height=\"200dp\"\n                android:background=\"@android:color/holo_green_dark\"\n                android:gravity=\"center\" />\n        </com.wuxiaolong.apksample.MotionEventViewGroupB>\n    </com.wuxiaolong.apksample.MotionEventViewGroupA>\n</FrameLayout>\n\n```\nViewGroup级别比较高，比View多一个onInterceptTouchEvent（拦截）。\n\n# 情景分析\n## 不做任何修改，点击MotionEventViewC \n```js\n MotionEventViewGroupA dispatchTouchEventA\n MotionEventViewGroupA onInterceptTouchEventA\n MotionEventViewGroupB dispatchTouchEventB\n MotionEventViewGroupB onInterceptTouchEventB\n MotionEventViewC dispatchTouchEventC\n MotionEventViewC onTouchEventC\n MotionEventViewGroupB onTouchEventB\n MotionEventViewGroupA onTouchEventA\n```\nlog信息看出，正常情况，事件传递顺序：\n经理  -->  组长  -->  你，先执行dispatchTouchEvent（分发），再执行onInterceptTouchEvent（拦截）\n\n事件处理顺序：\n你  -->  组长  -->  经理，事件处理都是执行onTouchEvent（处理）。\n\n事件传递返回值：true，拦截，交给自己的onTouchEvent处理；false，不拦截，传给下属。\n\n事件处理返回值：true，自己搞定，不用上报上司；false，上报上司处理。\n\n初始返回都是false。\n\n事件传递，dispatchTouchEvent一般不太会改写，只关心onInterceptTouchEvent。\n\n## 经理觉得这个任务太简单，自己处理\n即MotionEventViewGroupA里onInterceptTouchEvent返回true，我们看下log信息：\n```js\n MotionEventViewGroupA dispatchTouchEventA\n MotionEventViewGroupA onInterceptTouchEventA\n MotionEventViewGroupA onTouchEventA\n```\n经理一个人干完了，没下面的人什么事了。\n\n## 组长觉得这个任务太简单，自己处理\n即MotionEventViewGroupB里onInterceptTouchEvent返回true，我们看下log信息：\n```js \n MotionEventViewGroupA dispatchTouchEventA\n MotionEventViewGroupA onInterceptTouchEventA\n MotionEventViewGroupB dispatchTouchEventB\n MotionEventViewGroupB onInterceptTouchEventB\n MotionEventViewGroupB onTouchEventB\n MotionEventViewGroupA onTouchEventA\n```\n组长干完了活，没你啥事了。以上对事件的分发、拦截的分析。\n\n## 你迫于压力，辞职不干了，任务闲置\n即MotionEventViewC里onTouchEvent返回true，我们看下log信息：\n```js\n MotionEventViewGroupA dispatchTouchEventA\n MotionEventViewGroupA onInterceptTouchEventA\n MotionEventViewGroupB dispatchTouchEventB\n MotionEventViewGroupB onInterceptTouchEventB\n MotionEventViewC dispatchTouchEventC\n MotionEventViewC onTouchEventC\n```\n事件处理到你这里就结束了。\n\n## 组长觉得你任务完成太烂，不敢上报\n即MotionEventViewB里onTouchEvent返回true，我们看下log信息：\n```js\nMotionEventViewGroupA dispatchTouchEventA\nMotionEventViewGroupA onInterceptTouchEventA\nMotionEventViewGroupB dispatchTouchEventB\nMotionEventViewGroupB onInterceptTouchEventB\nMotionEventViewC dispatchTouchEventC\nMotionEventViewC onTouchEventC\nMotionEventViewGroupB onTouchEventB\n```\n事件处理经过你和组长，到组长那里就结束了。\n\n`是不是这样的分析让你对事件的传递不再是一头雾水了，大赞医生《Android群英传》。`\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","slug":"MotionEvent","published":1,"updated":"2016-03-25T07:36:52.921Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge4e00bqo4pkdtm2ubt8"},{"title":"Android之LoadMoreListView","date":"2015-04-27T16:00:00.000Z","_content":"\njava\n\n```java\n/**\n * Android load more ListView when scroll down.\n * \n * @author Charon Chui\n */\npublic class LoadMoreListView extends ListView {\n\tprotected static final String TAG = \"LoadMoreListView\";\n\tprivate View mFooterView;\n\tprivate OnScrollListener mOnScrollListener;\n\tprivate OnLoadMoreListener mOnLoadMoreListener;\n\n\t/**\n\t * If is loading now.\n\t */\n\tprivate boolean mIsLoading;\n\n\tprivate int mCurrentScrollState;\n\n\tpublic LoadMoreListView(Context context, AttributeSet attrs, int defStyle) {\n\t\tsuper(context, attrs, defStyle);\n\t\tinit(context);\n\t}\n\n\tpublic LoadMoreListView(Context context, AttributeSet attrs) {\n\t\tsuper(context, attrs);\n\t\tinit(context);\n\t}\n\n\tpublic LoadMoreListView(Context context) {\n\t\tsuper(context);\n\t\tinit(context);\n\t}\n\n\tprivate void init(Context context) {\n\t\tmFooterView = View.inflate(context, R.layout.load_more_footer, null);\n\t\taddFooterView(mFooterView);\n\t\thideFooterView();\n\t\t/*\n\t\t * Must use super.setOnScrollListener() here to avoid override when call\n\t\t * this view's setOnScrollListener method\n\t\t */\n\t\tsuper.setOnScrollListener(superOnScrollListener);\n\t}\n\n\t/**\n\t * Hide the load more view(footer view)\n\t */\n\tprivate void hideFooterView() {\n\t\tmFooterView.setVisibility(View.GONE);\n\t}\n\n\t/**\n\t * Show load more view\n\t */\n\tprivate void showFooterView() {\n\t\tmFooterView.setVisibility(View.VISIBLE);\n\t}\n\n\t@Override\n\tpublic void setOnScrollListener(OnScrollListener l) {\n\t\tmOnScrollListener = l;\n\t}\n\n\t/**\n\t * Set load more listener, usually you should get more data here.\n\t * \n\t * @param listener\n\t *            OnLoadMoreListener\n\t * @see OnLoadMoreListener\n\t */\n\tpublic void setOnLoadMoreListener(OnLoadMoreListener listener) {\n\t\tmOnLoadMoreListener = listener;\n\t}\n\n\t/**\n\t * When complete load more data, you must use this method to hide the footer\n\t * view, if not the footer view will be shown all the time.\n\t */\n\tpublic void onLoadMoreComplete() {\n\t\tmIsLoading = false;\n\t\thideFooterView();\n\t}\n\n\tprivate OnScrollListener superOnScrollListener = new OnScrollListener() {\n\n\t\t@Override\n\t\tpublic void onScrollStateChanged(AbsListView view, int scrollState) {\n\t\t\tmCurrentScrollState = scrollState;\n\t\t\t// Avoid override when use setOnScrollListener\n\t\t\tif (mOnScrollListener != null) {\n\t\t\t\tmOnScrollListener.onScrollStateChanged(view, scrollState);\n\t\t\t}\n\t\t}\n\n\t\t@Override\n\t\tpublic void onScroll(AbsListView view, int firstVisibleItem,\n\t\t\t\tint visibleItemCount, int totalItemCount) {\n\t\t\tif (mOnScrollListener != null) {\n\t\t\t\tmOnScrollListener.onScroll(view, firstVisibleItem,\n\t\t\t\t\t\tvisibleItemCount, totalItemCount);\n\t\t\t}\n\t\t\t// The count of footer view will be add to visibleItemCount also are\n\t\t\t// added to totalItemCount\n\t\t\tif (visibleItemCount == totalItemCount) {\n\t\t\t\t// If all the item can not fill screen, we should make the\n\t\t\t\t// footer view invisible.\n\t\t\t\thideFooterView();\n\t\t\t} else if (!mIsLoading\n\t\t\t\t\t&& (firstVisibleItem + visibleItemCount >= totalItemCount)\n\t\t\t\t\t&& mCurrentScrollState != SCROLL_STATE_IDLE) {\n\t\t\t\tshowFooterView();\n\t\t\t\tmIsLoading = true;\n\t\t\t\tif (mOnLoadMoreListener != null) {\n\t\t\t\t\tmOnLoadMoreListener.onLoadMore();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\n\t/**\n\t * Interface for load more\n\t */\n\tpublic interface OnLoadMoreListener {\n\t\t/**\n\t\t * Load more data.\n\t\t */\n\t\tvoid onLoadMore();\n\t}\n\n````\n<!-- more -->\nload_more_footer.xml\n\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:gravity=\"center\"\n    android:orientation=\"horizontal\" >\n\n    <ProgressBar\n        android:id=\"@+id/load_more_pb\"\n        style=\"@android:style/Widget.ProgressBar.Small\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginRight=\"10dp\" />\n\n    <TextView\n        android:id=\"@+id/load_more_tv\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:paddingBottom=\"5dp\"\n        android:paddingTop=\"5dp\"\n        android:text=\"正在加载...\"\n        tools:ignore=\"HardcodedText\" />\n\n</LinearLayout>\n```\n\n调用\n\n```java\nmListView.setOnLoadMoreListener(new OnLoadMoreListener() {\n\n\t\t\t@Override\n\t\t\tpublic void onLoadMore() {\n\t\t\t\t\n\t\t\t}\n\t\t});\n```\n","source":"_posts/LoadMoreListView.md","raw":"title: Android之LoadMoreListView\ndate: 2015-04-28 \ncategories: [Android]\ntags: [Android,ListView]\n---\n\njava\n\n```java\n/**\n * Android load more ListView when scroll down.\n * \n * @author Charon Chui\n */\npublic class LoadMoreListView extends ListView {\n\tprotected static final String TAG = \"LoadMoreListView\";\n\tprivate View mFooterView;\n\tprivate OnScrollListener mOnScrollListener;\n\tprivate OnLoadMoreListener mOnLoadMoreListener;\n\n\t/**\n\t * If is loading now.\n\t */\n\tprivate boolean mIsLoading;\n\n\tprivate int mCurrentScrollState;\n\n\tpublic LoadMoreListView(Context context, AttributeSet attrs, int defStyle) {\n\t\tsuper(context, attrs, defStyle);\n\t\tinit(context);\n\t}\n\n\tpublic LoadMoreListView(Context context, AttributeSet attrs) {\n\t\tsuper(context, attrs);\n\t\tinit(context);\n\t}\n\n\tpublic LoadMoreListView(Context context) {\n\t\tsuper(context);\n\t\tinit(context);\n\t}\n\n\tprivate void init(Context context) {\n\t\tmFooterView = View.inflate(context, R.layout.load_more_footer, null);\n\t\taddFooterView(mFooterView);\n\t\thideFooterView();\n\t\t/*\n\t\t * Must use super.setOnScrollListener() here to avoid override when call\n\t\t * this view's setOnScrollListener method\n\t\t */\n\t\tsuper.setOnScrollListener(superOnScrollListener);\n\t}\n\n\t/**\n\t * Hide the load more view(footer view)\n\t */\n\tprivate void hideFooterView() {\n\t\tmFooterView.setVisibility(View.GONE);\n\t}\n\n\t/**\n\t * Show load more view\n\t */\n\tprivate void showFooterView() {\n\t\tmFooterView.setVisibility(View.VISIBLE);\n\t}\n\n\t@Override\n\tpublic void setOnScrollListener(OnScrollListener l) {\n\t\tmOnScrollListener = l;\n\t}\n\n\t/**\n\t * Set load more listener, usually you should get more data here.\n\t * \n\t * @param listener\n\t *            OnLoadMoreListener\n\t * @see OnLoadMoreListener\n\t */\n\tpublic void setOnLoadMoreListener(OnLoadMoreListener listener) {\n\t\tmOnLoadMoreListener = listener;\n\t}\n\n\t/**\n\t * When complete load more data, you must use this method to hide the footer\n\t * view, if not the footer view will be shown all the time.\n\t */\n\tpublic void onLoadMoreComplete() {\n\t\tmIsLoading = false;\n\t\thideFooterView();\n\t}\n\n\tprivate OnScrollListener superOnScrollListener = new OnScrollListener() {\n\n\t\t@Override\n\t\tpublic void onScrollStateChanged(AbsListView view, int scrollState) {\n\t\t\tmCurrentScrollState = scrollState;\n\t\t\t// Avoid override when use setOnScrollListener\n\t\t\tif (mOnScrollListener != null) {\n\t\t\t\tmOnScrollListener.onScrollStateChanged(view, scrollState);\n\t\t\t}\n\t\t}\n\n\t\t@Override\n\t\tpublic void onScroll(AbsListView view, int firstVisibleItem,\n\t\t\t\tint visibleItemCount, int totalItemCount) {\n\t\t\tif (mOnScrollListener != null) {\n\t\t\t\tmOnScrollListener.onScroll(view, firstVisibleItem,\n\t\t\t\t\t\tvisibleItemCount, totalItemCount);\n\t\t\t}\n\t\t\t// The count of footer view will be add to visibleItemCount also are\n\t\t\t// added to totalItemCount\n\t\t\tif (visibleItemCount == totalItemCount) {\n\t\t\t\t// If all the item can not fill screen, we should make the\n\t\t\t\t// footer view invisible.\n\t\t\t\thideFooterView();\n\t\t\t} else if (!mIsLoading\n\t\t\t\t\t&& (firstVisibleItem + visibleItemCount >= totalItemCount)\n\t\t\t\t\t&& mCurrentScrollState != SCROLL_STATE_IDLE) {\n\t\t\t\tshowFooterView();\n\t\t\t\tmIsLoading = true;\n\t\t\t\tif (mOnLoadMoreListener != null) {\n\t\t\t\t\tmOnLoadMoreListener.onLoadMore();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\n\t/**\n\t * Interface for load more\n\t */\n\tpublic interface OnLoadMoreListener {\n\t\t/**\n\t\t * Load more data.\n\t\t */\n\t\tvoid onLoadMore();\n\t}\n\n````\n<!-- more -->\nload_more_footer.xml\n\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:gravity=\"center\"\n    android:orientation=\"horizontal\" >\n\n    <ProgressBar\n        android:id=\"@+id/load_more_pb\"\n        style=\"@android:style/Widget.ProgressBar.Small\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginRight=\"10dp\" />\n\n    <TextView\n        android:id=\"@+id/load_more_tv\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:paddingBottom=\"5dp\"\n        android:paddingTop=\"5dp\"\n        android:text=\"正在加载...\"\n        tools:ignore=\"HardcodedText\" />\n\n</LinearLayout>\n```\n\n调用\n\n```java\nmListView.setOnLoadMoreListener(new OnLoadMoreListener() {\n\n\t\t\t@Override\n\t\t\tpublic void onLoadMore() {\n\t\t\t\t\n\t\t\t}\n\t\t});\n```\n","slug":"LoadMoreListView","published":1,"updated":"2016-03-17T00:44:06.343Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge4h00buo4pkrml7uoxe"},{"title":"LinearGradient实现文字一闪一闪","date":"2015-11-16T03:14:43.000Z","_content":"## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/LinearGradientTextView.gif)\n<!--more-->\n## 实现方法\n新建LinearGradientTextView，继承TextView，重写onSizeChanged和onDraw。\n```java\npublic class LinearGradientTextView extends TextView {\n    private int mViewWidth;\n    private Paint mPaint;\n    private LinearGradient mLinearGradient;\n    private Matrix mMatrix;\n    private int mTranslate;\n\n    public LinearGradientTextView(Context context) {\n        super(context);\n    }\n\n    public LinearGradientTextView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public LinearGradientTextView(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n        if (mViewWidth == 0) {\n            mViewWidth = getMeasuredWidth();\n            if (mViewWidth > 0) {\n                mPaint = getPaint();\n                mLinearGradient = new LinearGradient(0, 0, mViewWidth, 0,\n                        new int[]{Color.BLUE, Color.GRAY, Color.RED, Color.GREEN}, null, Shader.TileMode.MIRROR);\n                mPaint.setShader(mLinearGradient);\n                mMatrix = new Matrix();\n            }\n        }\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        if (mMatrix != null) {\n            mTranslate += mViewWidth / 5;\n            if (mTranslate > 2 * mViewWidth) {\n                mTranslate = -mViewWidth;\n            }\n            mMatrix.setTranslate(mTranslate, 0);\n            mLinearGradient.setLocalMatrix(mMatrix);\n            postInvalidateDelayed(100);\n        }\n    }\n}\n```\nLinearGradient有两个构造函数：\npublic LinearGradient(float x0, float y0, float x1, float y1, int[] colors, float[] positions,Shader.TileMode tile) \n参数:\nfloat x0: 渐变起始点x坐标\nfloat y0:渐变起始点y坐标\nfloat x1:渐变结束点x坐标\nfloat y1:渐变结束点y坐标\nint[] colors:颜色 的int 数组\nfloat[] positions: 相对位置的颜色数组,可为null,  若为null,可为null,颜色沿渐变线均匀分布\nShader.TileMode tile: 渲染器平铺模式\n\n## xml调用\n```js\n<com.wuxiaolong.apksample.LinearGradientTextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:gravity=\"center\"\n        android:text=\"测试文字一闪一闪\"\n        android:textSize=\"30sp\" />\n```\n## Shimmer-android\n[Shimmer-android](https://github.com/RomainPiel/Shimmer-android)，github上，TextView一闪一闪动画效果\n\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n","source":"_posts/LinearGradientTextView.md","raw":"title: LinearGradient实现文字一闪一闪\ndate: 2015-11-16 11:14:43\ntags: [LinearGradient,TextView] \ncategory: Android\n---\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/LinearGradientTextView.gif)\n<!--more-->\n## 实现方法\n新建LinearGradientTextView，继承TextView，重写onSizeChanged和onDraw。\n```java\npublic class LinearGradientTextView extends TextView {\n    private int mViewWidth;\n    private Paint mPaint;\n    private LinearGradient mLinearGradient;\n    private Matrix mMatrix;\n    private int mTranslate;\n\n    public LinearGradientTextView(Context context) {\n        super(context);\n    }\n\n    public LinearGradientTextView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public LinearGradientTextView(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n        if (mViewWidth == 0) {\n            mViewWidth = getMeasuredWidth();\n            if (mViewWidth > 0) {\n                mPaint = getPaint();\n                mLinearGradient = new LinearGradient(0, 0, mViewWidth, 0,\n                        new int[]{Color.BLUE, Color.GRAY, Color.RED, Color.GREEN}, null, Shader.TileMode.MIRROR);\n                mPaint.setShader(mLinearGradient);\n                mMatrix = new Matrix();\n            }\n        }\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        if (mMatrix != null) {\n            mTranslate += mViewWidth / 5;\n            if (mTranslate > 2 * mViewWidth) {\n                mTranslate = -mViewWidth;\n            }\n            mMatrix.setTranslate(mTranslate, 0);\n            mLinearGradient.setLocalMatrix(mMatrix);\n            postInvalidateDelayed(100);\n        }\n    }\n}\n```\nLinearGradient有两个构造函数：\npublic LinearGradient(float x0, float y0, float x1, float y1, int[] colors, float[] positions,Shader.TileMode tile) \n参数:\nfloat x0: 渐变起始点x坐标\nfloat y0:渐变起始点y坐标\nfloat x1:渐变结束点x坐标\nfloat y1:渐变结束点y坐标\nint[] colors:颜色 的int 数组\nfloat[] positions: 相对位置的颜色数组,可为null,  若为null,可为null,颜色沿渐变线均匀分布\nShader.TileMode tile: 渲染器平铺模式\n\n## xml调用\n```js\n<com.wuxiaolong.apksample.LinearGradientTextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:gravity=\"center\"\n        android:text=\"测试文字一闪一闪\"\n        android:textSize=\"30sp\" />\n```\n## Shimmer-android\n[Shimmer-android](https://github.com/RomainPiel/Shimmer-android)，github上，TextView一闪一闪动画效果\n\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n","slug":"LinearGradientTextView","published":1,"updated":"2016-03-17T00:44:06.343Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge4j00byo4pk6aojgoyl"},{"title":"Android之LayoutParams","date":"2015-05-27T16:00:00.000Z","_content":"\n LayoutParams相当于一个Layout的信息包，它封装了Layout的位置、高、宽等信息。假设在屏幕上一块区域是由一个Layout占领的，如果将一个View添加到一个Layout中，最好告诉Layout用户期望的布局方式，也就是将一个认可的layoutParams传递进去。\n       可以这样去形容LayoutParams，在象棋的棋盘上，每个棋子都占据一个位置，也就是每个棋子都有一个位置的信息，如这个棋子在4行4列，这里的“4行4列”就是棋子的LayoutParams。\n\n但LayoutParams类也只是简单的描述了宽高，宽和高都可以设置成三种值：\n       \n1，一个确定的值；\n       \n2，FILL_PARENT，即填满（和父容器一样大小）；\n       \n3，WRAP_CONTENT，即包裹住组件就好。\n\n<!-- more -->\n\n在JAVA中动态构建的布局，常常这样写：\n\n```java\nsetLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));\n```\n\n上面这一句话其实是子对父的，也就是说，父布局下的子控件要设置这句话。\n\n因为布局很多，虽然都继承至ViewGroup但是各个布局还是有很大的不同。\n\n很显然上面这句应该这样写才算准确：\n\n```java\nsetLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT,TableRow.LayoutParams.FILL_PARENT));\n```\n\n这表示这个子控件的父布局是一个TableRow , 这样的LayoutParams 太多，所以应明确指明。\n\n \n\n下面分别说下两个常用到布局:\n\n1. FrameLayout下动态设置子控件居中，动态用JAVA代码要这样实现:\n\n```java\nFrameLayout.LayoutParams lytp = new FrameLayout.LayoutParams(80,LayoutParams.WRAP_CONTENT);\nlytp .gravity = Gravity.CENTER;\nbtn.setLayoutParams(lytp);\n```\n\n2. RelativeLayout下动态设置子控件居中：\n\n```java\nRelativeLayout.LayoutParams lp=new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT); \nlp.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, RelativeLayout.TRUE); \nlp.addRule(RelativeLayout.ALIGN_PARENT_TOP, RelativeLayout.TRUE); \nbtn1.setLayoutParams(lp);\n```\n","source":"_posts/LayoutParams.md","raw":"title: Android之LayoutParams\ndate: 2015-05-28 \ncategories: [Android]\ntags: [Android,LayoutParams]\n---\n\n LayoutParams相当于一个Layout的信息包，它封装了Layout的位置、高、宽等信息。假设在屏幕上一块区域是由一个Layout占领的，如果将一个View添加到一个Layout中，最好告诉Layout用户期望的布局方式，也就是将一个认可的layoutParams传递进去。\n       可以这样去形容LayoutParams，在象棋的棋盘上，每个棋子都占据一个位置，也就是每个棋子都有一个位置的信息，如这个棋子在4行4列，这里的“4行4列”就是棋子的LayoutParams。\n\n但LayoutParams类也只是简单的描述了宽高，宽和高都可以设置成三种值：\n       \n1，一个确定的值；\n       \n2，FILL_PARENT，即填满（和父容器一样大小）；\n       \n3，WRAP_CONTENT，即包裹住组件就好。\n\n<!-- more -->\n\n在JAVA中动态构建的布局，常常这样写：\n\n```java\nsetLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));\n```\n\n上面这一句话其实是子对父的，也就是说，父布局下的子控件要设置这句话。\n\n因为布局很多，虽然都继承至ViewGroup但是各个布局还是有很大的不同。\n\n很显然上面这句应该这样写才算准确：\n\n```java\nsetLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT,TableRow.LayoutParams.FILL_PARENT));\n```\n\n这表示这个子控件的父布局是一个TableRow , 这样的LayoutParams 太多，所以应明确指明。\n\n \n\n下面分别说下两个常用到布局:\n\n1. FrameLayout下动态设置子控件居中，动态用JAVA代码要这样实现:\n\n```java\nFrameLayout.LayoutParams lytp = new FrameLayout.LayoutParams(80,LayoutParams.WRAP_CONTENT);\nlytp .gravity = Gravity.CENTER;\nbtn.setLayoutParams(lytp);\n```\n\n2. RelativeLayout下动态设置子控件居中：\n\n```java\nRelativeLayout.LayoutParams lp=new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT); \nlp.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, RelativeLayout.TRUE); \nlp.addRule(RelativeLayout.ALIGN_PARENT_TOP, RelativeLayout.TRUE); \nbtn1.setLayoutParams(lp);\n```\n","slug":"LayoutParams","published":1,"updated":"2016-03-17T00:44:06.342Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge4v00c4o4pk5n4rq7dt"},{"title":"Android之LayoutInflate","date":"2015-04-22T16:00:00.000Z","_content":"【转载】[Android获取LayoutInflater对象的方法总结](http://blog.csdn.net/bigconvience/article/details/26582497)\n\n在写Android程序时，有时候会编写自定义的View，使用Inflater对象来将布局文件解析成一个View。本文主要目的是总结获取LayoutInflater对象的方法。\n\n1、若能获取context对象，可以有以下几种方法：\n\n```java \nLayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  \nView child = inflater.inflate(R.layout.child, null);  \n```\n<!-- more -->\n\nor\n\n```java\nLayoutInflater inflater = LayoutInflater.from(context);  \nView child = inflater.inflate(R.layout.child, null);  \n```\n\ninflate实现源码如下：\n\n```java\npublic static View inflate(Context context, int resource, ViewGroup root) {  \n    LayoutInflater factory = LayoutInflater.from(context);  \n    return factory.inflate(resource, root);  \n}  \n```\n\nLayoutInflater.from(context)实际上是对方法1的包装，可参考以下源码：\n\n```java\npublic static LayoutInflater from(Context context) {  \n    LayoutInflater LayoutInflater =  \n            (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  \n    if (LayoutInflater == null) {  \n        throw new AssertionError(\"LayoutInflater not found.\");  \n    }  \n    return LayoutInflater;  \n}  \n```\n\n2、在一个Activity中，可以有以下方法：\n\n```java\nView child = getLayoutInflater().inflate(R.layout.child, item, false); \n```\n\nor\n\n```java\nView view;   \nLayoutInflater inflater = (LayoutInflater)   getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);   \nview = inflater.inflate(R.layout.mylayout, null);  \n```\n方法1和方法2其实都是对context().getSystemService()的使用。\n\n3、使用View的静态方法：\n\n```java\nView view=View.inflate(context, R.layout.child, null)  \n```\n\n","source":"_posts/LayoutInflater.md","raw":"title: Android之LayoutInflate\ndate: 2015-04-23 \ncategories: [Android]\ntags: [Android,LayoutInflate]\n---\n【转载】[Android获取LayoutInflater对象的方法总结](http://blog.csdn.net/bigconvience/article/details/26582497)\n\n在写Android程序时，有时候会编写自定义的View，使用Inflater对象来将布局文件解析成一个View。本文主要目的是总结获取LayoutInflater对象的方法。\n\n1、若能获取context对象，可以有以下几种方法：\n\n```java \nLayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  \nView child = inflater.inflate(R.layout.child, null);  \n```\n<!-- more -->\n\nor\n\n```java\nLayoutInflater inflater = LayoutInflater.from(context);  \nView child = inflater.inflate(R.layout.child, null);  \n```\n\ninflate实现源码如下：\n\n```java\npublic static View inflate(Context context, int resource, ViewGroup root) {  \n    LayoutInflater factory = LayoutInflater.from(context);  \n    return factory.inflate(resource, root);  \n}  \n```\n\nLayoutInflater.from(context)实际上是对方法1的包装，可参考以下源码：\n\n```java\npublic static LayoutInflater from(Context context) {  \n    LayoutInflater LayoutInflater =  \n            (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  \n    if (LayoutInflater == null) {  \n        throw new AssertionError(\"LayoutInflater not found.\");  \n    }  \n    return LayoutInflater;  \n}  \n```\n\n2、在一个Activity中，可以有以下方法：\n\n```java\nView child = getLayoutInflater().inflate(R.layout.child, item, false); \n```\n\nor\n\n```java\nView view;   \nLayoutInflater inflater = (LayoutInflater)   getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);   \nview = inflater.inflate(R.layout.mylayout, null);  \n```\n方法1和方法2其实都是对context().getSystemService()的使用。\n\n3、使用View的静态方法：\n\n```java\nView view=View.inflate(context, R.layout.child, null)  \n```\n\n","slug":"LayoutInflater","published":1,"updated":"2016-03-17T00:44:06.342Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge4y00c9o4pkkdys08pv"},{"title":"Android之Intent和Intent过滤器","date":"2015-11-03T01:40:54.000Z","_content":"Intent 是一个消息传递对象，您可以使用它从其他应用组件请求操作。尽管 Intent 可以通过多种方式促进组件之间的通信，但其基本用例主要包括以下三个：\n* 启动 Activity\n Activity 表示应用中的一个屏幕。通过将 Intent 传递给 startActivity()，您可以启动新的 Activity 实例。Intent 描述了要启动的 Activity，并携带了任何必要的数据。\n如果您希望在 Activity 完成后收到结果，请调用 startActivityForResult()。在 Activity 的 onActivityResult() 回调中，您的 Activity 将结果作为单独的 Intent 对象接收。\n* 启动服务\n[Android之Service](http://wuxiaolong.github.io/2015/11/02/service/)\n* 传递广播\n[Android之BroadcastReceiver](http://wuxiaolong.github.io/2015/11/03/BroadcastReceiver/)\n<!--more-->\n\n## Intent 类型\nIntent 分为两种类型：\n\n* 显式 Intent \n按名称（完全限定类名）指定要启动的组件。通常，您会在自己的应用中使用显式 Intent 来启动组件，这是因为您知道要启动的 Activity 或服务的类名。例如，启动新 Activity 以响应用户操作，或者启动服务以在后台下载文件。\n* 隐式 Intent\n不会指定特定的组件，而是声明要执行的常规操作，从而允许其他应用中的组件来处理它。例如，如需在地图上向用户显示位置，则可以使用隐式 Intent，请求另一具有此功能的应用在地图上显示指定的位置。\n\n## 显式 Intent 示例\n要创建显式 Intent，请为 Intent 对象定义组件名称。Intent 的所有其他属性均为可选属性。\n```java\nIntent intent = new Intent(this, DownloadActivity.class);\nstartActivity(intent);\n```\n\n## 隐式 Intent 示例\n隐式 Intent 指定能够在可以执行相应操作的设备上调用任何应用的操作。如果您的应用无法执行该操作而其他应用可以，且您希望用户选取要使用的应用，则使用隐式 Intent 非常有用。\n例如，如果您希望用户与他人共享您的内容，请使用 ACTION_SEND 操作创建 Intent，并添加指定共享内容的 Extra。使用该 Intent 调用 startActivity() 时，用户可以选取共享内容所使用的应用。\n```java\n// Create the text message with a string\nIntent sendIntent = new Intent();\nsendIntent.setAction(Intent.ACTION_SEND);\nsendIntent.putExtra(Intent.EXTRA_TEXT, textMessage);\nsendIntent.setType(\"text/plain\");\n\n// Verify that the intent will resolve to an activity\nif (sendIntent.resolveActivity(getPackageManager()) != null) {\n    startActivity(sendIntent);\n}\n```\n查看地图:\n```java\n// Map point based on address\nUri location = Uri.parse(\"geo:0,0?q=1600+Amphitheatre+Parkway,+Mountain+View,+California\");\n// Or map point based on latitude/longitude\n// Uri location = Uri.parse(\"geo:37.422219,-122.08364?z=14\"); // z param is zoom level\nIntent mapIntent = new Intent(Intent.ACTION_VIEW, location);\n```\n查看网页:\n```java\nUri webpage = Uri.parse(\"http://www.android.com\");\nIntent webIntent = new Intent(Intent.ACTION_VIEW, webpage);\n```\n如果多个 Activity 接受 Intent，则系统将显示一个对话框，使用户能够选取要使用的应用。\n\n## Intent 传值示例\n\n* 简单传值\n\nA页面\n```java\nIntent intent = new Intent(A.this, B.class);\nintent.putExtras(\"realname \", realname);\nstartActivity(intent );\n```\n\nB页面\n```java\nrealname = this.getIntent().getStringExtra(\"realname\");\n```\n\n* 传值接受返回结果\n\nA页面\n```java\nprivate static final int REQUEST_CODE_A = 0;\nprivate static final int RESULT_CODE_B = 0;\nIntent intent = new Intent();\nBundle bundle = new Bundle();\nintent.setClass(MainActivity.this, TestBActivity.class);\nbundle.putString(\"msg\", textView.getText().toString());\nintent.putExtras(bundle);\nstartActivityForResult(intent, REQUEST_CODE_A);\n\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n\t\tsuper.onActivityResult(requestCode, resultCode, data);\n\t\tif (requestCode == REQUEST_CODE_A && resultCode == RESULT_OK) {\n\t\t\tString str=data.getExtras().getString(\"result\");\n\t\t}\n\t}\n```\n\nB页面\n```java\n//返回设置\nIntent intent = new Intent();\nintent.putExtra(\"result\", textView.getText().toString());\nsetResult(RESULT_OK, intent);\nfinish();\n```\n\n* 传List\n\n第一种\n```java\nIntent intent = new Intent();\nintent.setClass(A.this, B.class);\nintent.putExtra(\"list\", list);\nstartActivity(intent);\n```\nB.class:\n```java\nArrayList<String>  mList = (ArrayList<String>) getIntent().getSerializableExtra(\"list\");\n```\n第二种\n```\nIntent intent = new Intent(A.this, B.class);\nintent.putStringArrayListExtra(\"mSelectedPhotos\",mSelectedPhotos);\nstartActivity(intent);\n\t\t\t\t\t\n//接受结果\t\t\t\t\t\nArrayList<String> mSelectedPhotos = (ArrayList<String>) intent\n\t\t\t\t\t\t.getStringArrayListExtra(\"mSelectedPhotos\");\n\n```\n## 构建 Intent\n若activity中的intent filter满足以下intent对象的标准，系统就能够把特定的intent发送给activity：\n\nAction:一个想要执行的动作的名称。通常是系统已经定义好的值，如ACTION_SEND或ACTION_VIEW。 在intent filter中通过<action>指定它的值，值的类型必须为字符串，而不是API中的常量(看下面的例子)\n\nData:Intent附带数据的描述。在intent filter中通过<data>指定它的值，可以使用一个或者多个属性，我们可以只定义MIME type或者是只指定URI prefix，也可以只定义一个URI scheme，或者是他们综合使用。\n\nNote: 如果不想handle Uri 类型的数据，那么应该指定 android:mimeType 属性。例如 text/plain or image/jpeg.\nCategory:提供一个附加的方法来标识这个activity能够handle的intent。通常与用户的手势或者是启动位置有关。系统有支持几种不同的categories,但是大多数都很少用到。而且，所有的implicit intents都默认是 CATEGORY_DEFAULT 类型的。在intent filter中用<category>指定它的值。\n```js\n<activity android:name=\"ShareActivity\">\n    <intent-filter>\n        <action android:name=\"android.intent.action.SEND\"/>\n        <category android:name=\"android.intent.category.DEFAULT\"/>\n        <data android:mimeType=\"text/plain\"/>\n        <data android:mimeType=\"image/*\"/>\n    </intent-filter>\n</activity>\n```\n## 强制使用应用选择器\n## 接收隐式 Intent\n## 过滤器示例\n## 使用待定 Intent\n## Intent 解析\n## Intent 匹配\n## 附录\n[Intent and Intent Filters](https://developer.android.com/intl/zh-cn/guide/components/intents-filters.html)\n[Intent](http://hukai.me/android-training-course-in-chinese/basics/intents/sending.html)","source":"_posts/Intent.md","raw":"title: Android之Intent和Intent过滤器\ndate: 2015-11-03 09:40:54\ntags: Intent\ncategory: Android\n---\nIntent 是一个消息传递对象，您可以使用它从其他应用组件请求操作。尽管 Intent 可以通过多种方式促进组件之间的通信，但其基本用例主要包括以下三个：\n* 启动 Activity\n Activity 表示应用中的一个屏幕。通过将 Intent 传递给 startActivity()，您可以启动新的 Activity 实例。Intent 描述了要启动的 Activity，并携带了任何必要的数据。\n如果您希望在 Activity 完成后收到结果，请调用 startActivityForResult()。在 Activity 的 onActivityResult() 回调中，您的 Activity 将结果作为单独的 Intent 对象接收。\n* 启动服务\n[Android之Service](http://wuxiaolong.github.io/2015/11/02/service/)\n* 传递广播\n[Android之BroadcastReceiver](http://wuxiaolong.github.io/2015/11/03/BroadcastReceiver/)\n<!--more-->\n\n## Intent 类型\nIntent 分为两种类型：\n\n* 显式 Intent \n按名称（完全限定类名）指定要启动的组件。通常，您会在自己的应用中使用显式 Intent 来启动组件，这是因为您知道要启动的 Activity 或服务的类名。例如，启动新 Activity 以响应用户操作，或者启动服务以在后台下载文件。\n* 隐式 Intent\n不会指定特定的组件，而是声明要执行的常规操作，从而允许其他应用中的组件来处理它。例如，如需在地图上向用户显示位置，则可以使用隐式 Intent，请求另一具有此功能的应用在地图上显示指定的位置。\n\n## 显式 Intent 示例\n要创建显式 Intent，请为 Intent 对象定义组件名称。Intent 的所有其他属性均为可选属性。\n```java\nIntent intent = new Intent(this, DownloadActivity.class);\nstartActivity(intent);\n```\n\n## 隐式 Intent 示例\n隐式 Intent 指定能够在可以执行相应操作的设备上调用任何应用的操作。如果您的应用无法执行该操作而其他应用可以，且您希望用户选取要使用的应用，则使用隐式 Intent 非常有用。\n例如，如果您希望用户与他人共享您的内容，请使用 ACTION_SEND 操作创建 Intent，并添加指定共享内容的 Extra。使用该 Intent 调用 startActivity() 时，用户可以选取共享内容所使用的应用。\n```java\n// Create the text message with a string\nIntent sendIntent = new Intent();\nsendIntent.setAction(Intent.ACTION_SEND);\nsendIntent.putExtra(Intent.EXTRA_TEXT, textMessage);\nsendIntent.setType(\"text/plain\");\n\n// Verify that the intent will resolve to an activity\nif (sendIntent.resolveActivity(getPackageManager()) != null) {\n    startActivity(sendIntent);\n}\n```\n查看地图:\n```java\n// Map point based on address\nUri location = Uri.parse(\"geo:0,0?q=1600+Amphitheatre+Parkway,+Mountain+View,+California\");\n// Or map point based on latitude/longitude\n// Uri location = Uri.parse(\"geo:37.422219,-122.08364?z=14\"); // z param is zoom level\nIntent mapIntent = new Intent(Intent.ACTION_VIEW, location);\n```\n查看网页:\n```java\nUri webpage = Uri.parse(\"http://www.android.com\");\nIntent webIntent = new Intent(Intent.ACTION_VIEW, webpage);\n```\n如果多个 Activity 接受 Intent，则系统将显示一个对话框，使用户能够选取要使用的应用。\n\n## Intent 传值示例\n\n* 简单传值\n\nA页面\n```java\nIntent intent = new Intent(A.this, B.class);\nintent.putExtras(\"realname \", realname);\nstartActivity(intent );\n```\n\nB页面\n```java\nrealname = this.getIntent().getStringExtra(\"realname\");\n```\n\n* 传值接受返回结果\n\nA页面\n```java\nprivate static final int REQUEST_CODE_A = 0;\nprivate static final int RESULT_CODE_B = 0;\nIntent intent = new Intent();\nBundle bundle = new Bundle();\nintent.setClass(MainActivity.this, TestBActivity.class);\nbundle.putString(\"msg\", textView.getText().toString());\nintent.putExtras(bundle);\nstartActivityForResult(intent, REQUEST_CODE_A);\n\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n\t\tsuper.onActivityResult(requestCode, resultCode, data);\n\t\tif (requestCode == REQUEST_CODE_A && resultCode == RESULT_OK) {\n\t\t\tString str=data.getExtras().getString(\"result\");\n\t\t}\n\t}\n```\n\nB页面\n```java\n//返回设置\nIntent intent = new Intent();\nintent.putExtra(\"result\", textView.getText().toString());\nsetResult(RESULT_OK, intent);\nfinish();\n```\n\n* 传List\n\n第一种\n```java\nIntent intent = new Intent();\nintent.setClass(A.this, B.class);\nintent.putExtra(\"list\", list);\nstartActivity(intent);\n```\nB.class:\n```java\nArrayList<String>  mList = (ArrayList<String>) getIntent().getSerializableExtra(\"list\");\n```\n第二种\n```\nIntent intent = new Intent(A.this, B.class);\nintent.putStringArrayListExtra(\"mSelectedPhotos\",mSelectedPhotos);\nstartActivity(intent);\n\t\t\t\t\t\n//接受结果\t\t\t\t\t\nArrayList<String> mSelectedPhotos = (ArrayList<String>) intent\n\t\t\t\t\t\t.getStringArrayListExtra(\"mSelectedPhotos\");\n\n```\n## 构建 Intent\n若activity中的intent filter满足以下intent对象的标准，系统就能够把特定的intent发送给activity：\n\nAction:一个想要执行的动作的名称。通常是系统已经定义好的值，如ACTION_SEND或ACTION_VIEW。 在intent filter中通过<action>指定它的值，值的类型必须为字符串，而不是API中的常量(看下面的例子)\n\nData:Intent附带数据的描述。在intent filter中通过<data>指定它的值，可以使用一个或者多个属性，我们可以只定义MIME type或者是只指定URI prefix，也可以只定义一个URI scheme，或者是他们综合使用。\n\nNote: 如果不想handle Uri 类型的数据，那么应该指定 android:mimeType 属性。例如 text/plain or image/jpeg.\nCategory:提供一个附加的方法来标识这个activity能够handle的intent。通常与用户的手势或者是启动位置有关。系统有支持几种不同的categories,但是大多数都很少用到。而且，所有的implicit intents都默认是 CATEGORY_DEFAULT 类型的。在intent filter中用<category>指定它的值。\n```js\n<activity android:name=\"ShareActivity\">\n    <intent-filter>\n        <action android:name=\"android.intent.action.SEND\"/>\n        <category android:name=\"android.intent.category.DEFAULT\"/>\n        <data android:mimeType=\"text/plain\"/>\n        <data android:mimeType=\"image/*\"/>\n    </intent-filter>\n</activity>\n```\n## 强制使用应用选择器\n## 接收隐式 Intent\n## 过滤器示例\n## 使用待定 Intent\n## Intent 解析\n## Intent 匹配\n## 附录\n[Intent and Intent Filters](https://developer.android.com/intl/zh-cn/guide/components/intents-filters.html)\n[Intent](http://hukai.me/android-training-course-in-chinese/basics/intents/sending.html)","slug":"Intent","published":1,"updated":"2016-03-17T00:44:06.342Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5000ceo4pkfmj0rcp8"},{"title":"Android Studio和Genymotion安装常见错误","date":"2016-03-17T11:47:04.000Z","_content":"> 整装出发，新的环境，新的开始，加油，骚年。新公司，首先需要安装Android的开发环境，由于被墙，Android Studio首次启动就被卡，Genymotion也遇到了些问题。\n\n# Android Studio初次启动卡在download Components\n![](http://7q5c2h.com1.z0.glb.clouddn.com/GenymotionErrors3.jpg)\n<!--more-->\n解决方案:\n\n详见：[http://blog.csdn.net/u010302764/article/details/42889731](http://blog.csdn.net/u010302764/article/details/42889731)\n\n# Genymotion下载虚拟镜像Connection timeout\nAdd new device出现的问题：\n```\nFailed to deploy virtual device.\nUnable to create virtual device.Connection timeout occurred.\n```\n\n解决方案：\n\n1. 当选择Google Nexus 5 - 6.0.0 - API 23 - 1080x1920下载device失败后，到C:\\Users\\用户主目录\\AppData\\Local\\Genymobile\\Genymotion\\ova下看到genymotion_vbox86p_6.0_160114_090449.ova，大小却是0KB，在C:\\Users\\用户主目录\\AppData\\Local\\Genymobile\\genymotion.log，打开该文件，找到类似“http://files2.genymotion.com/dists/6.0.0/ova/genymotion_vbox86p_6.0_160114_090449.ova”路径，即您想要下载的镜像文件URL；\n\n2. 用迅雷去下载，下载完成后放到C:\\Users\\用户主目录\\AppData\\Local\\Genymobile\\Genymotion\\ova；\n\n3. 重新点击Google Nexus 5 - 6.0.0 - API 23 - 1080x1920去下载，验证安装后即会显示在设备列表中。\n\n# virtualbox cannot start the virtual device\n![](http://7q5c2h.com1.z0.glb.clouddn.com/GenymotionErrors1.jpg)\n\n然后去vbox运行虚拟机，报如下错误：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/GenymotionErrors2.jpg)\n点击复制看具体错误信息：\n```\n不能为虚拟电脑 Google Nexus 5 - 6.0.0 - API 23 - 1080x1920 打开一个新任务.\n\nUnable to load R3 module D:\\Program Files\\Oracle\\VirtualBox/VBoxDD.DLL (VBoxDD): GetLastError=1790 (VERR_UNRESOLVED_ERROR).\n\n返回 代码:E_FAIL (0x80004005)\n组件:ConsoleWrap\n界面:IConsole {872da645-4a9b-1727-bee2-5585105b9eed}\n```\n原因:\n宿主机win7用的ghost系统，会破解uxtheme.dll文件，导致virtualbox启动失败\n\n解决方案:\n去网上下载Windows7 64bit uxtheme.dll，使用原版的uxtheme.dll替换c:\\windows\\system32\\uxtheme.dll即可。\n\n# x86 emulation currently requires hardware acceleration\nemulator: ERROR: x86 emulation currently requires hardware acceleration!\nPlease ensure Intel HAXM is properly installed and usable.\nCPU acceleration status: HAX kernel module is not installed!\n解决方案\n详见我的博客：[Android之emulator ERROR x86 emulation currently requires hardware acceleration](http://wuxiaolong.me/2015/12/03/emulatorError/)\n\n# 其他常用的软件\n安装自己平时常用的软件，将公司电脑环境变成自己的风格，详见我的博客：[我的编码嗜好](http://wuxiaolong.me/2016/03/13/MyCodeHobby/)\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\t\n\n","source":"_posts/GenymotionErrors.md","raw":"title: Android Studio和Genymotion安装常见错误\ndate: 2016-03-17 19:47:04\ntags: [Android, Android Studio,Genymotion]\ncategory: Android \n---\n> 整装出发，新的环境，新的开始，加油，骚年。新公司，首先需要安装Android的开发环境，由于被墙，Android Studio首次启动就被卡，Genymotion也遇到了些问题。\n\n# Android Studio初次启动卡在download Components\n![](http://7q5c2h.com1.z0.glb.clouddn.com/GenymotionErrors3.jpg)\n<!--more-->\n解决方案:\n\n详见：[http://blog.csdn.net/u010302764/article/details/42889731](http://blog.csdn.net/u010302764/article/details/42889731)\n\n# Genymotion下载虚拟镜像Connection timeout\nAdd new device出现的问题：\n```\nFailed to deploy virtual device.\nUnable to create virtual device.Connection timeout occurred.\n```\n\n解决方案：\n\n1. 当选择Google Nexus 5 - 6.0.0 - API 23 - 1080x1920下载device失败后，到C:\\Users\\用户主目录\\AppData\\Local\\Genymobile\\Genymotion\\ova下看到genymotion_vbox86p_6.0_160114_090449.ova，大小却是0KB，在C:\\Users\\用户主目录\\AppData\\Local\\Genymobile\\genymotion.log，打开该文件，找到类似“http://files2.genymotion.com/dists/6.0.0/ova/genymotion_vbox86p_6.0_160114_090449.ova”路径，即您想要下载的镜像文件URL；\n\n2. 用迅雷去下载，下载完成后放到C:\\Users\\用户主目录\\AppData\\Local\\Genymobile\\Genymotion\\ova；\n\n3. 重新点击Google Nexus 5 - 6.0.0 - API 23 - 1080x1920去下载，验证安装后即会显示在设备列表中。\n\n# virtualbox cannot start the virtual device\n![](http://7q5c2h.com1.z0.glb.clouddn.com/GenymotionErrors1.jpg)\n\n然后去vbox运行虚拟机，报如下错误：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/GenymotionErrors2.jpg)\n点击复制看具体错误信息：\n```\n不能为虚拟电脑 Google Nexus 5 - 6.0.0 - API 23 - 1080x1920 打开一个新任务.\n\nUnable to load R3 module D:\\Program Files\\Oracle\\VirtualBox/VBoxDD.DLL (VBoxDD): GetLastError=1790 (VERR_UNRESOLVED_ERROR).\n\n返回 代码:E_FAIL (0x80004005)\n组件:ConsoleWrap\n界面:IConsole {872da645-4a9b-1727-bee2-5585105b9eed}\n```\n原因:\n宿主机win7用的ghost系统，会破解uxtheme.dll文件，导致virtualbox启动失败\n\n解决方案:\n去网上下载Windows7 64bit uxtheme.dll，使用原版的uxtheme.dll替换c:\\windows\\system32\\uxtheme.dll即可。\n\n# x86 emulation currently requires hardware acceleration\nemulator: ERROR: x86 emulation currently requires hardware acceleration!\nPlease ensure Intel HAXM is properly installed and usable.\nCPU acceleration status: HAX kernel module is not installed!\n解决方案\n详见我的博客：[Android之emulator ERROR x86 emulation currently requires hardware acceleration](http://wuxiaolong.me/2015/12/03/emulatorError/)\n\n# 其他常用的软件\n安装自己平时常用的软件，将公司电脑环境变成自己的风格，详见我的博客：[我的编码嗜好](http://wuxiaolong.me/2016/03/13/MyCodeHobby/)\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\t\n\n","slug":"GenymotionErrors","published":1,"updated":"2016-03-24T08:32:10.945Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5300cio4pkred4chys"},{"title":"github之Font-Awesome使用","date":"2015-10-08T07:31:38.000Z","_content":">github地址：[https://github.com/FortAwesome/Font-Awesome](https://github.com/FortAwesome/Font-Awesome)，一直知道这个项目，但是却不知道如何使用它，现在有个[博客](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0925/3518.html)介绍，感谢博主。我这里做个记录。\n\n## 导入字体文件\n在安卓项目中，导航到 app > src > main。 main 目录应该包含了一个叫 assets的文件夹。在assets 文件夹中创建另一个fonts文件夹，并把fontawesome-webfont.ttf 添加到这个文件夹。\nfonts 文件夹并不是必须的。你可以直接把FontAwesome 的字体文件放在 assets 目录，但是把相同类型的文件放在专门的目录里面比较方便。只要FontAwesome 字体在assets 或者子目录之下就行。\n<!--more-->\n## 创建一个帮助类\n```java\npublic class FontManager {\n    public static final String ROOT = \"\",\n            FONTAWESOME = ROOT + \"fontawesome-webfont.ttf\";\n\n    public static Typeface getTypeface(Context context, String font) {\n        return Typeface.createFromAsset(context.getAssets(), font);\n    }\n  /**\n     * 图标一般都是包含在一个ViewGroup，\n     * 比如一个RelativeLayout或者LinearLayout中。\n     * 我们可以写一个方法，爬遍指定xml parent 并且递归的覆盖每个TextView的字体。\n     *\n     */\n    public static void markAsIconContainer(View v, Typeface typeface) {\n        if (v instanceof ViewGroup) {\n            ViewGroup vg = (ViewGroup) v;\n            for (int i = 0; i < vg.getChildCount(); i++) {\n                View child = vg.getChildAt(i);\n                markAsIconContainer(child,typeface);\n            }\n        } else if (v instanceof TextView) {\n            ((TextView) v).setTypeface(typeface);\n        }\n    }\n\n\n}\n```\n## 使用图标\n访问 FontAwesome的GitHub页面 并浏览所给的图标。选择三个你喜欢的。\n\n进入 values 文件夹并创建一个新的文件：icons.xml。这个文件将被作为字典使用，它将把Unicode 字符和相应的图标用可读的名字匹配起来。这意味着我们需要为每个图标创建一个入口。\n```js\n<resources>\n    <string name=\"fa_icon_areachart\">&#xf1fe;</string>\n    <string name=\"fa_icon_piechart\">&#xf200;</string>\n    <string name=\"fa_icon_linechart\">&#xf201;</string>\n</resources>\n```\nonCreate方法\n```java\n @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_font_awesome);\n        Typeface iconFont = FontManager.getTypeface(FontAwesomeActivity.this, FontManager.FONTAWESOME);\n        FontManager.markAsIconContainer(findViewById(R.id.icons_container), iconFont);\n    }\n```\n对应的activity_font_awesome.xml\n```js\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/icons_container\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:paddingBottom=\"@dimen/activity_vertical_margin\"\n    android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n    android:paddingRight=\"@dimen/activity_horizontal_margin\"\n    android:paddingTop=\"@dimen/activity_vertical_margin\"\n    tools:context=\".MainActivity\">\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_weight=\"1\"\n        android:gravity=\"center\"\n        android:text=\"@string/fa_icon_areachart\" />\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_weight=\"1\"\n        android:gravity=\"center\"\n        android:text=\"@string/fa_icon_piechart\"\n        android:textColor=\"#9b59b6\"\n        android:textSize=\"45sp\" />\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_weight=\"1\"\n        android:gravity=\"center\"\n        android:text=\"@string/fa_icon_linechart\" />\n\n</LinearLayout>\n```","source":"_posts/Font-Awesome.md","raw":"title: github之Font-Awesome使用\ndate: 2015-10-08 15:31:38\ntags: [github,Font-Awesome]\ncategory: github\n---\n>github地址：[https://github.com/FortAwesome/Font-Awesome](https://github.com/FortAwesome/Font-Awesome)，一直知道这个项目，但是却不知道如何使用它，现在有个[博客](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0925/3518.html)介绍，感谢博主。我这里做个记录。\n\n## 导入字体文件\n在安卓项目中，导航到 app > src > main。 main 目录应该包含了一个叫 assets的文件夹。在assets 文件夹中创建另一个fonts文件夹，并把fontawesome-webfont.ttf 添加到这个文件夹。\nfonts 文件夹并不是必须的。你可以直接把FontAwesome 的字体文件放在 assets 目录，但是把相同类型的文件放在专门的目录里面比较方便。只要FontAwesome 字体在assets 或者子目录之下就行。\n<!--more-->\n## 创建一个帮助类\n```java\npublic class FontManager {\n    public static final String ROOT = \"\",\n            FONTAWESOME = ROOT + \"fontawesome-webfont.ttf\";\n\n    public static Typeface getTypeface(Context context, String font) {\n        return Typeface.createFromAsset(context.getAssets(), font);\n    }\n  /**\n     * 图标一般都是包含在一个ViewGroup，\n     * 比如一个RelativeLayout或者LinearLayout中。\n     * 我们可以写一个方法，爬遍指定xml parent 并且递归的覆盖每个TextView的字体。\n     *\n     */\n    public static void markAsIconContainer(View v, Typeface typeface) {\n        if (v instanceof ViewGroup) {\n            ViewGroup vg = (ViewGroup) v;\n            for (int i = 0; i < vg.getChildCount(); i++) {\n                View child = vg.getChildAt(i);\n                markAsIconContainer(child,typeface);\n            }\n        } else if (v instanceof TextView) {\n            ((TextView) v).setTypeface(typeface);\n        }\n    }\n\n\n}\n```\n## 使用图标\n访问 FontAwesome的GitHub页面 并浏览所给的图标。选择三个你喜欢的。\n\n进入 values 文件夹并创建一个新的文件：icons.xml。这个文件将被作为字典使用，它将把Unicode 字符和相应的图标用可读的名字匹配起来。这意味着我们需要为每个图标创建一个入口。\n```js\n<resources>\n    <string name=\"fa_icon_areachart\">&#xf1fe;</string>\n    <string name=\"fa_icon_piechart\">&#xf200;</string>\n    <string name=\"fa_icon_linechart\">&#xf201;</string>\n</resources>\n```\nonCreate方法\n```java\n @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_font_awesome);\n        Typeface iconFont = FontManager.getTypeface(FontAwesomeActivity.this, FontManager.FONTAWESOME);\n        FontManager.markAsIconContainer(findViewById(R.id.icons_container), iconFont);\n    }\n```\n对应的activity_font_awesome.xml\n```js\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/icons_container\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:paddingBottom=\"@dimen/activity_vertical_margin\"\n    android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n    android:paddingRight=\"@dimen/activity_horizontal_margin\"\n    android:paddingTop=\"@dimen/activity_vertical_margin\"\n    tools:context=\".MainActivity\">\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_weight=\"1\"\n        android:gravity=\"center\"\n        android:text=\"@string/fa_icon_areachart\" />\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_weight=\"1\"\n        android:gravity=\"center\"\n        android:text=\"@string/fa_icon_piechart\"\n        android:textColor=\"#9b59b6\"\n        android:textSize=\"45sp\" />\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_weight=\"1\"\n        android:gravity=\"center\"\n        android:text=\"@string/fa_icon_linechart\" />\n\n</LinearLayout>\n```","slug":"Font-Awesome","published":1,"updated":"2016-03-17T00:44:06.341Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5600coo4pkv1of9ocp"},{"title":"Android打包错误Export aborted because fatal lint errors were found","date":"2013-11-21T16:00:00.000Z","_content":"打包时报如下错误：\n![](http://wuxiaolong.qiniudn.com/2013-11-22-Export-aborted-because-fatal-lint-errors-were-found-1.jpg)\n\n<!-- more -->\n\nExport aborted because fatal lint errors were found. These are listed in the Lint View. Either fix these before running Export again,or turn off\"Run full error check when exporting app\" in the Android > Lint Error Checking preference page.\n\n解决方法如下： \n\n1、选择Project->Properties，弹出“Properties for 你的项目名称” \n![](http://wuxiaolong.qiniudn.com/2013-11-22-Export-aborted-because-fatal-lint-errors-were-found-3.jpg)\n2、选择Adnroid Lint Preferences->Configure Workspace Settings...,弹出Preferences(Filtered)对话框，将\"Run full error check when exporting app and abort if fatal errors are found \"前的勾去掉，点击Apply再点击OK. \n![](http://wuxiaolong.qiniudn.com/2013-11-22-Export-aborted-because-fatal-lint-errors-were-found-2.jpg)\n3、回到项目右击选择Android Tools->Clean Lint Markers,待项目自己更新完成即可。 \n这时就可以打包了。\n","source":"_posts/Export-aborted-because-fatal-lint-errors-were-found.md","raw":"title: Android打包错误Export aborted because fatal lint errors were found\ndate: 2013-11-22 \ncategories: [Android]\ntags: [Android]\n---\n打包时报如下错误：\n![](http://wuxiaolong.qiniudn.com/2013-11-22-Export-aborted-because-fatal-lint-errors-were-found-1.jpg)\n\n<!-- more -->\n\nExport aborted because fatal lint errors were found. These are listed in the Lint View. Either fix these before running Export again,or turn off\"Run full error check when exporting app\" in the Android > Lint Error Checking preference page.\n\n解决方法如下： \n\n1、选择Project->Properties，弹出“Properties for 你的项目名称” \n![](http://wuxiaolong.qiniudn.com/2013-11-22-Export-aborted-because-fatal-lint-errors-were-found-3.jpg)\n2、选择Adnroid Lint Preferences->Configure Workspace Settings...,弹出Preferences(Filtered)对话框，将\"Run full error check when exporting app and abort if fatal errors are found \"前的勾去掉，点击Apply再点击OK. \n![](http://wuxiaolong.qiniudn.com/2013-11-22-Export-aborted-because-fatal-lint-errors-were-found-2.jpg)\n3、回到项目右击选择Android Tools->Clean Lint Markers,待项目自己更新完成即可。 \n这时就可以打包了。\n","slug":"Export-aborted-because-fatal-lint-errors-were-found","published":1,"updated":"2016-03-17T00:44:06.341Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5800cto4pkgsgwdotf"},{"title":"Drawable /Bitmap、String/InputStream、Bitmap/byte[]互转","date":"2015-08-10T08:26:25.000Z","_content":"\n## Drawable互转Bitmap\n### Drawable转Bitmap\n```java\nResources res = getResources();\nDrawable drawable = res.getDrawable(R.drawable.myimage);\nBitmapDrawable bd = (BitmapDrawable) d;\nBitmap bm = bd.getBitmap();\n```\n<!--more-->\n\n```java\npublic static Bitmap drawableToBitmap(Drawable drawable) {       \n        Bitmap bitmap = Bitmap.createBitmap(\n                                        drawable.getIntrinsicWidth(),\n                                        drawable.getIntrinsicHeight(),\n                                        drawable.getOpacity() != PixelFormat.OPAQUE ? Bitmap.Config.ARGB_8888\n                                                        : Bitmap.Config.RGB_565);\n        Canvas canvas = new Canvas(bitmap);\n        //canvas.setBitmap(bitmap);\n        drawable.setBounds(0, 0, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight());\n        drawable.draw(canvas);\n        return bitmap;\n}\n```\n\n### Bitmap转Drawable\n```java\nBitmap bm=xxx; //xxx根据你的情况获取\nBitmapDrawable bd=BitmapDrawable(bm);\nBtimapDrawable是Drawable的子类，最终直接使用bd对象即可。\n\nmPicPath//本地图片路径转成Bitmap格式\nBitmap pic = BitmapFactory.decodeFile(this.mPicPath);\n\t\timage.setImageBitmap(pic);\n转成Bitmap格式\n```\n\n## String与InputStream相互转换\n\n### String to InputStream\n```java\nString str = \"String与InputStream相互转换\";\nInputStream   in_nocode   =   new   ByteArrayInputStream(str.getBytes());   \nInputStream   in_withcode   =   new   ByteArrayInputStream(str.getBytes(\"UTF-8\"));  \n```\n \n### InputStream to String\n    这里提供几个方法。\n方法1：\n```java\n  public String convertStreamToString(InputStream is) {   \n   BufferedReader reader = new BufferedReader(new InputStreamReader(is));   \n        StringBuilder sb = new StringBuilder();   \n    \n        String line = null;   \n        try {   \n            while ((line = reader.readLine()) != null) {   \n                sb.append(line + \"/n\");   \n            }   \n        } catch (IOException e) {   \n            e.printStackTrace();   \n        } finally {   \n            try {   \n                is.close();   \n            } catch (IOException e) {   \n                e.printStackTrace();   \n            }   \n        }   \n    \n        return sb.toString();   \n    }   \n```\n方法2：\n```java\npublic   String   inputStream2String   (InputStream   in)   throws   IOException   { \n        StringBuffer   out   =   new   StringBuffer(); \n        byte[]   b   =   new   byte[4096]; \n        for   (int   n;   (n   =   in.read(b))   !=   -1;)   { \n                out.append(new   String(b,   0,   n)); \n        } \n        return   out.toString(); \n} \n```\n方法3：\n```java\npublic   static   String   inputStream2String(InputStream   is)   throws   IOException{ \n        ByteArrayOutputStream   baos   =   new   ByteArrayOutputStream(); \n        int   i=-1; \n        while((i=is.read())!=-1){ \n        baos.write(i); \n        } \n       return   baos.toString(); \n}\n```\n\n\n## Bitmap 和 byte[]互转\n### Bitmap → byte[]\n```java\nprivate byte[] Bitmap2Bytes(Bitmap bm){\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    bm.compress(Bitmap.CompressFormat.PNG, 100, baos);\n    return baos.toByteArray();   }\n```\n    \n### byte[] → Bitmap\n```java\n   private Bitmap Bytes2Bimap(byte[] b){\n                    if(b.length!=0){\n                            return BitmapFactory.decodeByteArray(b, 0, b.length);\n                    }\n                    else {\n                            return null;\n                    }\n          }\n```","source":"_posts/Drawable-to-Bitmap.md","raw":"title: Drawable /Bitmap、String/InputStream、Bitmap/byte[]互转\ndate: 2015-08-10 16:26:25\ntags: [Drawable,Bitmap,String,InputStream,byte]\ncategory: Android\n---\n\n## Drawable互转Bitmap\n### Drawable转Bitmap\n```java\nResources res = getResources();\nDrawable drawable = res.getDrawable(R.drawable.myimage);\nBitmapDrawable bd = (BitmapDrawable) d;\nBitmap bm = bd.getBitmap();\n```\n<!--more-->\n\n```java\npublic static Bitmap drawableToBitmap(Drawable drawable) {       \n        Bitmap bitmap = Bitmap.createBitmap(\n                                        drawable.getIntrinsicWidth(),\n                                        drawable.getIntrinsicHeight(),\n                                        drawable.getOpacity() != PixelFormat.OPAQUE ? Bitmap.Config.ARGB_8888\n                                                        : Bitmap.Config.RGB_565);\n        Canvas canvas = new Canvas(bitmap);\n        //canvas.setBitmap(bitmap);\n        drawable.setBounds(0, 0, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight());\n        drawable.draw(canvas);\n        return bitmap;\n}\n```\n\n### Bitmap转Drawable\n```java\nBitmap bm=xxx; //xxx根据你的情况获取\nBitmapDrawable bd=BitmapDrawable(bm);\nBtimapDrawable是Drawable的子类，最终直接使用bd对象即可。\n\nmPicPath//本地图片路径转成Bitmap格式\nBitmap pic = BitmapFactory.decodeFile(this.mPicPath);\n\t\timage.setImageBitmap(pic);\n转成Bitmap格式\n```\n\n## String与InputStream相互转换\n\n### String to InputStream\n```java\nString str = \"String与InputStream相互转换\";\nInputStream   in_nocode   =   new   ByteArrayInputStream(str.getBytes());   \nInputStream   in_withcode   =   new   ByteArrayInputStream(str.getBytes(\"UTF-8\"));  \n```\n \n### InputStream to String\n    这里提供几个方法。\n方法1：\n```java\n  public String convertStreamToString(InputStream is) {   \n   BufferedReader reader = new BufferedReader(new InputStreamReader(is));   \n        StringBuilder sb = new StringBuilder();   \n    \n        String line = null;   \n        try {   \n            while ((line = reader.readLine()) != null) {   \n                sb.append(line + \"/n\");   \n            }   \n        } catch (IOException e) {   \n            e.printStackTrace();   \n        } finally {   \n            try {   \n                is.close();   \n            } catch (IOException e) {   \n                e.printStackTrace();   \n            }   \n        }   \n    \n        return sb.toString();   \n    }   \n```\n方法2：\n```java\npublic   String   inputStream2String   (InputStream   in)   throws   IOException   { \n        StringBuffer   out   =   new   StringBuffer(); \n        byte[]   b   =   new   byte[4096]; \n        for   (int   n;   (n   =   in.read(b))   !=   -1;)   { \n                out.append(new   String(b,   0,   n)); \n        } \n        return   out.toString(); \n} \n```\n方法3：\n```java\npublic   static   String   inputStream2String(InputStream   is)   throws   IOException{ \n        ByteArrayOutputStream   baos   =   new   ByteArrayOutputStream(); \n        int   i=-1; \n        while((i=is.read())!=-1){ \n        baos.write(i); \n        } \n       return   baos.toString(); \n}\n```\n\n\n## Bitmap 和 byte[]互转\n### Bitmap → byte[]\n```java\nprivate byte[] Bitmap2Bytes(Bitmap bm){\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    bm.compress(Bitmap.CompressFormat.PNG, 100, baos);\n    return baos.toByteArray();   }\n```\n    \n### byte[] → Bitmap\n```java\n   private Bitmap Bytes2Bimap(byte[] b){\n                    if(b.length!=0){\n                            return BitmapFactory.decodeByteArray(b, 0, b.length);\n                    }\n                    else {\n                            return null;\n                    }\n          }\n```","slug":"Drawable-to-Bitmap","published":1,"updated":"2016-03-17T00:44:06.341Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5900cwo4pkzeo3bg38"},{"title":"Android之滑动view","date":"2015-11-20T05:11:53.000Z","_content":"# 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/DragView.gif)\n\n<!--more-->\n# 获取坐标值方法\n![](http://7q5c2h.com1.z0.glb.clouddn.com/DragView.png)\n如图，要实现滑动效果，需要先了解以下方法。\n* View提供获取坐标方法\ngetTop():获取View自身顶边到其父布局顶边的距离\ngetLeft():获取View自身左边到其父布局左边的距离\ngetRight():获取View自身右边到其父布局右边的距离\ngetBottom():获取View自身底边到其父布局底边的距离\n\n* MotionEvent提供的方法\ngetX():获取点击点距离自身控件左边距离，即视图坐标\ngetY():获取点击点距离自身控件顶边距离，即视图坐标\ngetRawX():获取点击点距离整个屏幕左边距离，即绝对坐标\ngetRawY():获取点击点距离整个屏幕顶边距离，即绝对坐标\n\n# 实现DragView\n## 方法一\n```java\npublic class DragView extends View {\n    private int x, y;\n\n    public DragView(Context context) {\n        super(context);\n\n    }\n\n    public DragView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public DragView(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        int getX = (int) event.getX();\n        int getY = (int) event.getY();\n        switch (event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                // 记录触摸点坐标\n                x = (int) event.getX();\n                y = (int) event.getY();\n                break;\n            case MotionEvent.ACTION_MOVE:\n                //计算偏移量\n                int offsetX = getX - x;\n                int offsetY = getY - y;\n                //在当前left、top、right、bottom的基础上加上偏移量\n                layout(getLeft() + offsetX,\n                        getTop() + offsetY,\n                        getRight() + offsetX,\n                        getBottom() + offsetY);\n\n                break;\n        }\n        return true;\n    }\n\n}\n```\n## 方法二\n```java\npublic class DragView extends View {\n    private int x, y;\n    //这里省略构造方法\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        int getX = (int) event.getX();\n        int getY = (int) event.getY();\n        switch (event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                // 记录触摸点坐标\n                x = (int) event.getX();\n                y = (int) event.getY();\n                break;\n            case MotionEvent.ACTION_MOVE:\n                //计算偏移量\n                int offsetX = getX - x;\n                int offsetY = getY - y;\n                offsetLeftAndRight(offsetX);//同时对left和right偏移\n                offsetTopAndBottom(offsetY);//同时对top和bottom偏移\n                break;\n        }\n        return true;\n    }\n}\n```\n## 方法三\n```java\n```java\npublic class DragView extends View {\n    private int x, y;\n    //这里省略构造方法\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        int getX = (int) event.getX();\n        int getY = (int) event.getY();\n        switch (event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                // 记录触摸点坐标\n                x = (int) event.getX();\n                y = (int) event.getY();\n                break;\n            case MotionEvent.ACTION_MOVE:\n                //计算偏移量\n                int offsetX = getX - x;\n                int offsetY = getY - y;\n                ViewGroup.MarginLayoutParams marginLayoutParams = \n                (ViewGroup.MarginLayoutParams) getLayoutParams();\n                marginLayoutParams.leftMargin = getLeft() + offsetX;\n                marginLayoutParams.topMargin = getTop() + offsetY;\n                setLayoutParams(marginLayoutParams);\n                break;\n        }\n        return true;\n    }\n}\n```\n## 方法四\n```java\npublic class DragView extends View {\n    private int x, y;\n    private Scroller mScroller;\n\n    public DragView(Context context) {\n        super(context);\n        initScroller(context);\n    }\n\n    public DragView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        initScroller(context);\n    }\n\n    public DragView(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        initScroller(context);\n    }\n\n    private void initScroller(Context context) {\n        setBackgroundColor(Color.RED);\n        mScroller = new Scroller(context);\n    }\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        int getRawX = (int) event.getRawX();\n        int getRawY = (int) event.getRawY();\n        switch (event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                // 记录触摸点坐标\n                x = (int) event.getRawX();\n                y = (int) event.getRawY();\n                break;\n            case MotionEvent.ACTION_MOVE:\n                //计算偏移量\n                int offsetX = getRawX - x;\n                int offsetY = getRawY - y;\n                ((View) getParent()).scrollBy(-offsetX, -offsetY);\n                //重新设置初始坐标\n                x = getRawX;\n                y = getRawY;\n                break;\n            case MotionEvent.ACTION_UP:\n                /**\n                 * 实现拖动回弹回去，需配合方法一、二、四中任一方法\n                 */\n                View viewGroup = (View) getParent();\n                mScroller.startScroll(viewGroup.getScrollX(),\n                        viewGroup.getScrollY(),\n                        -viewGroup.getScrollX(),\n                        -viewGroup.getScrollY()\n                );\n                invalidate();\n                break;\n        }\n        return true;\n    }\n\n    @Override\n    public void computeScroll() {\n        super.computeScroll();\n        //判断Scroller是否执行完毕\n        if (mScroller.computeScrollOffset()) {\n            ((View) getParent()).scrollTo(\n                    mScroller.getCurrX(),\n                    mScroller.getCurrY());\n            invalidate();\n        }\n    }\n}\n```\nxml调用\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n\n    <com.wuxiaolong.apksample.DragView\n        android:layout_width=\"100dp\"\n        android:layout_height=\"100dp\" \n        android:background=\"@android:color/holo_red_light\"/>\n</LinearLayout>\n\n```\n## 方法五\n[属性动画](http://wuxiaolong.me/2015/11/23/Animator/)\n\n## 方法六\n[ViewDragHelper](http://wuxiaolong.me/2015/12/04/ViewDragHelper/)\n\n以上内容来自《Android群英传》\n\n# 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n","source":"_posts/DragView.md","raw":"title: Android之滑动view\ndate: 2015-11-20 13:11:53\ntags: DragView\ncategory: Android\n---\n# 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/DragView.gif)\n\n<!--more-->\n# 获取坐标值方法\n![](http://7q5c2h.com1.z0.glb.clouddn.com/DragView.png)\n如图，要实现滑动效果，需要先了解以下方法。\n* View提供获取坐标方法\ngetTop():获取View自身顶边到其父布局顶边的距离\ngetLeft():获取View自身左边到其父布局左边的距离\ngetRight():获取View自身右边到其父布局右边的距离\ngetBottom():获取View自身底边到其父布局底边的距离\n\n* MotionEvent提供的方法\ngetX():获取点击点距离自身控件左边距离，即视图坐标\ngetY():获取点击点距离自身控件顶边距离，即视图坐标\ngetRawX():获取点击点距离整个屏幕左边距离，即绝对坐标\ngetRawY():获取点击点距离整个屏幕顶边距离，即绝对坐标\n\n# 实现DragView\n## 方法一\n```java\npublic class DragView extends View {\n    private int x, y;\n\n    public DragView(Context context) {\n        super(context);\n\n    }\n\n    public DragView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public DragView(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        int getX = (int) event.getX();\n        int getY = (int) event.getY();\n        switch (event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                // 记录触摸点坐标\n                x = (int) event.getX();\n                y = (int) event.getY();\n                break;\n            case MotionEvent.ACTION_MOVE:\n                //计算偏移量\n                int offsetX = getX - x;\n                int offsetY = getY - y;\n                //在当前left、top、right、bottom的基础上加上偏移量\n                layout(getLeft() + offsetX,\n                        getTop() + offsetY,\n                        getRight() + offsetX,\n                        getBottom() + offsetY);\n\n                break;\n        }\n        return true;\n    }\n\n}\n```\n## 方法二\n```java\npublic class DragView extends View {\n    private int x, y;\n    //这里省略构造方法\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        int getX = (int) event.getX();\n        int getY = (int) event.getY();\n        switch (event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                // 记录触摸点坐标\n                x = (int) event.getX();\n                y = (int) event.getY();\n                break;\n            case MotionEvent.ACTION_MOVE:\n                //计算偏移量\n                int offsetX = getX - x;\n                int offsetY = getY - y;\n                offsetLeftAndRight(offsetX);//同时对left和right偏移\n                offsetTopAndBottom(offsetY);//同时对top和bottom偏移\n                break;\n        }\n        return true;\n    }\n}\n```\n## 方法三\n```java\n```java\npublic class DragView extends View {\n    private int x, y;\n    //这里省略构造方法\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        int getX = (int) event.getX();\n        int getY = (int) event.getY();\n        switch (event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                // 记录触摸点坐标\n                x = (int) event.getX();\n                y = (int) event.getY();\n                break;\n            case MotionEvent.ACTION_MOVE:\n                //计算偏移量\n                int offsetX = getX - x;\n                int offsetY = getY - y;\n                ViewGroup.MarginLayoutParams marginLayoutParams = \n                (ViewGroup.MarginLayoutParams) getLayoutParams();\n                marginLayoutParams.leftMargin = getLeft() + offsetX;\n                marginLayoutParams.topMargin = getTop() + offsetY;\n                setLayoutParams(marginLayoutParams);\n                break;\n        }\n        return true;\n    }\n}\n```\n## 方法四\n```java\npublic class DragView extends View {\n    private int x, y;\n    private Scroller mScroller;\n\n    public DragView(Context context) {\n        super(context);\n        initScroller(context);\n    }\n\n    public DragView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        initScroller(context);\n    }\n\n    public DragView(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        initScroller(context);\n    }\n\n    private void initScroller(Context context) {\n        setBackgroundColor(Color.RED);\n        mScroller = new Scroller(context);\n    }\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        int getRawX = (int) event.getRawX();\n        int getRawY = (int) event.getRawY();\n        switch (event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                // 记录触摸点坐标\n                x = (int) event.getRawX();\n                y = (int) event.getRawY();\n                break;\n            case MotionEvent.ACTION_MOVE:\n                //计算偏移量\n                int offsetX = getRawX - x;\n                int offsetY = getRawY - y;\n                ((View) getParent()).scrollBy(-offsetX, -offsetY);\n                //重新设置初始坐标\n                x = getRawX;\n                y = getRawY;\n                break;\n            case MotionEvent.ACTION_UP:\n                /**\n                 * 实现拖动回弹回去，需配合方法一、二、四中任一方法\n                 */\n                View viewGroup = (View) getParent();\n                mScroller.startScroll(viewGroup.getScrollX(),\n                        viewGroup.getScrollY(),\n                        -viewGroup.getScrollX(),\n                        -viewGroup.getScrollY()\n                );\n                invalidate();\n                break;\n        }\n        return true;\n    }\n\n    @Override\n    public void computeScroll() {\n        super.computeScroll();\n        //判断Scroller是否执行完毕\n        if (mScroller.computeScrollOffset()) {\n            ((View) getParent()).scrollTo(\n                    mScroller.getCurrX(),\n                    mScroller.getCurrY());\n            invalidate();\n        }\n    }\n}\n```\nxml调用\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n\n    <com.wuxiaolong.apksample.DragView\n        android:layout_width=\"100dp\"\n        android:layout_height=\"100dp\" \n        android:background=\"@android:color/holo_red_light\"/>\n</LinearLayout>\n\n```\n## 方法五\n[属性动画](http://wuxiaolong.me/2015/11/23/Animator/)\n\n## 方法六\n[ViewDragHelper](http://wuxiaolong.me/2015/12/04/ViewDragHelper/)\n\n以上内容来自《Android群英传》\n\n# 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n","slug":"DragView","published":1,"updated":"2016-03-17T00:44:06.341Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5d00d8o4pktmv6de4i"},{"title":"Android Design Support Library使用","date":"2015-11-06T05:08:01.000Z","_content":"## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/designsupportlibrarysample.gif)\n\n<!--more-->\n\n## 实例App\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuoDownload.png)\n\n## 相关博客\n[Android Design Support Library之NavigationView](http://wuxiaolong.me/2015/11/17/NavigationView/)\n[Android Design Support Library之CoordinatorLayout](http://wuxiaolong.me/2015/11/17/CoordinatorLayout/)\n[Android Design Support Library之CollapsingToolbarLayout](http://wuxiaolong.me/2015/11/17/CollapsingToolbarLayout/)\n[Android Design Support Library之TabLayout](http://wuxiaolong.me/2015/08/03/TabLayout/)\n[RecyclerView+CardView使用](http://wuxiaolong.me/2015/09/15/RecyclerViewCardView/)\n\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n## 源码地址\n[https://github.com/WuXiaolong/DesignSupportLibrarySample](https://github.com/WuXiaolong/DesignSupportLibrarySample)\n\n","source":"_posts/DesignSupportLibrary.md","raw":"title: Android Design Support Library使用\ndate: 2015-11-06 13:08:01\ntags: DesignSupportLibrary\ncategory: DesignSupportLibrary\n---\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/designsupportlibrarysample.gif)\n\n<!--more-->\n\n## 实例App\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuoDownload.png)\n\n## 相关博客\n[Android Design Support Library之NavigationView](http://wuxiaolong.me/2015/11/17/NavigationView/)\n[Android Design Support Library之CoordinatorLayout](http://wuxiaolong.me/2015/11/17/CoordinatorLayout/)\n[Android Design Support Library之CollapsingToolbarLayout](http://wuxiaolong.me/2015/11/17/CollapsingToolbarLayout/)\n[Android Design Support Library之TabLayout](http://wuxiaolong.me/2015/08/03/TabLayout/)\n[RecyclerView+CardView使用](http://wuxiaolong.me/2015/09/15/RecyclerViewCardView/)\n\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n## 源码地址\n[https://github.com/WuXiaolong/DesignSupportLibrarySample](https://github.com/WuXiaolong/DesignSupportLibrarySample)\n\n","slug":"DesignSupportLibrary","published":1,"updated":"2016-03-22T05:44:15.303Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5f00dco4pkgw747gpl"},{"title":"Android Defining Custom Animations","date":"2015-05-05T16:00:00.000Z","_content":"\n[官网Defining Custom Animations](https://developer.android.com/training/material/animations.html#Transitions)\n","source":"_posts/Defining_Custom_Animations.md","raw":"title: Android Defining Custom Animations\ndate: 2015-05-06 \ncategories: [Android]\ntags: [Android,Canvas]\n---\n\n[官网Defining Custom Animations](https://developer.android.com/training/material/animations.html#Transitions)\n","slug":"Defining_Custom_Animations","published":1,"updated":"2016-03-17T00:44:06.340Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5h00dfo4pk4pna7oxf"},{"title":"Android CustomView","date":"2016-01-01T07:40:16.000Z","_content":"# View工作流程\nView工作流程主要指measure、layout、draw这三个流程，即测量、布局和绘制，其中measure确定View的测量的宽/高，layout确定View的最终宽/高和四个顶点的位置，draw将View绘制到屏幕上。\n<!--more-->\n## measure\n为了更好理解measure过程，先了解MeasureSpec，MeasureSpec代表一个32位int值，高2位代表SpecMode，低30位代表SpecSize（这句话不知道几个意思）。SpecMode指的测量模式，SpecSize指在某种测量模式下规格大小。\nSpecMode有三种：\n* EXACTLY\n精确值模式，父容器已经检测出View所需要的精确大小，这时候View的最终大小就是SpecSize所指定的值。它对应代码LayoutParams（控件layout_width属性和layout_height属性）中match_parent和具体数值。\n* AT_MOST\n最大值模式，父容器指定了一个可用大小值，只要不超过父容器允许最大尺寸即可。它对应代码LayoutParams（控件layout_width属性和layout_height属性）中wrap_content。\n\n* UNSPECIFIED\n父容器不对View有任何限制，要多大给多大，这种情况一般用于系统内部，表示一种测量的状态。\n\n自定义控件不重写onMeasure()，View类默认只支持EXACTLY模式，如果让View支持wrap_content属性，必须重写onMeasure()来指定wrap_content大小。代码如下：\n```java\n int mWidth = 400, mHeight = 200;\n @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n        int widthSpecMode = MeasureSpec.getMode(widthMeasureSpec);\n        int widthSpecSize = MeasureSpec.getSize(widthMeasureSpec);\n        int heightSpecMode = MeasureSpec.getMode(heightMeasureSpec);\n        int heightSpecSize = MeasureSpec.getSize(heightMeasureSpec);\n        if (widthSpecMode == MeasureSpec.AT_MOST && heightSpecMode == MeasureSpec.AT_MOST) {\n            setMeasuredDimension(Math.min(mWidth, widthSpecSize), Math.min(mHeight, heightSpecSize));\n        } else if (widthSpecMode == MeasureSpec.AT_MOST) {\n            setMeasuredDimension(Math.min(mWidth, widthSpecSize), heightSpecSize);\n        } else if (heightSpecMode == MeasureSpec.AT_MOST) {\n            setMeasuredDimension(widthSpecSize, Math.min(mHeight, heightSpecSize));\n        }\n    }\n```\n## layout\nlayout的作用是ViewGroup用来确定子元素的位置，当ViewGroup的位置被确定后，他在onLayout会遍历所有子元素并调用其layout方法。\nlayout方法大致流程：首先通过setFrame设定View四个顶点位置，View四个顶点一旦确定，那么它在父容器中位置也就确定了。\n## draw\n重写onDraw()方法，并在Canvas对象上绘制所需要的图形，关于Canvas详见博客：[Android之画笔Paint和画布Canvas及实例练习圆角、刮刮卡、圆形头像、倒影效果](http://wuxiaolong.me/2015/12/06/PaintCanvas/)\n\n# 自定义attrs属性\n## attrs.xml\nvalues目录下创建attrs.xml\n```js \n<resources>\n    <!--<declare-styleable>声明自定义属性-->\n    <declare-styleable name=\"CircleView\">\n\t    <!--<attr>声明具体自定义属性-->\n        <attr name=\"circle_color\" format=\"color\" />\n    </declare-styleable>\n</resources>\n```\n这里format的color指的颜色。其他：reference指资源ID；dimension指尺寸；string、integer、boolean指基本数据类型。也可以用“|”来分隔不同的属性。\n## 完整代码\n```java\npublic class CustomView extends View {\n    int mWidth = 500, mHeight = 450;\n    int mCircleColor;\n    Paint mPaint;\n\n    public CustomView(Context context) {\n        super(context);\n    }\n\n    public CustomView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        init(context, attrs);\n    }\n\n    public CustomView(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        init(context, attrs);\n    }\n\n    private void init(Context context, AttributeSet attrs) {\n        TypedArray typedArray = context.obtainStyledAttributes(attrs, R.styleable.CircleView);\n        mCircleColor = typedArray.getColor(R.styleable.CircleView_circle_color, Color.RED);//如果没有指定颜色，默认红色\n        typedArray.recycle();\n        mPaint = new Paint();\n        mPaint.setColor(mCircleColor);\n        mPaint.setAntiAlias(true);\n    }\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n        int widthSpecMode = MeasureSpec.getMode(widthMeasureSpec);\n        int widthSpecSize = MeasureSpec.getSize(widthMeasureSpec);\n        int heightSpecMode = MeasureSpec.getMode(heightMeasureSpec);\n        int heightSpecSize = MeasureSpec.getSize(heightMeasureSpec);\n        //view支持wrap_content\n        if (widthSpecMode == MeasureSpec.AT_MOST && heightSpecMode == MeasureSpec.AT_MOST) {\n            setMeasuredDimension(Math.min(mWidth, widthSpecSize), Math.min(mHeight, heightSpecSize));\n        } else if (widthSpecMode == MeasureSpec.AT_MOST) {\n            setMeasuredDimension(Math.min(mWidth, widthSpecSize), heightSpecSize);\n        } else if (heightSpecMode == MeasureSpec.AT_MOST) {\n            setMeasuredDimension(widthSpecSize, Math.min(mHeight, heightSpecSize));\n        }\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        //支持padding，不然padding属性无效\n        int paddingLeft = getPaddingLeft();\n        int paddingTop = getPaddingTop();\n        int paddingRight = getPaddingRight();\n        int paddingBottom = getPaddingBottom();\n        int width = getWidth() - paddingLeft - paddingRight;\n        int height = getHeight() - paddingTop - paddingBottom;\n        int radius = Math.min(width, height) / 2;\n        canvas.drawCircle(paddingLeft + width / 2, paddingTop + height / 2, radius, mPaint);\n    }\n}\n```\n## xml引用\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:circle=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"com.wuxiaolong.apksample.CustomViewActivity\">\n\n    <com.wuxiaolong.apksample.CustomView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerInParent=\"true\"\n        android:paddingTop=\"10dp\"\n        android:background=\"@android:color/darker_gray\"\n        circle:circle_color=\"@android:color/holo_blue_light\" />\n</RelativeLayout>\n```\n布局文件添加schemas声明： xmlns:circle=\"http://schemas.android.com/apk/res-auto\" ，这里circle是自定义前缀，名字随便取。但与下面CustomView中自定义属性circle:circle_color=\"\"前缀一致。另外也可以声明 xmlns:circle=\"http://schemas.android.com/apk/res/包名\" ，效果是一样的。\n感谢《Android群英传》《Android开发艺术探索》。\n# 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","source":"_posts/CustomView.md","raw":"title: Android CustomView\ndate: 2016-01-01 15:40:16\ntags: CustomView\ncategory: Android \n---\n# View工作流程\nView工作流程主要指measure、layout、draw这三个流程，即测量、布局和绘制，其中measure确定View的测量的宽/高，layout确定View的最终宽/高和四个顶点的位置，draw将View绘制到屏幕上。\n<!--more-->\n## measure\n为了更好理解measure过程，先了解MeasureSpec，MeasureSpec代表一个32位int值，高2位代表SpecMode，低30位代表SpecSize（这句话不知道几个意思）。SpecMode指的测量模式，SpecSize指在某种测量模式下规格大小。\nSpecMode有三种：\n* EXACTLY\n精确值模式，父容器已经检测出View所需要的精确大小，这时候View的最终大小就是SpecSize所指定的值。它对应代码LayoutParams（控件layout_width属性和layout_height属性）中match_parent和具体数值。\n* AT_MOST\n最大值模式，父容器指定了一个可用大小值，只要不超过父容器允许最大尺寸即可。它对应代码LayoutParams（控件layout_width属性和layout_height属性）中wrap_content。\n\n* UNSPECIFIED\n父容器不对View有任何限制，要多大给多大，这种情况一般用于系统内部，表示一种测量的状态。\n\n自定义控件不重写onMeasure()，View类默认只支持EXACTLY模式，如果让View支持wrap_content属性，必须重写onMeasure()来指定wrap_content大小。代码如下：\n```java\n int mWidth = 400, mHeight = 200;\n @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n        int widthSpecMode = MeasureSpec.getMode(widthMeasureSpec);\n        int widthSpecSize = MeasureSpec.getSize(widthMeasureSpec);\n        int heightSpecMode = MeasureSpec.getMode(heightMeasureSpec);\n        int heightSpecSize = MeasureSpec.getSize(heightMeasureSpec);\n        if (widthSpecMode == MeasureSpec.AT_MOST && heightSpecMode == MeasureSpec.AT_MOST) {\n            setMeasuredDimension(Math.min(mWidth, widthSpecSize), Math.min(mHeight, heightSpecSize));\n        } else if (widthSpecMode == MeasureSpec.AT_MOST) {\n            setMeasuredDimension(Math.min(mWidth, widthSpecSize), heightSpecSize);\n        } else if (heightSpecMode == MeasureSpec.AT_MOST) {\n            setMeasuredDimension(widthSpecSize, Math.min(mHeight, heightSpecSize));\n        }\n    }\n```\n## layout\nlayout的作用是ViewGroup用来确定子元素的位置，当ViewGroup的位置被确定后，他在onLayout会遍历所有子元素并调用其layout方法。\nlayout方法大致流程：首先通过setFrame设定View四个顶点位置，View四个顶点一旦确定，那么它在父容器中位置也就确定了。\n## draw\n重写onDraw()方法，并在Canvas对象上绘制所需要的图形，关于Canvas详见博客：[Android之画笔Paint和画布Canvas及实例练习圆角、刮刮卡、圆形头像、倒影效果](http://wuxiaolong.me/2015/12/06/PaintCanvas/)\n\n# 自定义attrs属性\n## attrs.xml\nvalues目录下创建attrs.xml\n```js \n<resources>\n    <!--<declare-styleable>声明自定义属性-->\n    <declare-styleable name=\"CircleView\">\n\t    <!--<attr>声明具体自定义属性-->\n        <attr name=\"circle_color\" format=\"color\" />\n    </declare-styleable>\n</resources>\n```\n这里format的color指的颜色。其他：reference指资源ID；dimension指尺寸；string、integer、boolean指基本数据类型。也可以用“|”来分隔不同的属性。\n## 完整代码\n```java\npublic class CustomView extends View {\n    int mWidth = 500, mHeight = 450;\n    int mCircleColor;\n    Paint mPaint;\n\n    public CustomView(Context context) {\n        super(context);\n    }\n\n    public CustomView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        init(context, attrs);\n    }\n\n    public CustomView(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        init(context, attrs);\n    }\n\n    private void init(Context context, AttributeSet attrs) {\n        TypedArray typedArray = context.obtainStyledAttributes(attrs, R.styleable.CircleView);\n        mCircleColor = typedArray.getColor(R.styleable.CircleView_circle_color, Color.RED);//如果没有指定颜色，默认红色\n        typedArray.recycle();\n        mPaint = new Paint();\n        mPaint.setColor(mCircleColor);\n        mPaint.setAntiAlias(true);\n    }\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n        int widthSpecMode = MeasureSpec.getMode(widthMeasureSpec);\n        int widthSpecSize = MeasureSpec.getSize(widthMeasureSpec);\n        int heightSpecMode = MeasureSpec.getMode(heightMeasureSpec);\n        int heightSpecSize = MeasureSpec.getSize(heightMeasureSpec);\n        //view支持wrap_content\n        if (widthSpecMode == MeasureSpec.AT_MOST && heightSpecMode == MeasureSpec.AT_MOST) {\n            setMeasuredDimension(Math.min(mWidth, widthSpecSize), Math.min(mHeight, heightSpecSize));\n        } else if (widthSpecMode == MeasureSpec.AT_MOST) {\n            setMeasuredDimension(Math.min(mWidth, widthSpecSize), heightSpecSize);\n        } else if (heightSpecMode == MeasureSpec.AT_MOST) {\n            setMeasuredDimension(widthSpecSize, Math.min(mHeight, heightSpecSize));\n        }\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        //支持padding，不然padding属性无效\n        int paddingLeft = getPaddingLeft();\n        int paddingTop = getPaddingTop();\n        int paddingRight = getPaddingRight();\n        int paddingBottom = getPaddingBottom();\n        int width = getWidth() - paddingLeft - paddingRight;\n        int height = getHeight() - paddingTop - paddingBottom;\n        int radius = Math.min(width, height) / 2;\n        canvas.drawCircle(paddingLeft + width / 2, paddingTop + height / 2, radius, mPaint);\n    }\n}\n```\n## xml引用\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:circle=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"com.wuxiaolong.apksample.CustomViewActivity\">\n\n    <com.wuxiaolong.apksample.CustomView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerInParent=\"true\"\n        android:paddingTop=\"10dp\"\n        android:background=\"@android:color/darker_gray\"\n        circle:circle_color=\"@android:color/holo_blue_light\" />\n</RelativeLayout>\n```\n布局文件添加schemas声明： xmlns:circle=\"http://schemas.android.com/apk/res-auto\" ，这里circle是自定义前缀，名字随便取。但与下面CustomView中自定义属性circle:circle_color=\"\"前缀一致。另外也可以声明 xmlns:circle=\"http://schemas.android.com/apk/res/包名\" ，效果是一样的。\n感谢《Android群英传》《Android开发艺术探索》。\n# 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","slug":"CustomView","published":1,"updated":"2016-03-25T07:33:43.889Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5j00djo4pkmkvaqnca"},{"title":"Android之CustomToast","date":"2015-04-16T16:00:00.000Z","_content":"\n一、简单的CustomToast\n\nJava\n\n```java\npublic class CustomToast {\n\tprivate String tip = \"\";\n\tprivate Activity activity;\n\tprivate int duration;\n\n\tpublic CustomToast(Activity activity, String tip, int duration) {\n\t\tthis.tip = tip;\n\t\tthis.activity = activity;\n\t\tthis.duration = duration;\n\t}\n\n\t@SuppressLint(\"InflateParams\")\n\tpublic void show() {\n\t\tLayoutInflater inflater = activity.getLayoutInflater();\n\t\tView view = inflater.inflate(R.layout.custom_toast, null);\n\t\tTextView txt = (TextView) view.findViewById(R.id.txt);\n\t\ttxt.setText(tip);\n\t\tToast toast = new Toast(activity);\n\t\t// toast.setGravity(Gravity.CENTER | Gravity.TOP, 12, 40);\n\t\ttoast.setDuration(duration);\n\t\ttoast.setView(view);\n\t\ttoast.show();\n\t}\n}\n```\n\n<!-- more -->\n\ncustom_toast.xml\n\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\" >\n\n    <LinearLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:background=\"@drawable/shape_toast\"\n        android:orientation=\"vertical\" >\n\n        <TextView\n            android:id=\"@+id/txt\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:padding=\"5dp\"\n            android:textColor=\"@android:color/white\"\n            android:textSize=\"@dimen/text_size_medium\" />\n    </LinearLayout>\n\n</LinearLayout>\n```\n\n调用\n\n```java\nnew CustomToast(WelcomeActivity.this,\"番茄-视频专辑app，下载地址：http://app.mi.com/detail/65621\",Toast.LENGTH_SHORT).show();\n```\n\n二、重写继承Toast\n\nJava\n\n```java\npublic class TipsToast extends Toast {\n\n    public TipsToast(Context context) {\n        super(context);\n    }\n\n    @SuppressLint(\"InflateParams\")\n\tpublic static TipsToast makeText(Context context, CharSequence text, int duration) {\n        TipsToast result = new TipsToast(context);\n\n        LayoutInflater inflate = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n        View v = inflate.inflate(R.layout.view_tips, null);\n        TextView tv = (TextView) v.findViewById(R.id.tips_msg);\n        TextView msgTxt = (TextView) v.findViewById(R.id.tips_msg_txt);\n        msgTxt.setVisibility(View.GONE);\n        tv.setText(text);\n\n        result.setView(v);\n        // setGravity方法用于设置位置，此处为垂直居中\n        result.setGravity(Gravity.CENTER_VERTICAL, 0, 0);\n        result.setDuration(duration);\n\n        return result;\n    }\n\n    @SuppressLint(\"InflateParams\")\n   \tpublic static TipsToast makeText(Context context, CharSequence text, CharSequence msg, int duration) {\n           TipsToast result = new TipsToast(context);\n\n           LayoutInflater inflate = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n           View v = inflate.inflate(R.layout.view_tips, null);\n           TextView tv = (TextView) v.findViewById(R.id.tips_msg);\n           TextView msgTxt = (TextView) v.findViewById(R.id.tips_msg_txt);\n           tv.setText(text);\n           msgTxt.setVisibility(View.VISIBLE);\n           msgTxt.setText(msg);\n\n           result.setView(v);\n           // setGravity方法用于设置位置，此处为垂直居中\n           result.setGravity(Gravity.CENTER_VERTICAL, 0, 0);\n           result.setDuration(duration);\n\n           return result;\n       }\n    \n    \n    public static TipsToast makeText(Context context, int resId, int duration) throws Resources.NotFoundException {\n        return makeText(context, context.getResources().getText(resId), duration);\n    }\n\n    public void setIcon(int iconResId) {\n        if (getView() == null) {\n            throw new RuntimeException(\"This Toast was not created with Toast.makeText()\");\n        }\n        ImageView iv = (ImageView) getView().findViewById(R.id.tips_icon);\n        if (iv == null) {\n            throw new RuntimeException(\"This Toast was not created with Toast.makeText()\");\n        }\n        iv.setImageResource(iconResId);\n    }\n    @Override\n    public void setText(CharSequence s) {\n        if (getView() == null) {\n            throw new RuntimeException(\"This Toast was not created with Toast.makeText()\");\n        }\n        TextView tv = (TextView) getView().findViewById(R.id.tips_msg);\n        if (tv == null) {\n            throw new RuntimeException(\"This Toast was not created with Toast.makeText()\");\n        }\n        tv.setText(s);\n    }\n}\n```\n\nview_tips.xml\n\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_gravity=\"center\"\n    android:background=\"@drawable/tips_bg\" >\n\n    <!-- 撑开布局 -->\n    <View\n        android:layout_width=\"170dp\"\n        android:layout_height=\"150dp\"\n        \n        android:layout_centerInParent=\"true\" />\n\n    <LinearLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerInParent=\"true\"\n        android:orientation=\"vertical\" >\n\n        <ImageView\n            android:id=\"@+id/tips_icon\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"center\"\n            android:layout_marginBottom=\"10.0dip\"\n            android:gravity=\"center\" />\n\n        <TextView\n            android:id=\"@+id/tips_msg\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:maxWidth=\"180dip\"\n            android:layout_gravity=\"center\"\n            android:gravity=\"center\"\n            android:lineSpacingExtra=\"3.0dip\"\n            android:textColor=\"#ffffffff\"\n            android:textSize=\"17.0sp\" />\n        \n        <TextView\n            android:id=\"@+id/tips_msg_txt\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"center\"\n            android:gravity=\"center\"\n            android:lineSpacingExtra=\"3.0dip\"\n            android:textColor=\"#ffffffff\"\n            android:textSize=\"17.0sp\"\n            android:visibility=\"gone\" />\n    </LinearLayout>\n\n</RelativeLayout>\n```\n\n调用\n\n```java\nTipsToast tipsToast = TipsToast.makeText(context.getApplication().getBaseContext(),\"今日情感app，下载地址：http://app.mi.com/detail/30499\",TipsToast.LENGTH_SHORT);\ntipsToast.setIcon(R.drawable.warn);\ntipsToast.show();\n\t\n```\n","source":"_posts/CustomToast.md","raw":"title: Android之CustomToast\ndate: 2015-04-17 \ncategories: [Android]\ntags: [Android]\n---\n\n一、简单的CustomToast\n\nJava\n\n```java\npublic class CustomToast {\n\tprivate String tip = \"\";\n\tprivate Activity activity;\n\tprivate int duration;\n\n\tpublic CustomToast(Activity activity, String tip, int duration) {\n\t\tthis.tip = tip;\n\t\tthis.activity = activity;\n\t\tthis.duration = duration;\n\t}\n\n\t@SuppressLint(\"InflateParams\")\n\tpublic void show() {\n\t\tLayoutInflater inflater = activity.getLayoutInflater();\n\t\tView view = inflater.inflate(R.layout.custom_toast, null);\n\t\tTextView txt = (TextView) view.findViewById(R.id.txt);\n\t\ttxt.setText(tip);\n\t\tToast toast = new Toast(activity);\n\t\t// toast.setGravity(Gravity.CENTER | Gravity.TOP, 12, 40);\n\t\ttoast.setDuration(duration);\n\t\ttoast.setView(view);\n\t\ttoast.show();\n\t}\n}\n```\n\n<!-- more -->\n\ncustom_toast.xml\n\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\" >\n\n    <LinearLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:background=\"@drawable/shape_toast\"\n        android:orientation=\"vertical\" >\n\n        <TextView\n            android:id=\"@+id/txt\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:padding=\"5dp\"\n            android:textColor=\"@android:color/white\"\n            android:textSize=\"@dimen/text_size_medium\" />\n    </LinearLayout>\n\n</LinearLayout>\n```\n\n调用\n\n```java\nnew CustomToast(WelcomeActivity.this,\"番茄-视频专辑app，下载地址：http://app.mi.com/detail/65621\",Toast.LENGTH_SHORT).show();\n```\n\n二、重写继承Toast\n\nJava\n\n```java\npublic class TipsToast extends Toast {\n\n    public TipsToast(Context context) {\n        super(context);\n    }\n\n    @SuppressLint(\"InflateParams\")\n\tpublic static TipsToast makeText(Context context, CharSequence text, int duration) {\n        TipsToast result = new TipsToast(context);\n\n        LayoutInflater inflate = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n        View v = inflate.inflate(R.layout.view_tips, null);\n        TextView tv = (TextView) v.findViewById(R.id.tips_msg);\n        TextView msgTxt = (TextView) v.findViewById(R.id.tips_msg_txt);\n        msgTxt.setVisibility(View.GONE);\n        tv.setText(text);\n\n        result.setView(v);\n        // setGravity方法用于设置位置，此处为垂直居中\n        result.setGravity(Gravity.CENTER_VERTICAL, 0, 0);\n        result.setDuration(duration);\n\n        return result;\n    }\n\n    @SuppressLint(\"InflateParams\")\n   \tpublic static TipsToast makeText(Context context, CharSequence text, CharSequence msg, int duration) {\n           TipsToast result = new TipsToast(context);\n\n           LayoutInflater inflate = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n           View v = inflate.inflate(R.layout.view_tips, null);\n           TextView tv = (TextView) v.findViewById(R.id.tips_msg);\n           TextView msgTxt = (TextView) v.findViewById(R.id.tips_msg_txt);\n           tv.setText(text);\n           msgTxt.setVisibility(View.VISIBLE);\n           msgTxt.setText(msg);\n\n           result.setView(v);\n           // setGravity方法用于设置位置，此处为垂直居中\n           result.setGravity(Gravity.CENTER_VERTICAL, 0, 0);\n           result.setDuration(duration);\n\n           return result;\n       }\n    \n    \n    public static TipsToast makeText(Context context, int resId, int duration) throws Resources.NotFoundException {\n        return makeText(context, context.getResources().getText(resId), duration);\n    }\n\n    public void setIcon(int iconResId) {\n        if (getView() == null) {\n            throw new RuntimeException(\"This Toast was not created with Toast.makeText()\");\n        }\n        ImageView iv = (ImageView) getView().findViewById(R.id.tips_icon);\n        if (iv == null) {\n            throw new RuntimeException(\"This Toast was not created with Toast.makeText()\");\n        }\n        iv.setImageResource(iconResId);\n    }\n    @Override\n    public void setText(CharSequence s) {\n        if (getView() == null) {\n            throw new RuntimeException(\"This Toast was not created with Toast.makeText()\");\n        }\n        TextView tv = (TextView) getView().findViewById(R.id.tips_msg);\n        if (tv == null) {\n            throw new RuntimeException(\"This Toast was not created with Toast.makeText()\");\n        }\n        tv.setText(s);\n    }\n}\n```\n\nview_tips.xml\n\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_gravity=\"center\"\n    android:background=\"@drawable/tips_bg\" >\n\n    <!-- 撑开布局 -->\n    <View\n        android:layout_width=\"170dp\"\n        android:layout_height=\"150dp\"\n        \n        android:layout_centerInParent=\"true\" />\n\n    <LinearLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerInParent=\"true\"\n        android:orientation=\"vertical\" >\n\n        <ImageView\n            android:id=\"@+id/tips_icon\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"center\"\n            android:layout_marginBottom=\"10.0dip\"\n            android:gravity=\"center\" />\n\n        <TextView\n            android:id=\"@+id/tips_msg\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:maxWidth=\"180dip\"\n            android:layout_gravity=\"center\"\n            android:gravity=\"center\"\n            android:lineSpacingExtra=\"3.0dip\"\n            android:textColor=\"#ffffffff\"\n            android:textSize=\"17.0sp\" />\n        \n        <TextView\n            android:id=\"@+id/tips_msg_txt\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"center\"\n            android:gravity=\"center\"\n            android:lineSpacingExtra=\"3.0dip\"\n            android:textColor=\"#ffffffff\"\n            android:textSize=\"17.0sp\"\n            android:visibility=\"gone\" />\n    </LinearLayout>\n\n</RelativeLayout>\n```\n\n调用\n\n```java\nTipsToast tipsToast = TipsToast.makeText(context.getApplication().getBaseContext(),\"今日情感app，下载地址：http://app.mi.com/detail/30499\",TipsToast.LENGTH_SHORT);\ntipsToast.setIcon(R.drawable.warn);\ntipsToast.show();\n\t\n```\n","slug":"CustomToast","published":1,"updated":"2016-03-17T00:44:06.340Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5l00dno4pkeebqw3ry"},{"title":"Android Creating Custom Views","date":"2015-04-27T16:00:00.000Z","_content":"\n>最近好烦，发现代码是写过不少，也做过十来个大大小小的项目，不过只是实现功能罢了，没有停下来多看看代码，我这样写再多都是妄劳，只不过复制粘贴代码。行吧，停止写代码，抓抓基础，整装待发。\n\n\n## 一、自定义View\n\n1、[【官网】Creating Custom Views](http://developer.android.com/training/custom-views/index.html)\n\n2、[Creating custom and compound Views in Android](http://www.vogella.com/tutorials/AndroidCustomViews/article.html)\n\n3、[Android LayoutInflater原理分析，带你一步步深入了解View(一)](http://blog.csdn.net/guolin_blog/article/details/12921889)\n\n4、[Android视图绘制流程完全解析，带你一步步深入了解View(二)](http://blog.csdn.net/guolin_blog/article/details/16330267)\n\n5、[Android视图状态及重绘流程分析，带你一步步深入了解View(三)](http://blog.csdn.net/guolin_blog/article/details/17045157)\n\n6、[Android自定义View的实现方法，带你一步步深入了解View(四)](http://blog.csdn.net/guolin_blog/article/details/17357967)\n\n<!-- more -->\n\n## 二、必看开源库\n\n1、[android-async-http](https://github.com/loopj/android-async-http)\n\n2、[Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)\n\n3、[PhotoView](https://github.com/chrisbanes/PhotoView)\n\n4、[android-volley](https://github.com/mcxiaoke/android-volley)\n\n5、[picasso](https://github.com/square/picasso)\n\nPS：循序渐进，慢慢看，一天进步一点点。\n","source":"_posts/CreatingCustomViews.md","raw":"title: Android Creating Custom Views\ndate: 2015-04-28 \ncategories: [Android]\ntags: [Android]\n---\n\n>最近好烦，发现代码是写过不少，也做过十来个大大小小的项目，不过只是实现功能罢了，没有停下来多看看代码，我这样写再多都是妄劳，只不过复制粘贴代码。行吧，停止写代码，抓抓基础，整装待发。\n\n\n## 一、自定义View\n\n1、[【官网】Creating Custom Views](http://developer.android.com/training/custom-views/index.html)\n\n2、[Creating custom and compound Views in Android](http://www.vogella.com/tutorials/AndroidCustomViews/article.html)\n\n3、[Android LayoutInflater原理分析，带你一步步深入了解View(一)](http://blog.csdn.net/guolin_blog/article/details/12921889)\n\n4、[Android视图绘制流程完全解析，带你一步步深入了解View(二)](http://blog.csdn.net/guolin_blog/article/details/16330267)\n\n5、[Android视图状态及重绘流程分析，带你一步步深入了解View(三)](http://blog.csdn.net/guolin_blog/article/details/17045157)\n\n6、[Android自定义View的实现方法，带你一步步深入了解View(四)](http://blog.csdn.net/guolin_blog/article/details/17357967)\n\n<!-- more -->\n\n## 二、必看开源库\n\n1、[android-async-http](https://github.com/loopj/android-async-http)\n\n2、[Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)\n\n3、[PhotoView](https://github.com/chrisbanes/PhotoView)\n\n4、[android-volley](https://github.com/mcxiaoke/android-volley)\n\n5、[picasso](https://github.com/square/picasso)\n\nPS：循序渐进，慢慢看，一天进步一点点。\n","slug":"CreatingCustomViews","published":1,"updated":"2016-03-17T00:44:06.339Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5n00dqo4pk66s3cndo"},{"title":"Android Design Support Library之CoordinatorLayout","date":"2015-11-17T06:18:00.000Z","_content":"## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/designsupportlibrarysample.gif)\n\n<!--more-->\n\n## 实例App\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuoDownload.png)\n## 使用方法\nGradle 中添加下面依赖\n```js\n compile 'com.android.support:design:23.1.0'\n```\n## CoordinatorLayout\n```js\n<android.support.design.widget.CoordinatorLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\">\n\n     <! --Your Scrollable View 只支持RecyclerView和NestedScrollView-->\n    <android.support.v7.widget.RecyclerView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            app:layout_behavior=\"@string/appbar_scrolling_view_behavior\" />\n\n    <android.support.design.widget.AppBarLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\">\n            <android.support.v7.widget.Toolbar\n                  android:id=\"@+id/toolbar\"\n                  android:layout_width=\"match_parent\"\n                  android:layout_height=\"?attr/actionBarSize\"\n                  android:background=\"@color/primary\"\n                  app:layout_scrollFlags=\"scroll|enterAlways\">\n\n            <android.support.design.widget.TabLayout\n                  android:layout_width=\"match_parent\"\n                  android:layout_height=\"wrap_content\"\n                  app:layout_scrollFlags=\"scroll|enterAlways\">\n     </android.support.design.widget.AppBarLayout>\n</android.support.design.widget.CoordinatorLayout>\n```\n* 给这个可滚动组件设置了layout_behavior \n* 给另一个控件设置了layout_scrollFlags \n当设置了layout_behavior的控件滑动时，就会触发设置了layout_scrollFlags的控件发生状态的改变。\n设置的layout_scrollFlags有如下几种选项：\n\n* scroll: 所有想滚动出屏幕的view都需要设置这个flag，没有设置这个flag的view将被固定在屏幕顶部。\n* enterAlways: 这个flag让任意向下的滚动都会导致该view变为可见，启用快速“返回模式”。\n* enterAlwaysCollapsed: 当你的视图已经设置minHeight属性又使用此标志时，你的视图只能已最小高度进入，只有当滚动视图到达顶部时才扩大到完整高度。\n* exitUntilCollapsed: this flag causes the view to scroll off until it is ‘collapsed’ (its minHeight) before exiting。\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n## 源码地址\n[https://github.com/WuXiaolong/DesignSupportLibrarySample](https://github.com/WuXiaolong/DesignSupportLibrarySample)\n\n## 官网API\n[http://developer.android.com/intl/zh-cn/reference/android/support/design/widget/CoordinatorLayout.html](http://developer.android.com/intl/zh-cn/reference/android/support/design/widget/CoordinatorLayout.html)\n\n","source":"_posts/CoordinatorLayout.md","raw":"title: Android Design Support Library之CoordinatorLayout\ndate: 2015-11-17 14:18:00\ntags: [DesignSupportLibrary,CoordinatorLayout]\ncategory: DesignSupportLibrary \n---\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/designsupportlibrarysample.gif)\n\n<!--more-->\n\n## 实例App\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuoDownload.png)\n## 使用方法\nGradle 中添加下面依赖\n```js\n compile 'com.android.support:design:23.1.0'\n```\n## CoordinatorLayout\n```js\n<android.support.design.widget.CoordinatorLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\">\n\n     <! --Your Scrollable View 只支持RecyclerView和NestedScrollView-->\n    <android.support.v7.widget.RecyclerView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            app:layout_behavior=\"@string/appbar_scrolling_view_behavior\" />\n\n    <android.support.design.widget.AppBarLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\">\n            <android.support.v7.widget.Toolbar\n                  android:id=\"@+id/toolbar\"\n                  android:layout_width=\"match_parent\"\n                  android:layout_height=\"?attr/actionBarSize\"\n                  android:background=\"@color/primary\"\n                  app:layout_scrollFlags=\"scroll|enterAlways\">\n\n            <android.support.design.widget.TabLayout\n                  android:layout_width=\"match_parent\"\n                  android:layout_height=\"wrap_content\"\n                  app:layout_scrollFlags=\"scroll|enterAlways\">\n     </android.support.design.widget.AppBarLayout>\n</android.support.design.widget.CoordinatorLayout>\n```\n* 给这个可滚动组件设置了layout_behavior \n* 给另一个控件设置了layout_scrollFlags \n当设置了layout_behavior的控件滑动时，就会触发设置了layout_scrollFlags的控件发生状态的改变。\n设置的layout_scrollFlags有如下几种选项：\n\n* scroll: 所有想滚动出屏幕的view都需要设置这个flag，没有设置这个flag的view将被固定在屏幕顶部。\n* enterAlways: 这个flag让任意向下的滚动都会导致该view变为可见，启用快速“返回模式”。\n* enterAlwaysCollapsed: 当你的视图已经设置minHeight属性又使用此标志时，你的视图只能已最小高度进入，只有当滚动视图到达顶部时才扩大到完整高度。\n* exitUntilCollapsed: this flag causes the view to scroll off until it is ‘collapsed’ (its minHeight) before exiting。\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n\n## 源码地址\n[https://github.com/WuXiaolong/DesignSupportLibrarySample](https://github.com/WuXiaolong/DesignSupportLibrarySample)\n\n## 官网API\n[http://developer.android.com/intl/zh-cn/reference/android/support/design/widget/CoordinatorLayout.html](http://developer.android.com/intl/zh-cn/reference/android/support/design/widget/CoordinatorLayout.html)\n\n","slug":"CoordinatorLayout","published":1,"updated":"2016-03-22T06:23:28.080Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5o00dto4pk2gpnwuan"},{"title":"Android下Context、Activity、Application之间有什么区别","date":"2015-01-12T16:00:00.000Z","_content":"\n在开发Android程序的时候，我们经常要跟Context、Activity、Application这三个类打交道，那么这个三个类之间有什么联系和区别呢？\n\n首先Activity和Application都是Context的子类。Context从字面上理解就是上下文的意思，在实际应用中它也确实是起到了管理上下文环境中各个参数和变量的总用，方便我们可以简单的访问到各种资源。虽然Activity和Application都是Context的子类，但是他们维护的生命周期不一样。前者维护一个Acitivity的生命周期，所以其对应的Context也只能访问该activity内的各种资源。后者则是维护一个Application的证明周期。\n","source":"_posts/Context-Activity.md","raw":"title: Android下Context、Activity、Application之间有什么区别\ndate: 2015-01-13 \ncategories: [Android]\ntags: [Android]\n---\n\n在开发Android程序的时候，我们经常要跟Context、Activity、Application这三个类打交道，那么这个三个类之间有什么联系和区别呢？\n\n首先Activity和Application都是Context的子类。Context从字面上理解就是上下文的意思，在实际应用中它也确实是起到了管理上下文环境中各个参数和变量的总用，方便我们可以简单的访问到各种资源。虽然Activity和Application都是Context的子类，但是他们维护的生命周期不一样。前者维护一个Acitivity的生命周期，所以其对应的Context也只能访问该activity内的各种资源。后者则是维护一个Application的证明周期。\n","slug":"Context-Activity","published":1,"updated":"2016-03-17T00:44:06.339Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5r00dyo4pks82jhp72"},{"title":"Android Design Support Library之CollapsingToolbarLayout","date":"2015-11-17T06:18:22.000Z","_content":"## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/designsupportlibrarysample.gif)\n\n<!--more-->\n\n## 实例App\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuoDownload.png)\n## 使用方法\nGradle 中添加下面依赖\n```js\n compile 'com.android.support:design:23.1.0'\n```\n## CollapsingToolbarLayout\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<android.support.design.widget.CoordinatorLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fitsSystemWindows=\"true\"\n    tools:context=\"com.wuxiaolong.designsupportlibrarysample.DetailActivity\">\n\n    <android.support.design.widget.AppBarLayout\n        android:id=\"@+id/appbar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"350dp\"\n        android:fitsSystemWindows=\"true\"\n        android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\">\n\n        <android.support.design.widget.CollapsingToolbarLayout\n            android:id=\"@+id/collapsing_toolbar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            app:contentScrim=\"?attr/colorPrimary\"\n            app:expandedTitleMarginEnd=\"64dp\"\n            app:expandedTitleMarginStart=\"48dp\"\n            app:layout_scrollFlags=\"scroll|exitUntilCollapsed\">\n\n            <ImageView\n                android:id=\"@+id/backdrop\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\"\n                android:fitsSystemWindows=\"true\"\n                android:scaleType=\"centerCrop\"\n                android:src=\"@mipmap/show_img\"\n                app:layout_collapseMode=\"parallax\" />\n\n            <android.support.v7.widget.Toolbar\n                android:id=\"@+id/toolbar\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"?attr/actionBarSize\"\n                app:layout_collapseMode=\"pin\" />\n\n\n        </android.support.design.widget.CollapsingToolbarLayout>\n    </android.support.design.widget.AppBarLayout>\n\n\n    <android.support.v4.widget.NestedScrollView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        app:layout_behavior=\"@string/appbar_scrolling_view_behavior\">\n\n        <TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:paddingTop=\"24dp\"\n            android:text=\"@string/show_text\" />\n    </android.support.v4.widget.NestedScrollView>\n\n    <android.support.design.widget.FloatingActionButton\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_margin=\"@dimen/fab_margin\"\n        android:src=\"@android:drawable/ic_dialog_dialer\"\n        app:layout_anchor=\"@id/appbar\"\n        app:layout_anchorGravity=\"bottom|right|end\" />\n\n    <android.support.design.widget.FloatingActionButton\n        android:id=\"@+id/fab\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"bottom|end\"\n        android:layout_margin=\"@dimen/fab_margin\"\n        android:src=\"@android:drawable/ic_dialog_email\" />\n\n</android.support.design.widget.CoordinatorLayout>\n\n```\n* app:layout_scrollFlags=\"scroll|exitUntilCollapsed\"\n这是两个Flag控制滚动时候CollapsingToolbarLayout的表现。 Scroll，表示向下滚动列表时候，CollapsingToolbarLayout会滚出屏幕并且消失；exitUntilCollapsed，表示这个layout会一直滚动离开屏幕范围，直到它收折成它的最小高度\n\n* app:contentScrim=\"?attr/colorPrimary\"\n设置折叠后Toolbar的颜色\n\n*  app:layout_collapseMode=\"parallax\"\n设置视差模式。parallax，表示滚动过程中,会一直保持可见区域在正中间；pin，表示不会被滚出屏幕范围。也可以设置视差的系数app:layout_collapseParallaxMultiplier=\"0.7\"，介于 0.0-1.0之间\n\n* app:expandedTitleMargin、 app:expandedTitleMarginBottom、app:expandedTitleMarginEnd 、 app:expandedTitleMarginStart设置展开状态改变标题文字的位置\n\n* app:collapsedTitleTextAppearance 和 app:expandedTitleTextAppearance 设置在折叠和展开状态时改变文本的显示\n\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n## 源码地址\n[https://github.com/WuXiaolong/DesignSupportLibrarySample](https://github.com/WuXiaolong/DesignSupportLibrarySample)","source":"_posts/CollapsingToolbarLayout.md","raw":"title: Android Design Support Library之CollapsingToolbarLayout\ndate: 2015-11-17 14:18:22\ntags: [DesignSupportLibrary,CollapsingToolbarLayout]\ncategory: DesignSupportLibrary\n---\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/designsupportlibrarysample.gif)\n\n<!--more-->\n\n## 实例App\n![](http://7q5c2h.com1.z0.glb.clouddn.com/dashishuoDownload.png)\n## 使用方法\nGradle 中添加下面依赖\n```js\n compile 'com.android.support:design:23.1.0'\n```\n## CollapsingToolbarLayout\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<android.support.design.widget.CoordinatorLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fitsSystemWindows=\"true\"\n    tools:context=\"com.wuxiaolong.designsupportlibrarysample.DetailActivity\">\n\n    <android.support.design.widget.AppBarLayout\n        android:id=\"@+id/appbar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"350dp\"\n        android:fitsSystemWindows=\"true\"\n        android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\">\n\n        <android.support.design.widget.CollapsingToolbarLayout\n            android:id=\"@+id/collapsing_toolbar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            app:contentScrim=\"?attr/colorPrimary\"\n            app:expandedTitleMarginEnd=\"64dp\"\n            app:expandedTitleMarginStart=\"48dp\"\n            app:layout_scrollFlags=\"scroll|exitUntilCollapsed\">\n\n            <ImageView\n                android:id=\"@+id/backdrop\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\"\n                android:fitsSystemWindows=\"true\"\n                android:scaleType=\"centerCrop\"\n                android:src=\"@mipmap/show_img\"\n                app:layout_collapseMode=\"parallax\" />\n\n            <android.support.v7.widget.Toolbar\n                android:id=\"@+id/toolbar\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"?attr/actionBarSize\"\n                app:layout_collapseMode=\"pin\" />\n\n\n        </android.support.design.widget.CollapsingToolbarLayout>\n    </android.support.design.widget.AppBarLayout>\n\n\n    <android.support.v4.widget.NestedScrollView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        app:layout_behavior=\"@string/appbar_scrolling_view_behavior\">\n\n        <TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:paddingTop=\"24dp\"\n            android:text=\"@string/show_text\" />\n    </android.support.v4.widget.NestedScrollView>\n\n    <android.support.design.widget.FloatingActionButton\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_margin=\"@dimen/fab_margin\"\n        android:src=\"@android:drawable/ic_dialog_dialer\"\n        app:layout_anchor=\"@id/appbar\"\n        app:layout_anchorGravity=\"bottom|right|end\" />\n\n    <android.support.design.widget.FloatingActionButton\n        android:id=\"@+id/fab\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"bottom|end\"\n        android:layout_margin=\"@dimen/fab_margin\"\n        android:src=\"@android:drawable/ic_dialog_email\" />\n\n</android.support.design.widget.CoordinatorLayout>\n\n```\n* app:layout_scrollFlags=\"scroll|exitUntilCollapsed\"\n这是两个Flag控制滚动时候CollapsingToolbarLayout的表现。 Scroll，表示向下滚动列表时候，CollapsingToolbarLayout会滚出屏幕并且消失；exitUntilCollapsed，表示这个layout会一直滚动离开屏幕范围，直到它收折成它的最小高度\n\n* app:contentScrim=\"?attr/colorPrimary\"\n设置折叠后Toolbar的颜色\n\n*  app:layout_collapseMode=\"parallax\"\n设置视差模式。parallax，表示滚动过程中,会一直保持可见区域在正中间；pin，表示不会被滚出屏幕范围。也可以设置视差的系数app:layout_collapseParallaxMultiplier=\"0.7\"，介于 0.0-1.0之间\n\n* app:expandedTitleMargin、 app:expandedTitleMarginBottom、app:expandedTitleMarginEnd 、 app:expandedTitleMarginStart设置展开状态改变标题文字的位置\n\n* app:collapsedTitleTextAppearance 和 app:expandedTitleTextAppearance 设置在折叠和展开状态时改变文本的显示\n\n## 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n## 源码地址\n[https://github.com/WuXiaolong/DesignSupportLibrarySample](https://github.com/WuXiaolong/DesignSupportLibrarySample)","slug":"CollapsingToolbarLayout","published":1,"updated":"2016-03-22T05:43:31.753Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5t00e1o4pkocsf156g"},{"title":"Android更换主题","date":"2015-08-19T03:05:53.000Z","_content":">来自开源项目：[https://github.com/lguipeng/Notes](https://github.com/lguipeng/Notes)，其中有改变主题的功能，我做了部分修改，并应用到我的APP中。感谢lguipeng的开源。\n\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanScreenshots.gif)\n<!--more-->\n\n## 实例APK\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanAppDownload.png)\n\n## 颜色定义\ncolor.xml\n```js\n <color name=\"red_primary\">#F44336</color>\n    <color name=\"red_primary_dark\">#D32F2F</color>\n    <color name=\"red_accent\">#F44336</color>\n\n    <color name=\"pink_primary\">#E91E63</color>\n    <color name=\"pink_primary_dark\">#C2185B</color>\n    <color name=\"pink_accent\">#E91E63</color>\n\n    <color name=\"brown_primary\">#795548</color>\n    <color name=\"brown_primary_dark\">#5D4037</color>\n    <color name=\"brown_accent\">#795548</color>\n\n\n    <color name=\"blue_primary\">#2196F3</color>\n    <color name=\"blue_primary_dark\">#1976D2</color>\n    <color name=\"blue_accent\">#2196F3</color>\n\n    <color name=\"blue_grey_primary\">#607D8B</color>\n    <color name=\"blue_grey_primary_dark\">#455A64</color>\n    <color name=\"blue_grey_accent\">#607D8B</color>\n\n    <color name=\"yellow_primary\">#FFEB3B</color>\n    <color name=\"yellow_primary_dark\">#FBC02D</color>\n    <color name=\"yellow_accent\">#FFEB3B</color>\n\n    <color name=\"deep_purple_primary\">#673AB7</color>\n    <color name=\"deep_purple_primary_dark\">#512DA8</color>\n    <color name=\"deep_purple_accent\">#673AB7</color>\n\n\n    <color name=\"green_primary\">#4CAF50</color>\n    <color name=\"green_primary_dark\">#388E3C</color>\n    <color name=\"green_accent\">#4CAF50</color>\n\n    <color name=\"deep_orange_primary\">#FF5722</color>\n    <color name=\"deep_orange_primary_dark\">#E64A19</color>\n    <color name=\"deep_orange_accent\">#FF5722</color>\n\n    <color name=\"grey_primary\">#9E9E9E</color>\n    <color name=\"grey_primary_dark\">#616161</color>\n    <color name=\"grey_accent\">#9E9E9E</color>\n\n    <color name=\"cyan_primary\">#00BCD4</color>\n    <color name=\"cyan_primary_dark\">#0097A7</color>\n    <color name=\"cyan_accent\">#00BCD4</color>\n\n    <color name=\"amber_primary\">#FFC107</color>\n    <color name=\"amber_primary_dark\">#FFA000</color>\n    <color name=\"amber_accent\">#FFC107</color>\n\n    <color name=\"primary\">#2196F3</color>\n    <color name=\"primary_dark\">#1E88E5</color>\n    <color name=\"accent\">@color/primary</color>\n```\n\n## 样式定义\nstyle.xml\n```js\n <style name=\"RedTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/red_primary</item>\n        <item name=\"colorPrimaryDark\">@color/red_primary_dark</item>\n        <item name=\"colorAccent\">@color/red_accent</item>\n    </style>\n\n    <style name=\"PinkTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/pink_primary</item>\n        <item name=\"colorPrimaryDark\">@color/pink_primary_dark</item>\n        <item name=\"colorAccent\">@color/pink_accent</item>\n    </style>\n\n    <style name=\"BrownTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/brown_primary</item>\n        <item name=\"colorPrimaryDark\">@color/brown_primary_dark</item>\n        <item name=\"colorAccent\">@color/brown_accent</item>\n    </style>\n\n\n    <style name=\"BlueTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/blue_primary</item>\n        <item name=\"colorPrimaryDark\">@color/blue_primary_dark</item>\n        <item name=\"colorAccent\">@color/blue_accent</item>\n    </style>\n\n\n    <style name=\"BlueGreyTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/blue_grey_primary</item>\n        <item name=\"colorPrimaryDark\">@color/blue_grey_primary_dark</item>\n        <item name=\"colorAccent\">@color/blue_grey_accent</item>\n    </style>\n\n\n    <style name=\"YellowTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/yellow_primary</item>\n        <item name=\"colorPrimaryDark\">@color/yellow_primary_dark</item>\n        <item name=\"colorAccent\">@color/yellow_accent</item>\n    </style>\n\n\n    <style name=\"DeepPurpleTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/deep_purple_primary</item>\n        <item name=\"colorPrimaryDark\">@color/deep_purple_primary_dark</item>\n        <item name=\"colorAccent\">@color/deep_purple_accent</item>\n    </style>\n\n\n    <style name=\"GreenTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/green_primary</item>\n        <item name=\"colorPrimaryDark\">@color/green_primary_dark</item>\n        <item name=\"colorAccent\">@color/green_accent</item>\n    </style>\n\n    <style name=\"DeepOrangeTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/deep_orange_primary</item>\n        <item name=\"colorPrimaryDark\">@color/deep_orange_primary_dark</item>\n        <item name=\"colorAccent\">@color/deep_orange_accent</item>\n    </style>\n\n    <style name=\"GreyTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/grey_primary</item>\n        <item name=\"colorPrimaryDark\">@color/grey_primary_dark</item>\n        <item name=\"colorAccent\">@color/grey_accent</item>\n    </style>\n\n    <style name=\"CyanTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/cyan_primary</item>\n        <item name=\"colorPrimaryDark\">@color/cyan_primary_dark</item>\n        <item name=\"colorAccent\">@color/cyan_accent</item>\n    </style>\n\n    <style name=\"AmberTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/amber_primary</item>\n        <item name=\"colorPrimaryDark\">@color/amber_primary_dark</item>\n        <item name=\"colorAccent\">@color/amber_accent</item>\n    </style>\n```\n\n## 主题选择对话框\n### 在对话框里加入了GridView\n```java\n private void showThemeChooseDialog() {\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity(), R.style.ChangeThemeDialog);\n        builder.setTitle(\"更换主题\");\n        Integer[] res = new Integer[]{R.drawable.red_round, R.drawable.brown_round, R.drawable.blue_round,\n                R.drawable.blue_grey_round, R.drawable.yellow_round, R.drawable.deep_purple_round,\n                R.drawable.pink_round, R.drawable.green_round, R.drawable.deep_orange_round,\n                R.drawable.grey_round, R.drawable.cyan_round,R.drawable.amber_round};\n        List<Integer> list = Arrays.asList(res);\n        ColorsListAdapter adapter = new ColorsListAdapter(getActivity(), list);\n        adapter.setCheckItem(ThemeUtils.getCurrentTheme(getActivity()).getIntValue());\n        GridView gridView = (GridView) LayoutInflater.from(getActivity()).inflate(R.layout.colors_panel_layout, null);\n        gridView.setStretchMode(GridView.STRETCH_COLUMN_WIDTH);\n        gridView.setCacheColorHint(0);\n        gridView.setAdapter(adapter);\n        builder.setView(gridView);\n        final AlertDialog dialog = builder.show();\n        gridView.setOnItemClickListener(\n                new AdapterView.OnItemClickListener() {\n                    @Override\n                    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\n                        dialog.dismiss();\n                        int value = ThemeUtils.getCurrentTheme(getActivity()).getIntValue();\n                        Log.d(\"wxl\", \"value==\" + value);\n                        if (value != position) {\n                            preferenceUtils.saveParam(getString(R.string.change_theme_key), position);\n                            changeTheme(ThemeUtils.Theme.mapValueToTheme(position));\n                        }\n                    }\n                }\n\n        );\n    }\n```\n### 对话框圆形颜色\ndrawable下建red_round.xml，代码如下：\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<shape xmlns:android=\"http://schemas.android.com/apk/res/android\" android:shape=\"oval\">\n    <solid android:color=\"@color/red_primary\"/>\n</shape>\n```\n### ColorsListAdapter \nGridView 的适配器和它的xml\n```java\npublic class ColorsListAdapter extends BaseAdapter {\n\n    private int checkItem;\n    Context context;\n    List<Integer> list;\n\n    public ColorsListAdapter(Context context, List<Integer> list) {\n        this.context = context;\n        this.list = list;\n    }\n\n\n    @Override\n    public int getCount() {\n        return list.size();\n    }\n\n    @Override\n    public Object getItem(int position) {\n        return list.get(position);\n    }\n\n    @Override\n    public long getItemId(int position) {\n        return position;\n    }\n\n    @Override\n    public View getView(int position, View convertView, ViewGroup parent) {\n        Holder holder;\n        if (convertView == null) {\n            convertView = LayoutInflater.from(context).inflate(R.layout.colors_image_layout, null);\n            holder = new Holder();\n            holder.imageView1 = (ImageView) convertView.findViewById(R.id.img_1);\n            holder.imageView2 = (ImageView) convertView.findViewById(R.id.img_2);\n            convertView.setTag(holder);\n        } else {\n            holder = (Holder) convertView.getTag();\n        }\n        holder.imageView1.setImageResource(list.get(position));\n        if (checkItem == position) {\n            holder.imageView2.setImageResource(R.drawable.ic_done_white);\n        }\n        return convertView;\n    }\n    public void setCheckItem(int checkItem) {\n        this.checkItem = checkItem;\n    }\n    static class Holder {\n        ImageView imageView1;\n        ImageView imageView2;\n    }\n}\n```\n\ncolors_image_layout.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:background=\"@android:color/transparent\"\n    android:orientation=\"vertical\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\">\n    <ImageView\n        android:id=\"@+id/img_1\"\n        android:layout_gravity=\"center\"\n        android:layout_width=\"@dimen/md_simplelist_icon\"\n        android:layout_height=\"@dimen/md_simplelist_icon\" />\n    <ImageView\n        android:id=\"@+id/img_2\"\n        android:layout_gravity=\"center\"\n        android:layout_width=\"20dp\"\n        android:layout_height=\"20dp\" />\n</FrameLayout>\n```\n### changeTheme方法\n这里用的EventBus发布事件\n```java\nprivate void changeTheme(ThemeUtils.Theme theme) {\n        if (getActivity() == null)\n            return;              \n       finish();         EventBus.getDefault().post(Constants.MainEvent.CHANGE_THEME);\n       \n    }\n\n```\n需要立即改变主题，调用如下代码：\n```java\n public void onEventMainThread(Constants.MainEvent event) {\n        switch (event) {\n             case CHANGE_THEME:\n                this.recreate();\n               break;\n        }\n    }\n```\n### PreferenceUtils\nSharedPreferences 封装类\n```java\npublic class PreferenceUtils {\n\n    private SharedPreferences sharedPreferences;\n\n    private SharedPreferences.Editor shareEditor;\n\n    private static PreferenceUtils preferenceUtils = null;\n\n    public static final String NOTE_TYPE_KEY = \"NOTE_TYPE_KEY\";\n\n    public static final String EVERNOTE_ACCOUNT_KEY = \"EVERNOTE_ACCOUNT_KEY\";\n\n    public static final String EVERNOTE_NOTEBOOK_GUID_KEY = \"EVERNOTE_NOTEBOOK_GUID_KEY\";\n\n    private PreferenceUtils(Context context){\n        sharedPreferences = context.getSharedPreferences(SetFragment.PREFERENCE_FILE_NAME, Context.MODE_PRIVATE);\n        shareEditor = sharedPreferences.edit();\n    }\n\n    public static PreferenceUtils getInstance(Context context){\n        if (preferenceUtils == null) {\n            synchronized (PreferenceUtils.class) {\n                if (preferenceUtils == null) {\n                    preferenceUtils = new PreferenceUtils(context.getApplicationContext());\n                }\n            }\n        }\n        return preferenceUtils;\n    }\n\n    public String getStringParam(String key){\n        return getStringParam(key, \"\");\n    }\n\n    public String getStringParam(String key, String defaultString){\n        return sharedPreferences.getString(key, defaultString);\n    }\n\n    public void saveParam(String key, String value)\n    {\n        shareEditor.putString(key,value).commit();\n    }\n\n    public boolean getBooleanParam(String key){\n        return getBooleanParam(key, false);\n    }\n\n    public boolean getBooleanParam(String key, boolean defaultBool){\n        return sharedPreferences.getBoolean(key, defaultBool);\n    }\n\n    public void saveParam(String key, boolean value){\n        shareEditor.putBoolean(key, value).commit();\n    }\n\n    public int getIntParam(String key){\n        return getIntParam(key, 0);\n    }\n\n    public int getIntParam(String key, int defaultInt){\n        return sharedPreferences.getInt(key, defaultInt);\n    }\n\n    public void saveParam(String key, int value){\n        shareEditor.putInt(key, value).commit();\n    }\n\n    public long getLongParam(String key){\n        return getLongParam(key, 0);\n    }\n\n    public long getLongParam(String key, long defaultInt){\n        return sharedPreferences.getLong(key, defaultInt);\n    }\n\n    public void saveParam(String key, long value){\n        shareEditor.putLong(key, value).commit();\n    }\n\n    public void removeKey(String key){\n        shareEditor.remove(key).commit();\n    }\n}\n\n```\n### ThemeUtils\n```java\npublic class ThemeUtils {\n\n    public static void changTheme(Activity activity, Theme theme) {\n        if (activity == null)\n            return;\n        int style = R.style.RedTheme;\n        switch (theme) {\n            case BROWN:\n                style = R.style.BrownTheme;\n                break;\n            case BLUE:\n                style = R.style.BlueTheme;\n                break;\n            case BLUE_GREY:\n                style = R.style.BlueGreyTheme;\n                break;\n            case YELLOW:\n                style = R.style.YellowTheme;\n                break;\n            case DEEP_PURPLE:\n                style = R.style.DeepPurpleTheme;\n                break;\n            case PINK:\n                style = R.style.PinkTheme;\n                break;\n            case GREEN:\n                style = R.style.GreenTheme;\n                break;\n            case DEEP_ORANGE:\n                style = R.style.DeepOrangeTheme;\n                break;\n            case GREY:\n                style = R.style.GreyTheme;\n                break;\n            case CYAN:\n                style = R.style.CyanTheme;\n                break;\n            case AMBER:\n                style = R.style.AmberTheme;\n                break;\n            default:\n                break;\n        }\n        activity.setTheme(style);\n    }\n\n    public static Theme getCurrentTheme(Context context) {\n        int value = PreferenceUtils.getInstance(context)\n                .getIntParam(context.getString(R.string.change_theme_key), 0);\n        return ThemeUtils.Theme.mapValueToTheme(value);\n    }\n\n    public enum Theme {\n        RED(0),\n        BROWN(1),\n        BLUE(2),\n        BLUE_GREY(3),\n        YELLOW(4),\n        DEEP_PURPLE(5),\n        PINK(6),\n        GREEN(7),\n        DEEP_ORANGE(8),\n        GREY(9),\n        CYAN(10),\n        AMBER(11);\n\n        private int mValue;\n\n        Theme(int value) {\n            this.mValue = value;\n        }\n\n        public static Theme mapValueToTheme(final int value) {\n            for (Theme theme : Theme.values()) {\n                if (value == theme.getIntValue()) {\n                    return theme;\n                }\n            }\n            // If run here, return default\n            return RED;\n        }\n\n        static Theme getDefault() {\n            return RED;\n        }\n\n        public int getIntValue() {\n            return mValue;\n        }\n    }\n}\n```\n\n## 基类BaseActivity\n初始化主题\n```java\npublic class BaseActivity extends AppCompatActivity {\n    protected PreferenceUtils preferenceUtils;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        preferenceUtils = PreferenceUtils.getInstance(this);\n        initTheme();\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_base);\n    }\n\n    private void initTheme() {\n        ThemeUtils.Theme theme = ThemeUtils.getCurrentTheme(this);\n        ThemeUtils.changTheme(this, theme);\n    }\n\n   }\n```","source":"_posts/ChangeTheme.md","raw":"title: Android更换主题\ndate: 2015-08-19 11:05:53\ntags: [Android,Theme,WeiYan]\ncategory: Android\n---\n>来自开源项目：[https://github.com/lguipeng/Notes](https://github.com/lguipeng/Notes)，其中有改变主题的功能，我做了部分修改，并应用到我的APP中。感谢lguipeng的开源。\n\n## 效果预览\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanScreenshots.gif)\n<!--more-->\n\n## 实例APK\n![](http://7q5c2h.com1.z0.glb.clouddn.com/weiyanAppDownload.png)\n\n## 颜色定义\ncolor.xml\n```js\n <color name=\"red_primary\">#F44336</color>\n    <color name=\"red_primary_dark\">#D32F2F</color>\n    <color name=\"red_accent\">#F44336</color>\n\n    <color name=\"pink_primary\">#E91E63</color>\n    <color name=\"pink_primary_dark\">#C2185B</color>\n    <color name=\"pink_accent\">#E91E63</color>\n\n    <color name=\"brown_primary\">#795548</color>\n    <color name=\"brown_primary_dark\">#5D4037</color>\n    <color name=\"brown_accent\">#795548</color>\n\n\n    <color name=\"blue_primary\">#2196F3</color>\n    <color name=\"blue_primary_dark\">#1976D2</color>\n    <color name=\"blue_accent\">#2196F3</color>\n\n    <color name=\"blue_grey_primary\">#607D8B</color>\n    <color name=\"blue_grey_primary_dark\">#455A64</color>\n    <color name=\"blue_grey_accent\">#607D8B</color>\n\n    <color name=\"yellow_primary\">#FFEB3B</color>\n    <color name=\"yellow_primary_dark\">#FBC02D</color>\n    <color name=\"yellow_accent\">#FFEB3B</color>\n\n    <color name=\"deep_purple_primary\">#673AB7</color>\n    <color name=\"deep_purple_primary_dark\">#512DA8</color>\n    <color name=\"deep_purple_accent\">#673AB7</color>\n\n\n    <color name=\"green_primary\">#4CAF50</color>\n    <color name=\"green_primary_dark\">#388E3C</color>\n    <color name=\"green_accent\">#4CAF50</color>\n\n    <color name=\"deep_orange_primary\">#FF5722</color>\n    <color name=\"deep_orange_primary_dark\">#E64A19</color>\n    <color name=\"deep_orange_accent\">#FF5722</color>\n\n    <color name=\"grey_primary\">#9E9E9E</color>\n    <color name=\"grey_primary_dark\">#616161</color>\n    <color name=\"grey_accent\">#9E9E9E</color>\n\n    <color name=\"cyan_primary\">#00BCD4</color>\n    <color name=\"cyan_primary_dark\">#0097A7</color>\n    <color name=\"cyan_accent\">#00BCD4</color>\n\n    <color name=\"amber_primary\">#FFC107</color>\n    <color name=\"amber_primary_dark\">#FFA000</color>\n    <color name=\"amber_accent\">#FFC107</color>\n\n    <color name=\"primary\">#2196F3</color>\n    <color name=\"primary_dark\">#1E88E5</color>\n    <color name=\"accent\">@color/primary</color>\n```\n\n## 样式定义\nstyle.xml\n```js\n <style name=\"RedTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/red_primary</item>\n        <item name=\"colorPrimaryDark\">@color/red_primary_dark</item>\n        <item name=\"colorAccent\">@color/red_accent</item>\n    </style>\n\n    <style name=\"PinkTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/pink_primary</item>\n        <item name=\"colorPrimaryDark\">@color/pink_primary_dark</item>\n        <item name=\"colorAccent\">@color/pink_accent</item>\n    </style>\n\n    <style name=\"BrownTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/brown_primary</item>\n        <item name=\"colorPrimaryDark\">@color/brown_primary_dark</item>\n        <item name=\"colorAccent\">@color/brown_accent</item>\n    </style>\n\n\n    <style name=\"BlueTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/blue_primary</item>\n        <item name=\"colorPrimaryDark\">@color/blue_primary_dark</item>\n        <item name=\"colorAccent\">@color/blue_accent</item>\n    </style>\n\n\n    <style name=\"BlueGreyTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/blue_grey_primary</item>\n        <item name=\"colorPrimaryDark\">@color/blue_grey_primary_dark</item>\n        <item name=\"colorAccent\">@color/blue_grey_accent</item>\n    </style>\n\n\n    <style name=\"YellowTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/yellow_primary</item>\n        <item name=\"colorPrimaryDark\">@color/yellow_primary_dark</item>\n        <item name=\"colorAccent\">@color/yellow_accent</item>\n    </style>\n\n\n    <style name=\"DeepPurpleTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/deep_purple_primary</item>\n        <item name=\"colorPrimaryDark\">@color/deep_purple_primary_dark</item>\n        <item name=\"colorAccent\">@color/deep_purple_accent</item>\n    </style>\n\n\n    <style name=\"GreenTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/green_primary</item>\n        <item name=\"colorPrimaryDark\">@color/green_primary_dark</item>\n        <item name=\"colorAccent\">@color/green_accent</item>\n    </style>\n\n    <style name=\"DeepOrangeTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/deep_orange_primary</item>\n        <item name=\"colorPrimaryDark\">@color/deep_orange_primary_dark</item>\n        <item name=\"colorAccent\">@color/deep_orange_accent</item>\n    </style>\n\n    <style name=\"GreyTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/grey_primary</item>\n        <item name=\"colorPrimaryDark\">@color/grey_primary_dark</item>\n        <item name=\"colorAccent\">@color/grey_accent</item>\n    </style>\n\n    <style name=\"CyanTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/cyan_primary</item>\n        <item name=\"colorPrimaryDark\">@color/cyan_primary_dark</item>\n        <item name=\"colorAccent\">@color/cyan_accent</item>\n    </style>\n\n    <style name=\"AmberTheme\" parent=\"AppTheme\">\n        <item name=\"colorPrimary\">@color/amber_primary</item>\n        <item name=\"colorPrimaryDark\">@color/amber_primary_dark</item>\n        <item name=\"colorAccent\">@color/amber_accent</item>\n    </style>\n```\n\n## 主题选择对话框\n### 在对话框里加入了GridView\n```java\n private void showThemeChooseDialog() {\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity(), R.style.ChangeThemeDialog);\n        builder.setTitle(\"更换主题\");\n        Integer[] res = new Integer[]{R.drawable.red_round, R.drawable.brown_round, R.drawable.blue_round,\n                R.drawable.blue_grey_round, R.drawable.yellow_round, R.drawable.deep_purple_round,\n                R.drawable.pink_round, R.drawable.green_round, R.drawable.deep_orange_round,\n                R.drawable.grey_round, R.drawable.cyan_round,R.drawable.amber_round};\n        List<Integer> list = Arrays.asList(res);\n        ColorsListAdapter adapter = new ColorsListAdapter(getActivity(), list);\n        adapter.setCheckItem(ThemeUtils.getCurrentTheme(getActivity()).getIntValue());\n        GridView gridView = (GridView) LayoutInflater.from(getActivity()).inflate(R.layout.colors_panel_layout, null);\n        gridView.setStretchMode(GridView.STRETCH_COLUMN_WIDTH);\n        gridView.setCacheColorHint(0);\n        gridView.setAdapter(adapter);\n        builder.setView(gridView);\n        final AlertDialog dialog = builder.show();\n        gridView.setOnItemClickListener(\n                new AdapterView.OnItemClickListener() {\n                    @Override\n                    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\n                        dialog.dismiss();\n                        int value = ThemeUtils.getCurrentTheme(getActivity()).getIntValue();\n                        Log.d(\"wxl\", \"value==\" + value);\n                        if (value != position) {\n                            preferenceUtils.saveParam(getString(R.string.change_theme_key), position);\n                            changeTheme(ThemeUtils.Theme.mapValueToTheme(position));\n                        }\n                    }\n                }\n\n        );\n    }\n```\n### 对话框圆形颜色\ndrawable下建red_round.xml，代码如下：\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<shape xmlns:android=\"http://schemas.android.com/apk/res/android\" android:shape=\"oval\">\n    <solid android:color=\"@color/red_primary\"/>\n</shape>\n```\n### ColorsListAdapter \nGridView 的适配器和它的xml\n```java\npublic class ColorsListAdapter extends BaseAdapter {\n\n    private int checkItem;\n    Context context;\n    List<Integer> list;\n\n    public ColorsListAdapter(Context context, List<Integer> list) {\n        this.context = context;\n        this.list = list;\n    }\n\n\n    @Override\n    public int getCount() {\n        return list.size();\n    }\n\n    @Override\n    public Object getItem(int position) {\n        return list.get(position);\n    }\n\n    @Override\n    public long getItemId(int position) {\n        return position;\n    }\n\n    @Override\n    public View getView(int position, View convertView, ViewGroup parent) {\n        Holder holder;\n        if (convertView == null) {\n            convertView = LayoutInflater.from(context).inflate(R.layout.colors_image_layout, null);\n            holder = new Holder();\n            holder.imageView1 = (ImageView) convertView.findViewById(R.id.img_1);\n            holder.imageView2 = (ImageView) convertView.findViewById(R.id.img_2);\n            convertView.setTag(holder);\n        } else {\n            holder = (Holder) convertView.getTag();\n        }\n        holder.imageView1.setImageResource(list.get(position));\n        if (checkItem == position) {\n            holder.imageView2.setImageResource(R.drawable.ic_done_white);\n        }\n        return convertView;\n    }\n    public void setCheckItem(int checkItem) {\n        this.checkItem = checkItem;\n    }\n    static class Holder {\n        ImageView imageView1;\n        ImageView imageView2;\n    }\n}\n```\n\ncolors_image_layout.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:background=\"@android:color/transparent\"\n    android:orientation=\"vertical\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\">\n    <ImageView\n        android:id=\"@+id/img_1\"\n        android:layout_gravity=\"center\"\n        android:layout_width=\"@dimen/md_simplelist_icon\"\n        android:layout_height=\"@dimen/md_simplelist_icon\" />\n    <ImageView\n        android:id=\"@+id/img_2\"\n        android:layout_gravity=\"center\"\n        android:layout_width=\"20dp\"\n        android:layout_height=\"20dp\" />\n</FrameLayout>\n```\n### changeTheme方法\n这里用的EventBus发布事件\n```java\nprivate void changeTheme(ThemeUtils.Theme theme) {\n        if (getActivity() == null)\n            return;              \n       finish();         EventBus.getDefault().post(Constants.MainEvent.CHANGE_THEME);\n       \n    }\n\n```\n需要立即改变主题，调用如下代码：\n```java\n public void onEventMainThread(Constants.MainEvent event) {\n        switch (event) {\n             case CHANGE_THEME:\n                this.recreate();\n               break;\n        }\n    }\n```\n### PreferenceUtils\nSharedPreferences 封装类\n```java\npublic class PreferenceUtils {\n\n    private SharedPreferences sharedPreferences;\n\n    private SharedPreferences.Editor shareEditor;\n\n    private static PreferenceUtils preferenceUtils = null;\n\n    public static final String NOTE_TYPE_KEY = \"NOTE_TYPE_KEY\";\n\n    public static final String EVERNOTE_ACCOUNT_KEY = \"EVERNOTE_ACCOUNT_KEY\";\n\n    public static final String EVERNOTE_NOTEBOOK_GUID_KEY = \"EVERNOTE_NOTEBOOK_GUID_KEY\";\n\n    private PreferenceUtils(Context context){\n        sharedPreferences = context.getSharedPreferences(SetFragment.PREFERENCE_FILE_NAME, Context.MODE_PRIVATE);\n        shareEditor = sharedPreferences.edit();\n    }\n\n    public static PreferenceUtils getInstance(Context context){\n        if (preferenceUtils == null) {\n            synchronized (PreferenceUtils.class) {\n                if (preferenceUtils == null) {\n                    preferenceUtils = new PreferenceUtils(context.getApplicationContext());\n                }\n            }\n        }\n        return preferenceUtils;\n    }\n\n    public String getStringParam(String key){\n        return getStringParam(key, \"\");\n    }\n\n    public String getStringParam(String key, String defaultString){\n        return sharedPreferences.getString(key, defaultString);\n    }\n\n    public void saveParam(String key, String value)\n    {\n        shareEditor.putString(key,value).commit();\n    }\n\n    public boolean getBooleanParam(String key){\n        return getBooleanParam(key, false);\n    }\n\n    public boolean getBooleanParam(String key, boolean defaultBool){\n        return sharedPreferences.getBoolean(key, defaultBool);\n    }\n\n    public void saveParam(String key, boolean value){\n        shareEditor.putBoolean(key, value).commit();\n    }\n\n    public int getIntParam(String key){\n        return getIntParam(key, 0);\n    }\n\n    public int getIntParam(String key, int defaultInt){\n        return sharedPreferences.getInt(key, defaultInt);\n    }\n\n    public void saveParam(String key, int value){\n        shareEditor.putInt(key, value).commit();\n    }\n\n    public long getLongParam(String key){\n        return getLongParam(key, 0);\n    }\n\n    public long getLongParam(String key, long defaultInt){\n        return sharedPreferences.getLong(key, defaultInt);\n    }\n\n    public void saveParam(String key, long value){\n        shareEditor.putLong(key, value).commit();\n    }\n\n    public void removeKey(String key){\n        shareEditor.remove(key).commit();\n    }\n}\n\n```\n### ThemeUtils\n```java\npublic class ThemeUtils {\n\n    public static void changTheme(Activity activity, Theme theme) {\n        if (activity == null)\n            return;\n        int style = R.style.RedTheme;\n        switch (theme) {\n            case BROWN:\n                style = R.style.BrownTheme;\n                break;\n            case BLUE:\n                style = R.style.BlueTheme;\n                break;\n            case BLUE_GREY:\n                style = R.style.BlueGreyTheme;\n                break;\n            case YELLOW:\n                style = R.style.YellowTheme;\n                break;\n            case DEEP_PURPLE:\n                style = R.style.DeepPurpleTheme;\n                break;\n            case PINK:\n                style = R.style.PinkTheme;\n                break;\n            case GREEN:\n                style = R.style.GreenTheme;\n                break;\n            case DEEP_ORANGE:\n                style = R.style.DeepOrangeTheme;\n                break;\n            case GREY:\n                style = R.style.GreyTheme;\n                break;\n            case CYAN:\n                style = R.style.CyanTheme;\n                break;\n            case AMBER:\n                style = R.style.AmberTheme;\n                break;\n            default:\n                break;\n        }\n        activity.setTheme(style);\n    }\n\n    public static Theme getCurrentTheme(Context context) {\n        int value = PreferenceUtils.getInstance(context)\n                .getIntParam(context.getString(R.string.change_theme_key), 0);\n        return ThemeUtils.Theme.mapValueToTheme(value);\n    }\n\n    public enum Theme {\n        RED(0),\n        BROWN(1),\n        BLUE(2),\n        BLUE_GREY(3),\n        YELLOW(4),\n        DEEP_PURPLE(5),\n        PINK(6),\n        GREEN(7),\n        DEEP_ORANGE(8),\n        GREY(9),\n        CYAN(10),\n        AMBER(11);\n\n        private int mValue;\n\n        Theme(int value) {\n            this.mValue = value;\n        }\n\n        public static Theme mapValueToTheme(final int value) {\n            for (Theme theme : Theme.values()) {\n                if (value == theme.getIntValue()) {\n                    return theme;\n                }\n            }\n            // If run here, return default\n            return RED;\n        }\n\n        static Theme getDefault() {\n            return RED;\n        }\n\n        public int getIntValue() {\n            return mValue;\n        }\n    }\n}\n```\n\n## 基类BaseActivity\n初始化主题\n```java\npublic class BaseActivity extends AppCompatActivity {\n    protected PreferenceUtils preferenceUtils;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        preferenceUtils = PreferenceUtils.getInstance(this);\n        initTheme();\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_base);\n    }\n\n    private void initTheme() {\n        ThemeUtils.Theme theme = ThemeUtils.getCurrentTheme(this);\n        ThemeUtils.changTheme(this, theme);\n    }\n\n   }\n```","slug":"ChangeTheme","published":1,"updated":"2016-03-17T00:44:06.338Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5v00e6o4pkrmvkkacj"},{"title":"Android之Canvas中内容保存为图片","date":"2015-04-22T16:00:00.000Z","_content":"\n```java\nBitmap bm = Bitmap.createBitmap(320, 480, Config.ARGB_8888);  \n        Canvas canvas = new Canvas(bm);  \n        Paint p = new Paint();  \n        canvas.drawRect(50, 50, 200, 200, p);  \n        canvas.save(Canvas.ALL_SAVE_FLAG );  \n        canvas.restore();  \n          \n        File f = new File(\"/sdcard/0.png\");  \n        FileOutputStream fos = null;  \n        try {  \n            fos = new FileOutputStream(f);  \n            bm.compress(Bitmap.CompressFormat.PNG, 50, fos);  \n        } catch (FileNotFoundException e) {  \n            // TODO Auto-generated catch block  \n            e.printStackTrace();  \n        }  \n        // 其次把文件插入到系统图库\n    try {\n        MediaStore.Images.Media.insertImage(context.getContentResolver(),\n\t\t\t\tfile.getAbsolutePath(), fileName, null);\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n    }\n    // 最后通知图库更新\n    context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.parse(\"file://\" + path)));\n```\n\n这样就把Canvas中的内容保存成了sd卡上的一个png图片。简单说一下原理，自己create一个bitmap，然后让Canvas通过这个bitmap创建一个实例，然后在该canvas上绘制的内容都会画\n在该bitmap上，保存Canvas的图层，然后把bitmap写到sd卡上的文件。注意：要在AndroidManifest.xml中添加在sd卡上读写文件的权限\n\n```js\n<!-- 在SDCard中创建与删除文件权限 -->     \n<uses-permission android:name=\"android.permission.MOUNT_UNMOUNT_FILESYSTEMS\"/>     \n<!-- 往SDCard写入数据权限 -->     \n<uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/>  \n```\n\nCanvas加入图片\n\n```java\nCanvas canvas;\nBitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.pic180);  \n            canvas.drawColor(Color.BLACK);  \n            canvas.drawBitmap(bmp, 10, 10, null);  \n```\n\n","source":"_posts/CanvasToPhoto.md","raw":"title: Android之Canvas中内容保存为图片\ndate: 2015-04-23 \ncategories: [Android]\ntags: [Android,Canvas]\n---\n\n```java\nBitmap bm = Bitmap.createBitmap(320, 480, Config.ARGB_8888);  \n        Canvas canvas = new Canvas(bm);  \n        Paint p = new Paint();  \n        canvas.drawRect(50, 50, 200, 200, p);  \n        canvas.save(Canvas.ALL_SAVE_FLAG );  \n        canvas.restore();  \n          \n        File f = new File(\"/sdcard/0.png\");  \n        FileOutputStream fos = null;  \n        try {  \n            fos = new FileOutputStream(f);  \n            bm.compress(Bitmap.CompressFormat.PNG, 50, fos);  \n        } catch (FileNotFoundException e) {  \n            // TODO Auto-generated catch block  \n            e.printStackTrace();  \n        }  \n        // 其次把文件插入到系统图库\n    try {\n        MediaStore.Images.Media.insertImage(context.getContentResolver(),\n\t\t\t\tfile.getAbsolutePath(), fileName, null);\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n    }\n    // 最后通知图库更新\n    context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.parse(\"file://\" + path)));\n```\n\n这样就把Canvas中的内容保存成了sd卡上的一个png图片。简单说一下原理，自己create一个bitmap，然后让Canvas通过这个bitmap创建一个实例，然后在该canvas上绘制的内容都会画\n在该bitmap上，保存Canvas的图层，然后把bitmap写到sd卡上的文件。注意：要在AndroidManifest.xml中添加在sd卡上读写文件的权限\n\n```js\n<!-- 在SDCard中创建与删除文件权限 -->     \n<uses-permission android:name=\"android.permission.MOUNT_UNMOUNT_FILESYSTEMS\"/>     \n<!-- 往SDCard写入数据权限 -->     \n<uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/>  \n```\n\nCanvas加入图片\n\n```java\nCanvas canvas;\nBitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.pic180);  \n            canvas.drawColor(Color.BLACK);  \n            canvas.drawBitmap(bmp, 10, 10, null);  \n```\n\n","slug":"CanvasToPhoto","published":1,"updated":"2016-03-17T00:44:06.338Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge5y00eco4pkzo2t9zh1"},{"title":"Android之BroadcastReceiver","date":"2015-11-03T00:54:41.000Z","_content":"## 什么是BroadcastReceiver？\n\n　　BroadcastReceiver，广播接收者，它是一个系统全局的监听器，用于监听系统全局的Broadcast消息，所以它可以很方便的进行系统组件之间的通信。\n\n　　BroadcastReceiver属于系统级的监听器，它拥有自己的进程，只要存在与之匹配的Broadcast被以Intent的形式发送出来，BroadcastReceiver就会被激活。\n\n　　虽然同属Android的四大组件，BroadcastReceiver也有自己独立的声明周期，但是和Activity、Service又不同。当在系统注册一个BroadcastReceiver之后，每次系统以一个Intent的形式发布Broadcast的时候，系统都会创建与之对应的BroadcastReceiver广播接收者实例，并自动触发它的onReceive()方法，当onReceive()方法被执行完成之后，BroadcastReceiver的实例就会被销毁。虽然它独自享用一个单独的进程，但也不是没有限制的，如果BroadcastReceiver.onReceive()方法不能在10秒内执行完成，Android系统就会认为该BroadcastReceiver对象无响应，然后弹出ANR（Application No Response）对话框，所以不要在BroadcastReceiver.onReceive()方法内执行一些耗时的操作。\n\n　　如果需要根据广播内容完成一些耗时的操作，一般考虑通过Intent启动一个Service来完成该操作，而不应该在BroadcastReceiver中开启一个新线程完成耗时的操作，因为BroadcastReceiver本身的生命周期很短，可能出现的情况是子线程还没有结束，BroadcastReceiver就已经退出的情况，而如果BroadcastReceiver所在的进程结束了，该线程就会被标记为一个空线程，根据Android的内存管理策略，在系统内存紧张的时候，会按照优先级，结束优先级低的线程，而空线程无异是优先级最低的，这样就可能导致BroadcastReceiver启动的子线程不能执行完成。\n<!--more-->\n## BroadcastReceiver的种类\n* sendBroadcast()：发送普通广播。\n* sendOrderedBroadcast()：发送有序广播。\n\n## 如何使用BroadcastReceiver\n清单文件进行注册\n```js\n <receiver android:name=\".HelloBroadcastReceiver\">\n            <intent-filter android:priority=\"100\">\n                <action android:name=\"com.wuxiaolong.apksample.HelloBroadcastReceiver\" />\n            </intent-filter>\n            </receiver>\n```\nHelloBroadcastReceiver\n```java\npublic class HelloBroadcastReceiver extends BroadcastReceiver {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        // 判断当前接收到的Broadcast的action\n        Log.d(\"wxl\", \"intent.getAction()====\" + intent.getAction());\n        if (intent.getAction().equals(\"com.wuxiaolong.apksample.HelloBroadcastReceiver\")) {\n            Toast.makeText(context,\n                    \"接收到Broadcast，消息为：\" + intent.getStringExtra(\"msg\"),\n                    Toast.LENGTH_SHORT).show();\n        }\n\n    }\n}\n```\n发送Broadcast\n```java\nIntent broadcast = new Intent();                \nbroadcast.setAction(\"com.wuxiaolong.apksample.HelloBroadcastReceiver\");       \nsendBroadcast(broadcast);\n```\n## 附录\n[Android--广播BroadcastReceiver](http://www.cnblogs.com/plokmju/p/android_BroadcastReceiver.html)\n[Android--拦截系统BroadcastReceiver](http://www.cnblogs.com/plokmju/p/android_SystemBroadcastReceriver.html)","source":"_posts/BroadcastReceiver.md","raw":"title: Android之BroadcastReceiver\ndate: 2015-11-03 08:54:41\ntags: BroadcastReceiver\ncategory: Android\n---\n## 什么是BroadcastReceiver？\n\n　　BroadcastReceiver，广播接收者，它是一个系统全局的监听器，用于监听系统全局的Broadcast消息，所以它可以很方便的进行系统组件之间的通信。\n\n　　BroadcastReceiver属于系统级的监听器，它拥有自己的进程，只要存在与之匹配的Broadcast被以Intent的形式发送出来，BroadcastReceiver就会被激活。\n\n　　虽然同属Android的四大组件，BroadcastReceiver也有自己独立的声明周期，但是和Activity、Service又不同。当在系统注册一个BroadcastReceiver之后，每次系统以一个Intent的形式发布Broadcast的时候，系统都会创建与之对应的BroadcastReceiver广播接收者实例，并自动触发它的onReceive()方法，当onReceive()方法被执行完成之后，BroadcastReceiver的实例就会被销毁。虽然它独自享用一个单独的进程，但也不是没有限制的，如果BroadcastReceiver.onReceive()方法不能在10秒内执行完成，Android系统就会认为该BroadcastReceiver对象无响应，然后弹出ANR（Application No Response）对话框，所以不要在BroadcastReceiver.onReceive()方法内执行一些耗时的操作。\n\n　　如果需要根据广播内容完成一些耗时的操作，一般考虑通过Intent启动一个Service来完成该操作，而不应该在BroadcastReceiver中开启一个新线程完成耗时的操作，因为BroadcastReceiver本身的生命周期很短，可能出现的情况是子线程还没有结束，BroadcastReceiver就已经退出的情况，而如果BroadcastReceiver所在的进程结束了，该线程就会被标记为一个空线程，根据Android的内存管理策略，在系统内存紧张的时候，会按照优先级，结束优先级低的线程，而空线程无异是优先级最低的，这样就可能导致BroadcastReceiver启动的子线程不能执行完成。\n<!--more-->\n## BroadcastReceiver的种类\n* sendBroadcast()：发送普通广播。\n* sendOrderedBroadcast()：发送有序广播。\n\n## 如何使用BroadcastReceiver\n清单文件进行注册\n```js\n <receiver android:name=\".HelloBroadcastReceiver\">\n            <intent-filter android:priority=\"100\">\n                <action android:name=\"com.wuxiaolong.apksample.HelloBroadcastReceiver\" />\n            </intent-filter>\n            </receiver>\n```\nHelloBroadcastReceiver\n```java\npublic class HelloBroadcastReceiver extends BroadcastReceiver {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        // 判断当前接收到的Broadcast的action\n        Log.d(\"wxl\", \"intent.getAction()====\" + intent.getAction());\n        if (intent.getAction().equals(\"com.wuxiaolong.apksample.HelloBroadcastReceiver\")) {\n            Toast.makeText(context,\n                    \"接收到Broadcast，消息为：\" + intent.getStringExtra(\"msg\"),\n                    Toast.LENGTH_SHORT).show();\n        }\n\n    }\n}\n```\n发送Broadcast\n```java\nIntent broadcast = new Intent();                \nbroadcast.setAction(\"com.wuxiaolong.apksample.HelloBroadcastReceiver\");       \nsendBroadcast(broadcast);\n```\n## 附录\n[Android--广播BroadcastReceiver](http://www.cnblogs.com/plokmju/p/android_BroadcastReceiver.html)\n[Android--拦截系统BroadcastReceiver](http://www.cnblogs.com/plokmju/p/android_SystemBroadcastReceriver.html)","slug":"BroadcastReceiver","published":1,"updated":"2016-03-17T00:44:06.338Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6000ego4pkzakj8z00"},{"title":"Android获取手机已安装apk文件信息","date":"2015-07-28T16:00:00.000Z","_content":"\n```java\n  Intent intent = new Intent(Intent.ACTION_MAIN, null);\n  intent.addCategory(Intent.CATEGORY_LAUNCHER);\n  List<AppInfo> applicationList = new ArrayList<>();\n  List<ResolveInfo> resolveInfoList = getPackageManager().queryIntentActivities(intent, 0);\n  for (ResolveInfo resolveInfo : resolveInfoList) {\n  AppInfo appInfo = new AppInfo(MainActivity.this, resolveInfo);\n  PackageInfo packageInfo = appInfo.getPackageInfo();\n  //判断(applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM)的值，\n  // 该值大于0时，表示获取的应用为系统预装的应用，反之则为手动安装的应用\n  if ((packageInfo.applicationInfo.flags & packageInfo.applicationInfo.FLAG_SYSTEM) <= 0) {\n  // customs applications\n  applicationList.add(appInfo);\n   }\n  }\n```\n<!-- more -->\n\n```java\npackage com.wuxiaolong.apksample;\n\nimport android.annotation.SuppressLint;\nimport android.content.ComponentName;\nimport android.content.Context;\nimport android.content.pm.PackageInfo;\nimport android.content.pm.PackageManager.NameNotFoundException;\nimport android.content.pm.ResolveInfo;\nimport android.content.res.AssetManager;\nimport android.content.res.Configuration;\nimport android.content.res.Resources;\nimport android.graphics.drawable.Drawable;\nimport android.util.DisplayMetrics;\n\nimport java.util.Locale;\n\npublic class AppInfo implements Comparable<Object> {\n\n    private Context context;\n    private ResolveInfo resolveInfo;\n    private ComponentName componentName = null;\n    private PackageInfo packageInfo = null;\n    private Drawable icon = null;\n    private String name = null;\n\n    public AppInfo(Context context, ResolveInfo ri) {\n        this.context = context;\n        this.resolveInfo = ri;\n        this.componentName = new ComponentName(ri.activityInfo.applicationInfo.packageName, ri.activityInfo.name);\n        try {\n            packageInfo = context.getPackageManager().getPackageInfo(getPackageName(), 0);\n        } catch (NameNotFoundException e) {\n        }\n    }\n\n    public String getName() {\n        if (name != null) {\n            return name;\n        } else {\n            try {\n                return getNameFromResolveInfo(resolveInfo);\n            } catch (NameNotFoundException e) {\n                return getPackageName();\n            }\n        }\n    }\n\n    public String getActivityName() {\n        return resolveInfo.activityInfo.name;\n    }\n\n    public String getPackageName() {\n        return resolveInfo.activityInfo.packageName;\n    }\n\n    public ComponentName getComponentName() {\n        return componentName;\n    }\n\n    public String getComponentInfo() {\n        if (getComponentName() != null) {\n            return getComponentName().toString();\n        } else {\n            return \"\";\n        }\n    }\n\n    public ResolveInfo getResolveInfo() {\n        return resolveInfo;\n    }\n\n    public PackageInfo getPackageInfo() {\n        return packageInfo;\n    }\n\n    public String getVersionName() {\n        PackageInfo pi = getPackageInfo();\n        if (pi != null) {\n            return pi.versionName;\n        } else {\n            return \"\";\n        }\n    }\n\n    public int getVersionCode() {\n        PackageInfo pi = getPackageInfo();\n        if (pi != null) {\n            return pi.versionCode;\n        } else {\n            return 0;\n        }\n    }\n\n    public Drawable getIcon() {\n        if (icon == null) {\n            icon = getResolveInfo().loadIcon(context.getPackageManager());\n            /*\n            Drawable dr = getResolveInfo().loadIcon(ctx.getPackageManager());\n            Bitmap bitmap = ((BitmapDrawable) dr).getBitmap();\n            icon = new BitmapDrawable(ctx.getResources(), AppHelper.getResizedBitmap(bitmap, 144, 144));\n            */\n        }\n        return icon;\n    }\n\n    @SuppressLint(\"NewApi\")\n    public long getFirstInstallTime() {\n        PackageInfo pi = getPackageInfo();\n        if (pi != null && android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.GINGERBREAD) {\n            return pi.firstInstallTime;\n        } else {\n            return 0;\n        }\n    }\n\n    @SuppressLint(\"NewApi\")\n    public long getLastUpdateTime() {\n        PackageInfo pi = getPackageInfo();\n        if (pi != null && android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.GINGERBREAD) {\n            return pi.lastUpdateTime;\n        } else {\n            return 0;\n        }\n    }\n\n    @Override\n    public int compareTo(Object o) {\n        AppInfo f = (AppInfo) o;\n        return getName().compareTo(f.getName());\n    }\n\n    @Override\n    public String toString() {\n        return getName();\n    }\n\n    /**\n     * Helper method to get an applications name!\n     *\n     * @param ri\n     * @return\n     * @throws NameNotFoundException\n     */\n\n    public String getNameFromResolveInfo(ResolveInfo ri) throws NameNotFoundException {\n        String name = ri.resolvePackageName;\n        if (ri.activityInfo != null) {\n            Resources res = context.getPackageManager().getResourcesForApplication(ri.activityInfo.applicationInfo);\n            Resources engRes = getEnglishRessources(res);\n\n            if (ri.activityInfo.labelRes != 0) {\n                name = engRes.getString(ri.activityInfo.labelRes);\n\n                if (name == null || name.equals(\"\")) {\n                    name = res.getString(ri.activityInfo.labelRes);\n                }\n\n            } else {\n                name = ri.activityInfo.applicationInfo.loadLabel(context.getPackageManager()).toString();\n            }\n        }\n        return name;\n    }\n\n    public Resources getEnglishRessources(Resources standardResources) {\n        AssetManager assets = standardResources.getAssets();\n        DisplayMetrics metrics = standardResources.getDisplayMetrics();\n        Configuration config = new Configuration(standardResources.getConfiguration());\n        config.locale = Locale.US;\n        return new Resources(assets, metrics, config);\n    }\n}\n```\n\n参考博客\n\n[【Android】获取手机中已安装apk文件信息(PackageInfo、ResolveInfo)(应用图片、应用名、包名等)](http://blog.csdn.net/feng88724/article/details/6198446)\n","source":"_posts/AppInfo.md","raw":"title:  Android获取手机已安装apk文件信息\ncategories: [Android]\ntags: [Android]\ndate: 2015-07-29\n---\n\n```java\n  Intent intent = new Intent(Intent.ACTION_MAIN, null);\n  intent.addCategory(Intent.CATEGORY_LAUNCHER);\n  List<AppInfo> applicationList = new ArrayList<>();\n  List<ResolveInfo> resolveInfoList = getPackageManager().queryIntentActivities(intent, 0);\n  for (ResolveInfo resolveInfo : resolveInfoList) {\n  AppInfo appInfo = new AppInfo(MainActivity.this, resolveInfo);\n  PackageInfo packageInfo = appInfo.getPackageInfo();\n  //判断(applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM)的值，\n  // 该值大于0时，表示获取的应用为系统预装的应用，反之则为手动安装的应用\n  if ((packageInfo.applicationInfo.flags & packageInfo.applicationInfo.FLAG_SYSTEM) <= 0) {\n  // customs applications\n  applicationList.add(appInfo);\n   }\n  }\n```\n<!-- more -->\n\n```java\npackage com.wuxiaolong.apksample;\n\nimport android.annotation.SuppressLint;\nimport android.content.ComponentName;\nimport android.content.Context;\nimport android.content.pm.PackageInfo;\nimport android.content.pm.PackageManager.NameNotFoundException;\nimport android.content.pm.ResolveInfo;\nimport android.content.res.AssetManager;\nimport android.content.res.Configuration;\nimport android.content.res.Resources;\nimport android.graphics.drawable.Drawable;\nimport android.util.DisplayMetrics;\n\nimport java.util.Locale;\n\npublic class AppInfo implements Comparable<Object> {\n\n    private Context context;\n    private ResolveInfo resolveInfo;\n    private ComponentName componentName = null;\n    private PackageInfo packageInfo = null;\n    private Drawable icon = null;\n    private String name = null;\n\n    public AppInfo(Context context, ResolveInfo ri) {\n        this.context = context;\n        this.resolveInfo = ri;\n        this.componentName = new ComponentName(ri.activityInfo.applicationInfo.packageName, ri.activityInfo.name);\n        try {\n            packageInfo = context.getPackageManager().getPackageInfo(getPackageName(), 0);\n        } catch (NameNotFoundException e) {\n        }\n    }\n\n    public String getName() {\n        if (name != null) {\n            return name;\n        } else {\n            try {\n                return getNameFromResolveInfo(resolveInfo);\n            } catch (NameNotFoundException e) {\n                return getPackageName();\n            }\n        }\n    }\n\n    public String getActivityName() {\n        return resolveInfo.activityInfo.name;\n    }\n\n    public String getPackageName() {\n        return resolveInfo.activityInfo.packageName;\n    }\n\n    public ComponentName getComponentName() {\n        return componentName;\n    }\n\n    public String getComponentInfo() {\n        if (getComponentName() != null) {\n            return getComponentName().toString();\n        } else {\n            return \"\";\n        }\n    }\n\n    public ResolveInfo getResolveInfo() {\n        return resolveInfo;\n    }\n\n    public PackageInfo getPackageInfo() {\n        return packageInfo;\n    }\n\n    public String getVersionName() {\n        PackageInfo pi = getPackageInfo();\n        if (pi != null) {\n            return pi.versionName;\n        } else {\n            return \"\";\n        }\n    }\n\n    public int getVersionCode() {\n        PackageInfo pi = getPackageInfo();\n        if (pi != null) {\n            return pi.versionCode;\n        } else {\n            return 0;\n        }\n    }\n\n    public Drawable getIcon() {\n        if (icon == null) {\n            icon = getResolveInfo().loadIcon(context.getPackageManager());\n            /*\n            Drawable dr = getResolveInfo().loadIcon(ctx.getPackageManager());\n            Bitmap bitmap = ((BitmapDrawable) dr).getBitmap();\n            icon = new BitmapDrawable(ctx.getResources(), AppHelper.getResizedBitmap(bitmap, 144, 144));\n            */\n        }\n        return icon;\n    }\n\n    @SuppressLint(\"NewApi\")\n    public long getFirstInstallTime() {\n        PackageInfo pi = getPackageInfo();\n        if (pi != null && android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.GINGERBREAD) {\n            return pi.firstInstallTime;\n        } else {\n            return 0;\n        }\n    }\n\n    @SuppressLint(\"NewApi\")\n    public long getLastUpdateTime() {\n        PackageInfo pi = getPackageInfo();\n        if (pi != null && android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.GINGERBREAD) {\n            return pi.lastUpdateTime;\n        } else {\n            return 0;\n        }\n    }\n\n    @Override\n    public int compareTo(Object o) {\n        AppInfo f = (AppInfo) o;\n        return getName().compareTo(f.getName());\n    }\n\n    @Override\n    public String toString() {\n        return getName();\n    }\n\n    /**\n     * Helper method to get an applications name!\n     *\n     * @param ri\n     * @return\n     * @throws NameNotFoundException\n     */\n\n    public String getNameFromResolveInfo(ResolveInfo ri) throws NameNotFoundException {\n        String name = ri.resolvePackageName;\n        if (ri.activityInfo != null) {\n            Resources res = context.getPackageManager().getResourcesForApplication(ri.activityInfo.applicationInfo);\n            Resources engRes = getEnglishRessources(res);\n\n            if (ri.activityInfo.labelRes != 0) {\n                name = engRes.getString(ri.activityInfo.labelRes);\n\n                if (name == null || name.equals(\"\")) {\n                    name = res.getString(ri.activityInfo.labelRes);\n                }\n\n            } else {\n                name = ri.activityInfo.applicationInfo.loadLabel(context.getPackageManager()).toString();\n            }\n        }\n        return name;\n    }\n\n    public Resources getEnglishRessources(Resources standardResources) {\n        AssetManager assets = standardResources.getAssets();\n        DisplayMetrics metrics = standardResources.getDisplayMetrics();\n        Configuration config = new Configuration(standardResources.getConfiguration());\n        config.locale = Locale.US;\n        return new Resources(assets, metrics, config);\n    }\n}\n```\n\n参考博客\n\n[【Android】获取手机中已安装apk文件信息(PackageInfo、ResolveInfo)(应用图片、应用名、包名等)](http://blog.csdn.net/feng88724/article/details/6198446)\n","slug":"AppInfo","published":1,"updated":"2016-03-17T00:44:06.338Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6200eko4pkrhw9cxgd"},{"title":"Android之属性动画Animator","date":"2015-11-23T03:21:35.000Z","_content":"> Android 3.0之前已有动画框架Animation（详见：[Android之视图动画Animation](http://wuxiaolong.me/2015/09/08/ViewAnimation/)），但存在一些局限性，当某个元素发生视图动画后，其响应事件位置还在动画前的地方。于是3.0之后，Google提出了属性动画。\n\n# ObjectAnimator\n```java\nObjectAnimator objectAnimator1 = ObjectAnimator.ofFloat(imageView, \"translationX\", 300);\nobjectAnimator1.setInterpolator(new AccelerateInterpolator());\nobjectAnimator1.setDuration(2000);\nobjectAnimator.setRepeatCount(ValueAnimator.INFINITE);//Animation.INFINITE 表示重复多次\nobjectAnimator.setRepeatMode(ValueAnimator.RESTART);//RESTART表示从头开始，REVERSE表示从末尾倒播\nobjectAnimator1.start();\n```\n第一个参数：操纵的view\n第二个参数：操纵的动画属性值\n第三个参数：可变数组参数\n\n<!--more-->\n\n## 动画属性值\ntranslationX和translationY：增量控制view从它布局容器左上角坐标偏移\n```java\nObjectAnimator.ofFloat(imageView, \"translationX\", 300f);\n```\nrotation、rotationX、rotationY：控制view绕支点进行2D或3D旋转\n```java\nObjectAnimator.ofFloat(imageView, \"rotation\", 360);\n```\nscaleX、scaleY：控制view绕支点进行2D缩放\n```java\nObjectAnimator.ofFloat(imageView, \"scaleX\", 1f, 0.5f，1f);\n```\nalpha：控制view透明度，默认是1（不透明），0完全透明（不可见）\n```java\nObjectAnimator.ofFloat(imageView, \"alpha\", 1f, 0.5f);\n```\nx和y：描述view在容器最终位置\n\n## 可变数组参数\n可以有一个到N个，如果是一个值的话默认这个值是动画过渡值的结束值。如果有N个值，动画就在这N个值之间过渡。\n\n## 动画监听\n```java\n ObjectAnimator objectAnimator1 = ObjectAnimator.ofFloat(imageView, \"alpha\", 0.5f, 1f);\n                objectAnimator1.addListener(new Animator.AnimatorListener() {\n                    @Override\n                    public void onAnimationStart(Animator animation) {\n                        \n                    }\n\n                    @Override\n                    public void onAnimationEnd(Animator animation) {\n\n                    }\n\n                    @Override\n                    public void onAnimationCancel(Animator animation) {\n\n                    }\n\n                    @Override\n                    public void onAnimationRepeat(Animator animation) {\n\n                    }\n                });\n```\n一般我们只关心onAnimationEnd，所以Android提供了AnimatorListenerAdapter：\n```java\n ObjectAnimator objectAnimator1 = ObjectAnimator.ofFloat(imageView, \"alpha\", 0.5f, 1f);\n                objectAnimator1.addListener(new AnimatorListenerAdapter() {\n                    @Override\n                    public void onAnimationEnd(Animator animation) {\n                        super.onAnimationEnd(animation);\n                    }\n                });\n```\n# ValueAnimator \nValueAnimator 本身不提供任何动画效果，像个数值 发生器，用来产生具有一点规律数字。\n```java\nValueAnimator valueAnimator = ValueAnimator.ofInt(0, 100);\n                valueAnimator.setTarget(imageView);\n                valueAnimator.setDuration(2000).start();\n                valueAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {\n                    @Override\n                    public void onAnimationUpdate(ValueAnimator animation) {\n                        Int value = (Integer) animation.getAnimatedValue();\n                        //TODO use the value\n                        Toast.makeText(getApplicationContext(), \"value=\" + value, Toast.LENGTH_LONG).show();\n                    }\n                });\n```\n\n# PropertyValuesHolder\n针对同一个对象多个属性，同时作用多种动画\n```java\nPropertyValuesHolder propertyValuesHolder1 = PropertyValuesHolder.ofFloat(\"translationX\", 300f);\n                PropertyValuesHolder propertyValuesHolder2 = PropertyValuesHolder.ofFloat(\"alpha\", 1f, 0.5f);\n                PropertyValuesHolder propertyValuesHolder3 = PropertyValuesHolder.ofFloat(\"scaleX\", 1f, 0, 1f);\n                PropertyValuesHolder propertyValuesHolder4 = PropertyValuesHolder.ofFloat(\"scaleY\", 1f, 0, 1f);\n                ObjectAnimator.ofPropertyValuesHolder(imageView, propertyValuesHolder1, propertyValuesHolder2, propertyValuesHolder3, propertyValuesHolder4)\n                        .setDuration(5000).start();\n```\n\n# AnimatorSet \n与PropertyValuesHolder类似，但AnimatorSet多了playTogether（同时执行）、playSequentially（顺序执行）、play(objectAnimator1).with(objectAnimator2)、before、after这些方法协同工作。\n```java\nObjectAnimator objectAnimator1 = ObjectAnimator.ofFloat(imageView, \"alpha\", 1f, 0.5f);\n                ObjectAnimator objectAnimator2 = ObjectAnimator.ofFloat(imageView, \"translationY\", 300);\n                ObjectAnimator objectAnimator3 = ObjectAnimator.ofFloat(imageView, \"scaleX\", 1f, 0, 1f);\nAnimatorSet animatorSet = new AnimatorSet();\nanimatorSet.setDuration(5000);\nanimatorSet.playTogether(objectAnimator1, objectAnimator2,objectAnimator3);\nanimatorSet.start();\n```\n\n# xml使用属性动画\nres下建立animator文件夹，然后建立res/animator/set_animator.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<objectAnimator xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:duration=\"2000\"\n    android:propertyName=\"alpha\"\n    android:valueFrom=\"0.1\"\n    android:valueTo=\"1.0\"\n    android:valueType=\"floatType\" />\n```\n调用:\n```java\n Animator animator = AnimatorInflater.loadAnimator(getApplicationContext(), R.animator.set_animator);\nanimator.setTarget(imageView);\nanimator.start();\n```\n动画组合\nset标签，有一个orderring属性设置为together，还有另一个值：sequentially（表示一个接一个执行）。\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<set xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:ordering=\"together\">\n    <objectAnimator\n        android:duration=\"1000\"\n        android:propertyName=\"scaleX\"\n        android:valueFrom=\"1\"\n        android:valueTo=\"0.5\" />\n    <objectAnimator\n        android:duration=\"1000\"\n        android:propertyName=\"scaleY\"\n        android:valueFrom=\"1\"\n        android:valueTo=\"0.5\" />\n</set>\n```\n# View的animate方法\nAndroid 3.0后，谷歌给View增加animate方法直接驱动属性动画。\n```java\n imageView.animate()\n                .alpha(0.5f)\n                .y(300)\n                .setDuration(2000)\n                //api min is 16\n                .withStartAction(new Runnable() {\n                    @Override\n                    public void run() {\n\n                    }\n                })\n                //api min is 16\n                .withEndAction(new Runnable() {\n                    @Override\n                    public void run() {\n\n                    }\n                })\n                .start();\n```\n# 布局动画\n设置子View过渡动画\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:id=\"@+id/parentLayout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"\n    android:padding=\"@dimen/activity_vertical_margin\">\n    <ImageView\n        android:id=\"@+id/imageMove\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:background=\"@mipmap/ic_launcher\" />\n</LinearLayout>\n\n```\n```java\n LinearLayout parentLayout = (LinearLayout) findViewById(R.id.parentLayout);\n        ScaleAnimation scaleAnimation=new ScaleAnimation(0,1,0,1);\n        scaleAnimation.setDuration(2000);\n        LayoutAnimationController layoutAnimationController=new LayoutAnimationController(scaleAnimation,0.5f);\n        layoutAnimationController.setOrder(LayoutAnimationController.ORDER_NORMAL);\n        parentLayout.setLayoutAnimation(layoutAnimationController);\n```\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","source":"_posts/Animator.md","raw":"title: Android之属性动画Animator\ndate: 2015-11-23 11:21:35\ntags: Animator\ncategory: Android\n---\n> Android 3.0之前已有动画框架Animation（详见：[Android之视图动画Animation](http://wuxiaolong.me/2015/09/08/ViewAnimation/)），但存在一些局限性，当某个元素发生视图动画后，其响应事件位置还在动画前的地方。于是3.0之后，Google提出了属性动画。\n\n# ObjectAnimator\n```java\nObjectAnimator objectAnimator1 = ObjectAnimator.ofFloat(imageView, \"translationX\", 300);\nobjectAnimator1.setInterpolator(new AccelerateInterpolator());\nobjectAnimator1.setDuration(2000);\nobjectAnimator.setRepeatCount(ValueAnimator.INFINITE);//Animation.INFINITE 表示重复多次\nobjectAnimator.setRepeatMode(ValueAnimator.RESTART);//RESTART表示从头开始，REVERSE表示从末尾倒播\nobjectAnimator1.start();\n```\n第一个参数：操纵的view\n第二个参数：操纵的动画属性值\n第三个参数：可变数组参数\n\n<!--more-->\n\n## 动画属性值\ntranslationX和translationY：增量控制view从它布局容器左上角坐标偏移\n```java\nObjectAnimator.ofFloat(imageView, \"translationX\", 300f);\n```\nrotation、rotationX、rotationY：控制view绕支点进行2D或3D旋转\n```java\nObjectAnimator.ofFloat(imageView, \"rotation\", 360);\n```\nscaleX、scaleY：控制view绕支点进行2D缩放\n```java\nObjectAnimator.ofFloat(imageView, \"scaleX\", 1f, 0.5f，1f);\n```\nalpha：控制view透明度，默认是1（不透明），0完全透明（不可见）\n```java\nObjectAnimator.ofFloat(imageView, \"alpha\", 1f, 0.5f);\n```\nx和y：描述view在容器最终位置\n\n## 可变数组参数\n可以有一个到N个，如果是一个值的话默认这个值是动画过渡值的结束值。如果有N个值，动画就在这N个值之间过渡。\n\n## 动画监听\n```java\n ObjectAnimator objectAnimator1 = ObjectAnimator.ofFloat(imageView, \"alpha\", 0.5f, 1f);\n                objectAnimator1.addListener(new Animator.AnimatorListener() {\n                    @Override\n                    public void onAnimationStart(Animator animation) {\n                        \n                    }\n\n                    @Override\n                    public void onAnimationEnd(Animator animation) {\n\n                    }\n\n                    @Override\n                    public void onAnimationCancel(Animator animation) {\n\n                    }\n\n                    @Override\n                    public void onAnimationRepeat(Animator animation) {\n\n                    }\n                });\n```\n一般我们只关心onAnimationEnd，所以Android提供了AnimatorListenerAdapter：\n```java\n ObjectAnimator objectAnimator1 = ObjectAnimator.ofFloat(imageView, \"alpha\", 0.5f, 1f);\n                objectAnimator1.addListener(new AnimatorListenerAdapter() {\n                    @Override\n                    public void onAnimationEnd(Animator animation) {\n                        super.onAnimationEnd(animation);\n                    }\n                });\n```\n# ValueAnimator \nValueAnimator 本身不提供任何动画效果，像个数值 发生器，用来产生具有一点规律数字。\n```java\nValueAnimator valueAnimator = ValueAnimator.ofInt(0, 100);\n                valueAnimator.setTarget(imageView);\n                valueAnimator.setDuration(2000).start();\n                valueAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {\n                    @Override\n                    public void onAnimationUpdate(ValueAnimator animation) {\n                        Int value = (Integer) animation.getAnimatedValue();\n                        //TODO use the value\n                        Toast.makeText(getApplicationContext(), \"value=\" + value, Toast.LENGTH_LONG).show();\n                    }\n                });\n```\n\n# PropertyValuesHolder\n针对同一个对象多个属性，同时作用多种动画\n```java\nPropertyValuesHolder propertyValuesHolder1 = PropertyValuesHolder.ofFloat(\"translationX\", 300f);\n                PropertyValuesHolder propertyValuesHolder2 = PropertyValuesHolder.ofFloat(\"alpha\", 1f, 0.5f);\n                PropertyValuesHolder propertyValuesHolder3 = PropertyValuesHolder.ofFloat(\"scaleX\", 1f, 0, 1f);\n                PropertyValuesHolder propertyValuesHolder4 = PropertyValuesHolder.ofFloat(\"scaleY\", 1f, 0, 1f);\n                ObjectAnimator.ofPropertyValuesHolder(imageView, propertyValuesHolder1, propertyValuesHolder2, propertyValuesHolder3, propertyValuesHolder4)\n                        .setDuration(5000).start();\n```\n\n# AnimatorSet \n与PropertyValuesHolder类似，但AnimatorSet多了playTogether（同时执行）、playSequentially（顺序执行）、play(objectAnimator1).with(objectAnimator2)、before、after这些方法协同工作。\n```java\nObjectAnimator objectAnimator1 = ObjectAnimator.ofFloat(imageView, \"alpha\", 1f, 0.5f);\n                ObjectAnimator objectAnimator2 = ObjectAnimator.ofFloat(imageView, \"translationY\", 300);\n                ObjectAnimator objectAnimator3 = ObjectAnimator.ofFloat(imageView, \"scaleX\", 1f, 0, 1f);\nAnimatorSet animatorSet = new AnimatorSet();\nanimatorSet.setDuration(5000);\nanimatorSet.playTogether(objectAnimator1, objectAnimator2,objectAnimator3);\nanimatorSet.start();\n```\n\n# xml使用属性动画\nres下建立animator文件夹，然后建立res/animator/set_animator.xml\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<objectAnimator xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:duration=\"2000\"\n    android:propertyName=\"alpha\"\n    android:valueFrom=\"0.1\"\n    android:valueTo=\"1.0\"\n    android:valueType=\"floatType\" />\n```\n调用:\n```java\n Animator animator = AnimatorInflater.loadAnimator(getApplicationContext(), R.animator.set_animator);\nanimator.setTarget(imageView);\nanimator.start();\n```\n动画组合\nset标签，有一个orderring属性设置为together，还有另一个值：sequentially（表示一个接一个执行）。\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<set xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:ordering=\"together\">\n    <objectAnimator\n        android:duration=\"1000\"\n        android:propertyName=\"scaleX\"\n        android:valueFrom=\"1\"\n        android:valueTo=\"0.5\" />\n    <objectAnimator\n        android:duration=\"1000\"\n        android:propertyName=\"scaleY\"\n        android:valueFrom=\"1\"\n        android:valueTo=\"0.5\" />\n</set>\n```\n# View的animate方法\nAndroid 3.0后，谷歌给View增加animate方法直接驱动属性动画。\n```java\n imageView.animate()\n                .alpha(0.5f)\n                .y(300)\n                .setDuration(2000)\n                //api min is 16\n                .withStartAction(new Runnable() {\n                    @Override\n                    public void run() {\n\n                    }\n                })\n                //api min is 16\n                .withEndAction(new Runnable() {\n                    @Override\n                    public void run() {\n\n                    }\n                })\n                .start();\n```\n# 布局动画\n设置子View过渡动画\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:id=\"@+id/parentLayout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"\n    android:padding=\"@dimen/activity_vertical_margin\">\n    <ImageView\n        android:id=\"@+id/imageMove\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:background=\"@mipmap/ic_launcher\" />\n</LinearLayout>\n\n```\n```java\n LinearLayout parentLayout = (LinearLayout) findViewById(R.id.parentLayout);\n        ScaleAnimation scaleAnimation=new ScaleAnimation(0,1,0,1);\n        scaleAnimation.setDuration(2000);\n        LayoutAnimationController layoutAnimationController=new LayoutAnimationController(scaleAnimation,0.5f);\n        layoutAnimationController.setOrder(LayoutAnimationController.ORDER_NORMAL);\n        parentLayout.setLayoutAnimation(layoutAnimationController);\n```\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","slug":"Animator","published":1,"updated":"2016-03-22T05:33:50.677Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6300eno4pk18ripsyq"},{"title":"AndroidStudio常见错误","date":"2015-07-21T01:26:11.000Z","_content":"> Android Studio导入项目，可能会有各种错误，这里记录我开发遇到的错误及解决方案。供参考。\n\n# org.gradle.api.internal.project.ProjectInternal.getPluginManager\n```java\nrepositories {\n    jcenter()\n}\n\ndependencies {\n    classpath 'com.github.dcendents:android-maven-gradle-plugin:1.3'\n\n    // this was apply plugin android-maven\n    apply plugin: 'com.github.dcendents.android-maven'\n}\n```\n<!--more-->\n## 报错：\nError:(2, 1) A problem occurred evaluating project ':library'.\norg.gradle.api.internal.project.ProjectInternal.getPluginManager()Lorg/gradle/api/internal/plugins/PluginManagerInternal;\n## 解决方案：\n工程文件目录gradle\\wrapper里面找到gradle-wrapper.properties修改里面的值：\n将distributionUrl=https\\://services.gradle.org/distributions/gradle-2.2.1-all.zip改为distributionUrl=https\\://services.gradle.org/distributions/gradle-2.8-all.zip\n\n# Error:Execution failed for task ':app:transformClassesWithDexForDebug'.\n```xml\ncom.android.build.api.transform.TransformException: com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command 'D:\\Program Files\\Java\\jdk1.8.0_45\\bin\\java.exe'' finished with non-zero exit value 2\n```\n\n## 解决方案：\n```xml\nandroid {\n   ...\n   defaultConfig {\n      ...\n      multiDexEnabled true\n   }\n}\n```\n\n报错的意思，jar包重复了，我依赖了项目，我的app也有这个jar。我增加了这行，但是还是报错，于是我删除我的app的jar引用，还是报错了，折腾了一会，把我的app的jar删掉了，终于解决。","source":"_posts/AndroidStudioError.md","raw":"title: AndroidStudio常见错误\ndate: 2015-07-21 09:26:11\ntags: Android Studio\ncategory: Android Studio\n---\n> Android Studio导入项目，可能会有各种错误，这里记录我开发遇到的错误及解决方案。供参考。\n\n# org.gradle.api.internal.project.ProjectInternal.getPluginManager\n```java\nrepositories {\n    jcenter()\n}\n\ndependencies {\n    classpath 'com.github.dcendents:android-maven-gradle-plugin:1.3'\n\n    // this was apply plugin android-maven\n    apply plugin: 'com.github.dcendents.android-maven'\n}\n```\n<!--more-->\n## 报错：\nError:(2, 1) A problem occurred evaluating project ':library'.\norg.gradle.api.internal.project.ProjectInternal.getPluginManager()Lorg/gradle/api/internal/plugins/PluginManagerInternal;\n## 解决方案：\n工程文件目录gradle\\wrapper里面找到gradle-wrapper.properties修改里面的值：\n将distributionUrl=https\\://services.gradle.org/distributions/gradle-2.2.1-all.zip改为distributionUrl=https\\://services.gradle.org/distributions/gradle-2.8-all.zip\n\n# Error:Execution failed for task ':app:transformClassesWithDexForDebug'.\n```xml\ncom.android.build.api.transform.TransformException: com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command 'D:\\Program Files\\Java\\jdk1.8.0_45\\bin\\java.exe'' finished with non-zero exit value 2\n```\n\n## 解决方案：\n```xml\nandroid {\n   ...\n   defaultConfig {\n      ...\n      multiDexEnabled true\n   }\n}\n```\n\n报错的意思，jar包重复了，我依赖了项目，我的app也有这个jar。我增加了这行，但是还是报错，于是我删除我的app的jar引用，还是报错了，折腾了一会，把我的app的jar删掉了，终于解决。","slug":"AndroidStudioError","published":1,"updated":"2016-03-17T00:44:06.337Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6500ero4pkowcd5mi5"},{"title":"Android实战Samples","date":"2014-11-08T16:00:00.000Z","_content":"工作将近三年，早就应该将自己实际开发中遇到的问题整成一个App，虽然论坛（[eoeAndroid](http://www.eoeandroid.com/space-uid-788456.html)、[安卓巴士](http://www.apkbus.com/home.php?mod=space&uid=104974)）已经分享了不少demo，自己也记录一些Android知识点，但是觉得这些还是不够，再次遇到以前的问题，还是会找以前的帖子去看，太不便，决定花点时间，将以前写的demo整到一块，方便自己，方便大家。\n\n源码地址：[https://github.com/WuXiaolong/AndroidSamples](https://github.com/WuXiaolong/AndroidSamples)\n","source":"_posts/AndroidSamples.md","raw":"title: Android实战Samples\ndate: 2014-11-09 \ncategories: [Android]\ntags: [Android]\n---\n工作将近三年，早就应该将自己实际开发中遇到的问题整成一个App，虽然论坛（[eoeAndroid](http://www.eoeandroid.com/space-uid-788456.html)、[安卓巴士](http://www.apkbus.com/home.php?mod=space&uid=104974)）已经分享了不少demo，自己也记录一些Android知识点，但是觉得这些还是不够，再次遇到以前的问题，还是会找以前的帖子去看，太不便，决定花点时间，将以前写的demo整到一块，方便自己，方便大家。\n\n源码地址：[https://github.com/WuXiaolong/AndroidSamples](https://github.com/WuXiaolong/AndroidSamples)\n","slug":"AndroidSamples","published":1,"updated":"2016-03-17T00:44:06.337Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6700euo4pkxkkpwfbu"},{"title":"Android MVP 实例","date":"2015-09-23T08:28:22.000Z","_content":"# Android MVP 实例\n简单的请求天气功能，演示Android MVP是如何使用的\n\n# 效果预览\n![](https://github.com/WuXiaolong/AndroidMVPSample/raw/master/screenshots.png)\n<!--more-->\n\n# 准备\n## MVP流程\n![](http://7q5c2h.com1.z0.glb.clouddn.com/androidmvpsample2.png)\n说明：\n步骤1：UI实现View方法，引用Presenter\n步骤2：Presenter调用Model，走Model具体逻辑\n步骤3：Model逻辑实现，回调Presenter方法\n步骤4：Presenter回调View，即回到UI，回调View方法\n\n## gradle文件\n```java\n compile 'com.loopj.android:android-async-http:1.4.9'\n```\n说明：请求网络使用async-http\n\n## 目录结构\n![](http://7q5c2h.com1.z0.glb.clouddn.com/androidmvpsample3.png)\n\n# MVP之V\n\nMainView.java\n\n```java\n/**\n * Created by WuXiaolong on 2015/9/23.\n * 处理业务需要哪些方法\n */\npublic interface MainView {\n    void showData(MainModelBean mainModelBean);\n\n    void showProgress();\n\n    void hideProgress();\n}\n```\n\nMainActivity\n\n```java\n/**\n * Created by WuXiaolong on 2015/9/23.\n * 由Activity/Fragment实现View里方法，包含一个Presenter的引用\n */\npublic class MainActivity extends AppCompatActivity implements MainView {\n    private ProgressBar mProgressBar;\n    private TextView text;\n    private MainPresenter mMainPresenter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        initView();\n\n    }\n\n    private void initView() {\n        text = (TextView) findViewById(R.id.text);\n        mProgressBar = (ProgressBar) findViewById(R.id.mProgressBar);\n        mMainPresenter = new MainPresenter(this);\n        //制造延迟效果\n        new Handler().postDelayed(new Runnable() {\n            @Override\n            public void run() {\n                mMainPresenter.loadData();\n            }\n        }, 2000);\n\n    }\n\n    @Override\n    protected void onDestroy() {\n        mMainPresenter.detachView();\n        super.onDestroy();\n    }\n\n    @Override\n    public void showData(MainModelBean mainModelBean) {\n        String showData = getResources().getString(R.string.city) + mainModelBean.getCity()\n                + getResources().getString(R.string.wd) + mainModelBean.getWd()\n                + getResources().getString(R.string.ws) + mainModelBean.getWs()\n                + getResources().getString(R.string.time) + mainModelBean.getTime();\n        text.setText(showData);\n    }\n\n\n    @Override\n    public void showProgress() {\n        mProgressBar.setVisibility(View.VISIBLE);\n    }\n\n    @Override\n    public void hideProgress() {\n        mProgressBar.setVisibility(View.GONE);\n    }\n\n\n}\n\n```\n\n# MVP之P\n\nMainPresenter.java \n```java\n/**\n * Created by WuXiaolong on 2015/9/23.\n * View和Model的桥梁，它从Model层检索数据后，返回给View层\n */\npublic class MainPresenter implements Presenter<MainView>, IMainPresenter {\n    private MainView mMainView;\n    private MainModel mMainModel;\n\n    public MainPresenter(MainView view) {\n        attachView(view);\n        mMainModel = new MainModel(this);\n    }\n\n    @Override\n    public void attachView(MainView view) {\n        this.mMainView = view;\n    }\n\n    @Override\n    public void detachView() {\n        this.mMainView = null;\n    }\n\n    public void loadData() {\n        mMainView.showProgress();\n        mMainModel.loadData();\n    }\n\n\n    @Override\n    public void loadDataSuccess(MainModelBean mainModelBean) {\n        mMainView.showData(mainModelBean);\n        mMainView.hideProgress();\n    }\n\n    @Override\n    public void loadDataFailure() {\n        mMainView.hideProgress();\n    }\n}\n\n```\n\nPresenter\n```java\npublic interface Presenter<V> {\n\n    void attachView(V view);\n\n    void detachView();\n\n}\n```\nIMainPresenter\n```java\n/**\n * Created by WuXiaolong on 2015/9/23.\n * 此接口作用是连接Model\n */\npublic interface IMainPresenter {\n    void loadDataSuccess(MainModelBean mainModelBean);\n\n    void loadDataFailure();\n}\n\n```\n# MVP之M\nMainModel \n```java\n/**\n * Created by WuXiaolong on 2015/9/23.\n * 业务具体处理，包括负责存储、检索、操纵数据等\n */\npublic class MainModel {\n    IMainPresenter mIMainPresenter;\n\n    public MainModel(IMainPresenter iMainPresenter) {\n        this.mIMainPresenter = iMainPresenter;\n    }\n\n    public void loadData() {\n        AsyncHttpClient asyncHttpClient = new AsyncHttpClient();\n        asyncHttpClient.get(\"http://www.weather.com.cn/adat/sk/101010100.html\", new JsonHttpResponseHandler() {\n            @Override\n            public void onSuccess(int statusCode, Header[] headers, JSONObject response) {\n                super.onSuccess(statusCode, headers, response);\n                try {\n                    MainModelBean mainModelBean = new MainModelBean();\n                    JSONObject weatherinfo = response.getJSONObject(\"weatherinfo\");\n                    mainModelBean.setCity(weatherinfo.getString(\"city\"));\n                    mainModelBean.setWd(weatherinfo.getString(\"WD\"));\n                    mainModelBean.setWs(weatherinfo.getString(\"WS\"));\n                    mainModelBean.setTime(weatherinfo.getString(\"time\"));\n                    mIMainPresenter.loadDataSuccess(mainModelBean);\n                } catch (JSONException e) {\n                    e.printStackTrace();\n                }\n\n            }\n\n            @Override\n            public void onFailure(int statusCode, Header[] headers, Throwable throwable, JSONObject errorResponse) {\n                super.onFailure(statusCode, headers, throwable, errorResponse);\n                mIMainPresenter.loadDataFailure();\n            }\n        });\n    }\n\n\n}\n```\nMainModelBean\n```java\npublic class MainModelBean {\n    private String city;\n    private String wd;\n    private String ws;\n    private String time;\n    //此处省略get和set方法    \n}\n```\n\n# 源码地址\n[https://github.com/WuXiaolong/AndroidMVPSample](https://github.com/WuXiaolong/AndroidMVPSample)\n\n# 总结\n## MVC模式\n视图（View）：用户界面。\n控制器（Controller）：业务逻辑\n模型（Model）：数据保存\nView 传送指令到 Controller\nController 完成业务逻辑后，要求 Model 改变状态\nModel 将新的数据发送到 View，用户得到反馈\n\n## MVP模式\n使用MVP时，Activity和Fragment变成了MVC模式中View层，Presenter相当于MVC模式中Controller层，处理业务逻辑。每一个Activity都有一个相应的presenter来处理数据进而获取model。\n\n## MVVM模式\n将 Presenter 改名为 ViewModel，基本上与 MVP 模式完全一致。唯一的区别是，它采用双向绑定（data-binding）：View的变动，自动反映在 ViewModel，反之亦然。\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","source":"_posts/AndroidMVPSample.md","raw":"title: Android MVP 实例\ndate: 2015-09-23 16:28:22\ntags: [Android,MVP]\ncategory: Android\n---\n# Android MVP 实例\n简单的请求天气功能，演示Android MVP是如何使用的\n\n# 效果预览\n![](https://github.com/WuXiaolong/AndroidMVPSample/raw/master/screenshots.png)\n<!--more-->\n\n# 准备\n## MVP流程\n![](http://7q5c2h.com1.z0.glb.clouddn.com/androidmvpsample2.png)\n说明：\n步骤1：UI实现View方法，引用Presenter\n步骤2：Presenter调用Model，走Model具体逻辑\n步骤3：Model逻辑实现，回调Presenter方法\n步骤4：Presenter回调View，即回到UI，回调View方法\n\n## gradle文件\n```java\n compile 'com.loopj.android:android-async-http:1.4.9'\n```\n说明：请求网络使用async-http\n\n## 目录结构\n![](http://7q5c2h.com1.z0.glb.clouddn.com/androidmvpsample3.png)\n\n# MVP之V\n\nMainView.java\n\n```java\n/**\n * Created by WuXiaolong on 2015/9/23.\n * 处理业务需要哪些方法\n */\npublic interface MainView {\n    void showData(MainModelBean mainModelBean);\n\n    void showProgress();\n\n    void hideProgress();\n}\n```\n\nMainActivity\n\n```java\n/**\n * Created by WuXiaolong on 2015/9/23.\n * 由Activity/Fragment实现View里方法，包含一个Presenter的引用\n */\npublic class MainActivity extends AppCompatActivity implements MainView {\n    private ProgressBar mProgressBar;\n    private TextView text;\n    private MainPresenter mMainPresenter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        initView();\n\n    }\n\n    private void initView() {\n        text = (TextView) findViewById(R.id.text);\n        mProgressBar = (ProgressBar) findViewById(R.id.mProgressBar);\n        mMainPresenter = new MainPresenter(this);\n        //制造延迟效果\n        new Handler().postDelayed(new Runnable() {\n            @Override\n            public void run() {\n                mMainPresenter.loadData();\n            }\n        }, 2000);\n\n    }\n\n    @Override\n    protected void onDestroy() {\n        mMainPresenter.detachView();\n        super.onDestroy();\n    }\n\n    @Override\n    public void showData(MainModelBean mainModelBean) {\n        String showData = getResources().getString(R.string.city) + mainModelBean.getCity()\n                + getResources().getString(R.string.wd) + mainModelBean.getWd()\n                + getResources().getString(R.string.ws) + mainModelBean.getWs()\n                + getResources().getString(R.string.time) + mainModelBean.getTime();\n        text.setText(showData);\n    }\n\n\n    @Override\n    public void showProgress() {\n        mProgressBar.setVisibility(View.VISIBLE);\n    }\n\n    @Override\n    public void hideProgress() {\n        mProgressBar.setVisibility(View.GONE);\n    }\n\n\n}\n\n```\n\n# MVP之P\n\nMainPresenter.java \n```java\n/**\n * Created by WuXiaolong on 2015/9/23.\n * View和Model的桥梁，它从Model层检索数据后，返回给View层\n */\npublic class MainPresenter implements Presenter<MainView>, IMainPresenter {\n    private MainView mMainView;\n    private MainModel mMainModel;\n\n    public MainPresenter(MainView view) {\n        attachView(view);\n        mMainModel = new MainModel(this);\n    }\n\n    @Override\n    public void attachView(MainView view) {\n        this.mMainView = view;\n    }\n\n    @Override\n    public void detachView() {\n        this.mMainView = null;\n    }\n\n    public void loadData() {\n        mMainView.showProgress();\n        mMainModel.loadData();\n    }\n\n\n    @Override\n    public void loadDataSuccess(MainModelBean mainModelBean) {\n        mMainView.showData(mainModelBean);\n        mMainView.hideProgress();\n    }\n\n    @Override\n    public void loadDataFailure() {\n        mMainView.hideProgress();\n    }\n}\n\n```\n\nPresenter\n```java\npublic interface Presenter<V> {\n\n    void attachView(V view);\n\n    void detachView();\n\n}\n```\nIMainPresenter\n```java\n/**\n * Created by WuXiaolong on 2015/9/23.\n * 此接口作用是连接Model\n */\npublic interface IMainPresenter {\n    void loadDataSuccess(MainModelBean mainModelBean);\n\n    void loadDataFailure();\n}\n\n```\n# MVP之M\nMainModel \n```java\n/**\n * Created by WuXiaolong on 2015/9/23.\n * 业务具体处理，包括负责存储、检索、操纵数据等\n */\npublic class MainModel {\n    IMainPresenter mIMainPresenter;\n\n    public MainModel(IMainPresenter iMainPresenter) {\n        this.mIMainPresenter = iMainPresenter;\n    }\n\n    public void loadData() {\n        AsyncHttpClient asyncHttpClient = new AsyncHttpClient();\n        asyncHttpClient.get(\"http://www.weather.com.cn/adat/sk/101010100.html\", new JsonHttpResponseHandler() {\n            @Override\n            public void onSuccess(int statusCode, Header[] headers, JSONObject response) {\n                super.onSuccess(statusCode, headers, response);\n                try {\n                    MainModelBean mainModelBean = new MainModelBean();\n                    JSONObject weatherinfo = response.getJSONObject(\"weatherinfo\");\n                    mainModelBean.setCity(weatherinfo.getString(\"city\"));\n                    mainModelBean.setWd(weatherinfo.getString(\"WD\"));\n                    mainModelBean.setWs(weatherinfo.getString(\"WS\"));\n                    mainModelBean.setTime(weatherinfo.getString(\"time\"));\n                    mIMainPresenter.loadDataSuccess(mainModelBean);\n                } catch (JSONException e) {\n                    e.printStackTrace();\n                }\n\n            }\n\n            @Override\n            public void onFailure(int statusCode, Header[] headers, Throwable throwable, JSONObject errorResponse) {\n                super.onFailure(statusCode, headers, throwable, errorResponse);\n                mIMainPresenter.loadDataFailure();\n            }\n        });\n    }\n\n\n}\n```\nMainModelBean\n```java\npublic class MainModelBean {\n    private String city;\n    private String wd;\n    private String ws;\n    private String time;\n    //此处省略get和set方法    \n}\n```\n\n# 源码地址\n[https://github.com/WuXiaolong/AndroidMVPSample](https://github.com/WuXiaolong/AndroidMVPSample)\n\n# 总结\n## MVC模式\n视图（View）：用户界面。\n控制器（Controller）：业务逻辑\n模型（Model）：数据保存\nView 传送指令到 Controller\nController 完成业务逻辑后，要求 Model 改变状态\nModel 将新的数据发送到 View，用户得到反馈\n\n## MVP模式\n使用MVP时，Activity和Fragment变成了MVC模式中View层，Presenter相当于MVC模式中Controller层，处理业务逻辑。每一个Activity都有一个相应的presenter来处理数据进而获取model。\n\n## MVVM模式\n将 Presenter 改名为 ViewModel，基本上与 MVP 模式完全一致。唯一的区别是，它采用双向绑定（data-binding）：View的变动，自动反映在 ViewModel，反之亦然。\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)","slug":"AndroidMVPSample","published":1,"updated":"2016-03-22T05:32:51.948Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6900exo4pkr8t8y281"},{"title":"Android开发人员调查","date":"2015-07-23T16:00:00.000Z","_content":"\nAndroid开发人员调查[http://www.wenjuan.com/s/7Jrm2m/](http://www.wenjuan.com/s/7Jrm2m/)\n\n截止发文，共收到208份，数据如下：\n\n<!-- more -->\n# 整体统计\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey1.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey2.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey3.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey4.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey5.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey6.png)\n# 具体数据\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey7.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey8.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey9.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey10.png)\n\n数据越多越有参考价值，快来填填吧！\n\nAndroid开发人员调查[http://www.wenjuan.com/s/7Jrm2m/](http://www.wenjuan.com/s/7Jrm2m/)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n","source":"_posts/AndroidDeveloperSurvey.md","raw":"title: Android开发人员调查\ndate: 2015-07-24\ncategories: Life\ntags: Life\n---\n\nAndroid开发人员调查[http://www.wenjuan.com/s/7Jrm2m/](http://www.wenjuan.com/s/7Jrm2m/)\n\n截止发文，共收到208份，数据如下：\n\n<!-- more -->\n# 整体统计\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey1.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey2.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey3.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey4.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey5.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey6.png)\n# 具体数据\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey7.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey8.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey9.png)\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AndroidDeveloperSurvey10.png)\n\n数据越多越有参考价值，快来填填吧！\n\nAndroid开发人员调查[http://www.wenjuan.com/s/7Jrm2m/](http://www.wenjuan.com/s/7Jrm2m/)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n","slug":"AndroidDeveloperSurvey","published":1,"updated":"2016-03-17T00:44:06.336Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6a00f1o4pkpcb73uzo"},{"title":"Android Studio快捷键设置成跟Eclipse一样","date":"2014-10-20T16:00:00.000Z","_content":"> 刚刚转AS还是各种不适应，尤其是eclipse那些快捷键，到AS基本不一样了，这点让我很是不爽。但是AS可以设置快捷键转成eclipse，这个很人性化，可以帮助使用eclipse快速过渡AS。\n\n1、File->settings\n![](http://wuxiaolong.qiniudn.com/2014-10-21-Android-Studio-shortcut-keys-arranged-like-Eclipse-1.png)\n<!-- more -->\n2、Keymap，设置成Eclipse\n![](http://wuxiaolong.qiniudn.com/2014-10-21-Android-Studio-shortcut-keys-arranged-like-Eclipse-2.png)\n3、设置个别快捷键\n* 注释\nComment with Line Comment =>Ctrl+斜杠，改成Ctrl+Shift+c\n\n* 快捷设置set和get方法\nAlt+insert\n* 自动导包\n![](http://wuxiaolong.qiniudn.com/2014-10-21-Android-Studio-shortcut-keys-arranged-like-Eclipse-3.png)\n\n* 联想 \nClass Name Completion，AS快捷键是Ctrl+Alt+Space（空格键），Eclipse的快捷键Alt+/\n\n* 其他\nctrl+shift+t 找某个类\nalt+选择代码块复制\nctrl+f，可以选中代码块替换\nAlt+Shift+M选择代码块，生成一个方法\nEditor标签-other选择勾选“show quick doc on mouse move”选项，像eclipse通过鼠标显示悬浮提示\nEditor标签下-Code Completion下-Case sensitive completion选择None，当输入代码，不区别大小写也能弹出代码提示\n\n","source":"_posts/Android-Studio-shortcut-keys-arranged-like-Eclipse.md","raw":"title: Android Studio快捷键设置成跟Eclipse一样\ndate: 2014-10-21 \ncategories: Android Studio\ntags: Android Studio\n---\n> 刚刚转AS还是各种不适应，尤其是eclipse那些快捷键，到AS基本不一样了，这点让我很是不爽。但是AS可以设置快捷键转成eclipse，这个很人性化，可以帮助使用eclipse快速过渡AS。\n\n1、File->settings\n![](http://wuxiaolong.qiniudn.com/2014-10-21-Android-Studio-shortcut-keys-arranged-like-Eclipse-1.png)\n<!-- more -->\n2、Keymap，设置成Eclipse\n![](http://wuxiaolong.qiniudn.com/2014-10-21-Android-Studio-shortcut-keys-arranged-like-Eclipse-2.png)\n3、设置个别快捷键\n* 注释\nComment with Line Comment =>Ctrl+斜杠，改成Ctrl+Shift+c\n\n* 快捷设置set和get方法\nAlt+insert\n* 自动导包\n![](http://wuxiaolong.qiniudn.com/2014-10-21-Android-Studio-shortcut-keys-arranged-like-Eclipse-3.png)\n\n* 联想 \nClass Name Completion，AS快捷键是Ctrl+Alt+Space（空格键），Eclipse的快捷键Alt+/\n\n* 其他\nctrl+shift+t 找某个类\nalt+选择代码块复制\nctrl+f，可以选中代码块替换\nAlt+Shift+M选择代码块，生成一个方法\nEditor标签-other选择勾选“show quick doc on mouse move”选项，像eclipse通过鼠标显示悬浮提示\nEditor标签下-Code Completion下-Case sensitive completion选择None，当输入代码，不区别大小写也能弹出代码提示\n\n","slug":"Android-Studio-shortcut-keys-arranged-like-Eclipse","published":1,"updated":"2016-03-17T00:44:06.336Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6c00f4o4pk7qszr40e"},{"title":"Android Studio安装Genymotion插件","date":"2014-10-20T16:00:00.000Z","_content":"1、File->settings\n![](http://wuxiaolong.qiniudn.com/2014-10-21-Android-Studio-Genymotion-1.png)\n2、搜索Plugins，安装Genymotion插件\n<!-- more -->\n![](http://wuxiaolong.qiniudn.com/2014-10-21-Android-Studio-Genymotion-2.png)\n3、settings->设置Genymotion安装路径\n![](http://wuxiaolong.qiniudn.com/2014-10-21-Android-Studio-Genymotion-3.png)\n4、ok，over\n![](http://wuxiaolong.qiniudn.com/2014-10-21-Android-Studio-Genymotion-4.png)","source":"_posts/Android-Studio-Genymotion.md","raw":"title: Android Studio安装Genymotion插件\ndate: 2014-10-21 \ncategories: [Android Studio]\ntags: [Android Studio,Genymotion]\n---\n1、File->settings\n![](http://wuxiaolong.qiniudn.com/2014-10-21-Android-Studio-Genymotion-1.png)\n2、搜索Plugins，安装Genymotion插件\n<!-- more -->\n![](http://wuxiaolong.qiniudn.com/2014-10-21-Android-Studio-Genymotion-2.png)\n3、settings->设置Genymotion安装路径\n![](http://wuxiaolong.qiniudn.com/2014-10-21-Android-Studio-Genymotion-3.png)\n4、ok，over\n![](http://wuxiaolong.qiniudn.com/2014-10-21-Android-Studio-Genymotion-4.png)","slug":"Android-Studio-Genymotion","published":1,"updated":"2016-03-17T00:44:06.336Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6d00f7o4pkp744oxfa"},{"title":"Android调用系统相机和相册","date":"2014-11-09T16:00:00.000Z","_content":"\n> 拍照和相册的功能在实际开发中是最常见的功能，这里记录下。\n\n# 准备工作\n权限\n```java\n<!-- 往SDCard写入数据权限 --> \n<uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /> \n<!--请求访问使用照相设备-->\n<uses-permission android:name=\"android.permission.CAMERA\" /> \n```\n常量\n```java\npublic final static int ALBUM_REQUEST_CODE = 1;\npublic final static int CROP_REQUEST = 2;\npublic final static int CAMERA_REQUEST_CODE = 3;\npublic static String SAVED_IMAGE_DIR_PATH = \nEnvironment.getExternalStorageDirectory().getPath() \n+ \"/AppName/camera/\";// 拍照路径\nString cameraPath;\n```\n#  相机\n\n```java\n// 指定相机拍摄照片保存地址\nString state = Environment.getExternalStorageState();\nif (state.equals(Environment.MEDIA_MOUNTED)) {\n    cameraPath = SAVED_IMAGE_DIR_PATH + System.currentTimeMillis() + \".png\";\n    Intent intent = new Intent();\n    // 指定开启系统相机的Action\n    intent.setAction(MediaStore.ACTION_IMAGE_CAPTURE);\n    String out_file_path = SAVED_IMAGE_DIR_PATH;\n    File dir = new File(out_file_path);\n    if (!dir.exists()) {\n        dir.mkdirs();\n    } // 把文件地址转换成Uri格式\n    Uri uri = Uri.fromFile(new File(cameraPath));\n    // 设置系统相机拍摄照片完成后图片文件的存放地址\n    intent.putExtra(MediaStore.EXTRA_OUTPUT, uri);\n    startActivityForResult(intent, CAMERA_REQUEST_CODE);\n} else {\n    Toast.makeText(getApplicationContext(), \"请确认已经插入SD卡\",\n            Toast.LENGTH_LONG).show();\n}\n```\nonActivityResult\n拿到cameraPath，就随便你搞了。\n```\n@Override\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    if (resultCode == Activity.RESULT_OK) {\n        if (requestCode == CAMERA_REQUEST_CODE) {\n            LogUtil.d(\"path=\" + cameraPath);\n        }\n }\n```\n不需要自定义路径，默认为Environment.DIRECTORY_PICTURES\n```java\n /**\n     * 启动相机\n     */\n    public static String startCamera(Activity activity, int requestCode) {\n        // 指定相机拍摄照片保存地址\n        String state = Environment.getExternalStorageState();\n        if (state.equals(Environment.MEDIA_MOUNTED)) {\n            Intent intent = new Intent();\n            // 指定开启系统相机的Action\n            intent.setAction(MediaStore.ACTION_IMAGE_CAPTURE);\n            File outDir = Environment\n\t\t\t.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n            if (!outDir.exists()) {\n                outDir.mkdirs();\n            }\n            File outFile = new File(outDir, System.currentTimeMillis() + \".jpg\");\n            // 把文件地址转换成Uri格式\n            Uri uri = Uri.fromFile(outFile);\n            LogUtil.d(\"getAbsolutePath=\" + outFile.getAbsolutePath());\n            // 设置系统相机拍摄照片完成后图片文件的存放地址\n            intent.putExtra(MediaStore.EXTRA_OUTPUT, uri);\n            // 此值在最低质量最小文件尺寸时是0，在最高质量最大文件尺寸时是１\n            intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 0);\n            activity.startActivityForResult(intent, requestCode);\n            return outFile.getAbsolutePath();\n        } else {\n            Toast.makeText(activity, \"请确认已经插入SD卡\",\n                    Toast.LENGTH_LONG).show();\n            return null;\n        }\n\n    }\n```\n# 相册\n\n```java\nIntent intent = new Intent(Intent.ACTION_PICK, null);\nintent.setDataAndType(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, \"image/*\");\nintent.setAction(Intent.ACTION_GET_CONTENT);\nstartActivityForResult(intent, ALBUM_REQUEST_CODE);\n```\nonActivityResult\n调用系统相册，然后通过Uri拿到图片的绝对地址。\n```java\n @Override\n public void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        if (resultCode == Activity.RESULT_OK) {\n            if (requestCode == AppConstants.ALBUM_REQUEST_CODE) {\n                try {\n                    Uri uri = data.getData();\n                    final String absolutePath= getAbsolutePath(mActivity, uri);\n                    LogUtil.d(\"path=\" + absolutePath);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n\n        }\n    }\n```\ngetAbsolutePath方法\n```java\n public String getAbsolutePath(final Context context, final Uri uri) {\n     if (null == uri) return null;\n     final String scheme = uri.getScheme();\n     String data = null;\n     if (scheme == null)\n         data = uri.getPath();\n     else if (ContentResolver.SCHEME_FILE.equals(scheme)) {\n         data = uri.getPath();\n     } else if (ContentResolver.SCHEME_CONTENT.equals(scheme)) {\n         Cursor cursor = context.getContentResolver().query(uri, \n\t\t new String[]{MediaStore.Images.ImageColumns.DATA}, null, null, null);\n         if (null != cursor) {\n             if (cursor.moveToFirst()) {\n                 int index = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA);\n                 if (index > -1) {\n                     data = cursor.getString(index);\n                 }\n             }\n             cursor.close();\n         }\n     }\n     return data;\n }\n```\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n","source":"_posts/Android-Photograph_Album.md","raw":"title: Android调用系统相机和相册\ndate: 2014-11-10 \ncategories: [Android]\ntags: [Camera，Album]\n---\n\n> 拍照和相册的功能在实际开发中是最常见的功能，这里记录下。\n\n# 准备工作\n权限\n```java\n<!-- 往SDCard写入数据权限 --> \n<uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /> \n<!--请求访问使用照相设备-->\n<uses-permission android:name=\"android.permission.CAMERA\" /> \n```\n常量\n```java\npublic final static int ALBUM_REQUEST_CODE = 1;\npublic final static int CROP_REQUEST = 2;\npublic final static int CAMERA_REQUEST_CODE = 3;\npublic static String SAVED_IMAGE_DIR_PATH = \nEnvironment.getExternalStorageDirectory().getPath() \n+ \"/AppName/camera/\";// 拍照路径\nString cameraPath;\n```\n#  相机\n\n```java\n// 指定相机拍摄照片保存地址\nString state = Environment.getExternalStorageState();\nif (state.equals(Environment.MEDIA_MOUNTED)) {\n    cameraPath = SAVED_IMAGE_DIR_PATH + System.currentTimeMillis() + \".png\";\n    Intent intent = new Intent();\n    // 指定开启系统相机的Action\n    intent.setAction(MediaStore.ACTION_IMAGE_CAPTURE);\n    String out_file_path = SAVED_IMAGE_DIR_PATH;\n    File dir = new File(out_file_path);\n    if (!dir.exists()) {\n        dir.mkdirs();\n    } // 把文件地址转换成Uri格式\n    Uri uri = Uri.fromFile(new File(cameraPath));\n    // 设置系统相机拍摄照片完成后图片文件的存放地址\n    intent.putExtra(MediaStore.EXTRA_OUTPUT, uri);\n    startActivityForResult(intent, CAMERA_REQUEST_CODE);\n} else {\n    Toast.makeText(getApplicationContext(), \"请确认已经插入SD卡\",\n            Toast.LENGTH_LONG).show();\n}\n```\nonActivityResult\n拿到cameraPath，就随便你搞了。\n```\n@Override\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    if (resultCode == Activity.RESULT_OK) {\n        if (requestCode == CAMERA_REQUEST_CODE) {\n            LogUtil.d(\"path=\" + cameraPath);\n        }\n }\n```\n不需要自定义路径，默认为Environment.DIRECTORY_PICTURES\n```java\n /**\n     * 启动相机\n     */\n    public static String startCamera(Activity activity, int requestCode) {\n        // 指定相机拍摄照片保存地址\n        String state = Environment.getExternalStorageState();\n        if (state.equals(Environment.MEDIA_MOUNTED)) {\n            Intent intent = new Intent();\n            // 指定开启系统相机的Action\n            intent.setAction(MediaStore.ACTION_IMAGE_CAPTURE);\n            File outDir = Environment\n\t\t\t.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n            if (!outDir.exists()) {\n                outDir.mkdirs();\n            }\n            File outFile = new File(outDir, System.currentTimeMillis() + \".jpg\");\n            // 把文件地址转换成Uri格式\n            Uri uri = Uri.fromFile(outFile);\n            LogUtil.d(\"getAbsolutePath=\" + outFile.getAbsolutePath());\n            // 设置系统相机拍摄照片完成后图片文件的存放地址\n            intent.putExtra(MediaStore.EXTRA_OUTPUT, uri);\n            // 此值在最低质量最小文件尺寸时是0，在最高质量最大文件尺寸时是１\n            intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 0);\n            activity.startActivityForResult(intent, requestCode);\n            return outFile.getAbsolutePath();\n        } else {\n            Toast.makeText(activity, \"请确认已经插入SD卡\",\n                    Toast.LENGTH_LONG).show();\n            return null;\n        }\n\n    }\n```\n# 相册\n\n```java\nIntent intent = new Intent(Intent.ACTION_PICK, null);\nintent.setDataAndType(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, \"image/*\");\nintent.setAction(Intent.ACTION_GET_CONTENT);\nstartActivityForResult(intent, ALBUM_REQUEST_CODE);\n```\nonActivityResult\n调用系统相册，然后通过Uri拿到图片的绝对地址。\n```java\n @Override\n public void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        if (resultCode == Activity.RESULT_OK) {\n            if (requestCode == AppConstants.ALBUM_REQUEST_CODE) {\n                try {\n                    Uri uri = data.getData();\n                    final String absolutePath= getAbsolutePath(mActivity, uri);\n                    LogUtil.d(\"path=\" + absolutePath);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n\n        }\n    }\n```\ngetAbsolutePath方法\n```java\n public String getAbsolutePath(final Context context, final Uri uri) {\n     if (null == uri) return null;\n     final String scheme = uri.getScheme();\n     String data = null;\n     if (scheme == null)\n         data = uri.getPath();\n     else if (ContentResolver.SCHEME_FILE.equals(scheme)) {\n         data = uri.getPath();\n     } else if (ContentResolver.SCHEME_CONTENT.equals(scheme)) {\n         Cursor cursor = context.getContentResolver().query(uri, \n\t\t new String[]{MediaStore.Images.ImageColumns.DATA}, null, null, null);\n         if (null != cursor) {\n             if (cursor.moveToFirst()) {\n                 int index = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA);\n                 if (index > -1) {\n                     data = cursor.getString(index);\n                 }\n             }\n             cursor.close();\n         }\n     }\n     return data;\n }\n```\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n","slug":"Android-Photograph_Album","published":1,"updated":"2016-06-03T09:02:12.660Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6f00fbo4pk18rotpvz"},{"title":"Android调用系统相机和相册-填坑篇","date":"2016-05-24T00:56:59.000Z","_content":"\n> 之前分享了[Android调用系统相机和相册](http://wuxiaolong.me/2014/11/10/Android-Photograph_Album/)，但是由于国内Android机型繁多，各家都自己的rom，调用系统的还是会出现不少问题：\n\n# 拍照后照片被旋转\n这种情况是使用Camera拍照以后，得到的照片会被自动旋转（90°、180°、270°）。解决方案：\n\n1、读取图片的旋转属性\n<!--more-->\n```java \n/**\n * 读取图片的旋转的角度\n *\n * @param path\n *            图片绝对路径\n * @return 图片的旋转角度\n */\nprivate int getBitmapDegree(String path) {\n    int degree = 0;\n    try {\n        // 从指定路径下读取图片，并获取其EXIF信息\n        ExifInterface exifInterface = new ExifInterface(path);\n        // 获取图片的旋转信息\n        int orientation = exifInterface.getAttributeInt(ExifInterface.TAG_ORIENTATION,\n                ExifInterface.ORIENTATION_NORMAL);\n        switch (orientation) {\n        case ExifInterface.ORIENTATION_ROTATE_90:\n            degree = 90;\n            break;\n        case ExifInterface.ORIENTATION_ROTATE_180:\n            degree = 180;\n            break;\n        case ExifInterface.ORIENTATION_ROTATE_270:\n            degree = 270;\n            break;\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return degree;\n}\n```\n2、将图片按照某个角度进行旋转\n```java\n/**\n * 将图片按照某个角度进行旋转\n *\n * @param bm\n *            需要旋转的图片\n * @param degree\n *            旋转角度\n * @return 旋转后的图片\n */\n\npublic static Bitmap rotateBitmapByDegree(Bitmap bm, int degree) {\n    Bitmap returnBm = null;\n  \n    // 根据旋转角度，生成旋转矩阵\n    Matrix matrix = new Matrix();\n    matrix.postRotate(degree);\n    try {\n        // 将原始图片按照旋转矩阵进行旋转，并得到新的图片\n        returnBm = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(), bm.getHeight(), matrix, true);\n    } catch (OutOfMemoryError e) {\n    }\n    if (returnBm == null) {\n        returnBm = bm;\n    }\n    if (bm != returnBm) {\n        bm.recycle();\n    }\n    return returnBm;\n}\n```\n详见博客：https://www.baidufe.com/item/4bb733d9999c53cb8fed.html\n\n# 调用系统相册，拿不到绝对路径\n上篇的方法，我在大部分手机测试是可行，但是一些机型还是拿不到，解决方案：\n```java\npublic class AbsolutePathUtil {\n    public static String getAbsolutePath(final Context context, final Uri uri) {\n        // DocumentProvider\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT && DocumentsContract.isDocumentUri(context, uri)) {\n            // ExternalStorageProvider\n            if (isExternalStorageDocument(uri)) {\n                final String docId = DocumentsContract.getDocumentId(uri);\n                final String[] split = docId.split(\":\");\n                final String type = split[0];\n\n                if (\"primary\".equalsIgnoreCase(type)) {\n                    return Environment.getExternalStorageDirectory() + \"/\" + split[1];\n                }\n\n                // TODO handle non-primary volumes\n            }\n            // DownloadsProvider\n            else if (isDownloadsDocument(uri)) {\n\n                final String id = DocumentsContract.getDocumentId(uri);\n                final Uri contentUri = ContentUris.withAppendedId(\n                        Uri.parse(\"content://downloads/public_downloads\"), Long.valueOf(id));\n\n                return getDataColumn(context, contentUri, null, null);\n            }\n            // MediaProvider\n            else if (isMediaDocument(uri)) {\n                final String docId = DocumentsContract.getDocumentId(uri);\n                final String[] split = docId.split(\":\");\n                final String type = split[0];\n\n                Uri contentUri = null;\n                if (\"image\".equals(type)) {\n                    contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;\n                } else if (\"video\".equals(type)) {\n                    contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\n                } else if (\"audio\".equals(type)) {\n                    contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;\n                }\n\n                final String selection = \"_id=?\";\n                final String[] selectionArgs = new String[]{\n                        split[1]\n                };\n\n                return getDataColumn(context, contentUri, selection, selectionArgs);\n            }\n        }\n        // MediaStore (and general)\n        else if (\"content\".equalsIgnoreCase(uri.getScheme())) {\n            return getDataColumn(context, uri, null, null);\n        }\n        // File\n        else if (\"file\".equalsIgnoreCase(uri.getScheme())) {\n            return uri.getPath();\n        }\n\n        return null;\n    }\n\n    /**\n     * Get the value of the data column for this Uri. This is useful for\n     * MediaStore Uris, and other file-based ContentProviders.\n     *\n     * @param context       The context.\n     * @param uri           The Uri to query.\n     * @param selection     (Optional) Filter used in the query.\n     * @param selectionArgs (Optional) Selection arguments used in the query.\n     * @return The value of the _data column, which is typically a file path.\n     */\n    public static String getDataColumn(Context context, Uri uri, String selection, String[] selectionArgs) {\n\n        Cursor cursor = null;\n        final String column = \"_data\";\n        final String[] projection = {\n                column\n        };\n\n        try {\n            cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs,\n                    null);\n            if (cursor != null && cursor.moveToFirst()) {\n                final int column_index = cursor.getColumnIndexOrThrow(column);\n                return cursor.getString(column_index);\n            }\n        } finally {\n            if (cursor != null)\n                cursor.close();\n        }\n        return null;\n    }\n\n\n    /**\n     * @param uri The Uri to check.\n     * @return Whether the Uri authority is ExternalStorageProvider.\n     */\n    public static boolean isExternalStorageDocument(Uri uri) {\n        return \"com.android.externalstorage.documents\".equals(uri.getAuthority());\n    }\n\n    /**\n     * @param uri The Uri to check.\n     * @return Whether the Uri authority is DownloadsProvider.\n     */\n    public static boolean isDownloadsDocument(Uri uri) {\n        return \"com.android.providers.downloads.documents\".equals(uri.getAuthority());\n    }\n\n    /**\n     * @param uri The Uri to check.\n     * @return Whether the Uri authority is MediaProvider.\n     */\n    public static boolean isMediaDocument(Uri uri) {\n        return \"com.android.providers.media.documents\".equals(uri.getAuthority());\n    }\n}\n```\n详见stackoverflow：http://stackoverflow.com/questions/13209494/how-to-get-the-full-file-path-from-uri\n\n# 裁剪\n拿到图片的绝对路径，有可能需要对它进行裁剪，这里当然也可以调用系统的裁剪，不过我推荐UCrop，功能好强大，简单的使用方法：\n```java\n/**\n * 启动裁剪\n */\npublic static String startUCrop(Activity activity, String sourceFilePath, int requestCode, float aspectRatioX, float aspectRatioY) {\n    Uri sourceUri = Uri.fromFile(new File(sourceFilePath));\n    File outDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n    if (!outDir.exists()) {\n        outDir.mkdirs();\n    }\n    File outFile = new File(outDir, System.currentTimeMillis() + \".jpg\");\n    String cameraScalePath = outFile.getAbsolutePath();\n    Uri destinationUri = Uri.fromFile(outFile);\n    UCrop uCrop = UCrop.of(sourceUri, destinationUri);\n    UCrop.Options options = new UCrop.Options();\n    options.setAllowedGestures(UCropActivity.SCALE, UCropActivity.ROTATE, UCropActivity.ALL);\n    options.setHideBottomControls(true);\n    options.setFreeStyleCropEnabled(true);\n    uCrop.withOptions(options);\n    uCrop.withAspectRatio(aspectRatioX, aspectRatioY);\n    uCrop.start(activity, requestCode);\n    return cameraScalePath;\n}\n```\n详见github：https://github.com/Yalantis/uCrop\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n","source":"_posts/Android-Photograph-Album2.md","raw":"title: Android调用系统相机和相册-填坑篇\ndate: 2016-05-24 08:56:59\ncategories: [Android]\ntags: [Camera，Album]\n---\n\n> 之前分享了[Android调用系统相机和相册](http://wuxiaolong.me/2014/11/10/Android-Photograph_Album/)，但是由于国内Android机型繁多，各家都自己的rom，调用系统的还是会出现不少问题：\n\n# 拍照后照片被旋转\n这种情况是使用Camera拍照以后，得到的照片会被自动旋转（90°、180°、270°）。解决方案：\n\n1、读取图片的旋转属性\n<!--more-->\n```java \n/**\n * 读取图片的旋转的角度\n *\n * @param path\n *            图片绝对路径\n * @return 图片的旋转角度\n */\nprivate int getBitmapDegree(String path) {\n    int degree = 0;\n    try {\n        // 从指定路径下读取图片，并获取其EXIF信息\n        ExifInterface exifInterface = new ExifInterface(path);\n        // 获取图片的旋转信息\n        int orientation = exifInterface.getAttributeInt(ExifInterface.TAG_ORIENTATION,\n                ExifInterface.ORIENTATION_NORMAL);\n        switch (orientation) {\n        case ExifInterface.ORIENTATION_ROTATE_90:\n            degree = 90;\n            break;\n        case ExifInterface.ORIENTATION_ROTATE_180:\n            degree = 180;\n            break;\n        case ExifInterface.ORIENTATION_ROTATE_270:\n            degree = 270;\n            break;\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return degree;\n}\n```\n2、将图片按照某个角度进行旋转\n```java\n/**\n * 将图片按照某个角度进行旋转\n *\n * @param bm\n *            需要旋转的图片\n * @param degree\n *            旋转角度\n * @return 旋转后的图片\n */\n\npublic static Bitmap rotateBitmapByDegree(Bitmap bm, int degree) {\n    Bitmap returnBm = null;\n  \n    // 根据旋转角度，生成旋转矩阵\n    Matrix matrix = new Matrix();\n    matrix.postRotate(degree);\n    try {\n        // 将原始图片按照旋转矩阵进行旋转，并得到新的图片\n        returnBm = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(), bm.getHeight(), matrix, true);\n    } catch (OutOfMemoryError e) {\n    }\n    if (returnBm == null) {\n        returnBm = bm;\n    }\n    if (bm != returnBm) {\n        bm.recycle();\n    }\n    return returnBm;\n}\n```\n详见博客：https://www.baidufe.com/item/4bb733d9999c53cb8fed.html\n\n# 调用系统相册，拿不到绝对路径\n上篇的方法，我在大部分手机测试是可行，但是一些机型还是拿不到，解决方案：\n```java\npublic class AbsolutePathUtil {\n    public static String getAbsolutePath(final Context context, final Uri uri) {\n        // DocumentProvider\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT && DocumentsContract.isDocumentUri(context, uri)) {\n            // ExternalStorageProvider\n            if (isExternalStorageDocument(uri)) {\n                final String docId = DocumentsContract.getDocumentId(uri);\n                final String[] split = docId.split(\":\");\n                final String type = split[0];\n\n                if (\"primary\".equalsIgnoreCase(type)) {\n                    return Environment.getExternalStorageDirectory() + \"/\" + split[1];\n                }\n\n                // TODO handle non-primary volumes\n            }\n            // DownloadsProvider\n            else if (isDownloadsDocument(uri)) {\n\n                final String id = DocumentsContract.getDocumentId(uri);\n                final Uri contentUri = ContentUris.withAppendedId(\n                        Uri.parse(\"content://downloads/public_downloads\"), Long.valueOf(id));\n\n                return getDataColumn(context, contentUri, null, null);\n            }\n            // MediaProvider\n            else if (isMediaDocument(uri)) {\n                final String docId = DocumentsContract.getDocumentId(uri);\n                final String[] split = docId.split(\":\");\n                final String type = split[0];\n\n                Uri contentUri = null;\n                if (\"image\".equals(type)) {\n                    contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;\n                } else if (\"video\".equals(type)) {\n                    contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\n                } else if (\"audio\".equals(type)) {\n                    contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;\n                }\n\n                final String selection = \"_id=?\";\n                final String[] selectionArgs = new String[]{\n                        split[1]\n                };\n\n                return getDataColumn(context, contentUri, selection, selectionArgs);\n            }\n        }\n        // MediaStore (and general)\n        else if (\"content\".equalsIgnoreCase(uri.getScheme())) {\n            return getDataColumn(context, uri, null, null);\n        }\n        // File\n        else if (\"file\".equalsIgnoreCase(uri.getScheme())) {\n            return uri.getPath();\n        }\n\n        return null;\n    }\n\n    /**\n     * Get the value of the data column for this Uri. This is useful for\n     * MediaStore Uris, and other file-based ContentProviders.\n     *\n     * @param context       The context.\n     * @param uri           The Uri to query.\n     * @param selection     (Optional) Filter used in the query.\n     * @param selectionArgs (Optional) Selection arguments used in the query.\n     * @return The value of the _data column, which is typically a file path.\n     */\n    public static String getDataColumn(Context context, Uri uri, String selection, String[] selectionArgs) {\n\n        Cursor cursor = null;\n        final String column = \"_data\";\n        final String[] projection = {\n                column\n        };\n\n        try {\n            cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs,\n                    null);\n            if (cursor != null && cursor.moveToFirst()) {\n                final int column_index = cursor.getColumnIndexOrThrow(column);\n                return cursor.getString(column_index);\n            }\n        } finally {\n            if (cursor != null)\n                cursor.close();\n        }\n        return null;\n    }\n\n\n    /**\n     * @param uri The Uri to check.\n     * @return Whether the Uri authority is ExternalStorageProvider.\n     */\n    public static boolean isExternalStorageDocument(Uri uri) {\n        return \"com.android.externalstorage.documents\".equals(uri.getAuthority());\n    }\n\n    /**\n     * @param uri The Uri to check.\n     * @return Whether the Uri authority is DownloadsProvider.\n     */\n    public static boolean isDownloadsDocument(Uri uri) {\n        return \"com.android.providers.downloads.documents\".equals(uri.getAuthority());\n    }\n\n    /**\n     * @param uri The Uri to check.\n     * @return Whether the Uri authority is MediaProvider.\n     */\n    public static boolean isMediaDocument(Uri uri) {\n        return \"com.android.providers.media.documents\".equals(uri.getAuthority());\n    }\n}\n```\n详见stackoverflow：http://stackoverflow.com/questions/13209494/how-to-get-the-full-file-path-from-uri\n\n# 裁剪\n拿到图片的绝对路径，有可能需要对它进行裁剪，这里当然也可以调用系统的裁剪，不过我推荐UCrop，功能好强大，简单的使用方法：\n```java\n/**\n * 启动裁剪\n */\npublic static String startUCrop(Activity activity, String sourceFilePath, int requestCode, float aspectRatioX, float aspectRatioY) {\n    Uri sourceUri = Uri.fromFile(new File(sourceFilePath));\n    File outDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n    if (!outDir.exists()) {\n        outDir.mkdirs();\n    }\n    File outFile = new File(outDir, System.currentTimeMillis() + \".jpg\");\n    String cameraScalePath = outFile.getAbsolutePath();\n    Uri destinationUri = Uri.fromFile(outFile);\n    UCrop uCrop = UCrop.of(sourceUri, destinationUri);\n    UCrop.Options options = new UCrop.Options();\n    options.setAllowedGestures(UCropActivity.SCALE, UCropActivity.ROTATE, UCropActivity.ALL);\n    options.setHideBottomControls(true);\n    options.setFreeStyleCropEnabled(true);\n    uCrop.withOptions(options);\n    uCrop.withAspectRatio(aspectRatioX, aspectRatioY);\n    uCrop.start(activity, requestCode);\n    return cameraScalePath;\n}\n```\n详见github：https://github.com/Yalantis/uCrop\n\n# AndroidProgrammer\n我的微信公众号：Android高手进阶之路，让我们共同学习，每天进步一点点。欢迎微信扫一扫关注。\n![](http://7q5c2h.com1.z0.glb.clouddn.com/qrcode_AndroidProgrammer.jpg)\n\n# 关于作者\n[点击查看](http://wuxiaolong.me/about/)\n","slug":"Android-Photograph-Album2","published":1,"updated":"2016-06-03T09:02:12.660Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6i00ffo4pkuf9133nu"},{"title":"github之Android-Iconics使用","date":"2015-07-28T16:00:00.000Z","_content":"源码地址：[https://github.com/mikepenz/Android-Iconics](https://github.com/mikepenz/Android-Iconics)\n\n* build.gradle添加\n\n```java\ndependencies {\n    compile 'com.mikepenz:iconics:1.3.0@aar'\n}\n```\n<!-- more -->\n\n* 作为Drawable使用\n\n```java\nImageView image = (ImageView) findViewById(R.id.image);\nimage.setImageDrawable(new IconicsDrawable(this, FontAwesome.Icon.faw_android).color(Color.RED).sizeDp(24));\n```\n\n* 作为MenuItem使用\n\n```java\nMenuItem menuItem = menu.findItem(R.id.action_opensource);\nmenuItem.setIcon(new IconicsDrawable(this, FontAwesome.Icon.faw_github).actionBar().color(Color.WHITE));\n```\n\n* xml使用\n\n```js\n <com.mikepenz.iconics.view.IconicsImageView\n        android:id=\"@+id/icon\"\n        android:layout_width=\"48dp\"\n        android:layout_height=\"48dp\"\n        android:clickable=\"false\"\n        android:padding=\"8dp\"\n        android:scaleType=\"fitXY\"\n        app:iiv_color=\"@android:color/holo_green_dark\"\n        app:iiv_icon=\"faw_adjust\" />\n```\n\n```java\n IconicsImageView icon = (IconicsImageView) findViewById(R.id.icon);\n  List<String> icons = new ArrayList<String>();\n                        for (ITypeface font : Iconics.getRegisteredFonts()) {\n                            Log.d(\"wxl\", \"FontName=\" + font.getFontName());\n                            if (font.getFontName().equalsIgnoreCase(\"FontAwesome\")) {\n                                for (String icon : font.getIcons()) {\n                                    Log.d(\"wxl\", \"getIcons=\" + icon);\n                                    icons.add(icon);\n                                }\n                            }\n                        }\n  icon.setIcon(icons.get(0));\n  \n```\n","source":"_posts/Android-Iconics.md","raw":"title: github之Android-Iconics使用\ndate: 2015-07-29 \ncategories: [github]\ntags: [Android,Iconics,github]\n---\n源码地址：[https://github.com/mikepenz/Android-Iconics](https://github.com/mikepenz/Android-Iconics)\n\n* build.gradle添加\n\n```java\ndependencies {\n    compile 'com.mikepenz:iconics:1.3.0@aar'\n}\n```\n<!-- more -->\n\n* 作为Drawable使用\n\n```java\nImageView image = (ImageView) findViewById(R.id.image);\nimage.setImageDrawable(new IconicsDrawable(this, FontAwesome.Icon.faw_android).color(Color.RED).sizeDp(24));\n```\n\n* 作为MenuItem使用\n\n```java\nMenuItem menuItem = menu.findItem(R.id.action_opensource);\nmenuItem.setIcon(new IconicsDrawable(this, FontAwesome.Icon.faw_github).actionBar().color(Color.WHITE));\n```\n\n* xml使用\n\n```js\n <com.mikepenz.iconics.view.IconicsImageView\n        android:id=\"@+id/icon\"\n        android:layout_width=\"48dp\"\n        android:layout_height=\"48dp\"\n        android:clickable=\"false\"\n        android:padding=\"8dp\"\n        android:scaleType=\"fitXY\"\n        app:iiv_color=\"@android:color/holo_green_dark\"\n        app:iiv_icon=\"faw_adjust\" />\n```\n\n```java\n IconicsImageView icon = (IconicsImageView) findViewById(R.id.icon);\n  List<String> icons = new ArrayList<String>();\n                        for (ITypeface font : Iconics.getRegisteredFonts()) {\n                            Log.d(\"wxl\", \"FontName=\" + font.getFontName());\n                            if (font.getFontName().equalsIgnoreCase(\"FontAwesome\")) {\n                                for (String icon : font.getIcons()) {\n                                    Log.d(\"wxl\", \"getIcons=\" + icon);\n                                    icons.add(icon);\n                                }\n                            }\n                        }\n  icon.setIcon(icons.get(0));\n  \n```\n","slug":"Android-Iconics","published":1,"updated":"2016-03-17T00:44:06.335Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6k00fio4pknm4u5nzr"},{"title":"广告基金","date":"2015-05-11T16:00:00.000Z","_content":"\n> 我很想买mac，但是暂时经济紧张，于是心里想，今年我的广告费什么时候攒够了，就买。求赞助，求包养T_T\n\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AdFund1.png)\n![收益截图](http://7q5c2h.com1.z0.glb.clouddn.com/AdFund2.png)\n\n广告总收益：22563.65+1933.53=24497.18（另外还有芒果聚合、点乐积分、多盟，都太少了，这里不计）","source":"_posts/AdFund.md","raw":"title: 广告基金\ndate: 2015-05-12\ncategories: [Life]\ntags: AD\n---\n\n> 我很想买mac，但是暂时经济紧张，于是心里想，今年我的广告费什么时候攒够了，就买。求赞助，求包养T_T\n\n![](http://7q5c2h.com1.z0.glb.clouddn.com/AdFund1.png)\n![收益截图](http://7q5c2h.com1.z0.glb.clouddn.com/AdFund2.png)\n\n广告总收益：22563.65+1933.53=24497.18（另外还有芒果聚合、点乐积分、多盟，都太少了，这里不计）","slug":"AdFund","published":1,"updated":"2016-03-17T00:44:06.335Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6n00foo4pknlzt48z6"},{"title":"Activity生命周期和启动模式","date":"2015-11-01T11:57:34.000Z","_content":"# Activity生命周期\n```java\npublic class LifeCycleActivity extends AppCompatActivity {\n    static final String TAG = \"wxl\";\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        Log.d(TAG, \"onCreate\");\n        setContentView(R.layout.activity_life_cycle);\n    }\n    \n  public void click(View view) {\n        startActivity(new Intent(this, StartModeActivity.class));\n    }\n    \n    @Override\n    public void onContentChanged() {\n        super.onContentChanged();\n        Log.d(TAG, \"onContentChanged\");\n    }\n\n    public void onStart() {\n        super.onStart();\n        Log.d(TAG, \"onStart\");\n    }\n\n    public void onRestart() {\n        super.onRestart();\n        Log.d(TAG, \"onRestart\");\n    }\n\n    public void onPostCreate(Bundle savedInstanceState) {\n        super.onPostCreate(savedInstanceState);\n        Log.d(TAG, \"onPostCreate\");\n    }\n\n    @Override\n    public void onResume() {\n        super.onResume();\n        Log.d(TAG, \"onResume\");\n    }\n\n    public void onPostResume() {\n        super.onPostResume();\n        Log.d(TAG, \"onPostResume\");\n    }\n\n    public void onPause() {\n        super.onPause();\n        Log.d(TAG, \"onPause\");\n    }\n\n    public void onStop() {\n        super.onStop();\n        Log.d(TAG, \"onStop\");\n    }\n\n    public void onDestroy() {\n        super.onDestroy();\n        Log.d(TAG, \"onDestroy\");\n    }\n\n    public void onConfigurationChanged(Configuration newConfig) {\n        super.onConfigurationChanged(newConfig);\n        Log.d(TAG, \"onConfigurationChanged\");\n    }\n\n    public void onSaveInstanceState(Bundle outState) {\n        super.onSaveInstanceState(outState);\n        Log.d(TAG, \"onSaveInstanceState\");\n    }\n\n    public void onRestoreInstanceState(Bundle outState) {\n        super.onRestoreInstanceState(outState);\n        Log.d(TAG, \"onRestoreInstanceState\");\n    }\n}\n```\n<!--more-->\n## 正常启动 \nonCreate --> onContentChanged --> onStart --> onPostCreate --> onResume --> onPostResume --> onPause --> onStop --> onDestroy\n\n## onCreate、 onStart\nonCreate方法会在第一次创建的时候执行，紧接着便会执行onStart方法\n\n## onContentChanged\nonContentChanged()是Activity中的一个回调方法\n当Activity的布局改动时，即setContentView()或者addContentView()方法执行完毕时就会调用该方法， 例如，Activity中各种View的findViewById()方法都可以放到该方法中。\n\n## onPostCreate、onPostResume\nonPostCreate方法是指onCreate方法彻底执行完毕的回调，onPostResume类似，这两个方法官方说法是一般不会重写，现在知道的做法也就只有在使用ActionBarDrawerToggle的使用在onPostCreate需要在屏幕旋转时候等同步下状态，Google官方提供的一些实例就是如下做法：\n```java\n@Override\nprotected void onPostCreate(Bundle savedInstanceState) {\n    super.onPostCreate(savedInstanceState);\n    // Sync the toggle state after onRestoreInstanceState has occurred.\n    mDrawerToggle.syncState();\n}\n```\n\n## onResume\n此时Activity处于Activity栈顶，处理用户交互。\n\n## onPause、 onStop\nonPause是在整个窗口被半遮盖或者半透明的时候会执行，Activity不会接受用户输入。而onStop则是在整个窗口被完全遮盖才会触发，此时Activity不可见，尽在后台运行。触发onStop的方法之前必定会触发onPause方法。\n\n## onSaveInstanceState、 onRestoreInstanceState\nonSaveInstanceState字面理解就是恢复实例的状态，需要注意的是，onSaveInstanceState方法和onRestoreInstanceState方法“不一定”是成对的被调用的，onRestoreInstanceState被调用的前提是，activity A“确实”被系统销毁了，而如果仅仅是停留在有这种可能性的情况下，则该方法不会被调用。\n\n长时间处于stopped形态，系统可能回收activity，比如旋转屏幕\nonResume --> onSaveInstanceState() --> onDestory\n重新创建\nonCreate --> onRestoreIntanceState() --> onResume \n```java\nprotected void onSaveInstanceState(Bundle outState) {\n    super.onSaveInstanceState(outState);\n    savedInstanceState.putLong(\"param\", value);\n}\npublic void onCreate(Bundle savedInstanceState) {\n    if (savedInstanceState != null){\n        value = savedInstanceState.getLong(\"param\");\n    }\n}\n```\n\n## 其他场景\n### 转向下一个activity \nonPause --> onSaveInstanceState --> onStop\n\n### 从下一个activity返回当前（按机器返回键）\nonRestart --> onStart --> onResume --> onPostResume\n\n### 转向上一个activity（按机器返回键）\nonPause --> onStop --> onDestory\n\n### 屏幕待机（黑掉）\nonPause\n\n### 屏幕变亮 \nonResume --> onPostResume\n\n### Home键退出 \nonPause --> onSaveInstanceState --> onStop\n\n### Home键导航返回 \nonRestart --> onStart --> onResume --> onPostResume\n\n### 旋转屏幕 \nonPause --> onStop --> onDestory --> onCreate --> onStart --> onPostCreate --> onResume --> onPostResume\n默认屏幕旋转会重新创建，当然可以通过在配置文件里加上如下代码：\n```js\nandroid:configChanges=\"keyboardHidden|orientation|screenSize\"（sdk>13时需加上screenSize）\n```\n这个时候再旋转屏幕便不会销毁Activity，这时候再旋转屏幕可以看到只会执行onConfigurationChanged方法，有什么在屏幕旋转的逻辑可以重写这个方法：\n```java\npublic void onConfigurationChanged(Configuration newConfig) {\n    if (newConfig.orientation == ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE) {\n        // TODO:\n    }\n    super.onConfigurationChanged(newConfig);\n}\n```\n\n# Activity启动模式-AndroidMainifest启动模式\n\nAndroidMainifest有四种启动模式，分别为standard，singleTop，singleTask，singleInstance。如果要使用这四种启动模式，必须在manifest文件中<activity>标签中的launchMode属性中配置，如：\n```js\n  <activity\n            android:name=\".StartModeActivity\"\n            android:launchMode=\"standard\" />\n```\n\n## standard\n标准启动模式，也是activity的默认启动模式。在这种模式下启动的activity可以被多次实例化，即在同一个任务中可以存在多个activity的实例，每个实例都会处理一个Intent对象。如果Activity A的启动模式为standard，并且A已经启动，在A中再次启动Activity A，即调用startActivity（new Intent（this，A.class）），会在A的上面再次启动一个A的实例，即当前的桟中的状态为A-->A。\n\n## singleTop\n如果一个以singleTop模式启动的activity的实例已经存在于任务桟的桟顶，那么再启动这个Activity时，不会创建新的实例，而是重用位于栈顶的那个实例，并且会调用该实例的onNewIntent()方法将Intent对象传递到这个实例中。举例来说，如果A的启动模式为singleTop，并且A的一个实例已经存在于栈顶中，那么再调用startActivity（new Intent（this，A.class））启动A时，不会再次创建A的实例，而是重用原来的实例，并且调用原来实例的onNewIntent()方法。这是任务桟中还是有一个A的实例。\n如果以singleTop模式启动的activity的一个实例已经存在与任务桟中，但是不在桟顶，那么它的行为和standard模式相同，也会创建多个实例。\n\n## singleTask\nsingleTask模式的Activity只允许在系统中有一个实例。如果系统中已经有了一个实例，持有这个实例的任务将移动到顶部，同时intent将被通过onNewIntent()发送。如果没有，则会创建一个新的Activity并置放在合适的任务中。\n\n## singleInstance\n总是在新的任务中开启，并且这个新的任务中有且只有这一个实例，也就是说被该实例启动的其他activity会自动运行于另一个任务中。当再次启动该activity的实例时，会重用已存在的任务和实例。并且会调用这个实例的onNewIntent()方法，将Intent实例传递到该实例中。和singleTask相同，同一时刻在系统中只会存在一个这样的Activity实例。比如MainActivity是singleInstance模式，应用A的任务栈创建了MainActivity，应用B也激活了MainActivity，则不需要再创建，两个应用共享MainActivity实例。\n\n# Activity启动模式-Intent Flag启动模式\n```java\nIntent intent = new Intent(LifeCycleActivity.this, LifeCycleActivity.class);\nintent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);\nstartActivity(intent);\n```\n常用的Flag\n## Intent.FLAG_ACTIVITY_NEW_TASK\n使用一个新的Task来启动一个Activity，启动的每个Activity都将在一个新的Task中。这种通常使用在Service中启动Activity的场景，由于Service中并不存在Activity栈，使用该Flag来创建一个新的Activity栈，并创建新的Activity实例。\n\n## Intent.FLAG_ACTIVITY_SINGLE_TOP\n与 android:launchMode=\"singleTop\"效果相同\n\n## Intent.FLAG_ACTIVITY_CLEAR_TOP\n与 android:launchMode=\"singleTask\"效果相同\n\n## Intent.FLAG_ACTIVITY_NO_HISTORY\n当该Activity启动其他Activity时，该Activity就消失了，不保留Activity栈中。比如A启动B，B启动C，C又启动D，则当前Activity栈为ABD。\n\n# 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n\n","source":"_posts/Activity.md","raw":"title: Activity生命周期和启动模式\ndate: 2015-11-01 19:57:34\ntags: Activity\ncategory: Android\n---\n# Activity生命周期\n```java\npublic class LifeCycleActivity extends AppCompatActivity {\n    static final String TAG = \"wxl\";\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        Log.d(TAG, \"onCreate\");\n        setContentView(R.layout.activity_life_cycle);\n    }\n    \n  public void click(View view) {\n        startActivity(new Intent(this, StartModeActivity.class));\n    }\n    \n    @Override\n    public void onContentChanged() {\n        super.onContentChanged();\n        Log.d(TAG, \"onContentChanged\");\n    }\n\n    public void onStart() {\n        super.onStart();\n        Log.d(TAG, \"onStart\");\n    }\n\n    public void onRestart() {\n        super.onRestart();\n        Log.d(TAG, \"onRestart\");\n    }\n\n    public void onPostCreate(Bundle savedInstanceState) {\n        super.onPostCreate(savedInstanceState);\n        Log.d(TAG, \"onPostCreate\");\n    }\n\n    @Override\n    public void onResume() {\n        super.onResume();\n        Log.d(TAG, \"onResume\");\n    }\n\n    public void onPostResume() {\n        super.onPostResume();\n        Log.d(TAG, \"onPostResume\");\n    }\n\n    public void onPause() {\n        super.onPause();\n        Log.d(TAG, \"onPause\");\n    }\n\n    public void onStop() {\n        super.onStop();\n        Log.d(TAG, \"onStop\");\n    }\n\n    public void onDestroy() {\n        super.onDestroy();\n        Log.d(TAG, \"onDestroy\");\n    }\n\n    public void onConfigurationChanged(Configuration newConfig) {\n        super.onConfigurationChanged(newConfig);\n        Log.d(TAG, \"onConfigurationChanged\");\n    }\n\n    public void onSaveInstanceState(Bundle outState) {\n        super.onSaveInstanceState(outState);\n        Log.d(TAG, \"onSaveInstanceState\");\n    }\n\n    public void onRestoreInstanceState(Bundle outState) {\n        super.onRestoreInstanceState(outState);\n        Log.d(TAG, \"onRestoreInstanceState\");\n    }\n}\n```\n<!--more-->\n## 正常启动 \nonCreate --> onContentChanged --> onStart --> onPostCreate --> onResume --> onPostResume --> onPause --> onStop --> onDestroy\n\n## onCreate、 onStart\nonCreate方法会在第一次创建的时候执行，紧接着便会执行onStart方法\n\n## onContentChanged\nonContentChanged()是Activity中的一个回调方法\n当Activity的布局改动时，即setContentView()或者addContentView()方法执行完毕时就会调用该方法， 例如，Activity中各种View的findViewById()方法都可以放到该方法中。\n\n## onPostCreate、onPostResume\nonPostCreate方法是指onCreate方法彻底执行完毕的回调，onPostResume类似，这两个方法官方说法是一般不会重写，现在知道的做法也就只有在使用ActionBarDrawerToggle的使用在onPostCreate需要在屏幕旋转时候等同步下状态，Google官方提供的一些实例就是如下做法：\n```java\n@Override\nprotected void onPostCreate(Bundle savedInstanceState) {\n    super.onPostCreate(savedInstanceState);\n    // Sync the toggle state after onRestoreInstanceState has occurred.\n    mDrawerToggle.syncState();\n}\n```\n\n## onResume\n此时Activity处于Activity栈顶，处理用户交互。\n\n## onPause、 onStop\nonPause是在整个窗口被半遮盖或者半透明的时候会执行，Activity不会接受用户输入。而onStop则是在整个窗口被完全遮盖才会触发，此时Activity不可见，尽在后台运行。触发onStop的方法之前必定会触发onPause方法。\n\n## onSaveInstanceState、 onRestoreInstanceState\nonSaveInstanceState字面理解就是恢复实例的状态，需要注意的是，onSaveInstanceState方法和onRestoreInstanceState方法“不一定”是成对的被调用的，onRestoreInstanceState被调用的前提是，activity A“确实”被系统销毁了，而如果仅仅是停留在有这种可能性的情况下，则该方法不会被调用。\n\n长时间处于stopped形态，系统可能回收activity，比如旋转屏幕\nonResume --> onSaveInstanceState() --> onDestory\n重新创建\nonCreate --> onRestoreIntanceState() --> onResume \n```java\nprotected void onSaveInstanceState(Bundle outState) {\n    super.onSaveInstanceState(outState);\n    savedInstanceState.putLong(\"param\", value);\n}\npublic void onCreate(Bundle savedInstanceState) {\n    if (savedInstanceState != null){\n        value = savedInstanceState.getLong(\"param\");\n    }\n}\n```\n\n## 其他场景\n### 转向下一个activity \nonPause --> onSaveInstanceState --> onStop\n\n### 从下一个activity返回当前（按机器返回键）\nonRestart --> onStart --> onResume --> onPostResume\n\n### 转向上一个activity（按机器返回键）\nonPause --> onStop --> onDestory\n\n### 屏幕待机（黑掉）\nonPause\n\n### 屏幕变亮 \nonResume --> onPostResume\n\n### Home键退出 \nonPause --> onSaveInstanceState --> onStop\n\n### Home键导航返回 \nonRestart --> onStart --> onResume --> onPostResume\n\n### 旋转屏幕 \nonPause --> onStop --> onDestory --> onCreate --> onStart --> onPostCreate --> onResume --> onPostResume\n默认屏幕旋转会重新创建，当然可以通过在配置文件里加上如下代码：\n```js\nandroid:configChanges=\"keyboardHidden|orientation|screenSize\"（sdk>13时需加上screenSize）\n```\n这个时候再旋转屏幕便不会销毁Activity，这时候再旋转屏幕可以看到只会执行onConfigurationChanged方法，有什么在屏幕旋转的逻辑可以重写这个方法：\n```java\npublic void onConfigurationChanged(Configuration newConfig) {\n    if (newConfig.orientation == ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE) {\n        // TODO:\n    }\n    super.onConfigurationChanged(newConfig);\n}\n```\n\n# Activity启动模式-AndroidMainifest启动模式\n\nAndroidMainifest有四种启动模式，分别为standard，singleTop，singleTask，singleInstance。如果要使用这四种启动模式，必须在manifest文件中<activity>标签中的launchMode属性中配置，如：\n```js\n  <activity\n            android:name=\".StartModeActivity\"\n            android:launchMode=\"standard\" />\n```\n\n## standard\n标准启动模式，也是activity的默认启动模式。在这种模式下启动的activity可以被多次实例化，即在同一个任务中可以存在多个activity的实例，每个实例都会处理一个Intent对象。如果Activity A的启动模式为standard，并且A已经启动，在A中再次启动Activity A，即调用startActivity（new Intent（this，A.class）），会在A的上面再次启动一个A的实例，即当前的桟中的状态为A-->A。\n\n## singleTop\n如果一个以singleTop模式启动的activity的实例已经存在于任务桟的桟顶，那么再启动这个Activity时，不会创建新的实例，而是重用位于栈顶的那个实例，并且会调用该实例的onNewIntent()方法将Intent对象传递到这个实例中。举例来说，如果A的启动模式为singleTop，并且A的一个实例已经存在于栈顶中，那么再调用startActivity（new Intent（this，A.class））启动A时，不会再次创建A的实例，而是重用原来的实例，并且调用原来实例的onNewIntent()方法。这是任务桟中还是有一个A的实例。\n如果以singleTop模式启动的activity的一个实例已经存在与任务桟中，但是不在桟顶，那么它的行为和standard模式相同，也会创建多个实例。\n\n## singleTask\nsingleTask模式的Activity只允许在系统中有一个实例。如果系统中已经有了一个实例，持有这个实例的任务将移动到顶部，同时intent将被通过onNewIntent()发送。如果没有，则会创建一个新的Activity并置放在合适的任务中。\n\n## singleInstance\n总是在新的任务中开启，并且这个新的任务中有且只有这一个实例，也就是说被该实例启动的其他activity会自动运行于另一个任务中。当再次启动该activity的实例时，会重用已存在的任务和实例。并且会调用这个实例的onNewIntent()方法，将Intent实例传递到该实例中。和singleTask相同，同一时刻在系统中只会存在一个这样的Activity实例。比如MainActivity是singleInstance模式，应用A的任务栈创建了MainActivity，应用B也激活了MainActivity，则不需要再创建，两个应用共享MainActivity实例。\n\n# Activity启动模式-Intent Flag启动模式\n```java\nIntent intent = new Intent(LifeCycleActivity.this, LifeCycleActivity.class);\nintent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);\nstartActivity(intent);\n```\n常用的Flag\n## Intent.FLAG_ACTIVITY_NEW_TASK\n使用一个新的Task来启动一个Activity，启动的每个Activity都将在一个新的Task中。这种通常使用在Service中启动Activity的场景，由于Service中并不存在Activity栈，使用该Flag来创建一个新的Activity栈，并创建新的Activity实例。\n\n## Intent.FLAG_ACTIVITY_SINGLE_TOP\n与 android:launchMode=\"singleTop\"效果相同\n\n## Intent.FLAG_ACTIVITY_CLEAR_TOP\n与 android:launchMode=\"singleTask\"效果相同\n\n## Intent.FLAG_ACTIVITY_NO_HISTORY\n当该Activity启动其他Activity时，该Activity就消失了，不保留Activity栈中。比如A启动B，B启动C，C又启动D，则当前Activity栈为ABD。\n\n# 剩者为王\n我的Android技术交流群，群名寓意很简单，经过时间洗礼，最终剩下的才是王者，欢迎“剩友”。\n剩者为王③群：370527306 <a target=\"_blank\" href=\"http://shang.qq.com/wpa/qunwpa?idkey=0a992ba077da4c8325cbfef1c9e81f0443ffb782a0f2135c1a8f7326baac58ac\"><img border=\"0\" src=\"http://pub.idqqimg.com/wpa/images/group.png\" alt=\"剩者为王③群\" title=\"剩者为王③群\"></a>\n\n\n","slug":"Activity","published":1,"updated":"2016-03-17T00:44:06.335Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6q00fso4pkijfq8aob"},{"title":"2016关键字","date":"2015-12-27T09:43:42.000Z","_content":"# 回顾15年\n这一年，大部分时间都在煎熬，对[《2015年关键字》](http://wuxiaolong.me/2015/03/27/2015key/)几个关键字完成的也不是很满意。\n生活方面，顺利结婚，整个过程，只能用两个字形容：虐心，这种心情恐怕只有过来人才知道。工作方面属于迷茫，不知道该干嘛。技术感觉也遇到了瓶颈，是要转IOS？于是swift尝鲜，入门做了个简单的demo就停止了；还是继续加深Android，却不知道该从何入手。直到最近明确了方向，我要向高级程序员进阶。\n这一年，整体是不开心，但还是有收获的，拥有了属于自己的[技术博客](http://wuxiaolong.me/2015/07/31/build-blog-by-hexo/)，第一时间学习了很多Android刚出来的新的东西：[Android studio](http://wuxiaolong.me/2015/11/25/WeWin/)、[RecyclerView](http://wuxiaolong.me/2015/09/15/RecyclerViewCardView/)、[DesignSupportLibrary](https://github.com/WuXiaolong/DesignSupportLibrarySample)、[MVP模式](http://wuxiaolong.me/2015/09/23/AndroidMVPSample/)等，下面开始展望16年。\n<!--more-->\n# 展望16年\n\n## 高级程序员\n工作三四年，我的技术顶多中等偏上，哎，时间荒废了。过去一年，我已不追求效果的实现，而是更多关注实现的原理，最近还在拜读《Android群英传》《Android开发艺术探索》。16年，高级进阶之路，加足马达，go。\n\n## Mac\n15年一直想买，计划我的[广告费](http://wuxiaolong.me/2015/05/12/AdFund/)赚够了mac钱就买，却一直未实现，因为现在工资不够每个月的开销的。如果买了Mac，应该还会整整swift，但还是不会深入。\n\n## 英语\n我是英语渣渣，英语还是会贯穿16年甚至更久，15年已经将不会的单词，存在金山词霸里，可惜没有经常去记这些单词，真是惭愧。\n\n## 看书\n15年到后来，我真的很浮躁，我发现我看书能让我这个心静下来。其实我还是比较喜欢看看书，16年，我会没事多看看书来抚慰我那颗骚动的心。\n\n## 个人博客\n很庆幸，我有记录的习惯。现在写写博客，若干年再看到这些，一定会有不一样的心情，或许觉得现在的我好幼稚、好可笑。\n\n<!---换工作可能成行，现在的公司在无锡已经算不错了。无锡软件公司真的不景气，如果有机会，会去上海看看。-->\n\n## 总结\n2016年应该会波澜不惊，主要精力在工作和家庭，16年家庭会多一位新的成员，这意味我肩上又多了一份责任。\n同样年底检测成果。","source":"_posts/2016key.md","raw":"title: 2016关键字\ndate: 2015-12-27 17:43:42\ntags: key word\ncategory: Life\n---\n# 回顾15年\n这一年，大部分时间都在煎熬，对[《2015年关键字》](http://wuxiaolong.me/2015/03/27/2015key/)几个关键字完成的也不是很满意。\n生活方面，顺利结婚，整个过程，只能用两个字形容：虐心，这种心情恐怕只有过来人才知道。工作方面属于迷茫，不知道该干嘛。技术感觉也遇到了瓶颈，是要转IOS？于是swift尝鲜，入门做了个简单的demo就停止了；还是继续加深Android，却不知道该从何入手。直到最近明确了方向，我要向高级程序员进阶。\n这一年，整体是不开心，但还是有收获的，拥有了属于自己的[技术博客](http://wuxiaolong.me/2015/07/31/build-blog-by-hexo/)，第一时间学习了很多Android刚出来的新的东西：[Android studio](http://wuxiaolong.me/2015/11/25/WeWin/)、[RecyclerView](http://wuxiaolong.me/2015/09/15/RecyclerViewCardView/)、[DesignSupportLibrary](https://github.com/WuXiaolong/DesignSupportLibrarySample)、[MVP模式](http://wuxiaolong.me/2015/09/23/AndroidMVPSample/)等，下面开始展望16年。\n<!--more-->\n# 展望16年\n\n## 高级程序员\n工作三四年，我的技术顶多中等偏上，哎，时间荒废了。过去一年，我已不追求效果的实现，而是更多关注实现的原理，最近还在拜读《Android群英传》《Android开发艺术探索》。16年，高级进阶之路，加足马达，go。\n\n## Mac\n15年一直想买，计划我的[广告费](http://wuxiaolong.me/2015/05/12/AdFund/)赚够了mac钱就买，却一直未实现，因为现在工资不够每个月的开销的。如果买了Mac，应该还会整整swift，但还是不会深入。\n\n## 英语\n我是英语渣渣，英语还是会贯穿16年甚至更久，15年已经将不会的单词，存在金山词霸里，可惜没有经常去记这些单词，真是惭愧。\n\n## 看书\n15年到后来，我真的很浮躁，我发现我看书能让我这个心静下来。其实我还是比较喜欢看看书，16年，我会没事多看看书来抚慰我那颗骚动的心。\n\n## 个人博客\n很庆幸，我有记录的习惯。现在写写博客，若干年再看到这些，一定会有不一样的心情，或许觉得现在的我好幼稚、好可笑。\n\n<!---换工作可能成行，现在的公司在无锡已经算不错了。无锡软件公司真的不景气，如果有机会，会去上海看看。-->\n\n## 总结\n2016年应该会波澜不惊，主要精力在工作和家庭，16年家庭会多一位新的成员，这意味我肩上又多了一份责任。\n同样年底检测成果。","slug":"2016key","published":1,"updated":"2016-03-17T00:44:06.334Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6s00fwo4pkrxkidiam"},{"title":"2015关键字","date":"2015-03-27T09:37:17.000Z","_content":"# 结婚\n贯穿全年，成家了好好立业。\n\n# 复制\n大大小小的项目也写了不少，感觉只是复制代码而已，对于著名的开源库，之前要求会使用就行，如果不深究，只会是个“码农”。\n\n# 产品\nAndroid项目的创建到发布上线，这个流程已经再熟悉不过，但是打造一款用户喜爱的产品，需要哪些人员、又有哪些流程？知道不？好吧，今年该了解的。\n<!--more-->\n# 英语\n一直很羡慕那些英语好的人，更羡慕那些用英语交流的人，我的英文渣，然而码农进击之路，这关必须过。也为了以后不出现这种尴尬：“爸爸，这个单词怎么读啊”，“啊……去问你妈吧！”\n\n# 口才\n“n”“l”不分，前鼻音后鼻音不分……反正好多不分，生活中因为这些闹出了好多笑话，提升说的能力势在必行。\n\n# 危机\n“生于忧患死于安乐”，安逸的生活往往使人颓废，我尤记得当时去海辉面试的窘迫样，虽然他问得都是我未曾做过的java方面的。如果真是大神，口头还须表达出来，让他相信你就是，现阶段我还不是大神。\n\n# 总结\n2015年是幸福的一年，也是苦逼的一年。玩命努力的人那么多，你凭什么不拼。年底检测成果。","source":"_posts/2015key.md","raw":"title: 2015关键字\ndate: 2015-03-27 17:37:17\ntags: key word\ncategory: Life\n---\n# 结婚\n贯穿全年，成家了好好立业。\n\n# 复制\n大大小小的项目也写了不少，感觉只是复制代码而已，对于著名的开源库，之前要求会使用就行，如果不深究，只会是个“码农”。\n\n# 产品\nAndroid项目的创建到发布上线，这个流程已经再熟悉不过，但是打造一款用户喜爱的产品，需要哪些人员、又有哪些流程？知道不？好吧，今年该了解的。\n<!--more-->\n# 英语\n一直很羡慕那些英语好的人，更羡慕那些用英语交流的人，我的英文渣，然而码农进击之路，这关必须过。也为了以后不出现这种尴尬：“爸爸，这个单词怎么读啊”，“啊……去问你妈吧！”\n\n# 口才\n“n”“l”不分，前鼻音后鼻音不分……反正好多不分，生活中因为这些闹出了好多笑话，提升说的能力势在必行。\n\n# 危机\n“生于忧患死于安乐”，安逸的生活往往使人颓废，我尤记得当时去海辉面试的窘迫样，虽然他问得都是我未曾做过的java方面的。如果真是大神，口头还须表达出来，让他相信你就是，现阶段我还不是大神。\n\n# 总结\n2015年是幸福的一年，也是苦逼的一年。玩命努力的人那么多，你凭什么不拼。年底检测成果。","slug":"2015key","published":1,"updated":"2016-03-17T00:44:06.334Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6u00g0o4pk0g0bptff"},{"title":"Android Toast源码解析","date":"2016-04-25T00:41:31.000Z","_content":"# 写在前面\n首先推荐下近期小伙伴们一起组织发起的Android SDK源码解析，旨在帮助初学者更好的学习Android！工程很宏大，包括Android SDK中控件、系统工具类、支持库等，如果您也是开源爱好者，欢迎去认领。\n我准备按照What-How-Why，知其然知其所以然，沿着这个3W思路来探探Toast源码，正式进入主题，let's go。\n\n# Toast简介\nToast是一种提供给用户简洁信息的视图，该视图已浮于应用程序之上的形式呈现给用户。\nToast源码位于：[frameworks\\base\\core\\java\\android\\widget\\Toast.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/Toast.java)\n\n# Toast使用\n\nToast使用就一行代码：\n```java\n    Toast.makeText(ToastActivity.this,\"Toast源码解析\",Toast.LENGTH_LONG).show();\n```\n\nToast 提供了setView方法，可以自定义View：\n```java\n\n    Toast toast=new Toast(ToastActivity.this);\n    View view=View.inflate(ToastActivity.this,R.layout.toast_view,null);\n    toast.setView(view);\n    toast.setGravity(Gravity.CENTER,0,0);\n    toast.show();\n    \n```\n\ntoast_view.xml\n```xml\n\n    <?xml version=\"1.0\" encoding=\"utf-8\"?>\n        <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:orientation=\"vertical\">\n        \n            <ImageView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:background=\"@mipmap/ic_launcher\" />\n    </LinearLayout>\n\n```\n\n# Toast源码分析\nToast源码分析有两个目标，知道Toast源码在哪里体现了Toast显示，又在哪里体现了Toast消失。首先从Toast的基本使用，作为入口。\n\n```java\n    Toast.makeText(ToastActivity.this,\"Toast源码解析\",Toast.LENGTH_LONG).show();\n```\n\n## 1. makeText\n先从makeText方法入手，一步步深入。\n\n```java\n\n    public static Toast makeText(Context context, CharSequence text, @Duration int duration) {\n        Toast result = new Toast(context);\n\n        LayoutInflater inflate = (LayoutInflater)\n                context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n        View v = inflate.inflate(com.android.internal.R.layout.transient_notification, null);\n        TextView tv = (TextView)v.findViewById(com.android.internal.R.id.message);\n        tv.setText(text);\n        \n        result.mNextView = v;//传入下个view\n        result.mDuration = duration;//Toast显示的时间长度\n\n        return result;\n    }\n    \n```\n\n对应的transient_notification.xml，源码位于：[frameworks\\base\\core\\res\\layout\\transient_notification.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/transient_notification.xml)\n\n```xml\n\n    <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        android:background=\"?android:attr/toastFrameBackground\">\n    \n        <TextView\n            android:id=\"@android:id/message\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_weight=\"1\"\n            android:layout_gravity=\"center_horizontal\"\n            android:textAppearance=\"@style/TextAppearance.Toast\"\n            android:textColor=\"@color/bright_foreground_dark\"\n            android:shadowColor=\"#BB000000\"\n            android:shadowRadius=\"2.75\"\n            />\n    \n    </LinearLayout>\n```\n\n从makeText方法看，就是Toast的自定义view的那部分代码。\n\n# 2. show\n再来看看show方法：\n```java\n\n    public void show() {\n\t\t//解释自定义view，需要先setView\n        if (mNextView == null) {\n            throw new RuntimeException(\"setView must have been called\");\n        }\n\t\t//得到INotificationManager服务\n        INotificationManager service = getService();\n        String pkg = mContext.getOpPackageName();\n\t\t//TN对象\n        TN tn = mTN;\n        tn.mNextView = mNextView;\n\n        try {\n            service.enqueueToast(pkg, tn, mDuration);\n        } catch (RemoteException e) {\n            // Empty\n        }\n    }\n    \n```\n\n看了show方法，发现涉及两个新的类，TN 和INotificationManager 。enqueueToast方法大概就是实现Toast显示和消失吧，让我们一步步探索。\n\n## 2.1. TN \nTN类继承自ITransientNotification.Stub，ITransientNotification.aidl，用于进程间通信，源码位于[frameworks\\base\\core\\java\\android\\app\\ITransientNotification.aidl](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/ITransientNotification.aidl)\n```java\n\n    private static class TN extends ITransientNotification.Stub {\n \n        final Runnable mShow = new Runnable() {\n            @Override\n            public void run() {\n                handleShow();//显示处理\n            }\n        };\n\n        final Runnable mHide = new Runnable() {\n            @Override\n            public void run() {\n                handleHide();//消失处理\n                // Don't do this in handleHide() because it is also invoked by handleShow()\n                mNextView = null;\n            }\n        };\n\t\t//应用程序窗口\n        private final WindowManager.LayoutParams mParams = new WindowManager.LayoutParams();\n        final Handler mHandler = new Handler();    \n\n        int mGravity;//出现在屏幕的位置\n        int mX, mY;//分别是出现在屏幕的X、Y方向偏移量\n        float mHorizontalMargin;//横向margin值\n        float mVerticalMargin;//竖向margin值\n\n\n        View mView;//当前view\n        View mNextView;//下个Toast显示的view\n\n        WindowManager mWM;\n\t\t//TN构造函数\n        TN() {\n            // XXX This should be changed to use a Dialog, with a Theme.Toast\n            // defined that sets up the layout params appropriately.\n            final WindowManager.LayoutParams params = mParams;\n            params.height = WindowManager.LayoutParams.WRAP_CONTENT;\n            params.width = WindowManager.LayoutParams.WRAP_CONTENT;\n            // 不设置这个弹出框的透明遮罩显示为黑色\n\t\t\tparams.format = PixelFormat.TRANSLUCENT;\n\t\t    // 动画\n            params.windowAnimations = com.android.internal.R.style.Animation_Toast;\n            // 类型\n\t\t\tparams.type = WindowManager.LayoutParams.TYPE_TOAST;\n            params.setTitle(\"Toast\");\n            // 设置flag\n            params.flags = WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON\n                    | WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE\n                    | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE;\n        }\n\n        /**\n         * schedule handleShow into the right thread\n         */\n        @Override\n        public void show() {\n            if (localLOGV) Log.v(TAG, \"SHOW: \" + this);\n            mHandler.post(mShow);\n        }\n\n        /**\n         * schedule handleHide into the right thread\n         */\n        @Override\n        public void hide() {\n            if (localLOGV) Log.v(TAG, \"HIDE: \" + this);\n            mHandler.post(mHide);\n        }\n        \n\t\t/**\n\t\t * 显示Toast\n\t\t */\n        public void handleShow() {\n            if (localLOGV) Log.v(TAG, \"HANDLE SHOW: \" + this + \" mView=\" + mView\n                    + \" mNextView=\" + mNextView);\n            if (mView != mNextView) {//判断下个view是否一样\n                // remove the old view if necessary\n                handleHide();//移除当前view\n                mView = mNextView;\n                Context context = mView.getContext().getApplicationContext();//获取当前view上下文\n                String packageName = mView.getContext().getOpPackageName();\n                if (context == null) {\n                    context = mView.getContext();\n                }\n\t\t\t\t//获得 WindowManager对象\n                mWM = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);\n                // We can resolve the Gravity here by using the Locale for getting\n                // the layout direction\n                final Configuration config = mView.getContext().getResources().getConfiguration();\n\t\t\t\t//获取绝对的Gravity\n                final int gravity = Gravity.getAbsoluteGravity(mGravity, config.getLayoutDirection());\n                mParams.gravity = gravity;\n                if ((gravity & Gravity.HORIZONTAL_GRAVITY_MASK) == Gravity.FILL_HORIZONTAL) {\n                    mParams.horizontalWeight = 1.0f;\n                }\n                if ((gravity & Gravity.VERTICAL_GRAVITY_MASK) == Gravity.FILL_VERTICAL) {\n                    mParams.verticalWeight = 1.0f;\n                }\n                mParams.x = mX;\n                mParams.y = mY;\n                mParams.verticalMargin = mVerticalMargin;\n                mParams.horizontalMargin = mHorizontalMargin;\n                mParams.packageName = packageName;\n                if (mView.getParent() != null) {\n                    if (localLOGV) Log.v(TAG, \"REMOVE! \" + mView + \" in \" + this);\n                    mWM.removeView(mView);//如果当前view存在，先移除\n                }\n                if (localLOGV) Log.v(TAG, \"ADD! \" + mView + \" in \" + this);\n                mWM.addView(mView, mParams);//通过WindowManager调用addView加载\n                trySendAccessibilityEvent();\n            }\n        }\n\t\t\n        private void trySendAccessibilityEvent() {\n            AccessibilityManager accessibilityManager =\n                    AccessibilityManager.getInstance(mView.getContext());\n            if (!accessibilityManager.isEnabled()) {\n                return;\n            }\n            // treat toasts as notifications since they are used to\n            // announce a transient piece of information to the user\n            AccessibilityEvent event = AccessibilityEvent.obtain(\n                    AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED);\n            event.setClassName(getClass().getName());\n            event.setPackageName(mView.getContext().getPackageName());\n            mView.dispatchPopulateAccessibilityEvent(event);\n            accessibilityManager.sendAccessibilityEvent(event);\n        }\n                \n\t\t/** \n\t\t * WindowManager调用removeView方法来将Toast视图移除\n\t\t */\n        public void handleHide() {\n            if (localLOGV) Log.v(TAG, \"HANDLE HIDE: \" + this + \" mView=\" + mView);\n            if (mView != null) {\n                // note: checking parent() just to make sure the view has\n                // been added...  i have seen cases where we get here when\n                // the view isn't yet added, so let's try not to crash.\n                if (mView.getParent() != null) {\n                    if (localLOGV) Log.v(TAG, \"REMOVE! \" + mView + \" in \" + this);\n                    mWM.removeView(mView);\n                }\n\n                mView = null;\n            }\n        }\n    }\n```\n\n来看下ITransientNotification ，就两个方法，如下：\n\n```java\n    /** @hide */\n    oneway interface ITransientNotification {\n        void show();\n        void hide();\n    }\n```\n\n具体实现就在TN类，其他进程回调TN类，来操作Toast的显示和消失：\n\n```java\n\n    @Override\n    public void show() {\n        if (localLOGV) Log.v(TAG, \"SHOW: \" + this);\n            mHandler.post(mShow);//显示\n    }\n\n    /**\n     * schedule handleHide into the right thread\n     */\n    @Override\n    public void hide() {\n        if (localLOGV) Log.v(TAG, \"HIDE: \" + this);\n        mHandler.post(mHide);//消失\n    }\n```\n\n这里可以看出Toast显示和消失用的Handler机制实现的。\n\n## 2.2. INotificationManager\n调用了getService，如下：\n```java\n\n    private static INotificationManager sService;\n\n    static private INotificationManager getService() {\n        if (sService != null) {\n            return sService;\n        }\n        sService = INotificationManager.Stub.asInterface(ServiceManager.getService(\"notification\"));\n        return sService;\n    }\n```\n\n得到INotificationManager服务，再调用enqueueToast方法，参数有三个，包名，TN，时间。INofiticationManager接口的具体实现类是NotificationManagerService类，源码位置：[frameworks\\base\\services\\core\\java\\com\\android\\server\\notification\\NotificationManagerService.java](https://github.com/android/platform_frameworks_base/blob/master/services/core/java/com/android/server/notification/NotificationManagerService.java)\n\n## 2.3. enqueueToast\n加入队列，用来显示Toast\n\n```java\n\n    @Override\n    public void enqueueToast(String pkg, ITransientNotification callback, int duration)\n    {\n        if (DBG) {\n            Slog.i(TAG, \"enqueueToast pkg=\" + pkg + \" callback=\" + callback\n                    + \" duration=\" + duration);\n        }\n        if (pkg == null || callback == null) {\n            Slog.e(TAG, \"Not doing toast. pkg=\" + pkg + \" callback=\" + callback);\n            return ;\n        }\n        //(1)判断是否系统的Toast，如果当前包名是android则为系统\n        final boolean isSystemToast = isCallerSystem() || (\"android\".equals(pkg));\n        //判断当前toast所属的pkg是不是所阻止的\n        if (ENABLE_BLOCKED_TOASTS && !noteNotificationOp(pkg, Binder.getCallingUid())) {\n            if (!isSystemToast) {\n                Slog.e(TAG, \"Suppressing toast from package \" + pkg + \" by user request.\");\n                return;\n            }\n        }\n        //入队列mToastQueue \n        synchronized (mToastQueue) {\n            int callingPid = Binder.getCallingPid();\n            long callingId = Binder.clearCallingIdentity();\n            try {\n                ToastRecord record;\n                //(2)判断Toast是否在队列当中\n                int index = indexOfToastLocked(pkg, callback);\n                // If it's already in the queue, we update it in place, we don't\n                // move it to the end of the queue.\n                if (index >= 0) {\n                    record = mToastQueue.get(index);\n                    record.update(duration);\n                } else {\n                    // Limit the number of toasts that any given package except the android\n                    // package can enqueue.  Prevents DOS attacks and deals with leaks.\n                    if (!isSystemToast) {\n                        int count = 0;\n                        final int N = mToastQueue.size();\n                        for (int i=0; i<N; i++) {\n                            final ToastRecord r = mToastQueue.get(i);\n                            if (r.pkg.equals(pkg)) {\n                                count++;\n                                if (count >= MAX_PACKAGE_NOTIFICATIONS) {//限制toasts数，最大50\n                                    Slog.e(TAG, \"Package has already posted \" + count\n                                            + \" toasts. Not showing more. Package=\" + pkg);\n                                    return;\n                                }\n                            }\n                        }\n                    }\n                    //获得ToastRecord对象\n                    record = new ToastRecord(callingPid, pkg, callback, duration);\n                    //放入mToastQueue中                       \n                    mToastQueue.add(record);\n                    index = mToastQueue.size() - 1;\n                    keepProcessAliveLocked(callingPid);//(3)设置该Toast为前台进程\n                }\n                // If it's at index 0, it's the current toast.  It doesn't matter if it's\n                // new or just been updated.  Call back and tell it to show itself.\n                // If the callback fails, this will remove it from the list, so don't\n                // assume that it's valid after this.\n                if (index == 0) {\n                    showNextToastLocked();//(4)直接显示Toast\n                }\n            } finally {\n                Binder.restoreCallingIdentity(callingId);\n            }\n        }\n    }\t\n```\n\n(1)判断是否系统的Toast，源码：\n\n```java\n    private static boolean isCallerSystem() {\n        return isUidSystem(Binder.getCallingUid());\n    }\n    \n    private static boolean isUidSystem(int uid) {\n        final int appid = UserHandle.getAppId(uid);\n\t    // 判断pid为系统进程使用的用户id，值为1000，或者为系统进程的手机的用户id，值为1001\n        return (appid == Process.SYSTEM_UID || appid == Process.PHONE_UID || uid == 0);\n    }\n```\n\n(2)判断Toast是否在队列当中，源码：\n\n```java\n    // lock on mToastQueue\n    int indexOfToastLocked(String pkg, ITransientNotification callback)\n    {\n\t    //\n        IBinder cbak = callback.asBinder();\n        ArrayList<ToastRecord> list = mToastQueue;\n        int len = list.size();\n        for (int i=0; i<len; i++) {\n            ToastRecord r = list.get(i);\n            if (r.pkg.equals(pkg) && r.callback.asBinder() == cbak) {\n                return i;\n            }\n        }\n        return -1;\n    }\n```\n\n(3)设置该Toast为前台进程，源码：\n\n```java\n    // lock on mToastQueue\n    void keepProcessAliveLocked(int pid)\n    {\n        int toastCount = 0; // toasts from this pid\n        ArrayList<ToastRecord> list = mToastQueue;\n        int N = list.size();\n        for (int i=0; i<N; i++) {\n            ToastRecord r = list.get(i);\n            if (r.pid == pid) {\n                toastCount++;\n            }\n        }\n        try {\n            // 设置该Toast为前台进程\n            mAm.setProcessForeground(mForegroundToken, pid, toastCount > 0);\n        } catch (RemoteException e) {\n            // Shouldn't happen.\n        }\n    }\n```\n\n(4)直接显示Toast，源码：\n\n```java\n\n    void showNextToastLocked() {\n\t    //直接取第一个\n        ToastRecord record = mToastQueue.get(0);\n        while (record != null) {\n            if (DBG) Slog.d(TAG, \"Show pkg=\" + record.pkg + \" callback=\" + record.callback);\n            try {\n                record.callback.show();//回调TN类，显示Toast\n                scheduleTimeoutLocked(record);//设置消失\n                return;\n            } catch (RemoteException e) {\n                Slog.w(TAG, \"Object died trying to show notification \" + record.callback\n                        + \" in package \" + record.pkg);\n                // remove it from the list and let the process die\n                int index = mToastQueue.indexOf(record);\n                if (index >= 0) {\n                    mToastQueue.remove(index);\n                }\n                keepProcessAliveLocked(record.pid);\n                if (mToastQueue.size() > 0) {\n                    record = mToastQueue.get(0);\n                } else {\n                    record = null;\n                }\n            }\n        }\n    }\n    \n    private void scheduleTimeoutLocked(ToastRecord r)\n    {\n        mHandler.removeCallbacksAndMessages(r);//移除ToastRecord\n        Message m = Message.obtain(mHandler, MESSAGE_TIMEOUT, r);\n        //static final int LONG_DELAY = 3500; // 3.5 seconds\n        //static final int SHORT_DELAY = 2000; // 2 seconds\n        long delay = r.duration == Toast.LENGTH_LONG ? LONG_DELAY : SHORT_DELAY;\n\t\t//发送Toast消失的message\n        mHandler.sendMessageDelayed(m, delay);\n    }\n```\n\n从enqueueToast方法可知，先判断是不是系统和合法的Toast，然后判断是否在ToastQueue（这里解释了很多Toast，是一个个显示的），如果存在，只需要更新Toast显示的时间，如果不在，就直接显示，回调给TN类。`到这里，知道了Toast是如何显示的。`\n还没有结束，继续追踪mHandler，来到WorkerHandler ：\n\n```java\n    private final class WorkerHandler extends Handler\n    {\n        @Override\n        public void handleMessage(Message msg)\n        {\n            switch (msg.what)\n            {\n                case MESSAGE_TIMEOUT:\n                    handleTimeout((ToastRecord)msg.obj);\n                    break;\n               ……\n            }\n        }\n\n    }\n    \n    private void handleTimeout(ToastRecord record)\n    {\n        if (DBG) Slog.d(TAG, \"Timeout pkg=\" + record.pkg + \" callback=\" + record.callback);\n        synchronized (mToastQueue) {\n\t        //还是判断Toast是否在队列当中\n            int index = indexOfToastLocked(record.pkg, record.callback);\n            if (index >= 0) {\n                cancelToastLocked(index);\n            }\n        }\n    }\n    \n    void cancelToastLocked(int index) {\n        ToastRecord record = mToastQueue.get(index);\n        try {\n            record.callback.hide();//回调TN类，Toast消失\n        } catch (RemoteException e) {\n            Slog.w(TAG, \"Object died trying to hide notification \" + record.callback\n                    + \" in package \" + record.pkg);\n            // don't worry about this, we're about to remove it from\n            // the list anyway\n        }\n        mToastQueue.remove(index);//该ToastRecord对象从mToastQueue中移除\n        keepProcessAliveLocked(record.pid);//设置该Toast为前台进程\n        if (mToastQueue.size() > 0) {\n            // Show the next one. If the callback fails, this will remove\n            // it from the list, so don't assume that the list hasn't changed\n            // after this point.\n            showNextToastLocked();//继续show下个Toast\n        }\n    }\n```\n\n到这里，知道了Toast是如何消失的。`Toast核心代码显示和消失源码分析完毕。\n\n# 总结\nToast代码调用只有一行，了解这行代码的背后，有个ToastQueue，进入队列之前，会做一些合法性判断，使用进程间通信进行回调，Handler机制显示和消失。自定义Toast时，需要调用setView，不然show会抛异常，这个从show方法就能得知。至此，Toast源码解析告一段落。\n\n","source":"_drafts/toast.md","raw":"title: Android Toast源码解析\ndate: 2016-04-25 08:41:31\ntags: Toast\ncategory: AndroidSource\n---\n# 写在前面\n首先推荐下近期小伙伴们一起组织发起的Android SDK源码解析，旨在帮助初学者更好的学习Android！工程很宏大，包括Android SDK中控件、系统工具类、支持库等，如果您也是开源爱好者，欢迎去认领。\n我准备按照What-How-Why，知其然知其所以然，沿着这个3W思路来探探Toast源码，正式进入主题，let's go。\n\n# Toast简介\nToast是一种提供给用户简洁信息的视图，该视图已浮于应用程序之上的形式呈现给用户。\nToast源码位于：[frameworks\\base\\core\\java\\android\\widget\\Toast.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/Toast.java)\n\n# Toast使用\n\nToast使用就一行代码：\n```java\n    Toast.makeText(ToastActivity.this,\"Toast源码解析\",Toast.LENGTH_LONG).show();\n```\n\nToast 提供了setView方法，可以自定义View：\n```java\n\n    Toast toast=new Toast(ToastActivity.this);\n    View view=View.inflate(ToastActivity.this,R.layout.toast_view,null);\n    toast.setView(view);\n    toast.setGravity(Gravity.CENTER,0,0);\n    toast.show();\n    \n```\n\ntoast_view.xml\n```xml\n\n    <?xml version=\"1.0\" encoding=\"utf-8\"?>\n        <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:orientation=\"vertical\">\n        \n            <ImageView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:background=\"@mipmap/ic_launcher\" />\n    </LinearLayout>\n\n```\n\n# Toast源码分析\nToast源码分析有两个目标，知道Toast源码在哪里体现了Toast显示，又在哪里体现了Toast消失。首先从Toast的基本使用，作为入口。\n\n```java\n    Toast.makeText(ToastActivity.this,\"Toast源码解析\",Toast.LENGTH_LONG).show();\n```\n\n## 1. makeText\n先从makeText方法入手，一步步深入。\n\n```java\n\n    public static Toast makeText(Context context, CharSequence text, @Duration int duration) {\n        Toast result = new Toast(context);\n\n        LayoutInflater inflate = (LayoutInflater)\n                context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n        View v = inflate.inflate(com.android.internal.R.layout.transient_notification, null);\n        TextView tv = (TextView)v.findViewById(com.android.internal.R.id.message);\n        tv.setText(text);\n        \n        result.mNextView = v;//传入下个view\n        result.mDuration = duration;//Toast显示的时间长度\n\n        return result;\n    }\n    \n```\n\n对应的transient_notification.xml，源码位于：[frameworks\\base\\core\\res\\layout\\transient_notification.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/transient_notification.xml)\n\n```xml\n\n    <LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        android:background=\"?android:attr/toastFrameBackground\">\n    \n        <TextView\n            android:id=\"@android:id/message\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_weight=\"1\"\n            android:layout_gravity=\"center_horizontal\"\n            android:textAppearance=\"@style/TextAppearance.Toast\"\n            android:textColor=\"@color/bright_foreground_dark\"\n            android:shadowColor=\"#BB000000\"\n            android:shadowRadius=\"2.75\"\n            />\n    \n    </LinearLayout>\n```\n\n从makeText方法看，就是Toast的自定义view的那部分代码。\n\n# 2. show\n再来看看show方法：\n```java\n\n    public void show() {\n\t\t//解释自定义view，需要先setView\n        if (mNextView == null) {\n            throw new RuntimeException(\"setView must have been called\");\n        }\n\t\t//得到INotificationManager服务\n        INotificationManager service = getService();\n        String pkg = mContext.getOpPackageName();\n\t\t//TN对象\n        TN tn = mTN;\n        tn.mNextView = mNextView;\n\n        try {\n            service.enqueueToast(pkg, tn, mDuration);\n        } catch (RemoteException e) {\n            // Empty\n        }\n    }\n    \n```\n\n看了show方法，发现涉及两个新的类，TN 和INotificationManager 。enqueueToast方法大概就是实现Toast显示和消失吧，让我们一步步探索。\n\n## 2.1. TN \nTN类继承自ITransientNotification.Stub，ITransientNotification.aidl，用于进程间通信，源码位于[frameworks\\base\\core\\java\\android\\app\\ITransientNotification.aidl](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/ITransientNotification.aidl)\n```java\n\n    private static class TN extends ITransientNotification.Stub {\n \n        final Runnable mShow = new Runnable() {\n            @Override\n            public void run() {\n                handleShow();//显示处理\n            }\n        };\n\n        final Runnable mHide = new Runnable() {\n            @Override\n            public void run() {\n                handleHide();//消失处理\n                // Don't do this in handleHide() because it is also invoked by handleShow()\n                mNextView = null;\n            }\n        };\n\t\t//应用程序窗口\n        private final WindowManager.LayoutParams mParams = new WindowManager.LayoutParams();\n        final Handler mHandler = new Handler();    \n\n        int mGravity;//出现在屏幕的位置\n        int mX, mY;//分别是出现在屏幕的X、Y方向偏移量\n        float mHorizontalMargin;//横向margin值\n        float mVerticalMargin;//竖向margin值\n\n\n        View mView;//当前view\n        View mNextView;//下个Toast显示的view\n\n        WindowManager mWM;\n\t\t//TN构造函数\n        TN() {\n            // XXX This should be changed to use a Dialog, with a Theme.Toast\n            // defined that sets up the layout params appropriately.\n            final WindowManager.LayoutParams params = mParams;\n            params.height = WindowManager.LayoutParams.WRAP_CONTENT;\n            params.width = WindowManager.LayoutParams.WRAP_CONTENT;\n            // 不设置这个弹出框的透明遮罩显示为黑色\n\t\t\tparams.format = PixelFormat.TRANSLUCENT;\n\t\t    // 动画\n            params.windowAnimations = com.android.internal.R.style.Animation_Toast;\n            // 类型\n\t\t\tparams.type = WindowManager.LayoutParams.TYPE_TOAST;\n            params.setTitle(\"Toast\");\n            // 设置flag\n            params.flags = WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON\n                    | WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE\n                    | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE;\n        }\n\n        /**\n         * schedule handleShow into the right thread\n         */\n        @Override\n        public void show() {\n            if (localLOGV) Log.v(TAG, \"SHOW: \" + this);\n            mHandler.post(mShow);\n        }\n\n        /**\n         * schedule handleHide into the right thread\n         */\n        @Override\n        public void hide() {\n            if (localLOGV) Log.v(TAG, \"HIDE: \" + this);\n            mHandler.post(mHide);\n        }\n        \n\t\t/**\n\t\t * 显示Toast\n\t\t */\n        public void handleShow() {\n            if (localLOGV) Log.v(TAG, \"HANDLE SHOW: \" + this + \" mView=\" + mView\n                    + \" mNextView=\" + mNextView);\n            if (mView != mNextView) {//判断下个view是否一样\n                // remove the old view if necessary\n                handleHide();//移除当前view\n                mView = mNextView;\n                Context context = mView.getContext().getApplicationContext();//获取当前view上下文\n                String packageName = mView.getContext().getOpPackageName();\n                if (context == null) {\n                    context = mView.getContext();\n                }\n\t\t\t\t//获得 WindowManager对象\n                mWM = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);\n                // We can resolve the Gravity here by using the Locale for getting\n                // the layout direction\n                final Configuration config = mView.getContext().getResources().getConfiguration();\n\t\t\t\t//获取绝对的Gravity\n                final int gravity = Gravity.getAbsoluteGravity(mGravity, config.getLayoutDirection());\n                mParams.gravity = gravity;\n                if ((gravity & Gravity.HORIZONTAL_GRAVITY_MASK) == Gravity.FILL_HORIZONTAL) {\n                    mParams.horizontalWeight = 1.0f;\n                }\n                if ((gravity & Gravity.VERTICAL_GRAVITY_MASK) == Gravity.FILL_VERTICAL) {\n                    mParams.verticalWeight = 1.0f;\n                }\n                mParams.x = mX;\n                mParams.y = mY;\n                mParams.verticalMargin = mVerticalMargin;\n                mParams.horizontalMargin = mHorizontalMargin;\n                mParams.packageName = packageName;\n                if (mView.getParent() != null) {\n                    if (localLOGV) Log.v(TAG, \"REMOVE! \" + mView + \" in \" + this);\n                    mWM.removeView(mView);//如果当前view存在，先移除\n                }\n                if (localLOGV) Log.v(TAG, \"ADD! \" + mView + \" in \" + this);\n                mWM.addView(mView, mParams);//通过WindowManager调用addView加载\n                trySendAccessibilityEvent();\n            }\n        }\n\t\t\n        private void trySendAccessibilityEvent() {\n            AccessibilityManager accessibilityManager =\n                    AccessibilityManager.getInstance(mView.getContext());\n            if (!accessibilityManager.isEnabled()) {\n                return;\n            }\n            // treat toasts as notifications since they are used to\n            // announce a transient piece of information to the user\n            AccessibilityEvent event = AccessibilityEvent.obtain(\n                    AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED);\n            event.setClassName(getClass().getName());\n            event.setPackageName(mView.getContext().getPackageName());\n            mView.dispatchPopulateAccessibilityEvent(event);\n            accessibilityManager.sendAccessibilityEvent(event);\n        }\n                \n\t\t/** \n\t\t * WindowManager调用removeView方法来将Toast视图移除\n\t\t */\n        public void handleHide() {\n            if (localLOGV) Log.v(TAG, \"HANDLE HIDE: \" + this + \" mView=\" + mView);\n            if (mView != null) {\n                // note: checking parent() just to make sure the view has\n                // been added...  i have seen cases where we get here when\n                // the view isn't yet added, so let's try not to crash.\n                if (mView.getParent() != null) {\n                    if (localLOGV) Log.v(TAG, \"REMOVE! \" + mView + \" in \" + this);\n                    mWM.removeView(mView);\n                }\n\n                mView = null;\n            }\n        }\n    }\n```\n\n来看下ITransientNotification ，就两个方法，如下：\n\n```java\n    /** @hide */\n    oneway interface ITransientNotification {\n        void show();\n        void hide();\n    }\n```\n\n具体实现就在TN类，其他进程回调TN类，来操作Toast的显示和消失：\n\n```java\n\n    @Override\n    public void show() {\n        if (localLOGV) Log.v(TAG, \"SHOW: \" + this);\n            mHandler.post(mShow);//显示\n    }\n\n    /**\n     * schedule handleHide into the right thread\n     */\n    @Override\n    public void hide() {\n        if (localLOGV) Log.v(TAG, \"HIDE: \" + this);\n        mHandler.post(mHide);//消失\n    }\n```\n\n这里可以看出Toast显示和消失用的Handler机制实现的。\n\n## 2.2. INotificationManager\n调用了getService，如下：\n```java\n\n    private static INotificationManager sService;\n\n    static private INotificationManager getService() {\n        if (sService != null) {\n            return sService;\n        }\n        sService = INotificationManager.Stub.asInterface(ServiceManager.getService(\"notification\"));\n        return sService;\n    }\n```\n\n得到INotificationManager服务，再调用enqueueToast方法，参数有三个，包名，TN，时间。INofiticationManager接口的具体实现类是NotificationManagerService类，源码位置：[frameworks\\base\\services\\core\\java\\com\\android\\server\\notification\\NotificationManagerService.java](https://github.com/android/platform_frameworks_base/blob/master/services/core/java/com/android/server/notification/NotificationManagerService.java)\n\n## 2.3. enqueueToast\n加入队列，用来显示Toast\n\n```java\n\n    @Override\n    public void enqueueToast(String pkg, ITransientNotification callback, int duration)\n    {\n        if (DBG) {\n            Slog.i(TAG, \"enqueueToast pkg=\" + pkg + \" callback=\" + callback\n                    + \" duration=\" + duration);\n        }\n        if (pkg == null || callback == null) {\n            Slog.e(TAG, \"Not doing toast. pkg=\" + pkg + \" callback=\" + callback);\n            return ;\n        }\n        //(1)判断是否系统的Toast，如果当前包名是android则为系统\n        final boolean isSystemToast = isCallerSystem() || (\"android\".equals(pkg));\n        //判断当前toast所属的pkg是不是所阻止的\n        if (ENABLE_BLOCKED_TOASTS && !noteNotificationOp(pkg, Binder.getCallingUid())) {\n            if (!isSystemToast) {\n                Slog.e(TAG, \"Suppressing toast from package \" + pkg + \" by user request.\");\n                return;\n            }\n        }\n        //入队列mToastQueue \n        synchronized (mToastQueue) {\n            int callingPid = Binder.getCallingPid();\n            long callingId = Binder.clearCallingIdentity();\n            try {\n                ToastRecord record;\n                //(2)判断Toast是否在队列当中\n                int index = indexOfToastLocked(pkg, callback);\n                // If it's already in the queue, we update it in place, we don't\n                // move it to the end of the queue.\n                if (index >= 0) {\n                    record = mToastQueue.get(index);\n                    record.update(duration);\n                } else {\n                    // Limit the number of toasts that any given package except the android\n                    // package can enqueue.  Prevents DOS attacks and deals with leaks.\n                    if (!isSystemToast) {\n                        int count = 0;\n                        final int N = mToastQueue.size();\n                        for (int i=0; i<N; i++) {\n                            final ToastRecord r = mToastQueue.get(i);\n                            if (r.pkg.equals(pkg)) {\n                                count++;\n                                if (count >= MAX_PACKAGE_NOTIFICATIONS) {//限制toasts数，最大50\n                                    Slog.e(TAG, \"Package has already posted \" + count\n                                            + \" toasts. Not showing more. Package=\" + pkg);\n                                    return;\n                                }\n                            }\n                        }\n                    }\n                    //获得ToastRecord对象\n                    record = new ToastRecord(callingPid, pkg, callback, duration);\n                    //放入mToastQueue中                       \n                    mToastQueue.add(record);\n                    index = mToastQueue.size() - 1;\n                    keepProcessAliveLocked(callingPid);//(3)设置该Toast为前台进程\n                }\n                // If it's at index 0, it's the current toast.  It doesn't matter if it's\n                // new or just been updated.  Call back and tell it to show itself.\n                // If the callback fails, this will remove it from the list, so don't\n                // assume that it's valid after this.\n                if (index == 0) {\n                    showNextToastLocked();//(4)直接显示Toast\n                }\n            } finally {\n                Binder.restoreCallingIdentity(callingId);\n            }\n        }\n    }\t\n```\n\n(1)判断是否系统的Toast，源码：\n\n```java\n    private static boolean isCallerSystem() {\n        return isUidSystem(Binder.getCallingUid());\n    }\n    \n    private static boolean isUidSystem(int uid) {\n        final int appid = UserHandle.getAppId(uid);\n\t    // 判断pid为系统进程使用的用户id，值为1000，或者为系统进程的手机的用户id，值为1001\n        return (appid == Process.SYSTEM_UID || appid == Process.PHONE_UID || uid == 0);\n    }\n```\n\n(2)判断Toast是否在队列当中，源码：\n\n```java\n    // lock on mToastQueue\n    int indexOfToastLocked(String pkg, ITransientNotification callback)\n    {\n\t    //\n        IBinder cbak = callback.asBinder();\n        ArrayList<ToastRecord> list = mToastQueue;\n        int len = list.size();\n        for (int i=0; i<len; i++) {\n            ToastRecord r = list.get(i);\n            if (r.pkg.equals(pkg) && r.callback.asBinder() == cbak) {\n                return i;\n            }\n        }\n        return -1;\n    }\n```\n\n(3)设置该Toast为前台进程，源码：\n\n```java\n    // lock on mToastQueue\n    void keepProcessAliveLocked(int pid)\n    {\n        int toastCount = 0; // toasts from this pid\n        ArrayList<ToastRecord> list = mToastQueue;\n        int N = list.size();\n        for (int i=0; i<N; i++) {\n            ToastRecord r = list.get(i);\n            if (r.pid == pid) {\n                toastCount++;\n            }\n        }\n        try {\n            // 设置该Toast为前台进程\n            mAm.setProcessForeground(mForegroundToken, pid, toastCount > 0);\n        } catch (RemoteException e) {\n            // Shouldn't happen.\n        }\n    }\n```\n\n(4)直接显示Toast，源码：\n\n```java\n\n    void showNextToastLocked() {\n\t    //直接取第一个\n        ToastRecord record = mToastQueue.get(0);\n        while (record != null) {\n            if (DBG) Slog.d(TAG, \"Show pkg=\" + record.pkg + \" callback=\" + record.callback);\n            try {\n                record.callback.show();//回调TN类，显示Toast\n                scheduleTimeoutLocked(record);//设置消失\n                return;\n            } catch (RemoteException e) {\n                Slog.w(TAG, \"Object died trying to show notification \" + record.callback\n                        + \" in package \" + record.pkg);\n                // remove it from the list and let the process die\n                int index = mToastQueue.indexOf(record);\n                if (index >= 0) {\n                    mToastQueue.remove(index);\n                }\n                keepProcessAliveLocked(record.pid);\n                if (mToastQueue.size() > 0) {\n                    record = mToastQueue.get(0);\n                } else {\n                    record = null;\n                }\n            }\n        }\n    }\n    \n    private void scheduleTimeoutLocked(ToastRecord r)\n    {\n        mHandler.removeCallbacksAndMessages(r);//移除ToastRecord\n        Message m = Message.obtain(mHandler, MESSAGE_TIMEOUT, r);\n        //static final int LONG_DELAY = 3500; // 3.5 seconds\n        //static final int SHORT_DELAY = 2000; // 2 seconds\n        long delay = r.duration == Toast.LENGTH_LONG ? LONG_DELAY : SHORT_DELAY;\n\t\t//发送Toast消失的message\n        mHandler.sendMessageDelayed(m, delay);\n    }\n```\n\n从enqueueToast方法可知，先判断是不是系统和合法的Toast，然后判断是否在ToastQueue（这里解释了很多Toast，是一个个显示的），如果存在，只需要更新Toast显示的时间，如果不在，就直接显示，回调给TN类。`到这里，知道了Toast是如何显示的。`\n还没有结束，继续追踪mHandler，来到WorkerHandler ：\n\n```java\n    private final class WorkerHandler extends Handler\n    {\n        @Override\n        public void handleMessage(Message msg)\n        {\n            switch (msg.what)\n            {\n                case MESSAGE_TIMEOUT:\n                    handleTimeout((ToastRecord)msg.obj);\n                    break;\n               ……\n            }\n        }\n\n    }\n    \n    private void handleTimeout(ToastRecord record)\n    {\n        if (DBG) Slog.d(TAG, \"Timeout pkg=\" + record.pkg + \" callback=\" + record.callback);\n        synchronized (mToastQueue) {\n\t        //还是判断Toast是否在队列当中\n            int index = indexOfToastLocked(record.pkg, record.callback);\n            if (index >= 0) {\n                cancelToastLocked(index);\n            }\n        }\n    }\n    \n    void cancelToastLocked(int index) {\n        ToastRecord record = mToastQueue.get(index);\n        try {\n            record.callback.hide();//回调TN类，Toast消失\n        } catch (RemoteException e) {\n            Slog.w(TAG, \"Object died trying to hide notification \" + record.callback\n                    + \" in package \" + record.pkg);\n            // don't worry about this, we're about to remove it from\n            // the list anyway\n        }\n        mToastQueue.remove(index);//该ToastRecord对象从mToastQueue中移除\n        keepProcessAliveLocked(record.pid);//设置该Toast为前台进程\n        if (mToastQueue.size() > 0) {\n            // Show the next one. If the callback fails, this will remove\n            // it from the list, so don't assume that the list hasn't changed\n            // after this point.\n            showNextToastLocked();//继续show下个Toast\n        }\n    }\n```\n\n到这里，知道了Toast是如何消失的。`Toast核心代码显示和消失源码分析完毕。\n\n# 总结\nToast代码调用只有一行，了解这行代码的背后，有个ToastQueue，进入队列之前，会做一些合法性判断，使用进程间通信进行回调，Handler机制显示和消失。自定义Toast时，需要调用setView，不然show会抛异常，这个从show方法就能得知。至此，Toast源码解析告一段落。\n\n","slug":"toast","published":0,"updated":"2016-05-20T08:36:49.334Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6w00g3o4pktgok8192"},{"title":"做款好的app，还能做什么","date":"2016-05-20T08:34:30.000Z","category":null,"_content":"\n# drawable\nres下面drawable，mipmap-hdpi，mipmap-mdpi这些，了解知道他们之间有什么区别，继而做成APP更加精致。\n[Android drawable微技巧，你所不知道的drawable的那些细节](http://blog.csdn.net/guolin_blog/article/details/50727753)\n[Android样式的开发:drawable汇总篇](http://keeganlee.me/post/android/20150916)\n\n# 边界处理\n\n# APK瘦身\n最后打包，发现APK十多M，哎呀，握草，该压压。\n[APK瘦身实践](http://jayfeng.com/2015/12/29/APK%E7%98%A6%E8%BA%AB%E5%AE%9E%E8%B7%B5/)\n[如何将apk大小减少6M的](http://blog.csdn.net/UsherFor/article/details/46827587)\n\n\n","source":"_drafts/finalApk.md","raw":"title: 做款好的app，还能做什么\ndate: 2016-05-20 16:34:30\ntags:\ncategory:\n---\n\n# drawable\nres下面drawable，mipmap-hdpi，mipmap-mdpi这些，了解知道他们之间有什么区别，继而做成APP更加精致。\n[Android drawable微技巧，你所不知道的drawable的那些细节](http://blog.csdn.net/guolin_blog/article/details/50727753)\n[Android样式的开发:drawable汇总篇](http://keeganlee.me/post/android/20150916)\n\n# 边界处理\n\n# APK瘦身\n最后打包，发现APK十多M，哎呀，握草，该压压。\n[APK瘦身实践](http://jayfeng.com/2015/12/29/APK%E7%98%A6%E8%BA%AB%E5%AE%9E%E8%B7%B5/)\n[如何将apk大小减少6M的](http://blog.csdn.net/UsherFor/article/details/46827587)\n\n\n","slug":"finalApk","published":0,"updated":"2016-05-23T01:35:45.730Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6y00g8o4pknbqwsqi4"},{"title":"Android Studio和Android SDK配置红杏公益代理","date":"2015-08-05T05:37:39.000Z","_content":"因为红杏暂时只能在chrome中使用，而且其他客户端的版本也正在开发中。所以目前对于 `开发人员` 来说，要装一些IDE的插件或者要用命令行装些库的时候，还是不太方便。\n\n前不久红杏开放了公益代理，专门为开发人员开放，免费使用。从今以后更新android sdk，使用Android Studio都会顺利很多。一直以来使用Android Studio最大的障碍，现在通过红杏公益代理可以得到解决了。\n\n## 郑重推荐\n我的推广链接: [http://honx.in/_VbT32YkWGniKZ2AO](http://honx.in/_VbT32YkWGniKZ2AO)，你通过这个链接安装购买1个月以上的服务，你我都获得 `10天VIP` 的奖励。对于良心企业，能做的也只有这么多。目前红杏按月付费是10元每月，这个已经是低得不能再低的资费。\n\n## 更新Android SDK\n打开SDK Manager-Tools-Options，设置如下：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/android-studio-hx-1.png)\n\n## Android Stuido 配置代理\n\n打开Preference页面，找到HTTP Proxy, 选择Manual proxy configuration。\nHost Name: hx.gy\n Port Number: 1080.\n![](http://7q5c2h.com1.z0.glb.clouddn.com/android-studio-hx-2.png)\n","source":"_drafts/android-studio-hx.md","raw":"title: Android Studio和Android SDK配置红杏公益代理\ndate: 2015-08-05 13:37:39\ntags: [Android Studio,红杏]\ncategory: Android Studio\n---\n因为红杏暂时只能在chrome中使用，而且其他客户端的版本也正在开发中。所以目前对于 `开发人员` 来说，要装一些IDE的插件或者要用命令行装些库的时候，还是不太方便。\n\n前不久红杏开放了公益代理，专门为开发人员开放，免费使用。从今以后更新android sdk，使用Android Studio都会顺利很多。一直以来使用Android Studio最大的障碍，现在通过红杏公益代理可以得到解决了。\n\n## 郑重推荐\n我的推广链接: [http://honx.in/_VbT32YkWGniKZ2AO](http://honx.in/_VbT32YkWGniKZ2AO)，你通过这个链接安装购买1个月以上的服务，你我都获得 `10天VIP` 的奖励。对于良心企业，能做的也只有这么多。目前红杏按月付费是10元每月，这个已经是低得不能再低的资费。\n\n## 更新Android SDK\n打开SDK Manager-Tools-Options，设置如下：\n![](http://7q5c2h.com1.z0.glb.clouddn.com/android-studio-hx-1.png)\n\n## Android Stuido 配置代理\n\n打开Preference页面，找到HTTP Proxy, 选择Manual proxy configuration。\nHost Name: hx.gy\n Port Number: 1080.\n![](http://7q5c2h.com1.z0.glb.clouddn.com/android-studio-hx-2.png)\n","slug":"android-studio-hx","published":0,"updated":"2016-03-17T00:44:06.334Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cips1ge6z00g9o4pk1ly6b4z9"}],"PostAsset":[],"PostCategory":[{"post_id":"cips1gdxo0006o4pknmo2nace","category_id":"cips1gdxs0007o4pk66lhvsr4","_id":"cips1gdxu000ao4pkgkfhlnu0"},{"post_id":"cips1gdxv000bo4pk1scg48nc","category_id":"cips1gdxw000co4pkmtewivih","_id":"cips1gdxx000fo4pk3uj3g0hu"},{"post_id":"cips1gdxy000go4pk7k9ln6hi","category_id":"cips1gdxy000ho4pkeg63jvxo","_id":"cips1gdxz000ko4pkjhi3eenm"},{"post_id":"cips1gdy1000po4pkg6hus7bs","category_id":"cips1gdxy000ho4pkeg63jvxo","_id":"cips1gdy2000qo4pk4le60dfw"},{"post_id":"cips1gdy4000uo4pkc9yvkie2","category_id":"cips1gdxy000ho4pkeg63jvxo","_id":"cips1gdy4000vo4pkdgfeeb42"},{"post_id":"cips1gdy6000zo4pklj2isi0b","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1gdy80013o4pkjpg5t1xc"},{"post_id":"cips1gdya0016o4pky4v96xio","category_id":"cips1gdya0017o4pked4nc2tb","_id":"cips1gdyb001ao4pkdgvose6b"},{"post_id":"cips1gdyc001co4pknhqr2ogn","category_id":"cips1gdya0017o4pked4nc2tb","_id":"cips1gdyd001do4pkx4ggih79"},{"post_id":"cips1gdye001go4pkkufktzqx","category_id":"cips1gdyf001ho4pkhofwab4z","_id":"cips1gdyg001ko4pkn2geb53l"},{"post_id":"cips1gdyh001lo4pk2tio9702","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1gdyi001mo4pkwuql7ez7"},{"post_id":"cips1gdyj001po4pkdij5k936","category_id":"cips1gdya0017o4pked4nc2tb","_id":"cips1gdyk001qo4pk2u1ur43o"},{"post_id":"cips1gdym001to4pko58oqxaa","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1gdyn001uo4pkpv6vv6uk"},{"post_id":"cips1gdyo001xo4pkhkgrz8w4","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1gdyq001yo4pky7joe34t"},{"post_id":"cips1gdyr0021o4pk995jvc1v","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1gdys0022o4pkie0b0ryl"},{"post_id":"cips1gdyt0026o4pkhcy4b77u","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1gdyu0027o4pkgzur68zv"},{"post_id":"cips1gdyv0029o4pklplwp0qe","category_id":"cips1gdyw002ao4pk5bs2zo0c","_id":"cips1gdyx002do4pkbiizrsu8"},{"post_id":"cips1gdyy002eo4pkpgd4jata","category_id":"cips1gdyw002ao4pk5bs2zo0c","_id":"cips1gdyy002fo4pke6nb6wtv"},{"post_id":"cips1gdz0002ko4pkbjf3a606","category_id":"cips1gdz2002lo4pkxn4206a8","_id":"cips1gdz3002oo4pkp64jvkz7"},{"post_id":"cips1gdz4002po4pkpjtnpkkq","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1gdz6002qo4pk49qvy38p"},{"post_id":"cips1gdz8002so4pkmjvyy0l7","category_id":"cips1gdya0017o4pked4nc2tb","_id":"cips1gdz8002to4pkgbp35mi6"},{"post_id":"cips1gdz9002wo4pk21ifnzhx","category_id":"cips1gdza002xo4pkycrdxovd","_id":"cips1gdzb0030o4pk3osh6uyi"},{"post_id":"cips1gdzc0031o4pkocl348rn","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1gdzd0032o4pkgg6ldojx"},{"post_id":"cips1gdzf0037o4pkn6x1gu6i","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1gdzg0038o4pkb1tumx0o"},{"post_id":"cips1gdzi003co4pkzawwxhls","category_id":"cips1gdxw000co4pkmtewivih","_id":"cips1gdzj003do4pkftphsoj4"},{"post_id":"cips1gdzk003fo4pkx1ntle24","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1gdzl003go4pk9nph933v"},{"post_id":"cips1gdzn003lo4pkpu9st7f2","category_id":"cips1gdxw000co4pkmtewivih","_id":"cips1gdzo003mo4pkk9wph80o"},{"post_id":"cips1gdzt003po4pk0gkhfrx5","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1gdzu003qo4pks7v6tssj"},{"post_id":"cips1gdzv003so4pkk3vcfd5k","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1gdzw003to4pkf7dybsad"},{"post_id":"cips1gdzz003wo4pkbxz0kzij","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge00003xo4pkmdocnrbv"},{"post_id":"cips1ge020041o4pkxcqilly0","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge030042o4pk1ibgmt4v"},{"post_id":"cips1ge050047o4pkinokcrec","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge060048o4pk343mgdg1"},{"post_id":"cips1ge08004bo4pk1qd4pr5u","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge08004co4pkjt2ylq2t"},{"post_id":"cips1ge0b004ho4pkiwphvcvf","category_id":"cips1ge0c004io4pkv46o6lwf","_id":"cips1ge0e004lo4pky16zuktj"},{"post_id":"cips1ge0f004mo4pkv5o2t7gh","category_id":"cips1ge0c004io4pkv46o6lwf","_id":"cips1ge0f004no4pk5jnusl1e"},{"post_id":"cips1ge0h004po4pkr6jldipy","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge0h004qo4pkd10k117q"},{"post_id":"cips1ge0j004uo4pko0f4ru7v","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge0k004vo4pk26nyck96"},{"post_id":"cips1ge0m004zo4pkf6mcig2s","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge0n0050o4pkid7sx2as"},{"post_id":"cips1ge0o0052o4pkau55lp3q","category_id":"cips1ge0p0053o4pkm2svcnpu","_id":"cips1ge0q0056o4pk1ebn0seu"},{"post_id":"cips1ge0q0057o4pk2s2f3cax","category_id":"cips1ge0r0058o4pkjuypkgdo","_id":"cips1ge0s005bo4pk3c6d128g"},{"post_id":"cips1ge0t005co4pktos6xbmy","category_id":"cips1ge0r0058o4pkjuypkgdo","_id":"cips1ge0u005do4pkl4gkkb0h"},{"post_id":"cips1ge0u005fo4pkq3n37p50","category_id":"cips1ge0r0058o4pkjuypkgdo","_id":"cips1ge0v005go4pkoab6hhsp"},{"post_id":"cips1ge0w005io4pk4a249nnc","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge14005jo4pkanzl00ok"},{"post_id":"cips1ge15005mo4pk19hclvbn","category_id":"cips1gdya0017o4pked4nc2tb","_id":"cips1ge16005no4pk79bgjs6p"},{"post_id":"cips1ge18005qo4pksse2fahh","category_id":"cips1gdxw000co4pkmtewivih","_id":"cips1ge18005ro4pkcj30ifmy"},{"post_id":"cips1ge19005to4pko87n7ga7","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge1b005uo4pkep8spkqz"},{"post_id":"cips1ge1c005xo4pk7pm99njn","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge1d005yo4pky3867xoj"},{"post_id":"cips1ge1e0061o4pktpm0i3v1","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge1f0062o4pkvhl1c38i"},{"post_id":"cips1ge1g0065o4pk2v3fezc4","category_id":"cips1gdxw000co4pkmtewivih","_id":"cips1ge1h0066o4pk9ciihk68"},{"post_id":"cips1ge1j006ao4pkfgqmgd38","category_id":"cips1gdya0017o4pked4nc2tb","_id":"cips1ge1j006bo4pkjpubeutt"},{"post_id":"cips1ge1k006go4pkndio1axa","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge1l006ho4pkr4tid2mj"},{"post_id":"cips1ge1m006jo4pkz07gasxl","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge1n006ko4pkz1buj1rr"},{"post_id":"cips1ge1o006no4pkd6lxiat9","category_id":"cips1gdxw000co4pkmtewivih","_id":"cips1ge1p006oo4pkbb14krds"},{"post_id":"cips1ge1q006qo4pkcxlujr7q","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge1r006ro4pkdau5j7wk"},{"post_id":"cips1ge1s006vo4pk06xjewra","category_id":"cips1ge1t006wo4pk75yfq5p3","_id":"cips1ge1t006yo4pka51pkjge"},{"post_id":"cips1ge1u006zo4pk7oz4fiud","category_id":"cips1ge1v0070o4pkk6xl3typ","_id":"cips1ge1w0073o4pk3rfygb91"},{"post_id":"cips1ge1w0075o4pk9a5jpdg3","category_id":"cips1ge0p0053o4pkm2svcnpu","_id":"cips1ge1y0076o4pkyai4kzvn"},{"post_id":"cips1ge1z0079o4pkzwcn4b6u","category_id":"cips1gdya0017o4pked4nc2tb","_id":"cips1ge20007ao4pk3xpa8lk0"},{"post_id":"cips1ge21007do4pkf8f6sblo","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge22007eo4pktjfbksid"},{"post_id":"cips1ge23007go4pkt5x1m878","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge24007ho4pkijwcxpqw"},{"post_id":"cips1ge25007lo4pkv45hfd9p","category_id":"cips1ge1t006wo4pk75yfq5p3","_id":"cips1ge27007mo4pk5nph34sb"},{"post_id":"cips1ge28007oo4pkz3hjn1sa","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge29007po4pk4tvw9r14"},{"post_id":"cips1ge2a007ro4pkyzse1rpg","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge2b007so4pkez2soaiu"},{"post_id":"cips1ge2c007uo4pk9nor0kug","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge2d007vo4pk1noi11yx"},{"post_id":"cips1ge2e007xo4pkebyi0ayz","category_id":"cips1gdza002xo4pkycrdxovd","_id":"cips1ge2f007yo4pkiutkmsda"},{"post_id":"cips1ge2g0081o4pk0crxwwuz","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge2h0082o4pkkqbhupgw"},{"post_id":"cips1ge2j0086o4pkb0ftdnha","category_id":"cips1gdya0017o4pked4nc2tb","_id":"cips1ge2k0087o4pkjhi2ajre"},{"post_id":"cips1ge2m008bo4pk024vkkel","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge2n008co4pkcbk0qe7o"},{"post_id":"cips1ge2p008go4pkv8ywmo8w","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge2q008ho4pkneudm61r"},{"post_id":"cips1ge2r008ko4pkql600ppy","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge2s008lo4pkuqq1lfnz"},{"post_id":"cips1ge2u008oo4pkdxiwh12e","category_id":"cips1gdya0017o4pked4nc2tb","_id":"cips1ge2u008po4pkz5m59yux"},{"post_id":"cips1ge2w008to4pkbhfjub99","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge2w008uo4pkjc0ixrs9"},{"post_id":"cips1ge2y008wo4pkrg8fd2ya","category_id":"cips1gdxw000co4pkmtewivih","_id":"cips1ge2z008xo4pk3h3theq4"},{"post_id":"cips1ge31008zo4pka1dlhcmp","category_id":"cips1ge320090o4pkw0yt7vki","_id":"cips1ge320093o4pkw635j6ph"},{"post_id":"cips1ge340096o4pk2jsb013w","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge350097o4pkfc32eutx"},{"post_id":"cips1ge37009bo4pkzkml0qi0","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge37009co4pkxdpo93hz"},{"post_id":"cips1ge39009go4pkm7jw7tgc","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge39009ho4pkmbqnlizu"},{"post_id":"cips1ge3b009mo4pknv5sj1p0","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge3b009no4pkjx8b1uof"},{"post_id":"cips1ge3e009to4pkxfcp3zji","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge3f009uo4pk1p3sv3co"},{"post_id":"cips1ge3g009yo4pk23zwaw65","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge3h009zo4pku9rowcvx"},{"post_id":"cips1ge3i00a1o4pkupvx7exj","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge3j00a2o4pkr03vxk6n"},{"post_id":"cips1ge3k00a5o4pkfu03sqar","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge3l00a6o4pk8i8ae1uc"},{"post_id":"cips1ge3m00a9o4pk4xru8d2k","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge3o00aao4pkeikx04bc"},{"post_id":"cips1ge3q00afo4pk6jox1vz8","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge3r00ago4pkmg7oq8m5"},{"post_id":"cips1ge3s00ajo4pkxpl4caal","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge3t00ako4pk856borse"},{"post_id":"cips1ge3v00ano4pkvlli5i8a","category_id":"cips1gdxw000co4pkmtewivih","_id":"cips1ge3w00aoo4pk05420siv"},{"post_id":"cips1ge3x00aro4pk5mabccfu","category_id":"cips1gdza002xo4pkycrdxovd","_id":"cips1ge3z00aso4pkzyxs8kjc"},{"post_id":"cips1ge4100axo4pk4k8g114t","category_id":"cips1gdza002xo4pkycrdxovd","_id":"cips1ge4200ayo4pkfe35hcvn"},{"post_id":"cips1ge4400b3o4pk32apjjan","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge4500b4o4pk8wyja4qm"},{"post_id":"cips1ge4600b8o4pketv3289c","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge4700b9o4pkj7ywlldd"},{"post_id":"cips1ge4a00bho4pk3fmctkrw","category_id":"cips1ge320090o4pkw0yt7vki","_id":"cips1ge4b00bio4pk3ff783bw"},{"post_id":"cips1ge4c00bmo4pk0rfeezig","category_id":"cips1gdxw000co4pkmtewivih","_id":"cips1ge4d00bno4pkpwn0uwsg"},{"post_id":"cips1ge4e00bqo4pkdtm2ubt8","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge4f00bro4pk9akon686"},{"post_id":"cips1ge4h00buo4pkrml7uoxe","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge4i00bvo4pkrk5asw6f"},{"post_id":"cips1ge4j00byo4pk6aojgoyl","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge4l00bzo4pkjp80m0hj"},{"post_id":"cips1ge4v00c4o4pk5n4rq7dt","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge4w00c5o4pk6b1vt1g3"},{"post_id":"cips1ge4y00c9o4pkkdys08pv","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge4y00cao4pk7g2o75mo"},{"post_id":"cips1ge5000ceo4pkfmj0rcp8","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge5100cfo4pk8s1eu55i"},{"post_id":"cips1ge5300cio4pkred4chys","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge5400cjo4pkx86jb5wa"},{"post_id":"cips1ge5600coo4pkv1of9ocp","category_id":"cips1gdza002xo4pkycrdxovd","_id":"cips1ge5600cpo4pkekwxh69u"},{"post_id":"cips1ge5800cto4pkgsgwdotf","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge5800cuo4pk0nlxbg3d"},{"post_id":"cips1ge5900cwo4pkzeo3bg38","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge5a00cxo4pk4xp705ra"},{"post_id":"cips1ge5d00d8o4pktmv6de4i","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge5e00d9o4pkjxne26s8"},{"post_id":"cips1ge5f00dco4pkgw747gpl","category_id":"cips1ge320090o4pkw0yt7vki","_id":"cips1ge5g00ddo4pkekp8piv1"},{"post_id":"cips1ge5h00dfo4pk4pna7oxf","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge5i00dgo4pkhgfwozec"},{"post_id":"cips1ge5j00djo4pkmkvaqnca","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge5k00dko4pkbmvzpk8j"},{"post_id":"cips1ge5l00dno4pkeebqw3ry","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge5m00doo4pk9ggrn3tk"},{"post_id":"cips1ge5n00dqo4pk66s3cndo","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge5n00dro4pk54wa5lzb"},{"post_id":"cips1ge5o00dto4pk2gpnwuan","category_id":"cips1ge320090o4pkw0yt7vki","_id":"cips1ge5p00duo4pk3o78efz6"},{"post_id":"cips1ge5r00dyo4pks82jhp72","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge5s00dzo4pkq6ivfqth"},{"post_id":"cips1ge5t00e1o4pkocsf156g","category_id":"cips1ge320090o4pkw0yt7vki","_id":"cips1ge5u00e2o4pkz6xwl6ec"},{"post_id":"cips1ge5v00e6o4pkrmvkkacj","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge5w00e7o4pksl4o6u6f"},{"post_id":"cips1ge5y00eco4pkzo2t9zh1","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge5z00edo4pk1zy5y4vm"},{"post_id":"cips1ge6000ego4pkzakj8z00","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge6000eho4pkqli4msy1"},{"post_id":"cips1ge6200eko4pkrhw9cxgd","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge6200elo4pkm4kq1meo"},{"post_id":"cips1ge6300eno4pk18ripsyq","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge6400eoo4pkkybq7xy5"},{"post_id":"cips1ge6500ero4pkowcd5mi5","category_id":"cips1ge1t006wo4pk75yfq5p3","_id":"cips1ge6600eso4pkdllrd3va"},{"post_id":"cips1ge6700euo4pkxkkpwfbu","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge6800evo4pk2rqsnoa6"},{"post_id":"cips1ge6900exo4pkr8t8y281","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge6900eyo4pkbnuez02s"},{"post_id":"cips1ge6a00f1o4pkpcb73uzo","category_id":"cips1gdxw000co4pkmtewivih","_id":"cips1ge6b00f2o4pkpig9ik1l"},{"post_id":"cips1ge6c00f4o4pk7qszr40e","category_id":"cips1ge1t006wo4pk75yfq5p3","_id":"cips1ge6c00f5o4pk4rumyqkm"},{"post_id":"cips1ge6d00f7o4pkp744oxfa","category_id":"cips1ge1t006wo4pk75yfq5p3","_id":"cips1ge6e00f8o4pkydus2ogw"},{"post_id":"cips1ge6f00fbo4pk18rotpvz","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge6g00fco4pkc095pmno"},{"post_id":"cips1ge6i00ffo4pkuf9133nu","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge6i00fgo4pkjca2kxz5"},{"post_id":"cips1ge6k00fio4pknm4u5nzr","category_id":"cips1gdza002xo4pkycrdxovd","_id":"cips1ge6l00fjo4pk025y1440"},{"post_id":"cips1ge6n00foo4pknlzt48z6","category_id":"cips1gdxw000co4pkmtewivih","_id":"cips1ge6o00fpo4pk7adfzuti"},{"post_id":"cips1ge6q00fso4pkijfq8aob","category_id":"cips1gdy70010o4pk082wgqt4","_id":"cips1ge6r00fto4pk7up2ugm5"},{"post_id":"cips1ge6s00fwo4pkrxkidiam","category_id":"cips1gdxw000co4pkmtewivih","_id":"cips1ge6t00fxo4pkbccyz0sg"},{"post_id":"cips1ge6u00g0o4pk0g0bptff","category_id":"cips1gdxw000co4pkmtewivih","_id":"cips1ge6v00g1o4pk6fmmcsqs"},{"post_id":"cips1ge6w00g3o4pktgok8192","category_id":"cips1ge6x00g4o4pk2keieijw","_id":"cips1ge6x00g7o4pkrcozztv6"},{"post_id":"cips1ge6z00g9o4pk1ly6b4z9","category_id":"cips1ge1t006wo4pk75yfq5p3","_id":"cips1ge7100gao4pk9hp4jea2"}],"PostTag":[{"post_id":"cips1gdxo0006o4pknmo2nace","tag_id":"cips1gdxs0008o4pkoo1rlme8","_id":"cips1gdxu0009o4pk10e3dmox"},{"post_id":"cips1gdxv000bo4pk1scg48nc","tag_id":"cips1gdxw000do4pkfmlbx282","_id":"cips1gdxw000eo4pkiv9bxowo"},{"post_id":"cips1gdxy000go4pk7k9ln6hi","tag_id":"cips1gdxz000io4pk4tdatgul","_id":"cips1gdy0000mo4pkj96qpmsz"},{"post_id":"cips1gdxy000go4pk7k9ln6hi","tag_id":"cips1gdxz000jo4pkcvlorodr","_id":"cips1gdy0000no4pk5pkr0y6j"},{"post_id":"cips1gdxy000go4pk7k9ln6hi","tag_id":"cips1gdxz000lo4pkm5iw9fgn","_id":"cips1gdy0000oo4pkfzgrvqxn"},{"post_id":"cips1gdy1000po4pkg6hus7bs","tag_id":"cips1gdxz000io4pk4tdatgul","_id":"cips1gdy2000ro4pku75oi41d"},{"post_id":"cips1gdy1000po4pkg6hus7bs","tag_id":"cips1gdxz000jo4pkcvlorodr","_id":"cips1gdy3000so4pkcrcsj5lj"},{"post_id":"cips1gdy1000po4pkg6hus7bs","tag_id":"cips1gdxz000lo4pkm5iw9fgn","_id":"cips1gdy3000to4pknzn10e3r"},{"post_id":"cips1gdy4000uo4pkc9yvkie2","tag_id":"cips1gdxz000io4pk4tdatgul","_id":"cips1gdy4000wo4pkbnb1e5l8"},{"post_id":"cips1gdy4000uo4pkc9yvkie2","tag_id":"cips1gdxz000jo4pkcvlorodr","_id":"cips1gdy5000xo4pk9zavouh8"},{"post_id":"cips1gdy4000uo4pkc9yvkie2","tag_id":"cips1gdxz000lo4pkm5iw9fgn","_id":"cips1gdy5000yo4pkuh55mgc0"},{"post_id":"cips1gdy6000zo4pklj2isi0b","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1gdy80012o4pkzljm2udo"},{"post_id":"cips1gdy6000zo4pklj2isi0b","tag_id":"cips1gdxz000io4pk4tdatgul","_id":"cips1gdy80014o4pk1866k0k6"},{"post_id":"cips1gdy6000zo4pklj2isi0b","tag_id":"cips1gdxz000lo4pkm5iw9fgn","_id":"cips1gdy80015o4pker6ern3p"},{"post_id":"cips1gdya0016o4pky4v96xio","tag_id":"cips1gdxw000do4pkfmlbx282","_id":"cips1gdyb0019o4pkokemstw7"},{"post_id":"cips1gdya0016o4pky4v96xio","tag_id":"cips1gdya0018o4pk31k08g97","_id":"cips1gdyb001bo4pkklh9oug2"},{"post_id":"cips1gdyc001co4pknhqr2ogn","tag_id":"cips1gdyd001eo4pkbu9o9kkp","_id":"cips1gdyd001fo4pkplkz0zjv"},{"post_id":"cips1gdye001go4pkkufktzqx","tag_id":"cips1gdyf001io4pk8igb9xg0","_id":"cips1gdyg001jo4pksauzbpz5"},{"post_id":"cips1gdyh001lo4pk2tio9702","tag_id":"cips1gdyi001no4pkbec9po18","_id":"cips1gdyi001oo4pk5lvgkvm5"},{"post_id":"cips1gdyj001po4pkdij5k936","tag_id":"cips1gdyk001ro4pkgxz45qbz","_id":"cips1gdyk001so4pkex0s3cij"},{"post_id":"cips1gdym001to4pko58oqxaa","tag_id":"cips1gdyn001vo4pka5t4c08k","_id":"cips1gdyo001wo4pkaceastht"},{"post_id":"cips1gdyo001xo4pkhkgrz8w4","tag_id":"cips1gdyq001zo4pkc2iz8b3s","_id":"cips1gdyq0020o4pk7yqbywzk"},{"post_id":"cips1gdyr0021o4pk995jvc1v","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1gdyt0024o4pknscfhbt5"},{"post_id":"cips1gdyr0021o4pk995jvc1v","tag_id":"cips1gdys0023o4pkvnpqhm5o","_id":"cips1gdyt0025o4pkfu14clt1"},{"post_id":"cips1gdyt0026o4pkhcy4b77u","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1gdyu0028o4pk4h0x1idz"},{"post_id":"cips1gdyv0029o4pklplwp0qe","tag_id":"cips1gdyw002bo4pk1mps3b2z","_id":"cips1gdyx002co4pkhhh38p4k"},{"post_id":"cips1gdyy002eo4pkpgd4jata","tag_id":"cips1gdyw002bo4pk1mps3b2z","_id":"cips1gdyz002ho4pk4rvh5lji"},{"post_id":"cips1gdyy002eo4pkpgd4jata","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1gdyz002io4pkqrbqrlus"},{"post_id":"cips1gdyy002eo4pkpgd4jata","tag_id":"cips1gdyz002go4pkm8a9g1ps","_id":"cips1gdyz002jo4pkph3gpp9k"},{"post_id":"cips1gdz0002ko4pkbjf3a606","tag_id":"cips1gdz2002mo4pkgvn7hmkr","_id":"cips1gdz3002no4pkbpih8c2r"},{"post_id":"cips1gdz4002po4pkpjtnpkkq","tag_id":"cips1gdz2002mo4pkgvn7hmkr","_id":"cips1gdz6002ro4pkgcxi7pda"},{"post_id":"cips1gdz8002so4pkmjvyy0l7","tag_id":"cips1gdz9002uo4pkb8or0kwo","_id":"cips1gdz9002vo4pkvszw7vpn"},{"post_id":"cips1gdz9002wo4pk21ifnzhx","tag_id":"cips1gdza002yo4pkoatkk8zl","_id":"cips1gdzb002zo4pksa4n83u6"},{"post_id":"cips1gdzc0031o4pkocl348rn","tag_id":"cips1gdzd0033o4pkft2cuaqr","_id":"cips1gdze0035o4pkoynsacy8"},{"post_id":"cips1gdzc0031o4pkocl348rn","tag_id":"cips1gdze0034o4pkf0ifp8p5","_id":"cips1gdze0036o4pklp7i9ddl"},{"post_id":"cips1gdzf0037o4pkn6x1gu6i","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1gdzg003ao4pkym07h7pu"},{"post_id":"cips1gdzf0037o4pkn6x1gu6i","tag_id":"cips1gdzg0039o4pknb4nw902","_id":"cips1gdzh003bo4pkknc16uwk"},{"post_id":"cips1gdzi003co4pkzawwxhls","tag_id":"cips1gdxw000do4pkfmlbx282","_id":"cips1gdzj003eo4pkh4mglyr8"},{"post_id":"cips1gdzk003fo4pkx1ntle24","tag_id":"cips1gdzl003ho4pkrm2dbnkj","_id":"cips1gdzm003io4pk2khst15w"},{"post_id":"cips1gdzk003fo4pkx1ntle24","tag_id":"cips1gdz2002mo4pkgvn7hmkr","_id":"cips1gdzm003jo4pk68z9xvo5"},{"post_id":"cips1gdzk003fo4pkx1ntle24","tag_id":"cips1gdyw002bo4pk1mps3b2z","_id":"cips1gdzm003ko4pk3lrdam0w"},{"post_id":"cips1gdzn003lo4pkpu9st7f2","tag_id":"cips1gdxw000do4pkfmlbx282","_id":"cips1gdzp003no4pkv65gb8dz"},{"post_id":"cips1gdzn003lo4pkpu9st7f2","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1gdzq003oo4pk31nslqms"},{"post_id":"cips1gdzt003po4pk0gkhfrx5","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1gdzu003ro4pkpfrtaq3o"},{"post_id":"cips1gdzv003so4pkk3vcfd5k","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1gdzw003uo4pkq94ppgvn"},{"post_id":"cips1gdzv003so4pkk3vcfd5k","tag_id":"cips1gdzg0039o4pknb4nw902","_id":"cips1gdzw003vo4pkodsq1in2"},{"post_id":"cips1gdzz003wo4pkbxz0kzij","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge00003zo4pk7tnslxgz"},{"post_id":"cips1gdzz003wo4pkbxz0kzij","tag_id":"cips1ge00003yo4pkhix7hbv6","_id":"cips1ge000040o4pkypq4e9hy"},{"post_id":"cips1ge020041o4pkxcqilly0","tag_id":"cips1ge030043o4pkngrhawrr","_id":"cips1ge040045o4pkp71ivn8f"},{"post_id":"cips1ge020041o4pkxcqilly0","tag_id":"cips1ge040044o4pk99s5hnwn","_id":"cips1ge040046o4pk2msy5bix"},{"post_id":"cips1ge050047o4pkinokcrec","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge060049o4pkelf3oiw9"},{"post_id":"cips1ge050047o4pkinokcrec","tag_id":"cips1ge040044o4pk99s5hnwn","_id":"cips1ge06004ao4pkxsxnzya2"},{"post_id":"cips1ge08004bo4pk1qd4pr5u","tag_id":"cips1ge09004do4pkfr5whpkp","_id":"cips1ge09004fo4pkwkx4whje"},{"post_id":"cips1ge08004bo4pk1qd4pr5u","tag_id":"cips1ge09004eo4pkuxh4tc72","_id":"cips1ge0a004go4pkvrkkdnjt"},{"post_id":"cips1ge0b004ho4pkiwphvcvf","tag_id":"cips1ge0c004jo4pkvs7p9deg","_id":"cips1ge0d004ko4pkzvci56xw"},{"post_id":"cips1ge0f004mo4pkv5o2t7gh","tag_id":"cips1ge0c004jo4pkvs7p9deg","_id":"cips1ge0g004oo4pkz5yrbf74"},{"post_id":"cips1ge0h004po4pkr6jldipy","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge0i004so4pk92v87jjw"},{"post_id":"cips1ge0h004po4pkr6jldipy","tag_id":"cips1ge0i004ro4pklc5dc596","_id":"cips1ge0i004to4pkoq0dngn8"},{"post_id":"cips1ge0j004uo4pko0f4ru7v","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge0l004xo4pk17zj1pb6"},{"post_id":"cips1ge0j004uo4pko0f4ru7v","tag_id":"cips1ge0k004wo4pkn6anos6n","_id":"cips1ge0l004yo4pkva0j46jg"},{"post_id":"cips1ge0m004zo4pkf6mcig2s","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge0n0051o4pkdc1gf1ah"},{"post_id":"cips1ge0o0052o4pkau55lp3q","tag_id":"cips1ge0p0054o4pkxvm0bnl4","_id":"cips1ge0q0055o4pke73fglra"},{"post_id":"cips1ge0q0057o4pk2s2f3cax","tag_id":"cips1ge0s0059o4pkn7yauwko","_id":"cips1ge0s005ao4pk79g8jlit"},{"post_id":"cips1ge0t005co4pktos6xbmy","tag_id":"cips1ge0s0059o4pkn7yauwko","_id":"cips1ge0u005eo4pktmscaans"},{"post_id":"cips1ge0u005fo4pkq3n37p50","tag_id":"cips1ge0s0059o4pkn7yauwko","_id":"cips1ge0v005ho4pksxq5f11o"},{"post_id":"cips1ge0w005io4pk4a249nnc","tag_id":"cips1ge14005ko4pkfod19cft","_id":"cips1ge14005lo4pko1ecf5xn"},{"post_id":"cips1ge15005mo4pk19hclvbn","tag_id":"cips1ge17005oo4pkt1l3cvkl","_id":"cips1ge17005po4pk7r2mj99n"},{"post_id":"cips1ge18005qo4pksse2fahh","tag_id":"cips1gdxw000do4pkfmlbx282","_id":"cips1ge19005so4pkfqtmsfm8"},{"post_id":"cips1ge19005to4pko87n7ga7","tag_id":"cips1ge0i004ro4pklc5dc596","_id":"cips1ge1b005vo4pkif8j1911"},{"post_id":"cips1ge19005to4pko87n7ga7","tag_id":"cips1gdyi001no4pkbec9po18","_id":"cips1ge1b005wo4pkkvhzow2k"},{"post_id":"cips1ge1c005xo4pk7pm99njn","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge1d005zo4pkl365hjst"},{"post_id":"cips1ge1c005xo4pk7pm99njn","tag_id":"cips1ge0i004ro4pklc5dc596","_id":"cips1ge1e0060o4pkkdm44011"},{"post_id":"cips1ge1e0061o4pktpm0i3v1","tag_id":"cips1ge1f0063o4pkzqpjsd37","_id":"cips1ge1g0064o4pklzt6uynf"},{"post_id":"cips1ge1g0065o4pk2v3fezc4","tag_id":"cips1gdxw000do4pkfmlbx282","_id":"cips1ge1i0068o4pkkv8ccrla"},{"post_id":"cips1ge1g0065o4pk2v3fezc4","tag_id":"cips1ge1i0067o4pkpbstwm9z","_id":"cips1ge1i0069o4pkurhvf0i0"},{"post_id":"cips1ge1j006ao4pkfgqmgd38","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge1k006do4pk6k4kw1jg"},{"post_id":"cips1ge1j006ao4pkfgqmgd38","tag_id":"cips1gdxw000do4pkfmlbx282","_id":"cips1ge1k006eo4pk44mu0ld9"},{"post_id":"cips1ge1j006ao4pkfgqmgd38","tag_id":"cips1ge1j006co4pkntz00pl8","_id":"cips1ge1k006fo4pk5n833goo"},{"post_id":"cips1ge1k006go4pkndio1axa","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge1l006io4pkf0m8y0uf"},{"post_id":"cips1ge1m006jo4pkz07gasxl","tag_id":"cips1ge1n006lo4pkqm2cospo","_id":"cips1ge1o006mo4pkhkwk0169"},{"post_id":"cips1ge1o006no4pkd6lxiat9","tag_id":"cips1gdxw000do4pkfmlbx282","_id":"cips1ge1p006po4pkjl7fsl2f"},{"post_id":"cips1ge1q006qo4pkcxlujr7q","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge1r006to4pk6s0bs2uu"},{"post_id":"cips1ge1q006qo4pkcxlujr7q","tag_id":"cips1ge1r006so4pkuxdwg8e6","_id":"cips1ge1s006uo4pkvnwhg62k"},{"post_id":"cips1ge1s006vo4pk06xjewra","tag_id":"cips1gdys0023o4pkvnpqhm5o","_id":"cips1ge1t006xo4pksvcyqtd1"},{"post_id":"cips1ge1u006zo4pk7oz4fiud","tag_id":"cips1gdza002yo4pkoatkk8zl","_id":"cips1ge1v0072o4pk3akvo26e"},{"post_id":"cips1ge1u006zo4pk7oz4fiud","tag_id":"cips1ge1v0071o4pkd2uf9jw1","_id":"cips1ge1w0074o4pkverv97b8"},{"post_id":"cips1ge1w0075o4pk9a5jpdg3","tag_id":"cips1gdza002yo4pkoatkk8zl","_id":"cips1ge1y0077o4pk0ph4icr4"},{"post_id":"cips1ge1w0075o4pk9a5jpdg3","tag_id":"cips1ge0p0054o4pkxvm0bnl4","_id":"cips1ge1y0078o4pk6hem24c3"},{"post_id":"cips1ge1z0079o4pkzwcn4b6u","tag_id":"cips1ge20007bo4pkf4pq4uzm","_id":"cips1ge21007co4pkcaunzfeg"},{"post_id":"cips1ge21007do4pkf8f6sblo","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge22007fo4pkd55ul08o"},{"post_id":"cips1ge23007go4pkt5x1m878","tag_id":"cips1ge24007io4pknqiwakmp","_id":"cips1ge24007jo4pkc6kxlp4k"},{"post_id":"cips1ge23007go4pkt5x1m878","tag_id":"cips1gdys0023o4pkvnpqhm5o","_id":"cips1ge24007ko4pkwcoh4ce6"},{"post_id":"cips1ge25007lo4pkv45hfd9p","tag_id":"cips1gdys0023o4pkvnpqhm5o","_id":"cips1ge27007no4pk12dpqylh"},{"post_id":"cips1ge28007oo4pkz3hjn1sa","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge29007qo4pkcfje829a"},{"post_id":"cips1ge2a007ro4pkyzse1rpg","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge2b007to4pkajd1qgve"},{"post_id":"cips1ge2c007uo4pk9nor0kug","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge2d007wo4pk8gzsuh2n"},{"post_id":"cips1ge2e007xo4pkebyi0ayz","tag_id":"cips1ge2f007zo4pk1z3v7s08","_id":"cips1ge2f0080o4pkdr69ortk"},{"post_id":"cips1ge2g0081o4pk0crxwwuz","tag_id":"cips1ge040044o4pk99s5hnwn","_id":"cips1ge2i0084o4pk9x31iqmv"},{"post_id":"cips1ge2g0081o4pk0crxwwuz","tag_id":"cips1ge2h0083o4pkez8o3hip","_id":"cips1ge2i0085o4pkdqxngxs2"},{"post_id":"cips1ge2j0086o4pkb0ftdnha","tag_id":"cips1gdxw000do4pkfmlbx282","_id":"cips1ge2l0089o4pktyoepup2"},{"post_id":"cips1ge2j0086o4pkb0ftdnha","tag_id":"cips1ge2l0088o4pk789nvqvu","_id":"cips1ge2l008ao4pk0f70hiop"},{"post_id":"cips1ge2m008bo4pk024vkkel","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge2o008eo4pk5smo7aqw"},{"post_id":"cips1ge2m008bo4pk024vkkel","tag_id":"cips1ge2n008do4pkezlr0kpz","_id":"cips1ge2o008fo4pk8gl9e3w8"},{"post_id":"cips1ge2p008go4pkv8ywmo8w","tag_id":"cips1ge2r008io4pkheyh65hk","_id":"cips1ge2r008jo4pkfjrih9jb"},{"post_id":"cips1ge2r008ko4pkql600ppy","tag_id":"cips1ge2s008mo4pkj9gbdovm","_id":"cips1ge2t008no4pkv1qkxmoy"},{"post_id":"cips1ge2u008oo4pkdxiwh12e","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge2v008qo4pkittgoc0q"},{"post_id":"cips1ge2u008oo4pkdxiwh12e","tag_id":"cips1gdxw000do4pkfmlbx282","_id":"cips1ge2v008ro4pk8bcmm6so"},{"post_id":"cips1ge2u008oo4pkdxiwh12e","tag_id":"cips1ge1j006co4pkntz00pl8","_id":"cips1ge2v008so4pktmbyz0nj"},{"post_id":"cips1ge2w008to4pkbhfjub99","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge2x008vo4pk02xlz3xr"},{"post_id":"cips1ge2y008wo4pkrg8fd2ya","tag_id":"cips1gdxw000do4pkfmlbx282","_id":"cips1ge2z008yo4pk02b91o9q"},{"post_id":"cips1ge31008zo4pka1dlhcmp","tag_id":"cips1ge320091o4pk4rustg2q","_id":"cips1ge330094o4pk7yp1i3mw"},{"post_id":"cips1ge31008zo4pka1dlhcmp","tag_id":"cips1ge320092o4pkmlq6p33k","_id":"cips1ge330095o4pkenl2ojz9"},{"post_id":"cips1ge340096o4pk2jsb013w","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge360099o4pkxs6qo4zx"},{"post_id":"cips1ge340096o4pk2jsb013w","tag_id":"cips1ge360098o4pkmmjq51pi","_id":"cips1ge36009ao4pkog427xv5"},{"post_id":"cips1ge37009bo4pkzkml0qi0","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge38009eo4pkakvruwar"},{"post_id":"cips1ge37009bo4pkzkml0qi0","tag_id":"cips1ge38009do4pk6bgpgbkl","_id":"cips1ge38009fo4pk94kc0gl7"},{"post_id":"cips1ge39009go4pkm7jw7tgc","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge3a009jo4pkzduilrom"},{"post_id":"cips1ge39009go4pkm7jw7tgc","tag_id":"cips1ge39009io4pkoujy19p9","_id":"cips1ge3a009ko4pkua0aa774"},{"post_id":"cips1ge39009go4pkm7jw7tgc","tag_id":"cips1gdya0018o4pk31k08g97","_id":"cips1ge3a009lo4pkl1ptf61r"},{"post_id":"cips1ge3b009mo4pknv5sj1p0","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge3c009qo4pkxw1ufw6x"},{"post_id":"cips1ge3b009mo4pknv5sj1p0","tag_id":"cips1ge3c009oo4pkkgdh8d1k","_id":"cips1ge3d009ro4pkgpudq4hd"},{"post_id":"cips1ge3b009mo4pknv5sj1p0","tag_id":"cips1ge3c009po4pk8votl6ut","_id":"cips1ge3d009so4pk3ces3sxx"},{"post_id":"cips1ge3e009to4pkxfcp3zji","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge3f009vo4pkeh1cpuin"},{"post_id":"cips1ge3e009to4pkxfcp3zji","tag_id":"cips1gdzg0039o4pknb4nw902","_id":"cips1ge3f009wo4pkf0tf2hf7"},{"post_id":"cips1ge3e009to4pkxfcp3zji","tag_id":"cips1gdya0018o4pk31k08g97","_id":"cips1ge3f009xo4pkwwo646g6"},{"post_id":"cips1ge3g009yo4pk23zwaw65","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge3h00a0o4pkxqswmcyt"},{"post_id":"cips1ge3i00a1o4pkupvx7exj","tag_id":"cips1ge3j00a3o4pkezktsn4w","_id":"cips1ge3j00a4o4pk7ltqh31y"},{"post_id":"cips1ge3k00a5o4pkfu03sqar","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge3l00a7o4pk9873i6zw"},{"post_id":"cips1ge3k00a5o4pkfu03sqar","tag_id":"cips1ge38009do4pk6bgpgbkl","_id":"cips1ge3l00a8o4pk6pnhs48l"},{"post_id":"cips1ge3m00a9o4pk4xru8d2k","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge3p00aco4pkidcgjfp0"},{"post_id":"cips1ge3m00a9o4pk4xru8d2k","tag_id":"cips1ge030043o4pkngrhawrr","_id":"cips1ge3p00ado4pkakega1xy"},{"post_id":"cips1ge3m00a9o4pk4xru8d2k","tag_id":"cips1ge3o00abo4pk33qhemco","_id":"cips1ge3p00aeo4pk944fsu1c"},{"post_id":"cips1ge3q00afo4pk6jox1vz8","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge3r00aho4pkmw6j7ifl"},{"post_id":"cips1ge3q00afo4pk6jox1vz8","tag_id":"cips1ge030043o4pkngrhawrr","_id":"cips1ge3r00aio4pkdw0l380e"},{"post_id":"cips1ge3s00ajo4pkxpl4caal","tag_id":"cips1ge3t00alo4pkf04b5mxz","_id":"cips1ge3u00amo4pkcrp8dzxy"},{"post_id":"cips1ge3v00ano4pkvlli5i8a","tag_id":"cips1ge3w00apo4pkpuxr38vl","_id":"cips1ge3w00aqo4pk4scpnryy"},{"post_id":"cips1ge3x00aro4pk5mabccfu","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge4000auo4pk0uo0mi9p"},{"post_id":"cips1ge3x00aro4pk5mabccfu","tag_id":"cips1ge3z00ato4pkmtxepkpc","_id":"cips1ge4000avo4pkbzkyawip"},{"post_id":"cips1ge3x00aro4pk5mabccfu","tag_id":"cips1gdza002yo4pkoatkk8zl","_id":"cips1ge4000awo4pklcy3oxkg"},{"post_id":"cips1ge4100axo4pk4k8g114t","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge4300b0o4pk1k8fefpv"},{"post_id":"cips1ge4100axo4pk4k8g114t","tag_id":"cips1ge4300azo4pk8clsw8dh","_id":"cips1ge4300b1o4pkc1pyyc0k"},{"post_id":"cips1ge4100axo4pk4k8g114t","tag_id":"cips1gdza002yo4pkoatkk8zl","_id":"cips1ge4300b2o4pke1q8swp5"},{"post_id":"cips1ge4400b3o4pk32apjjan","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge4600b6o4pkw9twiyrq"},{"post_id":"cips1ge4400b3o4pk32apjjan","tag_id":"cips1ge4500b5o4pkb1x0oosy","_id":"cips1ge4600b7o4pkwf1r43db"},{"post_id":"cips1ge4600b8o4pketv3289c","tag_id":"cips1ge4700bao4pkyee1h6b8","_id":"cips1ge4800bdo4pkgztulvvl"},{"post_id":"cips1ge4600b8o4pketv3289c","tag_id":"cips1ge38009do4pk6bgpgbkl","_id":"cips1ge4900beo4pk0wjcqdzo"},{"post_id":"cips1ge4600b8o4pketv3289c","tag_id":"cips1ge4800bbo4pk1e5utpo3","_id":"cips1ge4900bfo4pkawgx5ih0"},{"post_id":"cips1ge4600b8o4pketv3289c","tag_id":"cips1ge4800bco4pk175d96hi","_id":"cips1ge4900bgo4pk5app9dn3"},{"post_id":"cips1ge4a00bho4pk3fmctkrw","tag_id":"cips1ge320091o4pk4rustg2q","_id":"cips1ge4b00bko4pkciwy6l6x"},{"post_id":"cips1ge4a00bho4pk3fmctkrw","tag_id":"cips1ge4b00bjo4pkrcbyyiz7","_id":"cips1ge4c00blo4pku49jdt9f"},{"post_id":"cips1ge4c00bmo4pk0rfeezig","tag_id":"cips1ge4d00boo4pk8y3qbpbn","_id":"cips1ge4d00bpo4pkewm9d044"},{"post_id":"cips1ge4e00bqo4pkdtm2ubt8","tag_id":"cips1ge4f00bso4pku65pn9ss","_id":"cips1ge4g00bto4pkinz9m9gg"},{"post_id":"cips1ge4h00buo4pkrml7uoxe","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge4i00bwo4pk19tde0nh"},{"post_id":"cips1ge4h00buo4pkrml7uoxe","tag_id":"cips1ge040044o4pk99s5hnwn","_id":"cips1ge4j00bxo4pkozj6b207"},{"post_id":"cips1ge4j00byo4pk6aojgoyl","tag_id":"cips1ge4l00c0o4pk5bk2xw65","_id":"cips1ge4l00c2o4pkd5x4ecdk"},{"post_id":"cips1ge4j00byo4pk6aojgoyl","tag_id":"cips1ge4l00c1o4pkyybovyti","_id":"cips1ge4u00c3o4pkxfn91jmq"},{"post_id":"cips1ge4v00c4o4pk5n4rq7dt","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge4x00c7o4pkqeun58nu"},{"post_id":"cips1ge4v00c4o4pk5n4rq7dt","tag_id":"cips1ge4x00c6o4pkbu972kn4","_id":"cips1ge4x00c8o4pkt3eha5m1"},{"post_id":"cips1ge4y00c9o4pkkdys08pv","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge4z00cco4pkop8i1ar2"},{"post_id":"cips1ge4y00c9o4pkkdys08pv","tag_id":"cips1ge4z00cbo4pkzqf8mfz6","_id":"cips1ge4z00cdo4pkk9jrb9pr"},{"post_id":"cips1ge5000ceo4pkfmj0rcp8","tag_id":"cips1ge5100cgo4pki75stlqt","_id":"cips1ge5200cho4pkosmhesby"},{"post_id":"cips1ge5300cio4pkred4chys","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge5500clo4pk5rj52mja"},{"post_id":"cips1ge5300cio4pkred4chys","tag_id":"cips1gdys0023o4pkvnpqhm5o","_id":"cips1ge5500cmo4pk3ji7oxqy"},{"post_id":"cips1ge5300cio4pkred4chys","tag_id":"cips1ge5400cko4pkfop00s73","_id":"cips1ge5500cno4pkgspvyme9"},{"post_id":"cips1ge5600coo4pkv1of9ocp","tag_id":"cips1gdza002yo4pkoatkk8zl","_id":"cips1ge5700cro4pk2jhjs3ry"},{"post_id":"cips1ge5600coo4pkv1of9ocp","tag_id":"cips1ge5700cqo4pkc4rncbve","_id":"cips1ge5700cso4pkrzstoadd"},{"post_id":"cips1ge5800cto4pkgsgwdotf","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge5900cvo4pkvdhtlzwg"},{"post_id":"cips1ge5900cwo4pkzeo3bg38","tag_id":"cips1ge5a00cyo4pk3h16a8jk","_id":"cips1ge5b00d3o4pkh22p2yr4"},{"post_id":"cips1ge5900cwo4pkzeo3bg38","tag_id":"cips1ge5a00czo4pk35o263xw","_id":"cips1ge5c00d4o4pk7ffxeyzg"},{"post_id":"cips1ge5900cwo4pkzeo3bg38","tag_id":"cips1ge5b00d0o4pkl734y2nq","_id":"cips1ge5c00d5o4pkcbsy9lyx"},{"post_id":"cips1ge5900cwo4pkzeo3bg38","tag_id":"cips1ge5b00d1o4pkbw2058ka","_id":"cips1ge5c00d6o4pkz0xk0my3"},{"post_id":"cips1ge5900cwo4pkzeo3bg38","tag_id":"cips1ge5b00d2o4pkbkt5nqem","_id":"cips1ge5c00d7o4pkeh99iexw"},{"post_id":"cips1ge5d00d8o4pktmv6de4i","tag_id":"cips1ge5e00dao4pkxt9qi6dy","_id":"cips1ge5e00dbo4pk4cms22dd"},{"post_id":"cips1ge5f00dco4pkgw747gpl","tag_id":"cips1ge320091o4pk4rustg2q","_id":"cips1ge5g00deo4pk3l67z6r4"},{"post_id":"cips1ge5h00dfo4pk4pna7oxf","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge5i00dho4pkeo7vjdrs"},{"post_id":"cips1ge5h00dfo4pk4pna7oxf","tag_id":"cips1ge38009do4pk6bgpgbkl","_id":"cips1ge5i00dio4pkaxurcvlq"},{"post_id":"cips1ge5j00djo4pkmkvaqnca","tag_id":"cips1ge5k00dlo4pkc2kpv9v6","_id":"cips1ge5k00dmo4pkzsu8ddyu"},{"post_id":"cips1ge5l00dno4pkeebqw3ry","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge5m00dpo4pk9wn1m8u1"},{"post_id":"cips1ge5n00dqo4pk66s3cndo","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge5o00dso4pksr0728sj"},{"post_id":"cips1ge5o00dto4pk2gpnwuan","tag_id":"cips1ge320091o4pk4rustg2q","_id":"cips1ge5q00dwo4pkvald4qt2"},{"post_id":"cips1ge5o00dto4pk2gpnwuan","tag_id":"cips1ge5q00dvo4pkxdse6kw3","_id":"cips1ge5q00dxo4pkeytu4ctn"},{"post_id":"cips1ge5r00dyo4pks82jhp72","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge5s00e0o4pkknsms5kb"},{"post_id":"cips1ge5t00e1o4pkocsf156g","tag_id":"cips1ge320091o4pk4rustg2q","_id":"cips1ge5u00e4o4pknsetdiak"},{"post_id":"cips1ge5t00e1o4pkocsf156g","tag_id":"cips1ge5u00e3o4pkjffzql2a","_id":"cips1ge5v00e5o4pka7b53uxf"},{"post_id":"cips1ge5v00e6o4pkrmvkkacj","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge5x00e9o4pkn6waw7xd"},{"post_id":"cips1ge5v00e6o4pkrmvkkacj","tag_id":"cips1ge5w00e8o4pkv16c6fez","_id":"cips1ge5x00eao4pk3r3yu6q0"},{"post_id":"cips1ge5v00e6o4pkrmvkkacj","tag_id":"cips1gdya0018o4pk31k08g97","_id":"cips1ge5x00ebo4pkh5eymjnv"},{"post_id":"cips1ge5y00eco4pkzo2t9zh1","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge5z00eeo4pkzvjc31pi"},{"post_id":"cips1ge5y00eco4pkzo2t9zh1","tag_id":"cips1ge38009do4pk6bgpgbkl","_id":"cips1ge5z00efo4pkcbsw6but"},{"post_id":"cips1ge6000ego4pkzakj8z00","tag_id":"cips1ge6100eio4pk3bpyq5c4","_id":"cips1ge6100ejo4pktjf8k6yq"},{"post_id":"cips1ge6200eko4pkrhw9cxgd","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge6300emo4pkl46agxc2"},{"post_id":"cips1ge6300eno4pk18ripsyq","tag_id":"cips1ge6400epo4pk287txio5","_id":"cips1ge6500eqo4pk1jtywpgq"},{"post_id":"cips1ge6500ero4pkowcd5mi5","tag_id":"cips1gdys0023o4pkvnpqhm5o","_id":"cips1ge6600eto4pkn98konk5"},{"post_id":"cips1ge6700euo4pkxkkpwfbu","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge6800ewo4pkyvys2k44"},{"post_id":"cips1ge6900exo4pkr8t8y281","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge6a00ezo4pk7blxka2g"},{"post_id":"cips1ge6900exo4pkr8t8y281","tag_id":"cips1gdzl003ho4pkrm2dbnkj","_id":"cips1ge6a00f0o4pksc8inv07"},{"post_id":"cips1ge6a00f1o4pkpcb73uzo","tag_id":"cips1gdxw000do4pkfmlbx282","_id":"cips1ge6b00f3o4pkvy49m09u"},{"post_id":"cips1ge6c00f4o4pk7qszr40e","tag_id":"cips1gdys0023o4pkvnpqhm5o","_id":"cips1ge6d00f6o4pktip5g3oy"},{"post_id":"cips1ge6d00f7o4pkp744oxfa","tag_id":"cips1gdys0023o4pkvnpqhm5o","_id":"cips1ge6e00f9o4pka0w6m0uj"},{"post_id":"cips1ge6d00f7o4pkp744oxfa","tag_id":"cips1ge5400cko4pkfop00s73","_id":"cips1ge6f00fao4pk0xmtv5ml"},{"post_id":"cips1ge6f00fbo4pk18rotpvz","tag_id":"cips1ge6g00fdo4pkwhdommb1","_id":"cips1ge6h00feo4pkp54s8axj"},{"post_id":"cips1ge6i00ffo4pkuf9133nu","tag_id":"cips1ge6g00fdo4pkwhdommb1","_id":"cips1ge6j00fho4pkhskxpsik"},{"post_id":"cips1ge6k00fio4pknm4u5nzr","tag_id":"cips1gdy70011o4pk348yopb0","_id":"cips1ge6m00flo4pknqoxe649"},{"post_id":"cips1ge6k00fio4pknm4u5nzr","tag_id":"cips1ge6l00fko4pkxollkhw8","_id":"cips1ge6m00fmo4pkspy89rv0"},{"post_id":"cips1ge6k00fio4pknm4u5nzr","tag_id":"cips1gdza002yo4pkoatkk8zl","_id":"cips1ge6m00fno4pk2z9haxlf"},{"post_id":"cips1ge6n00foo4pknlzt48z6","tag_id":"cips1ge6o00fqo4pkz3zhv074","_id":"cips1ge6p00fro4pkmzx18pnk"},{"post_id":"cips1ge6q00fso4pkijfq8aob","tag_id":"cips1ge6r00fuo4pk2d5lvr9t","_id":"cips1ge6r00fvo4pk0syg0g5w"},{"post_id":"cips1ge6s00fwo4pkrxkidiam","tag_id":"cips1ge6t00fyo4pk3s9stedw","_id":"cips1ge6u00fzo4pk8h5zjeqy"},{"post_id":"cips1ge6u00g0o4pk0g0bptff","tag_id":"cips1ge6t00fyo4pk3s9stedw","_id":"cips1ge6v00g2o4pkp8g4di3l"},{"post_id":"cips1ge6w00g3o4pktgok8192","tag_id":"cips1ge6x00g5o4pkomcv30fh","_id":"cips1ge6x00g6o4pknd4hj3g6"},{"post_id":"cips1ge6z00g9o4pk1ly6b4z9","tag_id":"cips1gdys0023o4pkvnpqhm5o","_id":"cips1ge7200gco4pkcsgjvq53"},{"post_id":"cips1ge6z00g9o4pk1ly6b4z9","tag_id":"cips1ge7100gbo4pkf0ugam2a","_id":"cips1ge7200gdo4pkf4u1yncj"}],"Tag":[{"name":"zxing","_id":"cips1gdxs0008o4pkoo1rlme8"},{"name":"Life","_id":"cips1gdxw000do4pkfmlbx282"},{"name":"XMPP","_id":"cips1gdxz000io4pk4tdatgul"},{"name":"Smack","_id":"cips1gdxz000jo4pkcvlorodr"},{"name":"openfire","_id":"cips1gdxz000lo4pkm5iw9fgn"},{"name":"Android","_id":"cips1gdy70011o4pk348yopb0"},{"name":"WeiYan","_id":"cips1gdya0018o4pk31k08g97"},{"name":"weilian","_id":"cips1gdyd001eo4pkbu9o9kkp"},{"name":"uCrop","_id":"cips1gdyf001io4pk8igb9xg0"},{"name":"Toolbar","_id":"cips1gdyi001no4pkbec9po18"},{"name":"shengmingzhiyuan","_id":"cips1gdyk001ro4pkgxz45qbz"},{"name":"Shape","_id":"cips1gdyn001vo4pka5t4c08k"},{"name":"Service","_id":"cips1gdyq001zo4pkc2iz8b3s"},{"name":"Android Studio","_id":"cips1gdys0023o4pkvnpqhm5o"},{"name":"RxJava","_id":"cips1gdyw002bo4pk1mps3b2z"},{"name":"RxBus","_id":"cips1gdyz002go4pkm8a9g1ps"},{"name":"Retrofit","_id":"cips1gdz2002mo4pkgvn7hmkr"},{"name":"qinziyouwan","_id":"cips1gdz9002uo4pkb8or0kwo"},{"name":"github","_id":"cips1gdza002yo4pkoatkk8zl"},{"name":"Processes","_id":"cips1gdzd0033o4pkft2cuaqr"},{"name":"Threads","_id":"cips1gdze0034o4pkf0ifp8p5"},{"name":"SQLite","_id":"cips1gdzg0039o4pknb4nw902"},{"name":"MVP","_id":"cips1gdzl003ho4pkrm2dbnkj"},{"name":"Video","_id":"cips1ge00003yo4pkhix7hbv6"},{"name":"RecyclerView","_id":"cips1ge030043o4pkngrhawrr"},{"name":"ListView","_id":"cips1ge040044o4pk99s5hnwn"},{"name":"lambda","_id":"cips1ge09004do4pkfr5whpkp"},{"name":"retrolambda","_id":"cips1ge09004eo4pkuxh4tc72"},{"name":"jcenter","_id":"cips1ge0c004jo4pkvs7p9deg"},{"name":"Fragment","_id":"cips1ge0i004ro4pklc5dc596"},{"name":"jarsigner","_id":"cips1ge0k004wo4pkn6anos6n"},{"name":"hexo","_id":"cips1ge0p0054o4pkxvm0bnl4"},{"name":"Gradle","_id":"cips1ge0s0059o4pkn7yauwko"},{"name":"gradle","_id":"cips1ge14005ko4pkfod19cft"},{"name":"goufangche","_id":"cips1ge17005oo4pkt1l3cvkl"},{"name":"emulator","_id":"cips1ge1f0063o4pkzqpjsd37"},{"name":"git","_id":"cips1ge1i0067o4pkpbstwm9z"},{"name":"App","_id":"cips1ge1j006co4pkntz00pl8"},{"name":"contact","_id":"cips1ge1n006lo4pkqm2cospo"},{"name":"Permission","_id":"cips1ge1r006so4pkuxdwg8e6"},{"name":"jekyll","_id":"cips1ge1v0071o4pkd2uf9jw1"},{"name":"boentang","_id":"cips1ge20007bo4pkf4pq4uzm"},{"name":"SDK","_id":"cips1ge24007io4pknqiwakmp"},{"name":"async-http","_id":"cips1ge2f007zo4pk1z3v7s08"},{"name":"addHeaderView","_id":"cips1ge2h0083o4pkez8o3hip"},{"name":"WeWin","_id":"cips1ge2l0088o4pk789nvqvu"},{"name":"Volley","_id":"cips1ge2n008do4pkezlr0kpz"},{"name":"ViewDragHelper","_id":"cips1ge2r008io4pkheyh65hk"},{"name":"Animation","_id":"cips1ge2s008mo4pkj9gbdovm"},{"name":"DesignSupportLibrary","_id":"cips1ge320091o4pk4rustg2q"},{"name":"TabLayout","_id":"cips1ge320092o4pkmlq6p33k"},{"name":"Sqlite","_id":"cips1ge360098o4pkmmjq51pi"},{"name":"Canvas","_id":"cips1ge38009do4pk6bgpgbkl"},{"name":"PopupWindow","_id":"cips1ge39009io4pkoujy19p9"},{"name":"Actionbar","_id":"cips1ge3c009oo4pkkgdh8d1k"},{"name":"SearchView","_id":"cips1ge3c009po4pk8votl6ut"},{"name":"RuntimePermission","_id":"cips1ge3j00a3o4pkezktsn4w"},{"name":"CardView","_id":"cips1ge3o00abo4pk33qhemco"},{"name":"SharedPreferences","_id":"cips1ge3t00alo4pkf04b5mxz"},{"name":"PioneeringRoad","_id":"cips1ge3w00apo4pkpuxr38vl"},{"name":"Picasso","_id":"cips1ge3z00ato4pkmtxepkpc"},{"name":"PhotoView","_id":"cips1ge4300azo4pk8clsw8dh"},{"name":"Palette","_id":"cips1ge4500b5o4pkb1x0oosy"},{"name":"Paint","_id":"cips1ge4700bao4pkyee1h6b8"},{"name":"PorterDuffXfermode","_id":"cips1ge4800bbo4pk1e5utpo3"},{"name":"Shader","_id":"cips1ge4800bco4pk175d96hi"},{"name":"NavigationView","_id":"cips1ge4b00bjo4pkrcbyyiz7"},{"name":"code","_id":"cips1ge4d00boo4pk8y3qbpbn"},{"name":"MotionEvent","_id":"cips1ge4f00bso4pku65pn9ss"},{"name":"LinearGradient","_id":"cips1ge4l00c0o4pk5bk2xw65"},{"name":"TextView","_id":"cips1ge4l00c1o4pkyybovyti"},{"name":"LayoutParams","_id":"cips1ge4x00c6o4pkbu972kn4"},{"name":"LayoutInflate","_id":"cips1ge4z00cbo4pkzqf8mfz6"},{"name":"Intent","_id":"cips1ge5100cgo4pki75stlqt"},{"name":"Genymotion","_id":"cips1ge5400cko4pkfop00s73"},{"name":"Font-Awesome","_id":"cips1ge5700cqo4pkc4rncbve"},{"name":"Drawable","_id":"cips1ge5a00cyo4pk3h16a8jk"},{"name":"Bitmap","_id":"cips1ge5a00czo4pk35o263xw"},{"name":"String","_id":"cips1ge5b00d0o4pkl734y2nq"},{"name":"InputStream","_id":"cips1ge5b00d1o4pkbw2058ka"},{"name":"byte","_id":"cips1ge5b00d2o4pkbkt5nqem"},{"name":"DragView","_id":"cips1ge5e00dao4pkxt9qi6dy"},{"name":"CustomView","_id":"cips1ge5k00dlo4pkc2kpv9v6"},{"name":"CoordinatorLayout","_id":"cips1ge5q00dvo4pkxdse6kw3"},{"name":"CollapsingToolbarLayout","_id":"cips1ge5u00e3o4pkjffzql2a"},{"name":"Theme","_id":"cips1ge5w00e8o4pkv16c6fez"},{"name":"BroadcastReceiver","_id":"cips1ge6100eio4pk3bpyq5c4"},{"name":"Animator","_id":"cips1ge6400epo4pk287txio5"},{"name":"Camera，Album","_id":"cips1ge6g00fdo4pkwhdommb1"},{"name":"Iconics","_id":"cips1ge6l00fko4pkxollkhw8"},{"name":"AD","_id":"cips1ge6o00fqo4pkz3zhv074"},{"name":"Activity","_id":"cips1ge6r00fuo4pk2d5lvr9t"},{"name":"key word","_id":"cips1ge6t00fyo4pk3s9stedw"},{"name":"Toast","_id":"cips1ge6x00g5o4pkomcv30fh"},{"name":"红杏","_id":"cips1ge7100gbo4pkf0ugam2a"}]}}